!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(t,r,i){for(var a,s,u=0,l=[];u<t.length;u++)s=t[u],o[s]&&l.push(o[s][0]),o[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);for(n&&n(t,r,i);l.length;)l.shift()()};var r={},o={40:0};t.e=function(e){function n(){s.onerror=s.onload=null,clearTimeout(u);var t=o[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),o[e]=void 0)}var r=o[e];if(0===r)return new Promise(function(e){e()});if(r)return r[2];var i=new Promise(function(t,n){r=o[e]=[t,n]});r[2]=i;var a=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,t.nc&&s.setAttribute("nonce",t.nc),s.src=t.p+"pages/"+({0:"doc",1:"export-excel",2:"export-excel-new",3:"spreadsheet",4:"list",5:"sheet_test",34:"pad",35:"import_new_sheet"}[e]||e)+".chunk-4c2d945448b187417ab0.js";var u=setTimeout(n,12e4);return s.onerror=s.onload=n,a.appendChild(s),i},t.m=e,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="https://assets-cdn.shimo.im/assets/scripts/",t.oe=function(e){throw console.error(e),e},t(t.s=1226)}([function(e,t){e.exports=React},function(e,t){e.exports=_},function(e,t){e.exports=jQuery},function(e,t,n){var r=n(55)("wks"),o=n(37),i=n(6).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){function n(e,t){if(e.isAsync)!function(e){setTimeout(function(){e.fun.apply(e.scope,t)},0)}(e);else try{e.fun.apply(e.scope,t)}catch(e){console.error(e.stack)}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window._SHIMO_BRAODCAST_=window._SHIMO_BRAODCAST_||{};var o=window._SHIMO_BRAODCAST_.attachFunctionList=window._SHIMO_BRAODCAST_.attachFunctionList||{},i=window._SHIMO_BRAODCAST_.notifyCache=window._SHIMO_BRAODCAST_.notifyCache||{},a=function(e,t,n){if("string"==typeof e)if("function"==typeof t){for(var i=(o[e]||[]).length;i--;)if(o[e][i].fun===t){if(!0!==n)return o[e][i];o[e].splice(i,1)}}else if("object"===(void 0===t?"undefined":r(t))&&n)for(var a=(o[e]||[]).length;a--;)o[e][a].scope===t&&o[e].splice(a,1);else{var s=!!t;if(!0!==s)return o[e];delete o[e]}return null},s=function(e,t,r){var s=r||{};if("string"==typeof e&&"function"==typeof t){a(e)||(o[e]=[]);var u={fun:t,scope:s.scope,isAsync:s.isAsync};a(e).push(u);var l=i[e];delete i[e],Array.isArray(l)&&!0===s.invoke&&setTimeout(function(){n(u,l)})}},u=function(e,t){if("string"==typeof e){var n=void 0===t?"undefined":r(t);"function"===n||"object"===n?a(e,t,!0):a(e,!0)}},l=function(e,t,n){u(e),s(e,t,n)},c=function(e){var t=a(e)||[];if(0!==t.length){var r=Array.prototype.slice.call(arguments,1);i[e]=r;for(var o=0;o<t.length;o++)n(t[o],r)}},f=function(e){var t=e,n=Object.keys(e);return n.forEach(function(e){return s(e,t[e])}),{detach:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?u(e,t[e]):n.forEach(function(e){return u(e,t[e])})}}},d=function(){o=window._SHIMO_BRAODCAST_={}};t.default={destory:d,on:s,off:u,attach:s,detach:u,notify:c,attachOne:l,BCBundle:f},e.exports=t.default},function(e,t){e.exports=ReactDOM},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function i(e,t){if(t){var n=[];for(var r in t)n.push(r+"="+t[r]);n.length>0&&(e+="?"+n.join("&"))}var i=o();return i.open("GET",e,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),new Promise(function(e,t){i.onreadystatechange=function(){4===i.readyState&&(200===i.status?e(JSON.parse(i.responseText)):t(i.responseText))}})}function a(e,t){var n=o();n.open("POST",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),window.cow._csrf&&n.setRequestHeader("X-CSRF-Token",window.cow._csrf);var r="",i=null,a=t&&t.timeout||void 0;return Object.keys(t).forEach(function(e){void 0!==t[e]&&"timeout"!==e&&(r+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&")}),n.send(r),new Promise(function(e,t){n.onreadystatechange=function(){if(4===n.readyState)if(i&&clearTimeout(i),200===n.status){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){r=n.responseText}e(r)}else t(n.responseText)},a&&(i=setTimeout(function(){t({timeout:a})},a))})}function s(e,t){var n=o();n.open("PUT",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),window.cow._csrf&&n.setRequestHeader("X-CSRF-Token",window.cow._csrf);var r="";return t&&Object.keys(t).forEach(function(e){r+=e+"="+t[e]+"&"}),n.send(r),new Promise(function(e,t){n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){r=n.responseText}e(r)}else t(n.responseText)}})}function u(e,t){var n=o();n.open("PATCH",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),window.cow._csrf&&n.setRequestHeader("X-CSRF-Token",window.cow._csrf);var r="";return t&&Object.keys(t).forEach(function(e){r+=e+"="+t[e]+"&"}),n.send(r),new Promise(function(e,t){n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){r=n.responseText}e(r)}else t(n.responseText)}})}function l(e){var t=o();return t.open("DELETE",e),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),new Promise(function(e,n){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var r=JSON.parse(t.responseText);0===r.code?e(r):n(new Error(r.message))}else n(new Error(t.responseText))}})}function c(e,t){return d.default.post(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var f=n(110),d=r(f);t.default={ajaxGet:i,ajaxPost:a,ajaxPut:s,ajaxPatch:u,ajaxDelete:l,ajaxUpload:c},e.exports=t.default},function(e,t,n){(function(e,r){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){z.alert(e)}function s(){z.hide()}function u(e){z.alert(e)}function l(e,t,n){t=t||"",n=n||512;for(var r=atob(e),o=[],i=0;i<r.length;i+=n){for(var a=r.slice(i,i+n),s=new Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);var l=new Uint8Array(s);o.push(l)}return new Blob(o,{type:t})}function c(t){return t.online=U.default.isOnline(t.user_id),t.formattedTime=O.format(t.updated_at),t.sortTime=new Date(t.updated_at).getTime(),e.isString(t.user_id)&&-1!==t.user_id.indexOf(",")?t.name=V.default.getUserNames(t.user_id):t.name=V.default.getUserName(t.user_id),t}function f(t,n){var r=[];if(!e.isObject(t))return r;if(!e.isObject(n))return e.keys(t);for(var o in t)e.isEqual(t[o],n[o])||r.push(o);return r}function d(e){if(r.len>0)r.back();else{e=e||cow.currentFile;var t="/desktop";window.cow.authorized&&e.parent&&e.parent.guid&&(t="/folder/"+e.parent.guid),r(t)}}function p(e,t,n){void 0!==window.ga&&window.ga("send","event",e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.DateTime=void 0,t.alert=a,t.hide=s,t.tip=u,t.base64toBlob=l,t.formattedSidebarInfo=c,t.getDiffFields=f,t.goBack=d,t.track=p;var h=n(54);Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}})});var m=n(34);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})});var v=n(9);Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})});var y=n(48);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})});var g=n(13);Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})});var b=n(87);Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}})});var w=n(173);Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}})});var _=n(90);Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}})});var k=n(156);Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}})});var E=n(67);Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}})});var T=n(54),C=i(T),S=n(200),O=o(S),x=n(90),P=o(x),j=o(m),N=o(v),M=o(y),A=o(g),I=i(E),D=i(b),L=i(w),R=n(94),U=i(R),F=n(253),B=i(F);n(257);var W=n(23),V=i(W),q=i(k),H=n(258),$=i(H),Y=n(176),K=i(Y);n(275),(0,$.default)();var z=new B.default,G=t.DateTime=O;t.default=e.assign({alert:a,tip:u,hide:s,base64toBlob:l,formattedSidebarInfo:c,getDiffFields:f,goBack:d,track:p},{DateTime:G},j,C.default,N,M,A,D.default,L.default,P,q.default,I.default,{prepareUploadInfo:K.default.prepareUploadInfo})}).call(t,n(1),n(27))},function(e,t,n){function r(e){return"doc"===e||"newdoc"===e}function o(e){return"spreadsheet"===e||"sheet"===e}function i(e){return k.FILE_ZH_TYPE_MAP[e]}function a(e){var t={teamId:e.teamId},n=e.permissions;return n.readable&&(t.permission="readonly"),n.commentable&&(t.permission="commentable"),n.editable&&(t.permission="editable"),t}function s(){return window.cow.currentFile.shareMode}function u(e){window.cow.currentFile.shareMode=e}function l(){return!1!==window.cow.syncStatus}function c(e){window.cow.syncStatus=e}function f(){return!!window.cow.currentFile.passwordProtected}function d(e,t){window.cow.currentFile.passwordProtected=e,window.cow.currentFile.password=t}function p(){return window.cow.currentUser.id}function h(){return window.cow.iOS||window.cow.client||window.cow.rn}function m(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).cow.rn}function v(){return window.cow.rn&&window.cow.rnToken}function y(){return window.cow.iOS}function g(){return window.cow.client}function b(e){var t=(e||window.cow.currentUser).accountType;return t&&t.indexOf("enterprise")>=0}function w(){return!!window.Worker}function _(e,t){return"/qrcode?size="+e*window.devicePixelRatio+"&margin=0&url="+t}Object.defineProperty(t,"__esModule",{value:!0}),t.isDoc=r,t.isSheet=o,t.getFileTypeName=i,t.getPermissionsForCow=a,t.getShareMode=s,t.setShareMode=u,t.getSyncStatus=l,t.setSyncStatus=c,t.getPasswordProtected=f,t.setPasswordProtected=d,t.getUserId=p,t.isClient=h,t.isRNClient=m,t.isRNClientWithToken=v,t.isClientWithoutRN=y,t.isClientLoadFromLocal=g,t.isEnterprise=b,t.isWorkerSupported=w,t.getQrImageUrl=_;var k=n(34)},function(e,t,n){"use strict";function r(e){return"[object Array]"===T.call(e)}function o(e){return"[object ArrayBuffer]"===T.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function l(e){return void 0===e}function c(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===T.call(e)}function d(e){return"[object File]"===T.call(e)}function p(e){return"[object Blob]"===T.call(e)}function h(e){return"[object Function]"===T.call(e)}function m(e){return c(e)&&h(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)b(arguments[n],e);return t}function _(e,t,n){return b(t,function(t,r){e[r]=n&&"function"==typeof t?k(t,n):t}),e}var k=n(95),E=n(182),T=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:o,isBuffer:E,isFormData:i,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:f,isFile:d,isBlob:p,isFunction:h,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:g,forEach:b,merge:w,extend:_,trim:y}},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){function n(){return window.devicePixelRatio>=2}function r(){return/dingtalk/i.test(b)}function o(){return!!b.match(/mobile.*dingtalk/i)}function i(){return/dingTalk\([^\\)]+\)/i.test(window.navigator.userAgent)}function a(){return!!/micromessenger.*?windowswechat/.test(b)}function s(){return!!/micromessenger/.test(b)&&!a()}function u(){return!a()&&!!b.match(/(iphone|ipod|ipad|android|windows phone|micromessenger)/)}function l(){return!!document.getElementById("dingtalk-operation-wrap")}function c(){return!!/(ipad|iphone|ipod)/g.test(b)}function f(){return!!/(android)/g.test(b)}function d(){return!!/shimo-android-app/g.test(b)}function p(){return!!window.ActiveXObject}function h(){return!!navigator.userAgent.match(/firefox/i)}function m(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")}function v(){return/Mac|iPod|iPhone|iPad/.test(navigator.platform)}function y(){return!(window.cow.iOS||!c())}function g(){var e=!1;return c()&&screen.height>568&&(e=!0),e}Object.defineProperty(t,"__esModule",{value:!0}),t.isRetina=n,t.isDingTalk=r,t.isDingtalk=o,t.isDingtalkPc=i,t.isWechatPc=a,t.isWechat=s,t.isMobile=u,t.isDingtalkPcSidebar=l,t.isIOS=c,t.isAndroid=f,t.isAndroidApp=d,t.isIE=p,t.isFireFox=h,t.isSafari=m,t.isMac=v,t.isWebIOS=y,t.isIphone6=g;var b=window.navigator.userAgent.toLowerCase()},function(e,t,n){e.exports=n(352)()},function(e,t,n){var r=n(29),o=n(57);e.exports=n(19)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){(function(r){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e;e=this,e.connected=!1,e.reconnectFlag=!1,e.isReconnectFailed=!1,this.eventPool={},this.bind("connect",function(){e.isReconnectFailed=!1,u.default.log("connect")}),this.bind("reconnect",function(){e.isReconnectFailed=!1,e.reconnectFlag=!0,u.default.log("reconnect")}),this.bind("reconnect_error",function(e){window.ga&&ga("send","event","socket","reconnect-error",e.toString()),u.default.log("reconnect_error"),u.default.error(e)}),this.bind("reconnect_failed",function(){e.isReconnectFailed=!0,window.ga&&ga("send","event","socket","reconnect-failed"),u.default.log("reconnect_failed")}),this.bind("reconnecting",function(e){return f.default.notify("socket:reconnecting"),u.default.log("reconnecting",e)}),this.bind("message",function(t){if(t.accessStatus)if("deny"===t.accessStatus)if(g)f.default.notify("denyAccess");else{var n=null;t.message&&t.code&&(n=""+t.message),(0,y.default)({type:"push",errDetail:{name:"message_deny",message:"message_deny"},confirm:{title:"提示",description:n}})}else"need_login"===t.accessStatus&&(g?f.default.notify("denyAccess"):location.href="/login");"CONNECTED"!==t.type||e.reconnectFlag?"CONNECTED"===t.type&&e.reconnectFlag?(u.default.log("RECONNECTED"),e.connected=!0,f.default.notify("socket:reconnected"),e.hideNetworkDisconnected(),e.reconnectFlag=!1):"LOGOUT"===t.type?location.href="/":(f.default.notify("status:save",t),f.default.notify("socket:message",t)):(u.default.log("CONNECTED"),e.connected=!0,f.default.notify("socket:connected"))}),this.bind("disconnect",function(t){window.ga&&ga("send","event","socket","disconnect",t),u.default.log("disconnect:"+t),e.connected=!1,f.default.notify("socket:disconnected",t)}),this.bind("ping",function(){e.socket.emit("pong",{beat:1})}),this.bind("Comment",function(e){f.default.notify("socket:comment",e)}),this.bind("Invite",function(e){f.default.notify("socket:invite",e)}),this.bind("Action",function(e){var t,n,o,i,a,s;if("relogin"===e.name&&(0,l.ajaxGet)("/relogin"),"poke"===e.name&&[0,-1].indexOf(null!=(a=cow.currentFile)?a.type:void 0)>-1)for(t=r("div.header-avatar"),o=0,i=t.length;o<i;o++)if(n=t[o],e.from===+n.getAttribute("data-user-id")){s=document.createElement("span"),s.innerText="😎",s.className="tooltip header-avatar-tooltip s-tooltip",s.style.display="block",n.appendChild(s),setTimeout(function(){r(s).remove()},1e3);break}}),this.bind("Permission",function(e){var t=e.data,n=cow.currentFile&&cow.currentFile.guid;if(g){if("deny"===e.accessStatus)return void f.default.notify("denyAccess");if(t.guid!==n)return}if("destroy"===e.db_event&&t.guid===n){if(history.length>0)return history.back();t=t||cow.currentFile;var r="/desktop";window.cow.authorized&&t.parent&&t.parent.guid&&(r="/folder/"+t.parent.guid),window.location.url=r}}),this.bind("File",function(e){f.default.notify("push:File",e)}),r(document).on("visibilityChange",function(t,n){!window.io||n||e.connected||!e.socket||e.socket.io.reconnecting||e.socket.io.reconnect()})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(54),u=i(s),l=n(7),c=n(4),f=i(c),d=n(250),p=i(d),h=n(9),m=o(h),v=n(217),y=i(v),g=m.isClient();a.prototype.init=function(){if(!cow||!cow.readonly||/^\/spreadsheet\/*/.test(window.location.pathname)){var e,t,n,r;r=this,window.socket=r.socket=(0,p.default)(),r.appendDisconnectDomToBody(),n=this.eventPool;for(t in n)e=n[t],e.forEach(function(e){r.socket.on(t,function(){e.apply(this,arguments)})})}},a.prototype.getConnectSocket=function(){var e;return e=this,new Promise(function(t,n){e.connected?t(e.socket):(f.default.attach("socket:connected",function(){t(e.socket)}),f.default.attach("socket:reconnected",function(){t(e.socket)}))})},a.prototype.bind=function(e,t,n){n&&(n=t.bind(n)),(this.eventPool[e]=this.eventPool[e]||[]).push(t),this.socket&&this.socket.on(e,t)},a.prototype.unbind=function(e,t){this.socket&&t&&this.socket.off(e,t)},a.prototype.emit=function(e,t){this.socket.emit(e,t)},a.prototype.isMobile=function(){var e;return e=window.navigator.userAgent.toLowerCase(),!!e.match(/(iphone|ipad|ipod|android|windows phone|micromessenger)/)&&!e.match(/micromessenger.*?windowswechat/)},a.prototype.appendDisconnectDomToBody=function(){var e,t,n;t=this.isMobile(),n=t?"m-":"",!r("."+n+"disconnect").length>0&&(e='<div class="disconnect-mask"></div><a href="javascript:void(0)" class="'+n+'disconnect"><span class="disconnect-info">正在尝试重连，重连后会自动同步离线内容</span></a>',r("body").append(e)),this.$disconnect=r("."+n+"disconnect"),this.$disconnectMask=r("."+n+"disconnect-mask"),this.$disconnectInfo=r(".disconnect-info")},a.prototype.showNetworkDisconnected=function(){var e;g||!0!==this.showDisconnect&&(this.showDisconnect=!0,this.isMobile()?(this.$disconnectMask.addClass("active"),this.$disconnect.addClass("active"),this.showTime=+new Date):(m.isSheet(window.cow.pageType)&&this.$disconnectMask.show(),this.$disconnect.show()),e=this,setTimeout(function(){m.isSheet(window.cow.pageType)||e.hideNetworkDisconnected()},2e3))},a.prototype.hideNetworkDisconnected=function(){g||!this.showDisconnect||this.saveError||(this.showDisconnect=!1,this.isMobile()?(this.$disconnectMask.removeClass("active"),this.$disconnect.removeClass("active")):(this.$disconnectMask.hide(),this.$disconnect.hide()))},a.prototype.on=a.prototype.bind,t.default=new a,e.exports=t.default}).call(t,n(2))},function(e,t,n){var r=n(6),o=n(15),i=n(20),a=n(37)("src"),s="toString",u=Function[s],l=(""+u).split(s);n(21).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,a)||o(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||u.call(this)})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(56)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports={}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(4),s=r(a),u=n(7),l={contacts:{},keywords:{},keywordRule:/^[\w-@.\u4E00-\u9FFF]+$/,loaded:!1,load:function(e){var t=this,n=void 0;if(!window.cow.readonly){this.loaded=!1;var r=function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n=e?"/api/"+e+"/contacts":"/api/share/recent_contact",(0,u.ajaxGet)(n).then(function(e){if(0===e.code){for(var n in e.data){var o=e.data[n];t.push(o)}r&&(t.loaded=!0,s.default.notify("contact:loaded"))}return e})};if(window.electronSdk){var o=window.electronSdk.getContentStorage();if(o.cached){var i=o.content.contact;for(var a in i){var l=i[a];this.push(l)}return this.loaded=!0,s.default.notify("contact:loaded")}r(!o.cached).then(function(e){0===e.code&&o.update(Object.assign({},window.electronSdk.getContentStorage.content,{contact:e.data}))})}else r()}},fetch:function(){var e=this;return new Promise(function(t,n){return e.loaded?t(e.contacts):s.default.attach("contact:loaded",function(){return t(e.contacts)})})},get:function(e){var t=window.cow.defaultAnonymousUser;return/^[0-9A-Za-z]{16}$/.test(e)?t:(e=+e,i.default.includes([0,NaN],e)?{id:0,avatar:"",email:"",name:"路人"}:cow.currentUser&&e===cow.currentUser.id?(null==cow.currentUser.online&&(cow.currentUser.online=!0),cow.currentUser):this.contacts[e]?this.contacts[e]:window.cow.shareObj&&window.cow.shareObj[e]?window.cow.shareObj[e]:e<0?t:{id:e,avatar:t.avatar,email:"",name:"路人"})},set:function(e){if(e&&!i.default.includes([0,NaN],+e.id))return this.contacts[e.id]=e,this._setKeyword(e),this.contacts[e.id]},exists:function(e){return!!this.contacts[+e]||+e===window.cow.currentUser.id},count:function(){return Object.keys(this.contacts).length},each:function(e){if("function"==typeof e){e.call(this,window.cow.currentUser);for(var t in this.contacts){var n=this.contacts[t];n.id!==window.cow.currentUser.id&&e.call(this,n)}}},getUserName:function(e){return this.get(e).name},getUserNames:function(e){var t=this;return i.default.without(e.split(","),"0").map(function(e){return t.getUserName(e)}).join("、")},_setKeyword:function(e){if(e.name_pinyin&&!(e.id<0)){var t=e.name_pinyin.split("|");this.keywords[e.id]={name:e.name,firstLetters:t[0],fullPinyin:t[1],fullPinyinS:t[1].replace(/'/g,""),emailPrefix:(null!=e.email?e.email.split("@")[0]:void 0)||"",emailFull:e.email||""}}},search:function(e,t){if(!e||!this.keywordRule.test(e))return[];var n=this;e=e.toLowerCase();var r=[],o=function(t){if(t.name_pinyin||(t=n.contacts[t.id]),t.name_pinyin&&!(t.id<0)){n.keywords[t.id]||n._setKeyword(t);var o=n.keywords[t.id],a=o.name.toLowerCase().indexOf(e)+1,s=o.firstLetters.toLowerCase().indexOf(e)+1,u=o.fullPinyin.toLowerCase().indexOf("'"+e)+1,l=o.emailPrefix.toLowerCase().indexOf(e)+1,c=o.emailFull.toLowerCase().indexOf(e)+1,f=o.fullPinyinS.toLowerCase().indexOf(e)+1,d=i.default.min([a,20*s,20*u,20*l,1e4*c,1e3*f].filter(function(e){return e>0}));return void 0!==d&&t.status>-1?r.push({weight:d,user:t}):void 0}};return t?i.default.each(t,o):this.each(o),r.sort(function(e,t){return e.weight-t.weight}).map(function(e){return e.user})}};l.push=l.set,t.default=window.cow.Contact=l,e.exports=t.default},function(e,t,n){(function(e){function r(t){var n=t.title,r=void 0===n?"":n,o=t.type,s=void 0===o?"success":o,u=t.duration,l=void 0===u?3e3:u,c=t.autoHide,f=void 0===c||c,d=t.customCls,p=void 0===d?"":d;s="s-"+s;var h=(0,i.isMobile)()?"pt-mobile":"",m=a+" "+s+" "+p+" "+h,v=e("."+a);v&&v.length?v.removeClass().addClass(m):(v=e('<div class="'+m+'"><p class="sm-alert-content"></p></div>'),v.appendTo(e("body"))),v.find("p").html(r);var y=v.data("timerid");y&&clearTimeout(y),v.show(),f&&(y=setTimeout(function(){return v.hide()},l),v.data("timerid",y))}function o(){var t=e("."+a);t&&t.length>0&&t.hide()}Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=r,t.hideAlert=o;var i=n(13);n(303);var a="sm-alert-container"}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e||(e="无标题");var n={name:e},r=window.cow.currentFile.guid;(0,A.ajaxPost)(I.UPDATE_FILE.replace("{%guid%}",r),n).then(function(e){0===e.code?"function"==typeof t&&t():console.log("name modify failed")})}function a(e,t){var n=[],r={};for(var o in t)e[o]!==t[o]&&(n.push(o),r[o]=t[o]);if(0===n.length)return Promise.resolve({});var i="/api/file/"+e.guid;return(0,A.ajaxPost)(i,r).then(function(t){if(0===t.code)return y(e.guid,t.data),t.data;throw new Error(t)})}function s(e){return(0,A.ajaxPut)("/smapi/files/"+e.id+"/star").then(function(e){if(0!==e.code)throw new Error("标星失败。错误码："+e.code);return{starred:!0}})}function u(e){return(0,A.ajaxDelete)("/smapi/files/"+e.id+"/star").then(function(e){if(0!==e.code)throw new Error("取消标星失败。错误码："+e.code);return{starred:!1}})}function l(e){var t={guid:e};return(0,A.ajaxPost)("/api/file/create_copy",t).then(function(e){if(0===e.code)return cow.currentFile.children.push(e.data),e.data;throw M.default.alert(e.error),new Error(e)})}function c(e){return(0,A.ajaxPost)("/api/file/create",e).then(function(e){if(0===e.code)return cow.currentFile.children&&cow.currentFile.children.push(e.data),e.data;throw new Error(e.message)})}function f(e){var t="/api/file/"+e+"/ancestors";return(0,A.ajaxGet)(t).then(function(e){if(0===e.code){var t=e.data,n=t.ancestors||[];return n.unshift({name:"我的桌面",type:"desktop",link:"/desktop"}),d(n),n}throw new Error(e.message)})}function d(e){e.map(function(e,t){return 0!==t&&(e.link="/folder/"+e.guid,e.type="folder"),e})}function p(e){var t={guid:e.guid,user_id:window.cow.currentUser.id,file_type:e.shortcut_id?"shortcut":"file"};return(0,A.ajaxPost)("/api/share/delete",t).then(function(t){if(0===t.code)return y(e.guid,{is_delete:1}),t;throw new Error(t.message)})}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"info",o={from:e,to:t,file_type:n,action_type:r};return(0,A.ajaxPost)("/api/file/move",o).then(function(t){if(0===t.code)return"action"===r&&y(e,{is_delete:1}),t;throw new Error(t.message)})}function m(e,t){return t=t||void 0,(0,A.ajaxPost)("/smapi/files/"+e+"/action/sort",{before:t}).then(function(n){if(0===n.code)return v(e,t),"";throw new Error(n.message)})}function v(e,t){var n=cow.currentFile.children,r=null,o=-1,i=-1;(n||[]).some(function(n,a){return n.id===e&&(r=n,o=a),n.id===t&&(i=a),o>=0&&(i>=0||null===t||void 0===t)}),i>=0&&o>=0?(n.splice(i,0,r),i>o?n.splice(o,1):n.splice(o+1,1)):void 0!==t&&null!==t||(n.splice(o,1),n.push(r))}function y(e,t){var n=cow.currentFile.children;(n||[]).some(function(r,o){if(r.guid===e){for(var i in t)r[i]=t[i],"is_delete"===i&&+t.is_delete>=1&&n.splice(o,1);return!0}return!1})}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise(function(r,o){(0,A.ajaxPost)("/smapi/search/files",{keyword:e,page:t,pageSize:n}).then(function(e){0===e.code&&e.data?r({page:e.data.page,results:e.data.results||[],count:e.data.count,pageCount:e.data.pageCount}):o(new Error(e.message))},function(e){o(e)})})}function b(e){return new Promise(function(t,n){var r="/smapi/files/"+e+"/star";(0,A.ajaxPut)(r).then(function(e){0===e.code?t():n(new Error("标星操作失败"))},function(){n(new Error("标星操作失败"))})})}function w(e){return new Promise(function(t,n){var r="/smapi/files/"+e+"/star";(0,A.ajaxDelete)(r).then(function(e){0===e.code?t():n(new Error("标星操作失败"))},function(){n(new Error("标星操作失败"))})})}function _(e,t){var n={fileId:t,fileGuid:e},r="/smapi/files/"+e+"/desktop_shortcuts";return(0,A.ajaxPost)(r,n)}function k(e,t){var n="/smapi/files/"+e+"/desktop_shortcuts/verbose";return(0,A.ajaxDelete)(n)}function E(e){return new Promise(function(t,n){var r=I.COLLABORATORS.replace("{%guid%}",e);(0,A.ajaxGet)(r).then(function(e){R&&t(e),0===e.code?t(e.data):n(new Error(e.error))},function(e){n(e)})})}function T(){return""===cow.welcomeFile?"欢迎使用石墨文档"===cow.currentFile.name:cow.currentFile.guid===cow.welcomeFile}function C(e){var t=e;return!(!cow.exampleFiles||!cow.exampleFiles.length)&&(t||(t=cow.currentFile.guid),cow.exampleFiles.split(",").some(function(e){return t===e}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(n,r){e=e||"";var o="/-/"+e;(0,A.ajaxGet)(o).then(function(e){0===e.code&&e.data.file?(t.length&&(e.data.file=j.default.pick(e.data.file,t),t.indexOf("children")>-1&&e.data.file.children&&(e.data.file.children=e.data.file.children.map(function(e){return j.default.pick(e,t)}))),n(e.data.file)):r(new Error("文件获取失败"))},function(){return r(new Error("文件获取失败"))})})}function O(){return S("",arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}function x(e){return new Promise(function(t,n){if(!e)return n(new Error("get file failed"));f(e.guid).then(function(r){var o="";r.length&&(o=r.slice(-1)[0].guid),S(o).then(function(n){var o={includedFileGuid:e.guid,crumbList:r};t({crumbInfo:o,file:n})},function(){return n(new Error("文件已被删除，或失去访问权限"))})},function(){return n(new Error("文件已被删除，或失去访问权限"))})})}Object.defineProperty(t,"__esModule",{value:!0});var P=n(1),j=o(P),N=n(8),M=o(N),A=n(7),I=n(35),D=n(9),L=r(D),R=L.isRNClient(),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.id&&e.is_folder},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.cow,t=arguments[1],n=arguments[2];if(!t||!n)return!1;var r=e,o=r.currentFile;if(o.guid===t)return j.default.assign(o,n),!0;var i=o.children;if(i&&i.length){var a=!1;return j.default.forEach(i,function(e){return e.guid!==t||(j.default.assign(e,n),a=!0,!1)}),a}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.cow,t=arguments[1];if(e&&t){var n=e.currentFile,r=void 0===n?{}:n;if(r.guid===t)return r;var o=r.children,i=void 0===o?[]:o,a=void 0;return j.default.forEach(i,function(e){return e.guid!==t||(a=e,!1)}),a}};t.default={updateTitle:i,updateFile:a,destroyFavoriteFile:u,createFavoriteFile:s,createCopyFile:l,createFile:c,getAncestors:f,quiteShare:p,resortList:m,moveToFolder:h,searchFile:g,starFile:b,unstarFile:w,getFileCollaborators:E,checkIsWelcomeFile:T,checkIsExampleFile:C,getFile:S,getDesktop:O,getDirectoryInfo:x,isFolder:U,updateFileInfoInWindowObjectCow:F,findFileByGuid:B,addDesktopShortcut:_,removeDesktopShortcut:k},e.exports=t.default},function(e,t){!function(n){if("object"==typeof t&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.page=n()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(n){"use strict";function r(e,t){if("function"==typeof e)return r("*",e);if("function"==typeof t)for(var n=new s(e),o=1;o<arguments.length;++o)r.callbacks.push(n.middleware(arguments[o]));else"string"==typeof e?r["string"==typeof t?"redirect":"show"](e,t):r.start(e)}function o(e){if(!e.handled){var t;t=b?g+m.hash.replace("#!",""):m.pathname+m.search,t!==e.canonicalPath&&(r.stop(),e.handled=!1,m.href=e.canonicalPath)}}function i(e){return"string"!=typeof e?e:y?decodeURIComponent(e.replace(/\+/g," ")):e}function a(e,t){"/"===e[0]&&0!==e.indexOf(g)&&(e=g+(b?"#!":"")+e);var n=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(g,"")||"/",b&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?i(e.slice(n+1)):"",this.pathname=i(~n?e.slice(0,n):e),this.params={},this.hash="",!b){if(!~this.path.indexOf("#"))return;var r=this.path.split("#");this.path=r[0],this.hash=i(r[1])||"",this.querystring=this.querystring.split("#")[0]}}function s(e,t){t=t||{},this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=f(this.path,this.keys=[],t)}function u(e){if(1===l(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.path?e.path[0]:e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var o=t.getAttribute("href");if((b||t.pathname!==m.pathname||!t.hash&&"#"!==o)&&!(o&&o.indexOf("mailto:")>-1)&&!t.target&&c(t.href)){var i=t.pathname+t.search+(t.hash||"");void 0!==n&&i.match(/^\/[a-zA-Z]:\//)&&(i=i.replace(/^\/[a-zA-Z]:\//,"/"));var a=i;0===i.indexOf(g)&&(i=i.substr(g.length)),b&&(i=i.replace("#!","")),g&&a===i||(e.preventDefault(),r.show(a))}}}}function l(e){return e=e||window.event,null===e.which?e.button:e.which}function c(e){var t=m.protocol+"//"+m.hostname;return m.port&&(t+=":"+m.port),e&&0===e.indexOf(t)}var f=e("path-to-regexp");t.exports=r;var d,p,h="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",m="undefined"!=typeof window&&(window.history.location||window.location),v=!0,y=!0,g="",b=!1;r.callbacks=[],r.exits=[],r.current="",r.len=0,r.base=function(e){if(0===arguments.length)return g;g=e},r.start=function(e){if(e=e||{},!d&&(d=!0,!1===e.dispatch&&(v=!1),!1===e.decodeURLComponents&&(y=!1),!1!==e.popstate&&window.addEventListener("popstate",w,!1),!1!==e.click&&document.addEventListener(h,u,!1),!0===e.hashbang&&(b=!0),v)){var t=b&&~m.hash.indexOf("#!")?m.hash.substr(2)+m.search:m.pathname+m.search+m.hash;r.replace(t,null,!0,v)}},r.stop=function(){d&&(r.current="",r.len=0,d=!1,document.removeEventListener(h,u,!1),window.removeEventListener("popstate",w,!1))},r.show=function(e,t,n,o){var i=new a(e,t);return r.current=i.path,!1!==n&&r.dispatch(i),!1!==i.handled&&!1!==o&&i.pushState(),i},r.back=function(e,t){r.len>0?(history.back(),r.len--):e?setTimeout(function(){r.show(e,t)}):setTimeout(function(){r.show(g,t)})},r.redirect=function(e,t){"string"==typeof e&&"string"==typeof t&&r(e,function(e){setTimeout(function(){r.replace(t)},0)}),"string"==typeof e&&void 0===t&&setTimeout(function(){r.replace(e)},0)},r.replace=function(e,t,n,o){var i=new a(e,t);return r.current=i.path,i.init=n,i.save(),!1!==o&&r.dispatch(i),i},r.dispatch=function(e){function t(){var e=r.exits[s++];if(!e)return n();e(i,t)}function n(){var t=r.callbacks[a++];return e.path!==r.current?void(e.handled=!1):t?void t(e,n):o(e)}var i=p,a=0,s=0;p=e,i?t():n()},r.exit=function(e,t){if("function"==typeof e)return r.exit("*",e);for(var n=new s(e),o=1;o<arguments.length;++o)r.exits.push(n.middleware(arguments[o]))},r.Context=a,a.prototype.pushState=function(){r.len++,history.pushState(this.state,this.title,b&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},a.prototype.save=function(){history.replaceState(this.state,this.title,b&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},r.Route=s,s.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return e(n,r);r()}},s.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),o=~r?e.slice(0,r):e,a=this.regexp.exec(decodeURIComponent(o));if(!a)return!1;for(var s=1,u=a.length;s<u;++s){var l=n[s-1],c=i(a[s]);void 0===c&&hasOwnProperty.call(t,l.name)||(t[l.name]=c)}return!0};var w=function(){var e=!1;if("undefined"!=typeof window)return"complete"===document.readyState?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(t){if(e)if(t.state){var n=t.state.path;r.replace(n,t.state)}else r.show(m.pathname+m.hash,void 0,void 0,!1)}}();r.sameOrigin=c}).call(this,e("_process"))},{_process:2,"path-to-regexp":3}],2:[function(e,t,n){function r(){}var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var o=document.createElement("div");return new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})}).observe(o,{attributes:!0}),function(e){r.length||o.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){r.shift()()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){function r(e){for(var t,n=[],r=0,o=0,i="";null!=(t=v.exec(e));){var a=t[0],u=t[1],l=t.index;if(i+=e.slice(o,l),o=l+a.length,u)i+=u[1];else{i&&(n.push(i),i="");var c=t[2],f=t[3],d=t[4],p=t[5],h=t[6],m=t[7],y="+"===h||"*"===h,g="?"===h||"*"===h,b=c||"/",w=d||p||(m?".*":"[^"+b+"]+?");n.push({name:f||r++,prefix:c||"",delimiter:b,optional:g,repeat:y,pattern:s(w)})}}return o<e.length&&(i+=e.substr(o)),i&&n.push(i),n}function o(e){return i(r(e))}function i(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(n){for(var r="",o=n||{},i=0;i<e.length;i++){var a=e[i];if("string"!=typeof a){var s,u=o[a.name];if(null==u){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(m(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(s=encodeURIComponent(u[l]),!t[i].test(s))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');r+=(0===l?a.prefix:a.delimiter)+s}}else{if(s=encodeURIComponent(u),!t[i].test(s))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');r+=a.prefix+s}}else r+=a}return r}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function s(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function l(e){return e.sensitive?"":"i"}function c(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return u(e,t)}function f(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(h(e[o],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",l(n)),t)}function d(e,t,n){for(var o=r(e),i=p(o,n),a=0;a<o.length;a++)"string"!=typeof o[a]&&t.push(o[a]);return u(i,t)}function p(e,t){t=t||{};for(var n=t.strict,r=!1!==t.end,o="",i=e[e.length-1],s="string"==typeof i&&/\/$/.test(i),u=0;u<e.length;u++){var c=e[u];if("string"==typeof c)o+=a(c);else{var f=a(c.prefix),d=c.pattern;c.repeat&&(d+="(?:"+f+d+")*"),d=c.optional?f?"(?:"+f+"("+d+"))?":"("+d+")?":f+"("+d+")",o+=d}}return n||(o=(s?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=r?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+o,l(t))}function h(e,t,n){return t=t||[],m(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp?c(e,t,n):m(e)?f(e,t,n):d(e,t,n)}var m=e("isarray");t.exports=h,t.exports.parse=r,t.exports.compile=o,t.exports.tokensToFunction=i,t.exports.tokensToRegExp=p;var v=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{isarray:4}],4:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}]},{},[1])(1)})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(12),o=n(114),i=n(115),a=Object.defineProperty;t.f=n(19)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(31);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(344),i=r(o);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(5)},function(e,t){},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(6),i=r(o),a=n(10),s=r(a),u=n(9),l=r(u),c=n(17),f=r(c),d=n(18),p=r(d),h=n(19),m=r(h),v=n(20),y=r(v),g=n(21),b=r(g),w=n(22),_=r(w),k=n(25),E=r(k),T=n(26),C=r(T),S=n(28),O=r(S),x=n(29),P=r(x),j=n(12),N=r(j),M=n(27),A=r(M),I=n(30),D=r(I),L=n(31),R=r(L),U=n(32),F=r(U),B=n(16),W=r(B),V=n(13),q=r(V),H=n(33),$=r(H);e.exports={DropdownMenu:i.default,MenuItem:s.default,Menu:l.default,IconButton:f.default,SimpleButton:p.default,LinkButton:m.default,Checkbox:y.default,CheckboxGroup:b.default,Tab:_.default,TabItem:E.default,Dialog:C.default,Draggable:O.default,DraggableDialog:P.default,Tooltip:N.default,Mask:A.default,Toast:D.default,SearchInput:R.default,ImageIcon:F.default,WindowListener:W.default,DelegateClick:q.default,MultiDropdownMenu:$.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(8),s=r(a),u=n(9),l=r(u),c=n(12),f=r(c),d=n(13),p=r(d),h=n(16),m=r(h);e.exports=i.default.createClass({displayName:"exports",mixins:[p.default,m.default],propTypes:{menuItems:i.default.PropTypes.array.isRequired,className:i.default.PropTypes.string,wrapClassName:i.default.PropTypes.string,itemTpl:i.default.PropTypes.func,selectedTpl:i.default.PropTypes.func,selectedIndex:i.default.PropTypes.number,onTap:i.default.PropTypes.func,onMenuChange:i.default.PropTypes.func,forceTap:i.default.PropTypes.bool,tooltip:i.default.PropTypes.string,tipClass:i.default.PropTypes.string,isScroll:i.default.PropTypes.bool,autoWidth:i.default.PropTypes.bool,autoHeight:i.default.PropTypes.bool},windowListeners:{resize:"handlerResize"},getDefaultProps:function(){return{className:"d-menu-wrap",hasMask:!1,autoWidth:!1,autoHeight:!1,tooltip:"",tipClass:"",displayKey:"text",valKey:"value",itemTpl:function(e,t,n,r,o){var a=t[r],s=t[o];return i.default.createElement("div",{"data-val":s},a)},selectedTpl:function(e,t,n,r){var o=t[n];return i.default.createElement("div",null,t[o])}}},getInitialState:function(){return{open:!1,selectedIndex:this.props.selectedIndex||0,isShowTip:!1,hovered:!1}},componentDidMount:function(){this.menuWrap=this.refs.menuWrap,this.menuWrapDom=s.default.findDOMNode(this.menuWrap),this.props.autoWidth&&this._setWidth(),this.props.hasOwnProperty("selectedIndex")&&this._setSelectedIndex(this.props.selectedIndex)},componentDidUpdate:function(e,t){t.open&&!this.state.open&&this.props.onClose&&this.props.onClose()},componentWillReceiveProps:function(e){this.props.autoWidth&&this._setWidth(),e.hasOwnProperty("selectedIndex")&&this._setSelectedIndex(e.selectedIndex)},render:function(){var e=this.props,t=this.state.open?"":"unactive",n=(e.wrapClassName||"")+" "+e.className+" "+t,r=void 0;return e.tooltip&&(r=i.default.createElement(f.default,{ref:"tooltip",tip:e.tooltip,isShow:this.state.isShowTip,customClass:e.tipClass})),i.default.createElement("div",{className:n,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},i.default.createElement("div",{className:"d-menu-display-wrap",onTouchTap:this._onToggleMenu},e.selectedTpl(this.state.selectedIndex,e.menuItems[this.state.selectedIndex],e.displayKey,e.valKey),r),i.default.createElement("div",{className:"menu-wrap"},i.default.createElement(l.default,{ref:"menuWrap",menuItems:e.menuItems,displayKey:e.displayKey,valKey:e.valKey,selectedIndex:this.state.selectedIndex,itemTpl:e.itemTpl,onItemTap:this._onItemTap})),this.state.open&&e.hasMask&&i.default.createElement("div",{className:"d-menu-mask",onTouchTap:this._onMenuMaskTap}))},handlerResize:function(){this._setSubmenuHeight()},componentClick:function(){this.close()},close:function(){this.state.open&&(this.setState({open:!1}),this._removeSubmenuStyle())},_onToggleMenu:function(){this.setState({open:!this.state.open,isShowTip:this.state.open},function(){var e=this;this.state.open?setTimeout(function(){e._getSubmenuViewport(),e._setSubmenuHeight()}):this._removeSubmenuStyle()}),this.props.onTap&&this.props.onTap()},_onItemTap:function(e,t,n){var r=this.props;r.onMenuChange&&(this.state.selectedIndex!==t||r.forceTap)&&r.onMenuChange(e,t,n),this.setState({selectedIndex:t,open:!!r.keepOpen})},_onMenuMaskTap:function(){this.setState({open:!1}),this._removeSubmenuStyle()},_setWidth:function(){s.default.findDOMNode(this).style.width=this.menuWrapDom.offsetWidth+"px"},timer:null,_setSubmenuHeight:function(){var e=this;this.props.autoHeight&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var t=window.innerHeight,n=e.submenuViewport||{},r=n.height,o=n.bottom,i=o>t?r+t-o-20:"auto";e.menuWrap.setHeight(i)},200))},_getSubmenuViewport:function(){this.submenuViewport||(this.submenuViewport=this.menuWrapDom.getBoundingClientRect())},_removeSubmenuStyle:function(){this.menuWrap.removeStyle()},_setSelectedIndex:function(e){this.setState({selectedIndex:e})},_handleMouseEnter:function(){this.setState({isShowTip:!this.state.open,hovered:!0})},_handleMouseLeave:function(){this.setState({isShowTip:!1,hovered:!1})}})},function(e,t){e.exports=n(0)},function(e,t){e.exports=n(5)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(8),s=(r(a),n(10)),u=r(s),l=n(11),c=r(l);e.exports=i.default.createClass({displayName:"exports",propTypes:{menuItems:i.default.PropTypes.array.isRequired,selectedIndex:i.default.PropTypes.number,selectedVal:i.default.PropTypes.string,onItemTap:i.default.PropTypes.func,itemTpl:i.default.PropTypes.func,isScroll:i.default.PropTypes.bool},getDefaultProps:function(){},getInitialState:function(){return{selectedIndex:this.props.selectedIndex||this._getSelectedIndexByVal(),style:null}},componentDidMount:function(){this.props.hasOwnProperty("selectedIndex")&&this._setSelectedIndex(this.props.selectedIndex)},componentWillReceiveProps:function(e){e.hasOwnProperty("selectedIndex")&&this._setSelectedIndex(e.selectedIndex)},render:function(){return i.default.createElement("div",{className:"menu-wrap-inner",style:this.state.style},this._renderChilden())},_renderChilden:function(){for(var e,t,n=[],r=this.props,o=0,a=r.menuItems.length;o<a;o++)e=r.menuItems[o],t=i.default.createElement(u.default,{selected:this.state.selectedIndex===o,key:o,index:o,data:e,itemTpl:r.itemTpl,displayKey:r.displayKey,valKey:r.valKey,onTap:this._onItemTap}),n.push(t),"divider"===e.type&&n.push(i.default.createElement(c.default,{key:"divider"+o}));return n},_onItemTap:function(e,t,n){this.setState({selectedIndex:t}),this.props.onItemTap&&this.props.onItemTap(e,t,n)},_getSelectedIndexByVal:function(){var e=this.props;if(e.selectedVal)for(var t=0,n=e.menuItems.length;t<n;t++)if(e.menuItems[t][e.valKey]==e.selectedVal)return t;return 0},_setSelectedIndex:function(e){this.setState({selectedIndex:e})},setHeight:function(e){var t=null;"auto"!==e&&(e=Math.max(e,30),t={overflowY:"auto",overflowX:"hidden",height:e}),this.setState({style:t})},removeStyle:function(){this.setState({style:null})}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({displayName:"exports",propTypes:{index:i.default.PropTypes.number.isRequired,selected:i.default.PropTypes.bool,data:i.default.PropTypes.object,onTap:i.default.PropTypes.func,itemTpl:i.default.PropTypes.func},getDefaultProps:function(){return{itemTpl:function(e,t,n,r,o){var a=t[r],s=t[o];return i.default.createElement("div",{"data-val":s},a)}}},getInitialState:function(){return{hovered:!1}},render:function(){var e=this.props,t="menu-item",n=this.state.hovered?"hovered":"";return n&&(t+=" "+n),e.selected&&(t+=" menu-item-selected"),e.data.class&&(t+=" "+e.data.class),i.default.createElement("div",{className:t,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onTouchTap:this._onTap},e.itemTpl(e.index,e.data,e.selected,e.displayKey,e.valKey))},_onTap:function(e){var t=this.props;t.onTap&&t.onTap(e,t.index,t.data)},_handleMouseEnter:function(e){this.setState({hovered:!0})},_handleMouseLeave:function(e){this.setState({hovered:!1})}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement("div",{className:"menu-divider"})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(7),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({displayName:"exports",propTypes:{tip:i.default.PropTypes.string.isRequired,isShow:i.default.PropTypes.bool,customClass:i.default.PropTypes.string},render:function(){var e=this.props,t=e.isShow?"":"hide",n=e.customClass||"";return i.default.createElement("span",{className:"tooltip "+t+" "+n},e.tip)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=(r(o),n(8)),a=r(i),s=n(14),u=r(s),l=n(15),c=r(l);e.exports={componentDidMount:function(){this._bindClick()},componentWillUnmount:function(){this._unbindClick()},_checkClick:function(e){var t=a.default.findDOMNode(this),n=e.target;n!=t&&!c.default.isDescendant(t,n)&&document.documentElement.contains(n)&&this.componentClick&&this.componentClick(e,t)},_bindClick:function(){u.default.on(document,"mouseup",this._checkClick),u.default.on(document,"touchend",this._checkClick)},_unbindClick:function(){u.default.off(document,"mouseup",this._checkClick),u.default.off(document,"touchend",this._checkClick)}}},function(e,t){"use strict";e.exports={on:function(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},off:function(e,t,n){window.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}}},function(e,t){"use strict";e.exports={isDescendant:function(e,t){for(var n=t.parentNode;null!=n;){if(n===e)return!0;n=n.parentNode}return!1}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(14),i=r(o);e.exports={componentDidMount:function(){var e,t=this.windowListeners;for(var n in t)e=t[n],i.default.on(window,n,this[e])},componentWillUnmount:function(){var e,t=this.windowListeners;for(var n in t)e=t[n],i.default.off(window,n,this[e])}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(12),s=r(a);e.exports=i.default.createClass({displayName:"exports",propTypes:{customClass:i.default.PropTypes.string,tooltip:i.default.PropTypes.string,disabled:i.default.PropTypes.bool,onBtnTap:i.default.PropTypes.func,onDoubleClick:i.default.PropTypes.func,isShowTip:i.default.PropTypes.bool,tipClass:i.default.PropTypes.string,iconBtnClass:i.default.PropTypes.string,iconBtnTpl:i.default.PropTypes.func},getDefaultProps:function(){return{customClass:""}},getInitialState:function(){return{isShowTip:!1,hovered:!1,tipClass:""}},render:function(){var e,t=this.props,n=this.state.hovered?"hovered":"";return t.tooltip&&(e=i.default.createElement(s.default,{ref:"tooltip",tip:t.tooltip,isShow:this.state.isShowTip,customClass:t.tipClass})),i.default.createElement("span",{className:"icon-btn-wrap "+n+" "+t.customClass,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onClick:this._handlerClick},i.default.createElement("span",{className:"icon-btn "+t.iconBtnClass},t.iconBtnTpl?t.iconBtnTpl():""),e)},_handleMouseEnter:function(e){this.setState({isShowTip:!0,hovered:!0})},_handleMouseLeave:function(e){this.setState({isShowTip:!1,hovered:!1})},_timer:null,_handlerClick:function(e){var t=this,n=this.props,r=n.onDoubleClick,o=n.onBtnTap;if(this._timer)return clearTimeout(this._timer),this._timer=null,void(r&&r(e));this._timer=setTimeout(function(){clearTimeout(t._timer),t._timer=null,o&&o(e)},300)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({displayName:"exports",propTypes:{customClass:i.default.PropTypes.string,disabled:i.default.PropTypes.bool,label:i.default.PropTypes.string,btnTpl:i.default.PropTypes.func,onTap:i.default.PropTypes.func},getDefaultProps:function(){return{customClass:""}},render:function(){var e,t=this.props;return e=t.btnTpl?t.btnTpl(t.label):i.default.createElement("div",{className:"btn-inner"},t.label&&i.default.createElement("span",{ref:"btnLabel",className:"btn-label"},t.label),t.children),i.default.createElement("button",{className:"btn "+t.customClass,disabled:t.disabled,onTouchTap:this._onTap},e)},_onTap:function(e){var t=this.props;!t.disabled&&t.onTap&&t.onTap(e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(18),s=r(a);e.exports=i.default.createClass({displayName:"exports",propTypes:{customClass:i.default.PropTypes.string,disabled:i.default.PropTypes.bool,newTab:i.default.PropTypes.bool,label:i.default.PropTypes.string,btnTpl:i.default.PropTypes.func,href:i.default.PropTypes.string.isRequired,onTap:i.default.PropTypes.func},getDefaultProps:function(){return{customClass:"",newTab:!1}},render:function(){var e,t=this.props;return e=t.btnTpl?t.btnTpl(t.label):i.default.createElement("div",{className:"btn-inner"},t.label&&i.default.createElement("span",{ref:"btnLabel",className:"btn-label"},t.label),t.children),i.default.createElement(s.default,{customClass:t.customClass,disabled:t.disabled,onTap:t.onTap},i.default.createElement("a",{className:"link-btn",href:t.href,target:t.newTab?"_blank":"_self"},e))}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(7),l=r(u),c=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={checked:e.checked},n}return a(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){e.checked!==this.state.checked&&this.setState({checked:e.checked})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className?"checkbox-item "+t.className:"checkbox-item";return n+=this.state.checked?" checked":"",l.default.createElement("div",{className:n,onTouchTap:function(){return e._onChange()}},this.props.tpl(this.state.checked,t.item))}},{key:"_onChange",value:function(){var e=this.props,t=!this.state.checked;this.setState({checked:t}),e.onCheck&&e.onCheck(e.item,t)}}]),t}(u.Component);t.default=c,c.propTypes={className:u.PropTypes.string,item:u.PropTypes.object,tpl:u.PropTypes.func,checked:u.PropTypes.bool,onCheck:u.PropTypes.func},c.defaultProps={checked:!1,tpl:function(e,t){var n=t?t.name:"全选";return l.default.createElement("span",null,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(7),l=r(u),c=n(20),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:e.items,checkedItems:e.checkedItems,isSelectAll:n._isSelectAll(e.checkedItems,e.items)},n}return a(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){var t={};e.items!==this.state.items&&(t.items=e.items),e.checkedItems!==this.state.checkedItems&&(t.checkedItems=e.checkedItems),Object.keys(t).length>0&&this.setState(t)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.className?"checkbox-group-wrap "+t.className:"checkbox-group-wrap";return l.default.createElement("div",{className:n},!t.disableSelectAll&&l.default.createElement(f.default,{checked:this.state.isSelectAll,onCheck:this._onSelectAll.bind(this),tpl:t.selectAllTpl}),this.state.items.map(function(n,r){return l.default.createElement(f.default,{key:r,item:n,checked:e.state.checkedItems.indexOf(n.name)>-1,onCheck:e._onCheck.bind(e),tpl:t.itemTpl})}))}},{key:"_isSelectAll",value:function(e,t){return e.length===t.length||!1}},{key:"_onSelectAll",value:function(e,t){var n=t?this._getAllItems(this.state.items):[];this._onChange(n)}},{key:"_onCheck",value:function(e,t){var n=(this.props,this.state.checkedItems),r=e.name;t?n.push(r):n.splice(n.indexOf(r),1),this._onChange(n)}},{key:"_onChange",value:function(e){var t=this.props;this.setState({checkedItems:e,isSelectAll:this._isSelectAll(e,this.state.items)}),t.onChange&&t.onChange(e)}},{key:"_getAllItems",value:function(e){var t=[];return e.forEach(function(e){t.push(e.name)}),t}}]),t}(u.Component);t.default=d,d.propTypes={className:u.PropTypes.string,items:u.PropTypes.array.isRequired,checkedItems:u.PropTypes.array,itemTpl:u.PropTypes.func,onChange:u.PropTypes.func,disableSelectAll:u.PropTypes.bool,selectAllTpl:u.PropTypes.func},d.defaultProps={defaultChecked:[],disableSelectAll:!1,selectAllTpl:function(e){return l.default.createElement("div",{className:"checkbox-select-all"},"全选")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(23),s=r(a),u=n(24),l=r(u);e.exports=i.default.createClass({displayName:"exports",propTypes:{customClass:i.default.PropTypes.string,selectedIndex:i.default.PropTypes.number,tabWillChange:i.default.PropTypes.func,tabDidChange:i.default.PropTypes.func,onTapContent:i.default.PropTypes.func,disableSetWidth:i.default.PropTypes.bool},getInitialState:function(){return{selectedIndex:this.props.selectedIndex||0}},componentWillReceiveProps:function(e){void 0!==e.selectedIndex&&e.selectedIndex!==this.props.selectedIndex&&this.setState({selectedIndex:e.selectedIndex})},render:function(){var e,t,n,r=this.props,o=[],a=[];return i.default.Children.forEach(r.children,function(u,c){"TabItem"==u.type.displayName?(r.disableSetWidth?e=i.default.createElement(s.default,{key:c,index:c,title:u.props.title,selected:this.state.selectedIndex===c,headTpl:r.headTpl,onTap:this._onHeadTap}):(n=100/this.getTabCount()+"%",e=i.default.createElement(s.default,{key:c,index:c,title:u.props.title,selected:this.state.selectedIndex===c,width:n,headTpl:r.headTpl,onTap:this._onHeadTap})),t=i.default.createElement(l.default,{key:c,index:c,selected:this.state.selectedIndex===c,onTapContent:this._onTapContent,className:u.props.className},u.props.children),o.push(e),a.push(t)):console.error("The tab item tag name must be TagItem")}.bind(this)),i.default.createElement("div",{className:"tab-wrap "+(r.customClass||"")+" selected-"+this.state.selectedIndex},i.default.createElement("div",{className:"tab-head-wrap"},o),i.default.createElement("div",{className:"tab-content-wrap"},a))},getTabCount:function(){return i.default.Children.count(this.props.children)},_onHeadTap:function(e,t,n){var r=this.props;r.tabWillChange&&r.tabWillChange(this.state.selectedIndex,e,n),this.setState({selectedIndex:e},function(){r.tabDidChange&&r.tabDidChange(e,t,n)})},_onTapContent:function(e,t,n){this.props.onTapContent&&this.props.onTapContent(e,t,n)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({displayName:"exports",propTypes:{index:i.default.PropTypes.number,title:i.default.PropTypes.string,selected:i.default.PropTypes.bool,headTpl:i.default.PropTypes.func,onTap:i.default.PropTypes.func},getDefaultProps:function(){return{index:0,selected:!1}},render:function(){var e,t=this.props,n={width:t.width};return e=t.headTpl?t.headTpl(t.title,t.selected):t.title,i.default.createElement("div",{className:"tab-head-item "+(t.selected?"selected":""),style:n,onTouchTap:this._onTap},e)},_onTap:function(e){this.props.onTap&&this.props.onTap(this.props.index,this.props.title,e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({displayName:"exports",propTypes:{index:i.default.PropTypes.number,selected:i.default.PropTypes.bool,onTapContent:i.default.PropTypes.func,className:i.default.PropTypes.string},getDefaultProps:function(){return{index:0,selected:!1}},render:function(){var e=this.props,t="tab-content-item";return e.className&&(t+=" "+e.className),i.default.createElement("div",{className:t+(e.selected?" selected":" hide"),onTouchTap:this._onTap},e.children)},_onTap:function(e){var t=this.props;t.onTapContent&&t.onTapContent(t.index,this,e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({render:function(){return i.default.createElement("div",{className:"tab-item"})},displayName:"TabItem"})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(7),a=r(i),s=n(8),u=n(18),l=r(u),c=n(27),f=r(c);t.default=a.default.createClass({displayName:"Dialog",propTypes:{title:a.default.PropTypes.string,body:a.default.PropTypes.string,headTpl:a.default.PropTypes.func,bodyTpl:a.default.PropTypes.func,footTpl:a.default.PropTypes.func,hasMask:a.default.PropTypes.bool,hasActions:a.default.PropTypes.bool,actions:a.default.PropTypes.array,onShow:a.default.PropTypes.func,onClose:a.default.PropTypes.func,open:a.default.PropTypes.bool,keepCenter:a.default.PropTypes.bool,enableCloseClickMask:a.default.PropTypes.bool},getDefaultProps:function(){return{hasMask:!0,hasActions:!0,customClass:"",actions:[{customClass:"dialog-submit",onTap:this._onSubmit,label:"submit"},{customClass:"dialog-cancel",onTap:this.close,label:"cancel"}]}},getInitialState:function(){return{open:this.props.open||!1}},componentDidMount:function(){this.props.open&&(this._asCenter(),this._onShow())},componentWillReceiveProps:function(e){void 0!==e.open&&e.open!==this.state.open&&this.setState({open:e.open})},componentDidUpdate:function(e,t){var n=t.open;!this.state.open||!e.keepCenter&&n||this._asCenter()},render:function(){var e,t,n=this.props,r=n.actions,i=[],s={style:n.style,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp};if(n.hasActions)for(var u=0,c=r.length;u<c;u++)t=r[u],e=t.tpl?t.tpl(t):a.default.createElement(l.default,{key:u,customClass:t.customClass||"",disabled:t.disabled||!1,onTap:t.onTap||this.close,label:t.label}),i.push(e);return a.default.createElement("div",o({ref:"dialogWrap",className:"dialog-wrap "+n.customClass},s),this.state.open&&a.default.createElement("div",{ref:"dialog",className:"dialog"},a.default.createElement("div",{className:"dialog-head"},n.headTpl?n.headTpl(n.title):n.title),a.default.createElement("div",{className:"dialog-body"},n.bodyTpl?n.bodyTpl(n.body):n.body),a.default.createElement("div",{className:"dialog-foot"},n.footTpl?n.footTpl():null,i)),this.state.open&&this.props.hasMask&&a.default.createElement(f.default,{autoLockScroll:!0,isShow:!0,onTap:this._handleMaskTap}))},show:function(){this.setState({open:!0},this._onShow)},close:function(){this.setState({open:!1},this._onClose)},_asCenter:function(){var e=(0,s.findDOMNode)(this.refs.dialogWrap);e.style.marginLeft=-e.clientWidth/2+"px",e.style.marginTop=-e.clientHeight/2+"px"},_onShow:function(){this.props.onShow&&this.props.onShow()},_onClose:function(){this.props.onClose&&this.props.onClose()},_onSubmit:function(){this.setState({open:!1}),this.props.onClose(!0)},_handleMaskTap:function(){var e=this.props.enableCloseClickMask;(void 0===e||e)&&this.close()}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o);e.exports=i.default.createClass({displayName:"exports",propTypes:{autoLockScroll:i.default.PropTypes.bool,isShow:i.default.PropTypes.bool,onTap:i.default.PropTypes.func},_originalBodyOverflow:"",componentDidMount:function(){this._originalBodyOverflow=document.getElementsByTagName("body")[0].style.oveflow,this.props.autoLockScroll&&this._disableScroll()},componentWillUnmount:function(){this._enableScroll()},componentDidUpdate:function(){this.props.autoLockScroll&&(this.props.isShow?this._disableScroll():this._enableScroll())},render:function(){return i.default.createElement("div",{className:"mask",onTouchTap:this._onTap})},_disableScroll:function(){document.getElementsByTagName("body")[0].style.oveflow="hidden"},_enableScroll:function(){document.getElementsByTagName("body")[0].style.oveflow=this._originalBodyOverflow},_onTap:function(e){this.props.onTap&&this.props.onTap(e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&e.call.apply(e,[null].concat(n))}function l(e,t,n){return Math.max(t,Math.min(n,e))}function c(e,t){return e.indexOf(t)>-1}function f(e,t){var n={};return Object.keys(t).forEach(function(r){return!c(e,r)&&(n[r]=t[r])}),n}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(7),m=r(h),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,e),this.set(t,n)}return p(e,[{key:"set",value:function(e,t){this.x=e,this.y=t}}]),e}(),y=function(e){function t(e){s(this,t);var n=e.defaultPosition||{},r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._start=function(e){return!r.state.dragging&&(!1!==u(r.props.onStart,e)&&(document.body.addEventListener("mousemove",r._drag),document.body.style.webkitUserSelect="none",r._setStartingCoord(e),void r.setState({dragging:!0})))},r._drag=function(e){if(r.state.dragging){var t=r._makeDeltaInViewport(r.deltaPoint.x+e.clientX-r.startingPoint.x,r.deltaPoint.y+e.clientY-r.startingPoint.y),n=t.dx,o=t.dy;if(!1===u(r.props.onDrag,e,n,o))return!1;r.setState({dx:n,dy:o})}},r._stop=function(e){if(!1===u(r.props.onStop,e))return!1;document.body.removeEventListener("mousemove",r._drag),document.body.style.webkitUserSelect=r.presetWebkitUserSelect,r.setState({dragging:!1})},r.presetWebkitUserSelect=document.body.style.webkitUserSelect,r.rect=null,r.deltaPoint=new v,r.startingPoint=new v,r.state={dx:n.dx||0,dy:n.dy||0,dragging:!1},r}return a(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e){e.reset&&(this.rect=null,this.deltaPoint=new v,this.setState({dx:0,dy:0}))}},{key:"_setStartingCoord",value:function(e){var t=e.currentTarget,n=e.clientX,r=e.clientY;this.startingPoint.set(n,r),this.rect=t.getBoundingClientRect(),this.deltaPoint.set(this.state.dx,this.state.dy)}},{key:"_makeDeltaInViewport",value:function(e,t){var n=this.deltaPoint,r=n.x,o=n.y,i=this.rect,a=i.left,s=i.top,u=i.right,c=i.bottom,f=document.body,d=f.clientWidth,p=f.clientHeight;return e=l(e,-(a-r),d-(u-r)),t=l(t,-(s-o),p-(c-o)),{dx:e,dy:t}}},{key:"render",value:function(){var e=this.props,n=e.children,r=e.wrapper,i=o(e,["children","wrapper"]),a=this.state,s=a.dx,u=a.dy,l=h.Children.only(n),c=d({style:{transform:"translate("+s+"px,"+u+"px)"},onMouseDown:this._start,onMouseUp:this._stop},f(Object.keys(t.propTypes),i));return r?m.default.createElement("div",c,l):m.default.cloneElement(l,c)}}]),t}(h.Component);y.propTypes={wrapper:h.PropTypes.bool,onStart:h.PropTypes.func,onDrag:h.PropTypes.func,onStop:h.PropTypes.func,reset:h.PropTypes.bool,children:h.PropTypes.element.isRequired,defaultPosition:h.PropTypes.object},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),f=n(28),d=r(f),p=n(26),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onStop=function(){n.setState({reset:!1})},n.state={reset:!1},n}return a(t,e),u(t,[{key:"show",value:function(){var e;this.setState({reset:!0}),(e=this.refs.dialog).show.apply(e,arguments)}},{key:"close",value:function(){var e;(e=this.refs.dialog).close.apply(e,arguments)}},{key:"render",value:function(){var e=this.state.reset;return c.default.createElement(d.default,{onStop:this._onStop,reset:e},c.default.createElement(h.default,s({ref:"dialog",hasMask:!1},this.props)))}}]),t}(l.Component);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(8),s=r(a);e.exports=i.default.createClass({displayName:"exports",propTypes:{msg:i.default.PropTypes.string,timeout:i.default.PropTypes.number,type:i.default.PropTypes.string},getDefaultProps:function(){return{msg:"",timeout:3e3,type:"info"}},render:function(){return i.default.createElement("div",{id:"toast-wrap",className:"toast fadein "+this.props.type},this.props.msg)},componentDidMount:function(){this._setTimeout()},componentDidUpdate:function(){this._setTimeout()},_timeoutId:null,_setTimeout:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){s.default.unmountComponentAtNode(s.default.findDOMNode(this).parentNode)}.bind(this),this.props.timeout)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(8),s=r(a);e.exports=i.default.createClass({displayName:"exports",propTypes:{customClass:i.default.PropTypes.string,placeholder:i.default.PropTypes.string,onSearch:i.default.PropTypes.func,throttle:i.default.PropTypes.number,isFocus:i.default.PropTypes.bool,text:i.default.PropTypes.string},getDefaultProps:function(){return{customClass:"",placeholder:"search...",throttle:200,isFocus:!0}},getInitialState:function(){return{text:this.props.text||""}},componentDidMount:function(){this.props.isFocus&&this._setFocus()},componentWillReceiveProps:function(e){void 0!==e.text&&e.text!==this.state.text&&this.setState({text:e.text})},render:function(){var e=this.props;return i.default.createElement("div",{className:"search-wrap "+e.customClass},i.default.createElement("form",{className:"search-form",onSubmit:this._onSubmit},i.default.createElement("input",{ref:"searchInput",type:"text",autoComplete:"off",value:this.state.text,className:"search-input",placeholder:e.placeholder,onChange:this._onInputChange,onKeyDown:this._onKeyDown,onFocus:this._onFocus,onBlur:this._onBlur})))},_timeoutId:null,_onKeyDown:function(e){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){this._goSearch(e)}.bind(this),this.props.throttle)},_onSubmit:function(e){return this._goSearch(e),e.preventDefault(),!1},_goSearch:function(e){var t,n;t=s.default.findDOMNode(this.refs.searchInput),n=t.value,this.props.onSearch&&this.props.onSearch(n,e)},_setFocus:function(){var e;e=s.default.findDOMNode(this.refs.searchInput),e.focus()},_onInputChange:function(e){var t;t=s.default.findDOMNode(this.refs.searchInput),this.setState({text:t.value})},_onFocus:function(){this.props.onFocus&&this.props.onFocus()},_onBlur:function(){this.props.onBlur&&this.props.onBlur()}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(7),i=r(o),a=n(14),s=r(a);e.exports=i.default.createClass({displayName:"exports",propTypes:{customClass:i.default.PropTypes.string,defaultImg:i.default.PropTypes.string,realImg:i.default.PropTypes.string},getDefaultProps:function(){return{customClass:"",defaultImg:"",realImg:""}},getInitialState:function(){return{loaded:null}},componentDidMount:function(){var e,t=this,n=this.props.realImg;n&&(e=document.createElement("img"),s.default.on(e,"load",function(){t.isMounted()&&t.setState({loaded:"success"})}),s.default.on(e,"error",function(){t.isMounted()&&t.setState({loaded:"failed"})}),e.setAttribute("src",n))},render:function(){var e=this.props,t={},n={};return"success"==this.state.loaded?(t={backgroundImage:"url("+e.realImg+")"},n={visibility:"hidden"}):"failed"==this.state.loaded&&(n={visibility:"visible"}),i.default.createElement("div",{className:"img-wrap "+e.customClass,style:t},i.default.createElement("img",{ref:"image","data-real":e.realImg,src:e.defaultImg,style:n}))}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(7),l=r(u),c=n(8),f=r(c),d=n(6),p=r(d),h=n(12),m=r(h),v=n(34),y=r(v),g=function(e){function t(e){o(this,t);for(var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=(n.state.selectedLevel=n.props.selectedLevel||0,n.props.menuItems),a=[],s=0,u=r.length;s<u;s++)r[s].showLevel||a.push(r[s]);return n.state.level0Items=a,n._showSubMenu=n._showSubMenu.bind(n),n._hideSubMenu=n._hideSubMenu.bind(n),n._onToggleMenuEx=n._onToggleMenuEx.bind(n),n}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(e,t){t.open&&!this.state.open&&this.props.onClose&&this.props.onClose();var n=0,r=0,o=0;if(this.refs.menuWrap){var i=f.default.findDOMNode(this.refs.menuWrap).parentNode;n+=i.clientWidth+1,r+=i.clientHeight,o=i.clientHeight}for(var a=this.state.subMenuInfos||[],s=0,u=a.length;s<u;s++){var l=a[s].showLevel,c=f.default.findDOMNode(this.refs["subMenuWrap"+l]),d=c.clientWidth,p=c.clientHeight;c.style.left=n+"px",n+=d+1,c.style.top=-1*r+a[s].offset+"px",r=r-a[s].offset+p;var h=c.getBoundingClientRect();h.top+h.height>document.body.clientHeight&&(r=r+a[s].offset-p,c.style.top=-1*r+(o-p)+"px",r=r-(o-p)+p),o=p}}},{key:"componentWillReceiveProps",value:function(e){this.props.autoWidth&&this._setWidth(),e.hasOwnProperty("selectedIndex")&&this._setSelectedIndex(e.selectedIndex),e.hasOwnProperty("selectedLevel")&&this._setSelectedLevel(e.selectedLevel)}},{key:"render",value:function(){var e=this,t=this.props,n=this.state.open?"":"unactive",r=(t.wrapClassName||"")+" "+t.className+" "+n,o=void 0;t.tooltip&&(o=l.default.createElement(m.default,{ref:"tooltip",tip:t.tooltip,isShow:this.state.isShowTip,customClass:t.tipClass}));var i=this.state.selectedLevel,a=this.state.level0Items,s=this.state.subMenuInfos||[],u=s.map(function(n){return l.default.createElement("div",{className:"sub-menu-wrap",ref:"subMenuWrap"+n.showLevel},l.default.createElement(y.default,{menuItems:n.items,displayKey:t.displayKey,valKey:t.valKey,selectedIndex:i===n.showLevel?e.state.selectedIndex:-1,itemTpl:t.itemTpl,onItemTap:e._onItemTap,showSubMenu:e._showSubMenu,hideSubMenu:e._hideSubMenu}))});return l.default.createElement("div",{className:r,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},l.default.createElement("div",{className:"d-menu-display-wrap",onTouchTap:this._onToggleMenuEx},t.selectedTpl(this.state.selectedIndex,t.menuItems[this.state.selectedIndex],t.displayKey,t.valKey),o),l.default.createElement("div",{className:"menu-wrap"},l.default.createElement(y.default,{ref:"menuWrap",menuItems:a,displayKey:t.displayKey,valKey:t.valKey,selectedIndex:0===i?this.state.selectedIndex:-1,itemTpl:t.itemTpl,onItemTap:this._onItemTap,showSubMenu:this._showSubMenu,hideSubMenu:this._hideSubMenu})),u,this.state.open&&t.hasMask&&l.default.createElement("div",{className:"d-menu-mask",onTouchTap:this._onMenuMaskTap}))}},{key:"_onToggleMenuEx",value:function(){this.setState({open:!this.state.open,isShowTip:this.state.open,subMenuInfos:[]},function(){var e=this;this.state.open?setTimeout(function(){e._getSubmenuViewport(),e._setSubmenuHeight()}):this._removeSubmenuStyle()}),this.props.onTap&&this.props.onTap()}},{key:"_setSelectedLevel",value:function(e){this.setState({selectedLevel:e})}},{key:"_showSubMenu",value:function(e,t){var n=this.props.menuItems,r=this.state.subMenuInfos||[];r=r.filter(function(t){return t.showLevel<=e});for(var o=!1,i=0,a=r.length;i<a;i++)r[i].showLevel===e&&(o=!0);var s=[];o||r.push({showLevel:e,items:s,offset:t}),r.sort(function(e,t){return e.showLevel-t.showLevel});for(var u=0,l=n.length;u<l;u++)n[u].showLevel===e&&s.push(n[u]);this.setState({subMenuInfos:r})}},{key:"_hideSubMenu",value:function(e){var t=this.state.subMenuInfos||[];if(void 0===e)this.setState({subMenuInfos:[]});else{for(var n=[],r=0,o=t.length;r<o;r++)t[r].showLevel<=e&&n.push(t[r]);this.setState({subMenuInfos:n})}}}]),t}(p.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(7),l=r(u),c=n(35),f=r(c),d=n(11),p=r(d),h=n(9),m=r(h),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._showSubMenu=n._showSubMenu.bind(n),n._hideSubMenu=n._hideSubMenu.bind(n),n}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"menu-wrap-inner",style:this.state.style},this._renderChildrenEx())}},{key:"_showSubMenu",value:function(e,t){this.props.showSubMenu(e,t)}},{key:"_hideSubMenu",value:function(e){this.props.hideSubMenu(e)}},{key:"_renderChildrenEx",value:function(){for(var e,t,n=[],r=this.props,o=0,i=r.menuItems.length;o<i;o++)e=r.menuItems[o],t=l.default.createElement(f.default,{selected:this.state.selectedIndex===o,key:o,index:o,data:e,itemTpl:r.itemTpl,displayKey:r.displayKey,valKey:r.valKey,onTap:this._onItemTap,showSubMenu:this._showSubMenu,hideSubMenu:this._hideSubMenu}),n.push(t),"divider"===e.type&&n.push(l.default.createElement(p.default,{key:"divider"+o}));return n}}]),t}(m.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(7),l=r(u),c=n(10),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._handleMouseEnterEx=n._handleMouseEnterEx.bind(n),n._onTapEx=n._onTapEx.bind(n),n}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t="menu-item",n=this.state.hovered?"hovered":"",r=e.data.subMenuLevel?"sub-menu-parent":"";return n&&(t+=" "+n),r&&(t+=" "+r),e.selected&&(t+=" menu-item-selected"),e.data.class&&(t+=" "+e.data.class),l.default.createElement("div",{className:t,onMouseEnter:this._handleMouseEnterEx,onMouseLeave:this._handleMouseLeave,onTouchTap:this._onTapEx},e.itemTpl(e.index,e.data,e.selected,e.displayKey,e.valKey))}},{key:"_onTapEx",value:function(e){var t=this.props;t.onTap&&"menu"!==t.data.type&&t.onTap(e,t.index,t.data)}},{key:"_handleMouseEnterEx",value:function(e){var t=e.target,n=t.parentNode;this.setState({hovered:!0});var r=this.props.data||{};"menu"===r.type&&t&&n?this.props.showSubMenu(r.subMenuLevel,t.offsetTop):this.props.hideSubMenu(r.showLevel)}}]),t}(f.default);t.default=d}]))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=(t.FILE_TYPE_MAP={0:"doc","-2":"docs","-1":"spreadsheet","-3":"sheet",1:"folder"},t.FILE_ZH_TYPE_MAP={0:"文档","-2":"文档","-1":"表格","-3":"表格",1:"文件夹"},t.KEY_CODES={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,CAPS_LOCK:20,LEFT:37,RIGHT:39,UP:38,DOWN:40,AT:50});t.keyCodes=n,t.notifications=[{name:"企业版半价促销",order:0,enable:!0,withCookie:!1,recordTag:"shimo_anniversary",text:"石墨文档三周年，点击立享企业版限量优惠",targetLink:"https://shimo.im/doc/VimyO5cXFRkTBhfZ",openNewTab:!0,startDate:"2017/05/11 00:00:00",endDate:"2017/05/31 00:01:00",targetUser:{isEnterpriseOfficial:!1}},{name:"ipad_bar",order:1,enable:!0,withCookie:!1,customize:"ipad-bar",recordTag:"ipad_bar",text:"大家期待已久的 iPad 适配版终于上线了！",startDate:"2017/11/07 00:00:00",endDate:"2017/11/29 00:00:00"}],t.emailReg=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.emailList={"mapgis.com":"mail.mapgis.com","foxmail.com":"mail.foxmail.com","qq.com":"mail.qq.com","vip.qq.com":"mail.qq.com","gmail.com":"mail.google.com","163.com":"mail.163.com","126.com":"mail.126.com","yeah.net":"mail.yeah.net","tom.com":"mail.tom.com","188.com":"mail.188.com","sina.com":"mail.sina.com","sohu.com":"mail.sohu.com","yahoo.cn":"mail.yahoo.com","yahoo.com.cn":"mail.yahoo.com","hotmail.com":"mail.hotmail.com","live.com":"mail.live.com"},t.regs={url:/(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&amp;:\/~+#]*[\w\-@?^=%&amp;\/~+#])?/i,email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,guid:/^[0-9A-Za-z]{16}$/}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),o=void 0,i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,d=void 0,p=void 0,h=void 0,m=void 0,v=void 0,y=void 0,g=void 0,b=void 0,w=void 0,_=void 0,k=window.cow.rnToken;(0,r.isRNClientWithToken)()?(o=window.cow.rnHost,i=window.cow.rnAPI,a=i+"files/{%guid%}?content=true",s=i+"files/{%guid%}",l=i+"files/{%guid%}/comments?access_token="+k,u=i+"comments?access_token="+k,c=i+"files/{fileId}/compose?access_token="+k,f=i+"files/{fileId}/pull?access_token="+k,d=i+"files/{fileId}/ack?access_token="+k,p=i+"search?access_token="+k,h=i+"search/file?access_token="+k,m=i+"search/recent_contacts?access_token="+k,v=i+"search/team_members?access_token="+k,b=i+"/files/{%guid%}?access_token="+k,y=i+"files/{%guid%}/collaborators?access_token="+k,g=i+"files/{%guid%}/ancestors?access_token="+k,w=i+"legacy_notifications/mention?access_token="+k,_=i+"files/{%guid%}/new_seq?access_token="+k):(o="/",i="/",a="/-/{%guid%}",s="/smapi/files/{%guid%}",l="/api/comment/{%guid%}/",c="/smapi/files/{fileId}/compose",f="/smapi/files/{fileId}/pull",d="/smapi/files/{fileId}/ack",p="/smapi/search",h="/smapi/search/file",m="/smapi/search/recent_contacts",v="/smapi/search/team_members",b="/smapi/files/{%guid%}",y="/smapi/files/{%guid%}/collaborators",g="/api/file/{%guid%}/ancestors",w="/api/mention/{%userId}",_="/smapi/files/{%guid%}/new_seq"),t.default={HOST:o,API_PATH:i,GET_FILE:a,GET_FILE_WITHOUT_CONTENT:s,GET_COMMENTS:l,NEW_COMMENT:u,COMPOSE_URL:c,PULL_URL:f,ACK_URL:d,SEARCH_ALL:p,SEARCH_FILES:h,SEARCH_RECENT_CONTACTS:m,SEARCH_TEAM_MEMBERS:v,SET_EXTERNAL_LINK:b,COLLABORATORS:y,ANCESTORS:g,UPDATE_FILE:"/api/file/{%guid%}",EXTERNAL_LINK:"/api/file/external_link/{%guid%}",SYNC_OFFLINE:"/api/file/{%guid%}/sync",MENTION:w,NEW_SEQ:_},e.exports=t.default},function(e,t,n){var r=n(28),o=n(3)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(18),o=n(6).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(122),o=n(40);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(55)("keys"),o=n(37);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(29).f,o=n(20),i=n(3)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";var r=n(0),o=n(355);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=o(r.Component,r.isValidElement,i)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}var o=n(0),i=r(o),a=n(5),s=n(252),u=r(s),l=document.body.appendChild(document.createElement("div"));e.exports=function(e){var t=function(){return l.parentNode.removeChild(l)},n=e||{};n.cleanup=t,document.body.contains(l)||document.body.appendChild(l),(0,a.render)(i.default.createElement(u.default,n),l)}},function(e,t){function n(e){for(var t=17,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[];t-=1;)r.push(n[parseInt(62*Math.random())]);var o=r.join("");return e?e+"-"+o:o}function r(e){return e.innerText||e.textContent||e.nodeValue||""}function o(e){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2===n.length)return n.pop().split(";").shift()}function i(e){var t=e&&e.toString();return!/^0+\d+$/.test(t)&&t-parseFloat(t)+1>=0}function a(e){var t=String(e),n=0;return!isNaN(Number(e))&&t.indexOf(".")>-1&&(n=t.split(".")[1].length),n}function s(e){return!!(i(e)&&e.toString().length>16)}function u(e){return!!(i(e)&&e.toString().length<=16)}function l(e){return i(e)&&e.toString().length<=16?Number(e,10):e}function c(e){var t,n,r,o,i,a,s,u,l,c,f,d,p,h;if(o="零",t=["","一","二","三","四","五","六","七","八","九"],r=["","十","百","千"],n=["","万","亿","兆"],""===e)return"";if(""===(e=e.replace(/^0+/g,"")))return o;for(p="",s=!0,c=!1,u=l=0,d=e.length;d>=0?l<d:l>d;u=d>=0?++l:--l)f=e.length-1-u,i=parseInt(e[u]),h=f%r.length,a=(f-h)/r.length,0!==i&&(c&&(p+=o),(1!==i||1!==h||!s||0===a&&c)&&(p+=t[i]),p+=r[h]),s=s&&0===i,0!==h||s||(p+=n[a]),c=0===i&&(0!==h||s),0===h&&(s=!0);return p}Object.defineProperty(t,"__esModule",{value:!0}),t.genGuid=n,t.nodeText=r,t.getCookie=o,t.isNumeric=i,t.getFractionLen=a,t.isBigNumber=s,t.isValidNumber=u,t.strToNum=l,t.translateNumber=c},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(33),d=n(11),p=r(d),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:e.open||!1},n.bodyTpl=n.bodyTpl.bind(n),n}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.open&&e.open!==this.state.open&&this.setState({open:e.open})}},{key:"_headTpl",value:function(e){return this.props.hasCloseButton?c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},e),c.default.createElement("span",{className:"hicon icon-close dialog-close",onTouchTap:this._close.bind(this)})):c.default.createElement("span",{className:"dialog-title"},e)}},{key:"_close",value:function(){this.setState({open:!1});var e=this.props.onClose;"function"==typeof e&&e()}},{key:"bodyTpl",value:function(){if("function"==typeof this.props.bodyTpl)return this.props.bodyTpl;if(this.props.children){var e=c.default.Children.map(this.props.children,function(e){return c.default.cloneElement(e)});return function(){return e}}}},{key:"render",value:function(){var e,t=this.props,n=t.customClass,r=t.title,i=t.onClose,a=t.actions,s=t.enableCloseClickMask,u=t.hasCloseButton,l=this.state.open,d=this.props.buttonLayout,h=!1;a&&a.length>0&&(h=!0,d=d||"vertical",a.map(function(e){e.customClass+=" flat-footer-button "+d}));var m=(0,p.default)((e={"flat-dialog":!0},o(e,""+n,!!n),o(e,"no-title",!r&&!u),o(e,"no-action",!a||!a.length),e));return c.default.createElement(f.Dialog,{ref:"dialog",customClass:m,title:r,headTpl:this._headTpl.bind(this),bodyTpl:this.bodyTpl.bind(this)(),onClose:i||function(){},actions:a||[],open:"boolean"==typeof l&&l,enableCloseClickMask:s,hasActions:h})}}]),t}(l.Component);t.default=h,h.propTypes={customClass:l.PropTypes.string,title:l.PropTypes.string,bodyTpl:l.PropTypes.func,onClose:l.PropTypes.func,actions:l.PropTypes.array,open:l.PropTypes.bool,hasCloseButton:l.PropTypes.bool,enableCloseClickMask:l.PropTypes.bool,buttonLayout:l.PropTypes.oneOf(["vertical","horizontal"])},e.exports=t.default},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(81),o=n(221),i=n(157),a=Object.defineProperty;t.f=n(52)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(82)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd"];Function.prototype.bind&&window.console&&"object"===n(window.console.log)&&r.forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var o=function(e){return function(){return window.console[e].apply(window.console,arguments)}};t.default={log:o("log"),error:o("error"),warn:o("warn")},e.exports=t.default},function(e,t,n){var r=n(6),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(59),o=n(60),i=n(17),a=n(15),s=n(20),u=n(22),l=n(118),c=n(43),f=n(125),d=n(3)("iterator"),p=!([].keys&&"next"in[].keys()),h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,y,g,b,w){l(n,t,y);var _,k,E,T=function(e){if(!p&&e in x)return x[e];switch(e){case h:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",S=g==m,O=!1,x=e.prototype,P=x[d]||x["@@iterator"]||g&&x[g],j=!p&&P||T(g),N=g?S?T("entries"):j:void 0,M="Array"==t?x.entries||P:P;if(M&&(E=f(M.call(new e)))!==Object.prototype&&E.next&&(c(E,C,!0),r||s(E,d)||a(E,d,v)),S&&P&&P.name!==m&&(O=!0,j=function(){return P.call(this)}),r&&!w||!p&&!O&&x[d]||a(x,d,j),u[t]=j,u[C]=v,g)if(_={values:S?j:T(m),keys:b?j:T(h),entries:N},w)for(k in _)k in x||i(x,k,_[k]);else o(o.P+o.F*(p||O),t,_);return _}},function(e,t){e.exports=!1},function(e,t,n){var r=n(6),o=n(21),i=n(15),a=n(17),s=n(30),u="prototype",l=function(e,t,n){var c,f,d,p,h=e&l.F,m=e&l.G,v=e&l.S,y=e&l.P,g=e&l.B,b=m?r:v?r[t]||(r[t]={}):(r[t]||{})[u],w=m?o:o[t]||(o[t]={}),_=w[u]||(w[u]={});m&&(n=t);for(c in n)f=!h&&b&&void 0!==b[c],d=(f?b:n)[c],p=g&&f?s(d,r):y&&"function"==typeof d?s(Function.call,d):d,b&&a(b,c,d,e&l.U),w[c]!=d&&i(w,c,p),y&&_[c]!=d&&(_[c]=d)};r.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var r=n(121),o=n(63);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(39),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r,o,i,a=n(30),s=n(138),u=n(64),l=n(38),c=n(6),f=c.process,d=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=c.Dispatch,v=0,y={},g="onreadystatechange",b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},w=function(e){b.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete y[e]},"process"==n(28)(f)?r=function(e){f.nextTick(a(b,e,1))}:m&&m.now?r=function(e){m.now(a(b,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=w,r=a(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",w,!1)):r=g in l("script")?function(e){u.appendChild(l("script"))[g]=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=n(31);e.exports.f=function(e){return new r(e)}},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(window.cow.client){var t=r.Deferred(),n=(0,c.genGuid)();return h[n]=t,d.default.notify("ajax",{data:{url:e.url,type:e.type,data:e.data,guid:n}}),t.promise()}return window.cow._csrf&&(e.headers={"X-CSRF-Token":window.cow._csrf}),r.ajax(e)}function s(e){var t=this;return function(n,r,i,s,u){o.isFunction(r)&&(s=i,i=r);var c=function(t){"403"===t.code&&(window.location.href="/login?redirect_url="+encodeURIComponent(window.location.href));var i={message:e+" ["+n+"] error:",err:t,sendData:r};l.default.error(i),o.isFunction(s)&&s(t)};return a({url:n,type:e,dataType:"json",data:r,beforeSend:u}).then(function(e,n,r){if(!window.cow.client){var o=r.getResponseHeader("X-Server-Version");window.cow.serverVersion&&window.cow.serverVersion!==o&&(window.cow._needReload=!0),window.cow.serverVersion=o}return 0!==e.code&&void 0!==e.code?c.call(t,e):(i&&i(e),e)},function(e){n&&-1===n.indexOf(p)&&c.call(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(54),l=i(u),c=n(48),f=n(4),d=i(f),p="/api/log/jserror",h=void 0;window.cow.client&&(h={},d.default.attach("ajax:response",function(e,t,n){var r=h[e];return delete h[e],n?r.reject(n):r.resolve(t)})),setInterval(function(){s("get")("/api/heartbeat")},54e4),t.default={get:s("get"),delete:s("delete"),post:s("post"),patch:s("patch")},e.exports=t.default}).call(t,n(2),n(1))},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(96):void 0!==t&&(e=n(96)),e}var i=n(10),a=n(184),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(e,t){return a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(92))},function(e,t,n){var r,o;r=[n(179)],void 0!==(o=function(e){var t={};return t.error=function(e){var t=new Error(e);throw t.easysync=!0,t},t.assert=function(e,n){if(!e){var r=Array.prototype.slice.call(arguments,1).join("");t.error("Failed assertion: "+r)}},t.parseNum=function(e){return parseInt(e,36)},t.numToString=function(e){return e.toString(36).toLowerCase()},t.toBaseTen=function(e){var n=e.indexOf("$"),r=e.substring(0,n),o=e.substring(n);return r.replace(/[0-9a-z]+/g,function(e){return String(t.parseNum(e))})+o},t.oldLen=function(e){return t.unpack(e).oldLen},t.newLen=function(e){return t.unpack(e).newLen},t.opIterator=function(e,n){function r(){c=l;var n;return s.lastIndex=l,n=s.exec(e),l=s.lastIndex,"?"==n[0]&&t.error("Hit error opcode in op stream"),n}function o(e){var n=e||d;return f[0]?(n.attribs=f[1],n.lines=t.parseNum(f[2]||0),n.opcode=f[3],n.chars=t.parseNum(f[4]),f=r()):t.clearOp(n),n}function i(){return!!f[0]}function a(){return c}var s=/((?:\*[0-9a-z]+)*)(?:\|([0-9a-z]+))?([-+=])([0-9a-z]+)|\?|/g,u=n||0,l=u,c=l,f=r(),d=t.newOp();return{next:o,hasNext:i,lastIndex:a}},t.clearOp=function(e){e.opcode="",e.chars=0,e.lines=0,e.attribs=""},t.newOp=function(e){return{opcode:e||"",chars:0,lines:0,attribs:""}},t.cloneOp=function(e){return{opcode:e.opcode,chars:e.chars,lines:e.lines,attribs:e.attribs}},t.copyOp=function(e,t){t.opcode=e.opcode,t.chars=e.chars,t.lines=e.lines,t.attribs=e.attribs},t.opString=function(e){if(!e.opcode)return"null";var n=t.opAssembler();return n.append(e),n.toString()},t.stringOp=function(e){return t.opIterator(e).next()},t.checkRep=function(e){for(var n=t.unpack(e),r=n.oldLen,o=n.newLen,i=n.ops,a=n.charBank,s=t.smartOpAssembler(),u=0,l=0,c=0,f=t.opIterator(i);f.hasNext();){var d=f.next();switch(d.opcode){case"=":u+=d.chars,l+=d.chars;break;case"-":u+=d.chars,t.assert(u<r,u," >= ",r," in ",e);break;case"+":l+=d.chars,c+=d.chars,t.assert(l<o,l," >= ",o," in ",e)}s.append(d)}for(l+=r-u,a=a.substring(0,c);a.length<c;)a+="?";s.endDocument();var p=t.pack(r,l,s.toString(),a);return t.assert(p==e,"Invalid changeset (checkRep failed)"),e},t.smartOpAssembler=function(){function e(){d.append(f.toString()),f.clear()}function n(){d.append(l.toString()),l.clear(),d.append(c.toString()),c.clear()}function r(t){t.opcode&&t.chars&&("-"==t.opcode?("="==p&&e(),l.append(t),h-=t.chars):"+"==t.opcode?("="==p&&e(),c.append(t),h+=t.chars):"="==t.opcode&&("="!=p&&n(),f.append(t)),p=t.opcode)}function o(e,n,o,i){var a=t.newOp(e);a.attribs=t.makeAttribsString(e,o,i);var s=n.lastIndexOf("\n");s<0?(a.chars=n.length,a.lines=0,r(a)):(a.chars=s+1,a.lines=n.match(/\n/g).length,r(a),a.chars=n.length-(s+1),a.lines=0,r(a))}function i(){return n(),e(),d.toString()}function a(){l.clear(),c.clear(),f.clear(),d.clear(),h=0}function s(){f.endDocument()}function u(){return h}var l=t.mergingOpAssembler(),c=t.mergingOpAssembler(),f=t.mergingOpAssembler(),d=t.stringAssembler(),p="",h=0;return{append:r,toString:i,clear:a,endDocument:s,appendOpWithText:o,getLengthChange:u}},t.mergingOpAssembler=function(){function e(e){s.opcode&&(e&&"="==s.opcode&&!s.attribs||(a.append(s),u&&(s.chars=u,s.lines=0,a.append(s),u=0)),s.opcode="")}function n(n){n.chars>0&&(s.opcode==n.opcode&&s.attribs==n.attribs?n.lines>0?(s.chars+=u+n.chars,s.lines+=n.lines,u=0):0==s.lines?s.chars+=n.chars:u+=n.chars:(e(),t.copyOp(n,s)))}function r(){e(!0)}function o(){return e(),a.toString()}function i(){a.clear(),t.clearOp(s)}var a=t.opAssembler(),s=t.newOp(),u=0;return{append:n,toString:o,clear:i,endDocument:r}},t.opAssembler=function(){function e(e){o.push(e.attribs),e.lines&&o.push("|",t.numToString(e.lines)),o.push(e.opcode),o.push(t.numToString(e.chars))}function n(){return o.join("")}function r(){o.length=0}var o=[];return{append:e,toString:n,clear:r}},t.stringIterator=function(e){function n(e){t.assert(e<=a(),"!(",e," <= ",a(),")")}function r(t){n(t);var r=e.substr(u,t);return u+=t,r}function o(t){return n(t),e.substr(u,t)}function i(e){n(e),u+=e}function a(){return e.length-u}function s(){return u}var u=0;return{take:r,skip:i,remaining:a,peek:o,currentIndex:s}},t.stringAssembler=function(){function e(e){var t=String(e);i.push(t),a+=t.length}function t(){var e=i.pop();return a-=e.length,e}function n(){return i[i.length-1]}function r(){return i.join("")}function o(){return a}var i=[],a=0;return{append:e,pop:t,last:n,toString:r,length:o}},t.textLinesMutator=function(e){function n(t){e.splice.apply(e,t)}function r(t){return e.get?e.get(t):e[t]}function o(t,n){return e.slice?e.slice(t,n):[]}function i(){return"number"==typeof e.length?e.length:e.length()}function a(){y[0]=b,y[1]=0,w>0&&l(),g=!0}function s(){n(y),y.length=2,y[0]=y[1]=0,g=!1}function u(){return b-y[0]<y.length-2}function l(){return u()||(y.push(r(y[0]+y[1])),y[1]++),2+b-y[0]}function c(e,t){if(e)if(t){g||a();for(var n=0;n<e;n++)w=0,l(),b++}else g&&(e>1?s():l()),b+=e,w=0}function f(e,t,n){e&&(t?c(t,n):(n&&!g&&a(),g&&l(),w+=e))}function d(e){var t="";if(e){var n=function(e){var t=y[0]+y[1];return o(t,t+e).join("")};if(g||a(),u())if(0==w)t=y[y.length-1],y.length--,t+=n(e-1),y[1]+=e-1;else{t=n(e-1),y[1]+=e-1;var i=y.length-1;t=y[i].substring(w)+t,y[i]=y[i].substring(0,w)+r(y[0]+y[1]),y[1]+=1}else t=n(e),y[1]+=e}return t}function p(e,t){var n="";if(e){if(t)return d(t);g||a();var r=l();n=y[r].substring(w,w+e),y[r]=y[r].substring(0,w)+y[r].substring(w+e)}return n}function h(e,n){if(e)if(g||a(),n){var r=t.splitTextLines(e);if(u()){var o=y.length-1,i=y[o],s=w;y[o]=i.substring(0,s)+r[0],b++,r.splice(0,1),Array.prototype.push.apply(y,r),b+=r.length,y.push(i.substring(s)),w=0}else Array.prototype.push.apply(y,r),b+=r.length}else{var o=l();y[o]=y[o].substring(0,w)+e+y[o].substring(w),w+=e.length}}function m(){var e=i();return g&&(e+=y.length-2-y[1]),b<e}function v(){g&&s()}var y=[0,0],g=!1,b=0,w=0;return{skip:f,remove:p,insert:h,close:v,hasMore:m,removeLines:d,skipLines:c}},t.applyZip=function(e,n,r,o,i){for(var a=t.opIterator(e,n),s=t.opIterator(r,o),u=t.smartOpAssembler(),l=t.newOp(),c=t.newOp(),f=t.newOp();l.opcode||a.hasNext()||c.opcode||s.hasNext();)!l.opcode&&a.hasNext()&&a.next(l),!c.opcode&&s.hasNext()&&s.next(c),i(l,c,f),f.opcode&&(u.append(f),f.opcode="");return u.endDocument(),u.toString()},t.unpack=function(e){var n=/Z:([0-9a-z]+)([><])([0-9a-z]+)|/,r=n.exec(e);r&&r[0]||t.error("Not a exports: "+e);var o=t.parseNum(r[1]),i=">"==r[2]?1:-1,a=t.parseNum(r[3]),s=o+i*a,u=r[0].length,l=e.indexOf("$");return l<0&&(l=e.length),{oldLen:o,newLen:s,ops:e.substring(u,l),charBank:e.substring(l+1)}},t.pack=function(e,n,r,o){var i=n-e,a=i>=0?">"+t.numToString(i):"<"+t.numToString(-i),s=[];return s.push("Z:",t.numToString(e),a,r,"$",o),s.join("")},t.applyToText=function(e,n){var r=t.unpack(e);t.assert(n.length==r.oldLen,"mismatched apply: ",n.length," / ",r.oldLen);for(var o=t.opIterator(r.ops),i=t.stringIterator(r.charBank),a=t.stringIterator(n),s=t.stringAssembler();o.hasNext();){var u=o.next();switch(u.opcode){case"+":if(u.lines!=i.peek(u.chars).split("\n").length-1)throw new Error("newline count is wrong in op +; cs:"+e+" and text:"+n);s.append(i.take(u.chars));break;case"-":if(u.lines!=a.peek(u.chars).split("\n").length-1)throw new Error("newline count is wrong in op -; cs:"+e+" and text:"+n);a.skip(u.chars);break;case"=":if(u.lines!=a.peek(u.chars).split("\n").length-1)throw new Error("newline count is wrong in op =; cs:"+e+" and text:"+n);s.append(a.take(u.chars))}}return s.append(a.take(a.remaining())),s.toString()},t.mutateTextLines=function(e,n){for(var r=t.unpack(e),o=t.opIterator(r.ops),i=t.stringIterator(r.charBank),a=t.textLinesMutator(n);o.hasNext();){var s=o.next();switch(s.opcode){case"+":a.insert(i.take(s.chars),s.lines);break;case"-":a.remove(s.chars,s.lines);break;case"=":a.skip(s.chars,s.lines,!!s.attribs)}}a.close()},t.composeAttributes=function(e,n,r,o){if(!e&&r)return n;if(!n)return e;var i=[];e.replace(/\*([0-9a-z]+)/g,function(e,n){return i.push(o.getAttrib(t.parseNum(n))),""}),n.replace(/\*([0-9a-z]+)/g,function(e,n){for(var a=o.getAttrib(t.parseNum(n)),s=!1,u=0;u<i.length;u++){var l=i[u];if(l[0]==a[0]){a[1]||r?l[1]=a[1]:i.splice(u,1),s=!0;break}}return s||!a[1]&&!r||i.push(a),""}),i.sort();for(var a=t.stringAssembler(),s=0;s<i.length;s++)a.append("*"),a.append(t.numToString(o.putAttrib(i[s])));return a.toString()},t._slicerZipperFunc=function(e,n,r,o){if("-"==e.opcode)t.copyOp(e,r),e.opcode="";else if(e.opcode)switch(n.opcode){case"-":n.chars<=e.chars?("="==e.opcode&&(r.opcode="-",r.chars=n.chars,r.lines=n.lines,r.attribs=""),e.chars-=n.chars,e.lines-=n.lines,n.opcode="",e.chars||(e.opcode="")):("="==e.opcode&&(r.opcode="-",r.chars=e.chars,r.lines=e.lines,r.attribs=""),n.chars-=e.chars,n.lines-=e.lines,e.opcode="");break;case"+":t.copyOp(n,r),n.opcode="";break;case"=":n.chars<=e.chars?(r.opcode=e.opcode,r.chars=n.chars,r.lines=n.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),n.opcode="",e.chars-=n.chars,e.lines-=n.lines,e.chars||(e.opcode="")):(r.opcode=e.opcode,r.chars=e.chars,r.lines=e.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),e.opcode="",n.chars-=e.chars,n.lines-=e.lines);break;case"":t.copyOp(e,r),e.opcode=""}else t.copyOp(n,r),n.opcode=""},t.applyToAttribution=function(e,n,r){var o=t.unpack(e);return t.applyZip(n,0,o.ops,0,function(e,n,o){return t._slicerZipperFunc(e,n,o,r)})},t.mutateAttributionLines=function(e,n,r){function o(){return d&&d.hasNext()||f.hasMore()}function i(e){if((!d||!d.hasNext())&&f.hasMore()){var n=f.removeLines(1);d=t.opIterator(n)}d&&d.hasNext()?d.next(e):e.opcode=""}function a(e){p||(p=t.mergingOpAssembler()),p.append(e),e.lines>0&&(t.assert(1==e.lines,"Can't have op.lines of ",e.lines," in attribution lines"),f.insert(p.toString(),1),p=null)}for(var s=t.unpack(e),u=t.opIterator(s.ops),l=s.charBank,c=0,f=t.textLinesMutator(n),d=null,p=null,h=t.newOp(),m=t.newOp(),v=t.newOp();(h.opcode||u.hasNext()||m.opcode||o())&&(!h.opcode&&u.hasNext()&&u.next(h),h.opcode||m.opcode||p||d&&d.hasNext());)if(!("="==h.opcode&&h.lines>0)||h.attribs||m.opcode||p||d&&d.hasNext())if("+"==h.opcode){if(h.lines>1){var y=l.indexOf("\n",c)+1-c;t.copyOp(h,v),h.chars-=y,h.lines--,v.lines=1,v.chars=y}else t.copyOp(h,v),h.opcode="";a(v),c+=v.chars,v.opcode=""}else!m.opcode&&o()&&i(m),t._slicerZipperFunc(m,h,v,r),v.opcode&&(a(v),v.opcode="");else f.skipLines(h.lines),h.opcode="";t.assert(!p,"line assembler not finished"),f.close()},t.joinAttributionLines=function(e){for(var n=t.mergingOpAssembler(),r=0;r<e.length;r++)for(var o=e[r],i=t.opIterator(o);i.hasNext();)n.append(i.next());return n.toString()},t.splitAttributionLines=function(e,n){function r(e){i.append(e),e.lines>0&&(a.push(i.toString()),i.clear()),s+=e.chars}for(var o=t.opIterator(e),i=t.mergingOpAssembler(),a=[],s=0;o.hasNext();){for(var u=o.next(),l=u.chars,c=u.lines;c>1;){var f=n.indexOf("\n",s)+1;t.assert(f>0,"newlineEnd <= 0 in splitAttributionLines"),u.chars=f-s,u.lines=1,r(u),l-=u.chars,c-=u.lines}1==c&&(u.chars=l,u.lines=1),r(u)}return a},t.splitTextLines=function(e){return e.match(/[^\n]*(?:\n|[^\n]$)/g)},t.compose=function(e,n,r){var o=t.unpack(e),i=t.unpack(n),a=o.oldLen,s=o.newLen;t.assert(s==i.oldLen,"mismatched composition of two changesets");var u=i.newLen,l=t.stringIterator(o.charBank),c=t.stringIterator(i.charBank),f=t.stringAssembler(),d=t.applyZip(o.ops,0,i.ops,0,function(e,n,o){var i=e.opcode,a=n.opcode;"+"==i&&"-"==a&&l.skip(Math.min(e.chars,n.chars)),t._slicerZipperFunc(e,n,o,r),"+"==o.opcode&&("+"==a?f.append(c.take(o.chars)):f.append(l.take(o.chars)))});return t.pack(a,u,d,f.toString())},t.attributeTester=function(e,n){function r(e){return!1}if(!n)return r;var o=n.putAttrib(e,!0);if(o<0)return r;var i=new RegExp("\\*"+t.numToString(o)+"(?!\\w)");return function(e){return i.test(e)}},t.identity=function(e){return t.pack(e,e,"","")},t.makeSplice=function(e,n,r,o,i,a){var s=e.length;n>=s&&(n=s-1),r>e.length-n-1&&(r=e.length-n-1);var u=e.substring(n,n+r),l=s+o.length-u.length,c=t.smartOpAssembler();return c.appendOpWithText("=",e.substring(0,n)),c.appendOpWithText("-",u),c.appendOpWithText("+",o,i,a),c.endDocument(),t.pack(s,l,c.toString(),o)},t.toSplices=function(e){for(var n=t.unpack(e),r=[],o=0,i=t.opIterator(n.ops),a=t.stringIterator(n.charBank),s=!1;i.hasNext();){var u=i.next();"="==u.opcode?(o+=u.chars,s=!1):(s||(r.push([o,o,""]),s=!0),"-"==u.opcode?(o+=u.chars,r[r.length-1][1]+=u.chars):"+"==u.opcode&&(r[r.length-1][2]+=a.take(u.chars)))}return r},t.characterRangeFollow=function(e,n,r,o){for(var i=n,a=r,s=t.toSplices(e),u=0,l=0;l<s.length;l++){var c=s[l],f=c[0]+u,d=c[1]+u,p=c[2].length,h=p-(d-f);f<=i&&d>=a?i=a=o?f:f+p:d<=i?(i+=h,a+=h):f>=a||(f>=i&&d<=a?a+=h:d<a?(i=f+p,a+=h):a=f),u+=h}return[i,a]},t.moveOpsToNewPool=function(e,n,r){var o=e.indexOf("$");o<0&&(o=e.length);var i=e.substring(0,o),a=e.substring(o);return i.replace(/\*([0-9a-z]+)/g,function(e,o){var i=t.parseNum(o),a=n.getAttrib(i);a||t.error("Can't copy unknown attrib (reference attrib string to non-existant pool entry). Inconsistent attrib state!");var s=r.putAttrib(a);return"*"+t.numToString(s)})+a},t.makeAttribution=function(e){var n=t.smartOpAssembler();return n.appendOpWithText("+",e),n.toString()},t.eachAttribNumber=function(e,n){var r=e.indexOf("$");r<0&&(r=e.length),e.substring(0,r).replace(/\*([0-9a-z]+)/g,function(e,r){return n(t.parseNum(r)),""})},t.filterAttribNumbers=function(e,n){return t.mapAttribNumbers(e,n)},t.mapAttribNumbers=function(e,n){var r=e.indexOf("$");return r<0&&(r=e.length),e.substring(0,r).replace(/\*([0-9a-z]+)/g,function(e,r){var o=n(t.parseNum(r));return!0===o?e:"number"==typeof o?"*"+t.numToString(o):""})+e.substring(r)},t.makeAText=function(e,n){return{text:e,attribs:n||t.makeAttribution(e)}},t.applyToAText=function(e,n,r){return{text:t.applyToText(e,n.text),attribs:t.applyToAttribution(e,n.attribs,r)}},t.cloneAText=function(e){return{text:e.text,attribs:e.attribs}},t.copyAText=function(e,t){t.text=e.text,t.attribs=e.attribs},t.appendATextToAssembler=function(e,n){for(var r=t.opIterator(e.attribs),o=t.newOp();r.hasNext();)if(r.next(o),r.hasNext())n.append(o);else if(o.lines<=1)o.lines=0,--o.chars&&n.append(o);else{var i=e.text.lastIndexOf("\n",e.text.length-2)+1,a=e.text.length-i-1;o.lines--,o.chars-=a+1,n.append(o),o.lines=0,o.chars=a,o.chars&&n.append(o)}},t.prepareForWire=function(n,r){var o=new e;return{translated:t.moveOpsToNewPool(n,r,o),pool:o}},t.isIdentity=function(e){var n=t.unpack(e);return""==n.ops&&n.oldLen==n.newLen},t.opAttributeValue=function(e,n,r){return t.attribsAttributeValue(e.attribs,n,r)},t.attribsAttributeValue=function(e,n,r){var o="";return e&&t.eachAttribNumber(e,function(e){r.getAttribKey(e)==n&&(o=r.getAttribValue(e))}),o},t.builder=function(e){var n=t.smartOpAssembler(),r=t.newOp(),o=t.stringAssembler(),i={keep:function(e,o,a,s){return r.opcode="=",r.attribs=a&&t.makeAttribsString("=",a,s)||"",r.chars=e,r.lines=o||0,n.append(r),i},keepText:function(e,t,r){return n.appendOpWithText("=",e,t,r),i},insert:function(e,t,r){return n.appendOpWithText("+",e,t,r),o.append(e),i},remove:function(e,t){return r.opcode="-",r.attribs="",r.chars=e,r.lines=t||0,n.append(r),i},toString:function(){n.endDocument();var r=e+n.getLengthChange();return t.pack(e,r,n.toString(),o.toString())}};return i},t.makeAttribsString=function(e,n,r){if(!n)return"";if("string"==typeof n)return n;if(r&&n&&n.length){n.length>1&&(n=n.slice(),n.sort());for(var o=[],i=0;i<n.length;i++){var a=n[i];("="==e||"+"==e&&a[1])&&o.push("*"+t.numToString(r.putAttrib(a)))}return o.join("")}},t.subattribution=function(e,n,r){function o(){if(u.chars)for(;u.opcode&&(s.opcode||i.hasNext());)s.opcode||i.next(s),u.opcode&&s.opcode&&u.chars>=s.chars&&s.lines>0&&u.lines<=0&&u.lines++,t._slicerZipperFunc(s,u,l,null),l.opcode&&(a.append(l),l.opcode="")}var i=t.opIterator(e,0),a=t.smartOpAssembler(),s=t.newOp(),u=t.newOp(),l=t.newOp();if(u.opcode="-",u.chars=n,o(),void 0===r)for(s.opcode&&a.append(s);i.hasNext();)i.next(s),a.append(s);else u.opcode="=",u.chars=r-n,o();return a.toString()},t.inverse=function(e,n,r,o){function i(e){return n.get?n.get(e):n[e]}function a(e){return r.get?r.get(e):r[e]}function s(e,n){if(!h||f!=d){h=t.opIterator(a(d)),f=d;for(var r=0,o=!1;!o&&h.hasNext();)h.next(m),r+m.chars>=p?(m.chars-=p-r,o=!0):r+=m.chars}for(;e>0;){m.chars||h.hasNext()||(d++,p=0,f=d,m.chars=0,h=t.opIterator(a(d))),m.chars||h.next(m);var i=Math.min(e,m.chars);n(i,m.attribs,i==m.chars&&m.lines>0),e-=i,m.chars-=i,p+=i}m.chars||h.hasNext()||(d++,p=0)}function u(e,t){t?(d+=t,p=0):h&&f==d?s(e,function(){}):p+=e}function l(e){var n=0,r=t.stringAssembler(),o=i(d).substring(p);n+=o.length,r.append(o);for(var a=d+1;n<e;){var s=i(a);n+=s.length,r.append(s),a++}return r.toString().substring(0,e)}function c(e){var t={};return function(n){return t[n]||(t[n]=e(n)),t[n]}}for(var f,d=0,p=0,h=null,m=t.newOp("+"),v=t.unpack(e),y=t.opIterator(v.ops),g=t.builder(v.newLen),b=[],w=[];y.hasNext();){var _=y.next();if("="==_.opcode)if(_.attribs){b.length=0,w.length=0,t.eachAttribNumber(_.attribs,function(e){b.push(o.getAttribKey(e)),w.push(o.getAttribValue(e))});var k=c(function(e){for(var n=[],r=0;r<b.length;r++){var i=b[r],a=w[r],s=t.attribsAttributeValue(e,i,o);a!=s&&n.push([i,s])}return t.makeAttribsString("=",n,o)});s(_.chars,function(e,t,n){g.keep(e,n?1:0,k(t))})}else u(_.chars,_.lines),g.keep(_.chars,_.lines);else if("+"==_.opcode)g.remove(_.chars,_.lines);else if("-"==_.opcode){var E=l(_.chars),T=0;s(_.chars,function(e,t,n){g.insert(E.substr(T,e),t),T+=e})}}return t.checkRep(g.toString())},t.follow=function(e,n,r,o){var i=t.unpack(e),a=t.unpack(n),s=i.oldLen,u=a.oldLen;t.assert(s==u,"mismatched follow - cannot transform cs1 on top of cs2");var l=t.stringIterator(i.charBank),c=t.stringIterator(a.charBank),f=i.newLen,d=0,p=0,h=t.attributeTester(["insertorder","first"],o),m=t.applyZip(i.ops,0,a.ops,0,function(e,n,i){if("+"==e.opcode||"+"==n.opcode){var a;if("+"!=n.opcode)a=1;else if("+"!=e.opcode)a=2;else{var s=l.peek(1),u=c.peek(1),f=h(e.attribs),m=h(n.attribs);a=f&&!m?1:m&&!f?2:"\n"==s&&"\n"!=u?2:"\n"!=s&&"\n"==u?1:r?2:1}1==a?(l.skip(e.chars),i.opcode="=",i.lines=e.lines,i.chars=e.chars,i.attribs="",e.opcode=""):(c.skip(n.chars),t.copyOp(n,i),n.opcode="")}else"-"==e.opcode?n.opcode?e.chars<=n.chars?(n.chars-=e.chars,n.lines-=e.lines,e.opcode="",n.chars||(n.opcode="")):(e.chars-=n.chars,e.lines-=n.lines,n.opcode=""):e.opcode="":"-"==n.opcode?(t.copyOp(n,i),e.opcode?n.chars<=e.chars?(e.chars-=n.chars,e.lines-=n.lines,n.opcode="",e.chars||(e.opcode="")):(i.lines=e.lines,i.chars=e.chars,n.lines-=e.lines,n.chars-=e.chars,e.opcode=""):n.opcode=""):e.opcode?n.opcode?(i.opcode="=",i.attribs=t.followAttributes(e.attribs,n.attribs,o),e.chars<=n.chars?(i.chars=e.chars,i.lines=e.lines,n.chars-=e.chars,n.lines-=e.lines,e.opcode="",n.chars||(n.opcode="")):(i.chars=n.chars,i.lines=n.lines,e.chars-=n.chars,e.lines-=n.lines,n.opcode="")):e.opcode="":(t.copyOp(n,i),n.opcode="");switch(i.opcode){case"=":d+=i.chars,p+=i.chars;break;case"-":d+=i.chars;break;case"+":p+=i.chars}});return p+=f-d,t.pack(f,p,m,a.charBank)},t.followAttributes=function(e,n,r){if(!n||!r)return"";if(!e)return n;var o=[];n.replace(/\*([0-9a-z]+)/g,function(e,n){return o.push(r.getAttrib(t.parseNum(n))),""}),e.replace(/\*([0-9a-z]+)/g,function(e,n){for(var i=r.getAttrib(t.parseNum(n)),a=0;a<o.length;a++){var s=o[a];if(i[0]==s[0]){i[1]<=s[1]&&o.splice(a,1);break}}return""});for(var i=t.stringAssembler(),a=0;a<o.length;a++)i.append("*"),i.append(t.numToString(r.putAttrib(o[a])));return i.toString()},t.composeWithDeletions=function(e,n,r){var o=t.unpack(e),i=t.unpack(n),a=o.oldLen,s=o.newLen;t.assert(s==i.oldLen,"mismatched composition of two changesets");var u=i.newLen,l=t.stringIterator(o.charBank),c=t.stringIterator(i.charBank),f=t.stringAssembler(),d=t.applyZip(o.ops,0,i.ops,0,function(e,n,o){var i=e.opcode,a=n.opcode;"+"==i&&"-"==a&&l.skip(Math.min(e.chars,n.chars)),t._slicerZipperFuncWithDeletions(e,n,o,r),"+"==o.opcode&&("+"==a?f.append(c.take(o.chars)):f.append(l.take(o.chars)))});return t.pack(a,u,d,f.toString())},t._slicerZipperFuncWithDeletions=function(e,n,r,o){if("-"==e.opcode)t.copyOp(e,r),e.opcode="";else if(e.opcode)switch(n.opcode){case"-":n.chars<=e.chars?("="==e.opcode&&(r.opcode="-",r.chars=n.chars,r.lines=n.lines,r.attribs=n.attribs),e.chars-=n.chars,e.lines-=n.lines,n.opcode="",e.chars||(e.opcode="")):("="==e.opcode&&(r.opcode="-",r.chars=e.chars,r.lines=e.lines,r.attribs=n.attribs),n.chars-=e.chars,n.lines-=e.lines,e.opcode="");break;case"+":t.copyOp(n,r),n.opcode="";break;case"=":n.chars<=e.chars?(r.opcode=e.opcode,r.chars=n.chars,r.lines=n.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),n.opcode="",e.chars-=n.chars,e.lines-=n.lines,e.chars||(e.opcode="")):(r.opcode=e.opcode,r.chars=e.chars,r.lines=e.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),e.opcode="",n.chars-=e.chars,n.lines-=e.lines);break;case"":t.copyOp(e,r),e.opcode=""}else t.copyOp(n,r),n.opcode=""},t}.apply(t,r))&&(e.exports=o)},function(e,t,n){var r=n(45),o=n(50),i=n(220),a=n(71),s="prototype",u=function(e,t,n){var l,c,f,d=e&u.F,p=e&u.G,h=e&u.S,m=e&u.P,v=e&u.B,y=e&u.W,g=p?o:o[t]||(o[t]={}),b=g[s],w=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(l in n)(c=!d&&w&&void 0!==w[l])&&l in g||(f=c?w[l]:n[l],g[l]=p&&"function"!=typeof w[l]?n[l]:v&&c?i(f,r):y&&w[l]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):m&&"function"==typeof f?i(Function.call,f):f,m&&((g.virtual||(g.virtual={}))[l]=f,e&u.R&&b&&!b[l]&&a(b,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(51),o=n(102);e.exports=n(52)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(224),o=n(158);e.exports=function(e){return r(o(e))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(84),i=r(o);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){var r=n(161)("wks"),o=n(104),i=n(45).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(385),i=r(o),a=n(389),s=r(a),u=n(84),l=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(443);t.clone=function(e){return"object"!=typeof e||null===e?e:i(e,function(e){if("object"==typeof e&&e&&"function"==typeof e.clone)return e.clone()})},t.freeze=function(e){return e},t.isFrozen=function(e){return!1};var a=function(){function e(t){r(this,e),this.ops=t,this.index=0,this.offset=0}return o(e,[{key:"hasNext",value:function(){return this.peekLength()<1/0}},{key:"next",value:function(e){e||(e=1/0);var t=this.ops[this.index];if(!t)return null;var n=this.offset,r=t.length;if(0===n&&r===e)return this.index+=1,t;e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e;var o={action:t.action,attributes:t.attributes};switch(t.action){case"remove":o.data=e;break;case"retain":if("number"==typeof t.data)o.data=e;else{if("string"==typeof t.data)throw new Error("retain with a string is not allowed");o.data=t.data}break;case"insert":"string"==typeof t.data?o.data=t.data.substr(n,e):"number"==typeof t.data?o.data=e:o.data=t.data}return t.createInstance(o)}},{key:"peekLength",value:function(){var e=this.ops[this.index];return e?e.length-this.offset:1/0}},{key:"peekAction",value:function(){var e=this.ops[this.index];return e?e.action:"retain"}}]),e}();t.OperatorIterator=a,t.parsePosition=function(e){for(var t=0,n=0,r=0;r<e.length;r++){var o=e[r].charCodeAt(0);if(o>=65&&o<=90)n=26*n+o-64;else{if(!(o>=48&&o<=57))throw new Error("Invalid cell position "+e);t=10*t+o-48}}return{row:t-1,col:n-1}},t.stringifyPosition=function(e,t){if(!(e>=0&&t>=0))throw new Error("Invalid cell position "+e+":"+t);for(var n=t+1,r="";n>0;){var o=(n-1)%26;r=String.fromCharCode(65+o)+r,n=Math.floor((n-o)/26)}return r+(e+1)}},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e,t,n){var r=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){o<16&&(t[r+o++]=l[e])});o<16;)t[r+o++]=0;return t}function o(e,t){var n=t||0,r=u;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function i(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:p,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:m+1,l=s-h+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||s>h)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,m=u,p=a,s+=122192928e5;var c=(1e4*(268435455&s)+u)%4294967296;i[r++]=c>>>24&255,i[r++]=c>>>16&255,i[r++]=c>>>8&255,i[r++]=255&c;var f=s/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var v=e.node||d,y=0;y<6;y++)i[r+y]=v[y];return t||o(i)}function a(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[r+a]=i[a];return t||o(i)}for(var s=n(450),u=[],l={},c=0;c<256;c++)u[c]=(c+256).toString(16).substr(1),l[u[c]]=c;var f=s(),d=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),h=0,m=0,v=a;v.v1=i,v.v4=a,v.parse=r,v.unparse=o,e.exports=v},function(e,t,n){var r=n(72);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(230),i=r(o);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(363),i=r(o),a=n(375),s=r(a),u="function"==typeof s.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(i.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){"use strict";function r(e,t){return e+t}function o(e,t,n){var r=n;{if("object"!==(void 0===t?"undefined":C(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):x(e,t);for(var i in t)t.hasOwnProperty(i)&&o(e,i,t[i])}}function i(e){var t=void 0,n=void 0,r=void 0,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=t.left,r=t.top,n-=a.clientLeft||i.clientLeft||0,r-=a.clientTop||i.clientTop||0,{left:n,top:r}}function a(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var o=e.document;n=o.documentElement[r],"number"!=typeof n&&(n=o.body[r])}return n}function s(e){return a(e)}function u(e){return a(e,!0)}function l(e){var t=i(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=s(r),t.top+=u(r),t}function c(e,t,n){var r=n,o="",i=e.ownerDocument;return r=r||i.defaultView.getComputedStyle(e,null),r&&(o=r.getPropertyValue(t)||r[t]),o}function f(e,t){var n=e[N]&&e[N][t];if(P.test(n)&&!j.test(t)){var r=e.style,o=r[A],i=e[M][A];e[M][A]=e[N][A],r[A]="fontSize"===t?"1em":n||0,n=r.pixelLeft+I,r[A]=o,e[M][A]=i}return""===n?"auto":n}function d(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function p(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function h(e,t,n){"static"===o(e,"position")&&(e.style.position="relative");var i=-999,a=-999,s=d("left",n),u=d("top",n),c=p(s),f=p(u);"left"!==s&&(i=999),"top"!==u&&(a=999);var h="",m=l(e);("left"in t||"top"in t)&&(h=(0,S.getTransitionProperty)(e)||"",(0,S.setTransitionProperty)(e,"none")),"left"in t&&(e.style[c]="",e.style[s]=i+"px"),"top"in t&&(e.style[f]="",e.style[u]=a+"px");var v=l(e),y={};for(var g in t)if(t.hasOwnProperty(g)){var b=d(g,n),w="left"===g?i:a,_=m[g]-v[g];y[b]=b===g?w+_:w-_}o(e,y),r(e.offsetTop,e.offsetLeft),("left"in t||"top"in t)&&(0,S.setTransitionProperty)(e,h);var k={};for(var E in t)if(t.hasOwnProperty(E)){var T=d(E,n),C=t[E]-m[E];k[T]=E===T?y[T]+C:y[T]-C}o(e,k)}function m(e,t){var n=l(e),r=(0,S.getTransformXY)(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),(0,S.setTransformXY)(e,o)}function v(e,t,n){n.useCssRight||n.useCssBottom?h(e,t,n):n.useCssTransform&&(0,S.getTransformName)()in document.body.style?m(e,t,n):h(e,t,n)}function y(e,t){for(var n=0;n<e.length;n++)t(e[n])}function g(e){return"border-box"===x(e,"boxSizing")}function b(e,t,n){var r={},o=e.style,i=void 0;for(i in t)t.hasOwnProperty(i)&&(r[i]=o[i],o[i]=t[i]);n.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=r[i])}function w(e,t,n){var r=0,o=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i++)if(o=t[i])for(a=0;a<n.length;a++){var s=void 0;s="border"===o?""+o+n[a]+"Width":o+n[a],r+=parseFloat(x(e,s))||0}return r}function _(e){return null!==e&&void 0!==e&&e==e.window}function k(e,t,n){var r=n;if(_(e))return"width"===t?B.viewportWidth(e):B.viewportHeight(e);if(9===e.nodeType)return"width"===t?B.docWidth(e):B.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?e.offsetWidth:e.offsetHeight,a=x(e),s=g(e,a),u=0;(null===i||void 0===i||i<=0)&&(i=void 0,u=x(e,t),(null===u||void 0===u||Number(u)<0)&&(u=e.style[t]||0),u=parseFloat(u)||0),void 0===r&&(r=s?U:L);var l=void 0!==i||s,c=i||u;return r===L?l?c-w(e,["border","padding"],o,a):u:l?r===U?c:c+(r===R?-w(e,["border"],o,a):w(e,["margin"],o,a)):u+w(e,D.slice(r),o,a)}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=void 0,o=t[0];return 0!==o.offsetWidth?r=k.apply(void 0,t):b(o,W,function(){r=k.apply(void 0,t)}),r}function T(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Object.defineProperty(t,"__esModule",{value:!0});var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=n(395),O=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,x=void 0,P=new RegExp("^("+O+")(?!px)[a-z%]+$","i"),j=/^(top|right|bottom|left)$/,N="currentStyle",M="runtimeStyle",A="left",I="px";"undefined"!=typeof window&&(x=window.getComputedStyle?c:f);var D=["margin","border","padding"],L=-1,R=2,U=1,F=0,B={};y(["Width","Height"],function(e){B["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],B["viewport"+e](n))},B["viewport"+e]=function(t){var n="client"+e,r=t.document,o=r.body,i=r.documentElement,a=i[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}});var W={position:"absolute",visibility:"hidden",display:"block"};y(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);B["outer"+t]=function(t,n){return t&&E(t,e,n?F:U)};var n="width"===e?["Left","Right"]:["Top","Bottom"];B[e]=function(t,r){var i=r;if(void 0===i)return t&&E(t,e,L);if(t){var a=x(t);return g(t)&&(i+=w(t,["padding","border"],n,a)),o(t,e,i)}}});var V={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t,n){if(void 0===t)return l(e);v(e,t,n||{})},isWindow:_,each:y,css:o,clone:function(e){var t=void 0,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:T,getWindowScrollLeft:function(e){return s(e)},getWindowScrollTop:function(e){return u(e)},merge:function(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)V.mix(e,n[o]);return e},viewportWidth:0,viewportHeight:0};T(V,B),t.default=V,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}var i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,t){for(var n,o,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)a.call(n,c)&&(u[c]=n[c]);if(i){o=i(n);for(var f=0;f<o.length;f++)s.call(n,o[f])&&(u[o[f]]=n[o[f]])}}return u}},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(67),l=i(u),c=n(254),f=i(c);window.$=r;var d=function(e,t){var n=this;if(e=e||this.events)return o.forEach(e,function(e,r){var o=r.split(" "),i=o.shift(),a=void 0;o.length&&(a=o.join(" ")),a&&n.view.off(i,a),n.view.on(i,a,function(r){return(t||n)[e].call(n,r,this)})})},p=function(){function e(t,n){if(a(this,e),t instanceof r?this.$view=t:(this.ele=t,this.$view=r(t)),this.$view&&this.$view.length){var o=n||{};for(var i in o)this[i]=o[i];this.init&&this.init(t,n),this.initEvents(),this.initPendingAction()}}return s(e,[{key:"$",value:function(e){return this.$view.find(e)}},{key:"initPendingAction",value:function(){var e=void 0,t=void 0;if((e=this.pendingAction)&&(t=window.cow.pendingAction)){if(o.isEqual(e.data,t))return e.fn.call(this,e.data.url,o.assign({},e.data.data,{_code_trigger:1}));console.warn("pendingAction not match.")}}},{key:"registerPendingAction",value:function(e,t,n){return e&&t&&n?this.pendingAction={data:{url:e,data:t},fn:n}:void console.warn("url/data/fn cant be empty when registerPendingAction.")}},{key:"initEvents",value:function(e,t){var n=this,r=void 0;if(e=e||this.eventMap||{},t=t||this.domEvents||{},!e)return void console.log(ele+" events bind error!");var o=function(e){var o=void 0,i=r.split(" "),a=i.shift();i.length&&(o=i.join(" ")),o&&"body"!==o&&"#innerdocbody"!==o&&n.$view.off(a,o),n.$view.on(a,o,function(r){if(t[e])return t[e].call(n,r,this);console.warn("cannot find dom event ",e)})};for(r in e){o(e[r])}}}]),e}();p.prototype.ajax={post:l.default.post,get:l.default.get,delete:l.default.delete},o.assignIn(p.prototype,f.default),t.default={bindEvents:d,DomModule:p},e.exports=t.default}).call(t,n(2),n(1))},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.forEach?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")}}},function(e,t){function n(e){return null!==e&&"object"==typeof e}e.exports=n},function(e,t,n){(function(t){var n,r,o;r=function(e){return e.replace(/[^\x00-\xff]/g,"xx")},o=function(e){return e.replace(/^[\uDC00-\uDFFF]|[\uD800-\uDBFF]$/,"")},n={},n.cutLength=function(e,n){var i,a,s,u,l,c,f,d,p,h,m,v,y;if(p=n||30,e=t.trim(e),r(e).length>p){if(i=e.split(" "),d=i[i.length-1],(f=r(d).length)>4){for(f=4,i=d.split("").reverse(),c=[],y=0,s=u=0,h=i.length;h>=0?u<=h:u>=h;s=h>=0?++u:--u){if(y+=r(i[s]).length,c.push(s>0?c[s-1]+i[s]:i[0]),y===f){d=c[s];break}if(y>f){d=c[s-1];break}}d=d.split("").reverse().join("")}for(p=p-f-3,s=l=m=parseInt(p/2),v=p;m<=v?l<=v:l>=v;s=m<=v?++l:--l){if((a=r(e.substring(0,s)).length)===p){e=o(e.substring(0,s))+"..."+o(d);break}if(a>p){e=o(e.substring(0,s-1))+"..."+o(d);break}}}return e},n.getSelectionPosition=function(){var e,t,n,r,o,i,a;return o=document.selection,o?"Control"!==o.type&&(r=o.createRange(),n=r.boundingLeft,i=r.boundingTop,a=r.boundingHeight):window.getSelection&&(o=window.getSelection(),o.rangeCount&&(r=o.getRangeAt(0).cloneRange(),r.getBoundingClientRect&&(e=r.getBoundingClientRect(),n=e.left,i=e.top,a=e.right-e.left,t=e.bottom-e.top))),{x:n,y:i,width:a,height:t}},n.getLineDom=function(e){var n,r;if(r=t("#innerdocbody")[0],!e||!t(e).parents("#innerdocbody")[0])return!1;for(;(n=e.parentNode)!==r;)e=n;return e},n.getSelection=function(){var e,t;return window.getSelection?(e=window.getSelection().toString(),t=window.getSelection()):document.getSelection?(e=document.getSelection(),t=document.getSelection()):document.selection&&(e=document.selection.createRange().text),{selection:t,string:e}},n.cutName=function(e,t){var n,r,o,i,a,s,u,l,c,f,d,p,h;if(null==e&&(e=""),e=e.replace(/&#39;/g,"'").replace(/&quot;/g,'"'),c=t||25,e.replace(/[^\x00-\xff]/g,"xx").length>c){if(n=e.split(" "),l=n[n.length-1],(u=l.replace(/[^\x00-\xff]/g,"xx").length)>4){for(u=4,n=l.split("").reverse(),s=[],h=0,o=i=0,f=n.length;f>=0?i<=f:i>=f;o=f>=0?++i:--i){if(h+=n[o].replace(/[^\x00-\xff]/g,"xx").length,s.push(o>0?s[o-1]+n[o]:n[0]),h===u){l=s[o];break}if(h>u){l=s[o-1];break}}l=l.split("").reverse().join("")}for(c=c-u-3,o=a=d=parseInt(c/2),p=c;d<=p?a<=p:a>=p;o=d<=p?++a:--a){if((r=e.substring(0,o).replace(/[^\x00-\xff]/g,"xx").length)===c){e=e.substring(0,o)+"..."+l;break}if(r>c){e=e.substring(0,o-1)+"..."+l;break}}}return e=e.replace(/'/g,"&#39;").replace(/"/g,"&quot;")},n.copyTextToClipboard=function(e){var t,n;n=document.createElement("textarea"),n.style.position="fixed",n.style.top=0,n.style.left=0,n.style.width="2em",n.style.height="2em",n.style.padding=0,n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",n.value=e,document.body.appendChild(n),n.select();try{t=document.execCommand("copy")}catch(e){t=!1}return document.body.removeChild(n),t},e.exports=n}).call(t,n(2))},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function o(e,t){return function(n){return e(t(n))}}function i(e,t){var n=D(e)||m(e)?r(e.length,String):[],o=n.length,i=!!o;for(var a in e)!t&&!P.call(e,a)||i&&("length"==a||f(a,o))||n.push(a);return n}function a(e,t,n){var r=e[t];P.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function s(e){if(!p(e))return M(e);var t=[];for(var n in Object(e))P.call(e,n)&&"constructor"!=n&&t.push(n);return t}function u(e,t){return t=A(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=A(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=a,n(e,this,s)}}function l(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;a(n,s,void 0===u?e[s]:u)}return n}function c(e){return u(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&d(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}function f(e,t){return!!(t=null==t?E:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function d(e,t,n){if(!w(n))return!1;var r=typeof t;return!!("number"==r?v(n)&&f(t,n.length):"string"==r&&t in n)&&h(n[t],e)}function p(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||x)}function h(e,t){return e===t||e!==e&&t!==t}function m(e){return y(e)&&P.call(e,"callee")&&(!N.call(e,"callee")||j.call(e)==T)}function v(e){return null!=e&&b(e.length)&&!g(e)}function y(e){return _(e)&&v(e)}function g(e){var t=w(e)?j.call(e):"";return t==C||t==S}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=E}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function k(e){return v(e)?i(e):s(e)}var E=9007199254740991,T="[object Arguments]",C="[object Function]",S="[object GeneratorFunction]",O=/^(?:0|[1-9]\d*)$/,x=Object.prototype,P=x.hasOwnProperty,j=x.toString,N=x.propertyIsEnumerable,M=o(Object.keys,Object),A=Math.max,I=!N.call({valueOf:1},"valueOf"),D=Array.isArray,L=c(function(e,t){if(I||p(t)||v(t))return void l(t,k(t),e);for(var n in t)P.call(t,n)&&a(e,n,t[n])});e.exports=L},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){var t=e[0].toString(),n=t[t.length-1];return s[t.slice(0,t.length-1)].unpack([n,e[1],e[2]])}var o=n(91),i=n(442);t.Attribute=n(171),t.Delta=n(108);var a={TableOperator:n(446),CellOperator:n(243),TextOperator:n(449),Operator:n(109)};o(t,a),t.pack=function(e){if("function"==typeof e.toJSON)return JSON.stringify(e);throw new Error("Only delta can be packed")},t.unpack=function(e){return t.Delta.unpack(JSON.parse(e))},t.print=function(e){e.print(!0)};var s=i(Object.keys(a),function(e,t){var n=a[t];return e[n.packId]=n,e},{});t.Delta.operatorUnpacker=r,Object.keys(a).forEach(function(e){a[e].operatorUnpacker=r});var u=n(78);t.parsePosition=u.parsePosition,t.stringifyPosition=u.stringifyPosition},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=o(s),l=n(23),c=o(l),f=function(){function e(){i(this,e),this.currentUser=window.cow.currentUser||{},this.elePool={},this.listen()}return a(e,[{key:"watch",value:function(e,t,n){this.elePool[e]={$target:t,filter:n}}},{key:"unwatch",value:function(e){delete this.elePool[e]}},{key:"refresh",value:function(e,t){var n=t?"addClass":"removeClass";for(var o in this.elePool){var i=this.elePool[o];if(!r.isFunction(i.filter))return;var a=i.filter.call(i.$target,e,t);a[n]&&a[n]("online")}}},{key:"format",value:function(e,t){var n=this;if(null==t&&(t="user_id"),r.isArray(e))return Array.from(e).map(function(e){return e.online=n.isOnline(e[t])});r.isObject(e)&&(e.online=this.isOnline(e[t]))}},{key:"isOnline",value:function(e){return c.default.get(e).online}},{key:"listen",value:function(){var e=this;return u.default.bind("userOnline",function(t){if(c.default.exists(t.user_id))return c.default.get(t.user_id).online=t.online,e.refresh(t.user_id,t.online)})}}]),e}();t.default=new f,e.exports=t.default}).call(t,n(1))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(10),o=n(185),i=n(187),a=n(188),s=n(189),u=n(97),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(190);e.exports=function(e){return new Promise(function(t,c){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(e.url)||(p=new window.XDomainRequest,h="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var v=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+l(v+":"+y)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[h]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?p.response:p.responseText,i={data:r,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:e,request:p};o(t,c,i),p=null}},p.onerror=function(){c(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=n(191),b=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),c(e),p=null)}),void 0===f&&(f=null),p.send(f)})}},function(e,t,n){"use strict";var r=n(186);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(276),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){function r(e,t){return new s(t).process(e)}var o,i=n(151),a=n(152),s=n(256);t=e.exports=r,t.FilterXSS=s;for(var u in i)t[u]=i[u];for(var u in a)t[u]=a[u];void 0!==(o=function(){return e.exports}.call(t,n,t,e))&&(e.exports=o),"undefined"!=typeof window&&(window.filterXSS=e.exports)},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(223),o=n(162);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};r.isTextModifyingKeyEvent=function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},r.isCharacterKey=function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigation.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){}function i(e,t,n){var r=t||"";return e.key||r+"item_"+n}function a(e,t){var n=-1;l.default.Children.forEach(e,function(e){n++,e&&e.type&&e.type.isMenuItemGroup?l.default.Children.forEach(e.props.children,function(e){n++,t(e,n)}):t(e,n)})}function s(e,t,n){e&&!n.find&&l.default.Children.forEach(e,function(e){if(!n.find&&e){var r=e.type;if(!r||!(r.isSubMenu||r.isMenuItem||r.isMenuItemGroup))return;-1!==t.indexOf(e.key)?n.find=!0:e.props.children&&s(e.props.children,t,n)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=o,t.getKeyFromChildrenIndex=i,t.loopMenuItem=a,t.loopMenuItemRecusively=s;var u=n(0),l=r(u)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(78),a=n(444),s=n(326),u=String.fromCharCode(0),l=n(171),c=n(445),f=function(){function e(t,n){if(r(this,e),this.ops=[],Array.isArray(t)){for(var o=0;o<t.length;o++)this.pushWithMutations(t[o]);n&&this.chopWithMutations()}else"function"==typeof t&&t(this);i.freeze(this)}return o(e,[{key:"freeze",value:function(){i.freeze(this.ops)}},{key:"createCleaner",value:function(){for(var t=[],n=0;n<this.ops.length;n++){var r=this.ops[n],o=r.createInstance({action:"remove",data:r.length});t.push(o)}return new e(t)}},{key:"clone",value:function(){return new e(this.ops.map(i.clone))}},{key:"toJSON",value:function(){return this.ops}},{key:"pack",value:function(){return this.ops.map(function(e){return e.pack()})}},{key:"isDocument",value:function(){for(var e=0;e<this.ops.length;e++)if("insert"!==this.ops[e].action)return!1;return!0}},{key:"isEmpty",value:function(){return 0===this.ops.length}},{key:"_genericPush",value:function(e,t){var n=e.length,r=e[n-1];if(r&&"remove"===r.action&&"insert"===t.action&&(n-=1,r=e[n-1]),!r)return e.unshift(t),e;var o=t.merge(r);return o?e[n-1]=o:n===e.length?e.push(t):e.splice(n,0,t),e}},{key:"push",value:function(t){if(!t.length)return this;var n=this.ops.slice(0);if(Array.isArray(t)){for(var r=!1,o=0;o<t.length;o++)t[o].length&&(r=!0,n=this._genericPush(n,t[o]));if(!r)return this}else n=this._genericPush(n,t);return new e(n)}},{key:"pushWithMutations",value:function(e){return e.length&&this._genericPush(this.ops,e),this}},{key:"concat",value:function(t){var n=this;return t.ops.length?this.ops.length?new e(function(e){e.ops=n.ops.slice(),e.pushWithMutations(t.ops[0]),t.ops.length>1&&(e.ops=e.ops.concat(t.ops.slice(1)))}):t:this}},{key:"_genericChop",value:function(e){for(;e.length&&e[e.length-1].isEmpty();)e.pop();return e}},{key:"chop",value:function(){return new e(this._genericChop(this.ops.slice(0)))}},{key:"chopWithMutations",value:function(){return this._genericChop(this.ops),this}},{key:"slice",value:function(t,n){t=t||0,"number"!=typeof n&&(n=1/0);for(var r=[],o=this.getIter(),i=0;i<n&&o.hasNext();){var a=void 0;i<t?a=o.next(t-i):(a=o.next(n-i),r.push(a)),i+=a.length}return new e(r)}},{key:"getIter",value:function(){return new i.OperatorIterator(this.ops)}},{key:"validate",value:function(){for(var e={},t=0;t<this.ops.length;t++){var n=this.ops[t];if(n&&"TableOperator"===n.name()){var r=n.getAttributes(),o=r.name;if(!o)continue;var i="$$"+o+"$$";if(e.hasOwnProperty(i))throw new Error("Duplicated table name found: "+o);e[i]=!0}}return this}},{key:"compose",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getIter(),o=t.getIter(),i=[];r.hasNext()||o.hasNext();)if("insert"===o.peekAction())i.push(o.next());else if("remove"===r.peekAction())i.push(r.next());else{var a=Math.min(r.peekLength(),o.peekLength()),s=r.next(a),u=o.next(a);u&&"retain"!==u.action?s&&"retain"!==s.action||i.push(u):s?u?i.push(s.compose(u,n)):i.push(s):i.push(u)}var l=new e(i,!0);return n||l.validate(),l}},{key:"composePosition",value:function(e){for(var t=this.getIter(),n=0;t.hasNext()&&n<=e;){var r=t.peekLength(),o=t.peekAction();switch(t.next(),o){case"remove":if(r>e-n)return null;e-=r;continue;case"insert":e+=r}n+=r}return e}},{key:"invert",value:function(t){for(var n=this.getIter(),r=t.getIter(),o=[];r.hasNext();)if("insert"===r.peekAction()){var i=r.next(),a=i.createInstance({action:"remove",data:i.length});o.push(a)}else{if(!n.hasNext())throw new Error(this.constructor.name+" should be smaller than document");var s=Math.min(n.peekLength(),r.peekLength()),u=n.next(s),l=r.next(s);if("insert"!==u.action)throw new Error("Only document can invert deltas");"retain"===l.action?o.push(u.invert(l)):o.push(u)}return new e(o,!0)}},{key:"invertPosition",value:function(e){for(var t=this.getIter(),n=0;t.hasNext()&&n<=e;){var r=t.peekLength(),o=t.peekAction();switch(t.next(),o){case"insert":if(r>e-n)return null;e-=r;continue;case"remove":e+=r}n+=r}return e}},{key:"transform",value:function(t,n){for(var r=this.getIter(),o=t.getIter(),i=[];o.hasNext();)if("insert"!==r.peekAction()||!n&&"insert"===o.peekAction())if("insert"===o.peekAction())i.push(o.next());else{var a=Math.min(r.peekLength(),o.peekLength()),s=r.next(a),u=o.next(a);if(s&&"remove"===s.action)continue;u&&"remove"===u.action?i.push(u):s?i.push(s.transform(u,n)):i.push(u)}else{var l=r.next();i.push(l.createInstance({action:"retain",data:l.length}))}return new e(i,!0)}},{key:"transformPosition",value:function(e,t){for(var n=this.getIter(),r=0;n.hasNext()&&r<=e;){var o=n.peekLength(),i=n.peekAction();switch(n.next(),i){case"remove":e-=Math.min(o,e-r);continue;case"insert":(r<e||!t)&&(e+=o)}r+=o}return e}},{key:"toString",value:function(){for(var e="",t=0;t<this.ops.length;t++){var n=this.ops[t];if("insert"!==n.action)throw new Error("toString() called on non-document");e+="string"==typeof n.data?n.data:u}return e}},{key:"diff",value:function(t,n){if(this.ops===t.ops)return new e;if(!this.ops.length){if(!t.isDocument())throw new Error("diff() called on non-document");return t}for(var r=c(this.ops[0].createInstance,this.ops[0]),o=[],i=a(this.toString(),t.toString(),n),u=this.getIter(),f=t.getIter(),d=0,p=i.length;d<p;d++)for(var h=i[d],m=h[1].length;m>0;){var v=0;switch(h[0]){case a.INSERT:v=Math.min(f.peekLength(),m),o.push(f.next(v));break;case a.DELETE:v=Math.min(m,u.peekLength()),u.next(v),o.push(r({action:"remove",data:v}));break;case a.EQUAL:v=Math.min(u.peekLength(),f.peekLength(),m);var y=u.next(v),g=f.next(v),b=y.skipDiff()&&g.skipDiff()&&y.name()===g.name()||s(y.data,g.data);b?o.push(r({action:"retain",data:v,attributes:l.diff(y.attributes,g.attributes)})):(o.push(g),o.push(r({action:"remove",data:v})))}m-=v}return new e(o,!0)}},{key:"print",value:function(e){console[e?"group":"groupCollapsed"]("Delta["+this.length+"] with "+this.ops.length+" operators"),this.ops.forEach(function(e){return e.print()}),console.groupEnd()}},{key:"length",get:function(){for(var e=0,t=0;t<this.ops.length;t++)e+=this.ops[t].length;return e}}],[{key:"unpack",value:function(e){var t=this;return new this(e.map(function(e){return t.operatorUnpacker(e)}))}}]),e}();f.packId=5,e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){"function"==typeof e.pack?e.print():"object"==typeof e?Object.keys(e).forEach(function(t){var n=e[t];console.groupCollapsed(t),o(n),console.groupEnd()}):console.log(e)}var i=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(108),u=n(78).clone,l=n(171),c=n(78),f=function(){function e(t){r(this,e),this.setWithMutations(t);var n="Operator"!==this.name()&&this.isGeneric(),o=n?this.toGeneric():this;return c.freeze(o),o}return a(e,[{key:"name",value:function(){return"Operator"}},{key:"skipDiff",value:function(){return!1}},{key:"isGeneric",value:function(){return"number"==typeof this.data}},{key:"toGeneric",value:function(){return new e({action:this.action,data:this.data,attributes:this.attributes})}},{key:"clone",value:function(){var e=this.createInstance(this);return e.data=u(e.data),e}},{key:"_genericSet",value:function(e){var t={action:this.action,data:this.data,attributes:this.attributes},n=!1,r=e.action;if(r&&r!==t.action){if(n=!0,"insert"!==r&&"retain"!==r&&"remove"!==r)throw new Error('Action "'+r+'" is invalid');t.action=r}var o=e.data;if(null!=o&&o!==t.data){if(n=!0,"remove"===t.action&&("number"!=typeof o||o<0))throw new Error("Expect the data of remove action to be a positive number, got "+o);t.data=o}if(null==t.data)throw new Error("Expect data to have a non-empty value, got "+t.data);var i=e.attributes;if(i){var a=typeof i;if("object"===a&&Object.keys(i).length){var s=l.pack(i);s&&t.attributes!==s&&(n=!0,t.attributes=s)}else"string"===a&&t.attributes!==i&&(n=!0,t.attributes=i)}return{changed:n,op:t}}},{key:"set",value:function(e){var t=this._genericSet(e),n=t.changed,r=t.op;return n?this.createInstance(r):this}},{key:"setWithMutations",value:function(e){var t=this._genericSet(e),n=t.op;return this.action=n.action,this.data=n.data,this.attributes=n.attributes,this}},{key:"createInstance",value:function(e){return new this.constructor(e)}},{key:"toJSON",value:function(){return this.pack()}},{key:"pack",value:function(){var e=void 0;switch(this.action){case"insert":e=0;break;case"remove":e=1;break;case"retain":e=2}var t="function"==typeof this.data.pack?this.data.pack():this.data,n=[Number(""+this.constructor.packId+e),t];return this.attributes&&n.push(this.attributes),n}},{key:"getEmbedObject",value:function(){throw new Error("#getEmbedObject() not implemented")}},{key:"isEmpty",value:function(){return"retain"===this.action&&!this.attributes&&"number"==typeof this.data}},{key:"getAttributes",value:function(){return l.unpack(this.attributes)}},{key:"merge",value:function(e){if(this.name()!==e.name())return!1;var t=typeof this.data;return!(this.action!==e.action||t!==typeof e.data||"number"!==t&&"string"!==t||this.attributes!==e.attributes)&&e.set({data:e.data+this.data})}},{key:"compose",value:function(e){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be composed");if(this.constructor.packId!==e.constructor.packId&&!this.isGeneric()&&!e.isGeneric())throw new Error('Failed to compose operators. Expect constructor "'+e.constructor.name+'" to equal "'+this.constructor.name+'"');var t=void 0;return t="function"==typeof this.data.compose&&e.data.constructor.packId===this.data.constructor.packId?this.data.compose(e.data):"number"==typeof this.data?e.data:this.data,(this.isGeneric()?e:this).createInstance({data:t,attributes:l.merge(this.attributes,e.attributes,"insert"!==this.action),action:this.action})}},{key:"invert",value:function(e){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.constructor.name+")");if("retain"!==e.action)throw new Error("Only retaining operator can be inverted");if(this.constructor.packId!==e.constructor.packId&&!e.isGeneric())throw new Error('Failed to invert operators. Expect constructor "'+e.constructor.name+'" to equal "'+this.constructor.name+'"');var t=void 0;return t="function"==typeof this.data.invert&&e.data.constructor.packId===this.data.constructor.packId?this.data.invert(e.data):"number"==typeof e.data?e.data:this.data,this.createInstance({data:t,attributes:l.invert(this.attributes,e.attributes),action:"retain"})}},{key:"transform",value:function(e,t){if("retain"!==this.action)throw new Error("Only retaining operator can transform other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be transformd");if(this.constructor.packId!==e.constructor.packId&&!e.isGeneric()&&!this.isGeneric())throw new Error('Failed to transform operators. Expect constructor "'+e.constructor.name+'" to equal "'+this.constructor.name+'"');return(this.isGeneric()?e:this).createInstance({attributes:l.transform(this.attributes,e.attributes,t),action:"retain",data:"function"==typeof this.data.transform&&"function"==typeof e.data.transform?this.data.transform(e.data,t):e.data})}},{key:"print",value:function(){var e=[this.action+": %c"+this.name(),"color: #51c6ed"];this.attributes&&(e[0]=e[0]+"%c, %O",e.push("font-weight: normal; color: #000",this.attributes.toJS())),console.groupCollapsed.apply(console,e),o(this.data),console.groupEnd()}},{key:"length",get:function(){switch(typeof this.data){case"number":return this.data;case"string":return this.data.length;default:return 1}}}],[{key:"unpack",value:function(e){var t=i(e,3),n=t[0],r=t[1],o=t[2];return new this({action:["insert","remove","retain"][n],data:Array.isArray(r)?s.unpack(r):r,attributes:o})}},{key:"insert",value:function(e,t){return new this({action:"insert",data:e,attributes:t})}},{key:"retain",value:function(e,t){return new this({action:"retain",data:e,attributes:t})}},{key:"remove",value:function(e){return new this({action:"remove",data:e})}}]),e}();f.packId=1,e.exports=f},function(e,t,n){e.exports=n(181)},function(e,t,n){var r,o;!function(i){var a=!1;if(r=i,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o),a=!0,e.exports=i(),a=!0,!a){var s=window.Cookies,u=window.Cookies=i();u.noConflict=function(){return window.Cookies=s,u}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},r.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}i.expires=i.expires?i.expires.toUTCString():"";try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(e){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var u="";for(var l in i)i[l]&&(u+="; "+l,!0!==i[l]&&(u+="="+i[l]));return document.cookie=t+"="+o+u}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var p=c[d].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var m=p[0].replace(f,decodeURIComponent);if(h=n.read?n.read(h,m):n(h,m)||h.replace(f,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===m){a=h;break}t||(a[m]=h)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t,n){n(113),n(116),n(127),n(131),e.exports=n(21).Promise},function(e,t,n){"use strict";var r=n(36),o={};o[n(3)("toStringTag")]="z",o+""!="[object z]"&&n(17)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){e.exports=!n(19)&&!n(56)(function(){return 7!=Object.defineProperty(n(38)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(18);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(117)(!0);n(58)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(39),o=n(40);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(119),o=n(57),i=n(43),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(12),o=n(120),i=n(63),a=n(42)("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n(38)("iframe"),r=i.length,o="<",a=">";for(t.style.display="none",n(64).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+a+"document.F=Object"+o+"/script"+a),e.close(),l=e.F;r--;)delete l[u][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(29),o=n(12),i=n(61);e.exports=n(19)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(20),o=n(41),i=n(123)(!1),a=n(42)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(41),o=n(62),i=n(124);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=o(u.length),c=i(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(39),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(20),o=n(126),i=n(42)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(40);e.exports=function(e){return Object(r(e))}},function(e,t,n){for(var r=n(128),o=n(61),i=n(17),a=n(6),s=n(15),u=n(22),l=n(3),c=l("iterator"),f=l("toStringTag"),d=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),m=0;m<h.length;m++){var v,y=h[m],g=p[y],b=a[y],w=b&&b.prototype;if(w&&(w[c]||s(w,c,d),w[f]||s(w,f,y),u[y]=d,g))for(v in r)w[v]||i(w,v,r[v],!0)}},function(e,t,n){"use strict";var r=n(129),o=n(130),i=n(22),a=n(41);e.exports=n(58)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(3)("unscopables"),o=Array.prototype;void 0==o[r]&&n(15)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,o,i,a,s=n(59),u=n(6),l=n(30),c=n(36),f=n(60),d=n(18),p=n(31),h=n(132),m=n(133),v=n(137),y=n(65).set,g=n(139)(),b=n(66),w=n(140),_=n(141),k="Promise",E=u.TypeError,T=u.process,C=u[k],S="process"==c(T),O=function(){},x=o=b.f,P=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(O,O)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),j=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(o||(2==e._h&&I(e),e._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===t.promise?u(E("Promise-chain cycle")):(i=j(n))?i.call(n,s,u):s(n)):u(r)}catch(e){u(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){y.call(u,function(){var t,n,r,o=e._v,i=A(e);if(i&&(t=w(function(){S?T.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=S||A(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){y.call(u,function(){var t;S?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(t=j(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,l(L,r,1),l(D,r,1))}catch(e){D.call(r,e)}}):(n._v=e,n._s=1,N(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};P||(C=function(e){h(this,C,k,"_h"),p(e),r.call(this);try{e(l(L,this,1),l(D,this,1))}catch(e){D.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(142)(C.prototype,{then:function(e,t){var n=x(v(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(L,e,1),this.reject=l(D,e,1)},b.f=x=function(e){return e===C||e===a?new i(e):o(e)}),f(f.G+f.W+f.F*!P,{Promise:C}),n(43)(C,k),n(143)(k),a=n(21)[k],f(f.S+f.F*!P,k,{reject:function(e){var t=x(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!P),k,{resolve:function(e){return _(s&&this===a?C:this,e)}}),f(f.S+f.F*!(P&&n(144)(function(e){C.all(e).catch(O)})),k,{all:function(e){var t=this,n=x(t),r=n.resolve,o=n.reject,i=w(function(){var n=[],i=0,a=1;m(e,!1,function(e){var s=i++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=x(t),r=n.reject,o=w(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(30),o=n(134),i=n(135),a=n(12),s=n(62),u=n(136),l={},c={},t=e.exports=function(e,t,n,f,d){var p,h,m,v,y=d?function(){return e}:u(e),g=r(n,f,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(p=s(e.length);p>b;b++)if((v=t?g(a(h=e[b])[0],h[1]):g(e[b]))===l||v===c)return v}else for(m=y.call(e);!(h=m.next()).done;)if((v=o(m,g,h.value,t))===l||v===c)return v};t.BREAK=l,t.RETURN=c},function(e,t,n){var r=n(12);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(22),o=n(3)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){var r=n(36),o=n(3)("iterator"),i=n(22);e.exports=n(21).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(12),o=n(31),i=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6),o=n(65).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(28)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve();n=function(){c.then(l)}}else n=function(){o.call(r,l)};else{var f=!0,d=document.createTextNode("");new i(l).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(12),o=n(18),i=n(66);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(17);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(6),o=n(29),i=n(19),a=n(3)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(3)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.isRNClientWithToken)()&&!window.cow.forClientDebug?f.push("./assets/styles/sm_lib.css").push("./assets/scripts/sheet.bundle"):(f.add("sm_lib.css").add("sheet.js"),(0,l.isMobile)()?f.add("m_sheet.css"):f.add("sheet.css")),f.load(function(){return window.Smsheet})}function i(){return f.add("sheetofflinesync.js").load(function(){return window.Smsheetofflinesync})}function a(){return(0,l.isMobile)()?f.add("m_sheet.css"):f.add("sheet.css"),f.load()}Object.defineProperty(t,"__esModule",{value:!0}),t.loadSheet=o,t.loadSheetOffline=i,t.loadOldSheet=a;var s=n(249),u=r(s),l=n(13),c=n(9),f=new u.default},function(e,t){function n(){var e={fileSize:10485760,attachmentCount:1/0,teamworkerCount:5},t=cow.currentUser;if(!t||!t.accountType)return e;var n=t.accountType;return"personal_free"===n||"enterprise_expired"===n?e:("personal_premium"===n?(e.fileSize=1/0,e.teamworkerCount=200):"enterprise_dingding"===n?e.teamworkerCount=1/0:"enterprise_standard"===n&&(t.team.seatMemberCount&&t.is_seat||!t.team.seatMemberCount)&&(e.fileSize=1/0,e.teamworkerCount=200),e)}var r=[{name:"企业版半价促销",order:0,enable:!0,withCookie:!1,recordTag:"shimo_anniversary",text:"石墨文档三周年，点击立享企业版限量优惠",targetLink:"https://shimo.im/doc/VimyO5cXFRkTBhfZ",openNewTab:!0,startDate:"2017/05/11 00:00:00",endDate:"2017/05/31 00:01:00",targetUser:{isEnterpriseOfficial:!1}},{name:"邀请好友免费获得石墨文档高级版",order:1,enable:!0,customize:"invite-friends",withCookie:!1,recordTag:"invite_bar",text:"邀请好友免费获得石墨文档高级版",targetUser:{personal:!0}}];e.exports={initLimition:n,notifications:r,recentPagesize:100}},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){switch(e.type){case"RECONNECT_READY":k.cooperators.length=0,a(e.clients);break;case"USER_ENTER":a([e.userInfo]);break;case"USER_LEAVE":s([e.userInfo])}}function a(e){e.forEach(function(e){if(e.id!==E.id){var t=m.default.find(k.cooperators,{id:e.id});t?t.count++:(e.color=f(e.id),e.count=1,k.cooperators.push(e),y.default.notify("avatar:add",e))}}),u()}function s(e){e.forEach(function(e){e.id!==E.id&&(m.default.remove(k.cooperators,function(t){return t.id===e.id&&--t.count<=0}),y.default.notify("avatar:remove",e))}),u()}function u(){y.default.notify("cooperation:updateAvatar",k.cooperators)}function l(e){return k.status="loading",k.currentFileGuid=e,k.cooperators=[],u(),new Promise(function(t,n){(0,g.getFileCollaborators)(e).then(function(e){k.status="loaded";var n=void 0!==e.code?e.data:e;for(c(n);k.messagePool.length;)i(k.messagePool.pop());t(n)},function(e){c([]),n(e)})})}function c(e){k.shareUserMaps={},(e||[]).forEach(function(e,t){e.index=t,k.shareUserMaps[e.id]=e}),k.shareUsers=m.default.sortBy(e,["index"],["asc"])}function f(e){return+e===E.id?T:k.shareUserMaps[e]?C[k.shareUserMaps[e].index%40]:cow.guideUsers&&cow.guideUsers.indexOf(e)>-1?C[cow.guideUsers.indexOf(e)%40]:"#41464b"}function d(e){return k.shareUserMaps[e]}function p(){return k.cooperators}Object.defineProperty(t,"__esModule",{value:!0});var h=n(1),m=o(h),v=n(4),y=o(v),g=n(26),b=n(9),w=r(b),_=w.isRNClient(),k={},E=cow.currentUser,T="#5292F7",C=["#A69ACA","#EC6E79","#F39801","#00A496","#FFD900","#674599","#83D4E7","#AF7C4F","#B8D200","#9D5B8B","#F15B1C","#41464B","#CD9F00","#47885E","#D7003B","#436EC9","#F897C7","#9C4109","#6E7A56","#83D4E7","#83609C","#F8DCDB","#E7C39C","#87B151","#9E0038","#B09FC9","#7DCFC8","#BEE7F0","#CD9F00","#CBAAC2","#F5C5C9","#CD8C28","#1A5A52","#9EB4E1","#406619","#CAB738","#F6C751","#8D699D","#613A14","#189DEC"];k.shareUserMaps={},k.shareUsers=[],k.cooperators=[],k.status="",k.currentFileGuid="",k.messagePool=[],y.default.attach("Invite",function(e){if("create"===e.db_event){var t=k.shareUsers.length?k.shareUsers.slice(-1)[0].index:-1;m.default.isArray(e.data)?e.data.forEach(function(e,n){e.index=t+n+1,k.shareUsers.push(e),k.shareUserMaps[e.id]=e}):e.data.collaborators?e.data.collaborators.forEach(function(e,n){e.index=t+n+1,k.shareUsers.push(e),k.shareUserMaps[e.id]=e}):(e.data.index=t+1,k.shareUserMaps[e.data.id]=e.data,k.shareUsers.push(e.data))}else if("delete"===e.db_event){var n=m.default.remove(k.shareUsers,function(t){return m.default.isArray(e.data)?e.data.some(function(e){return e.id===t.id}):e.data.collaborators?e.data.collaborators.some(function(e){return e.id===t.id}):e.data.id===t.id});n.forEach(function(e){k.shareUserMaps[e.id]&&delete k.shareUserMaps[e.id]})}}),y.default.attach("socket:message",function(e){if(cow.currentFile.guid===k.currentFileGuid||_)return"deny"===e.accessStatus?void y.default.notify("denyAccess"):void(["USER_ENTER","USER_LEAVE","SELECT","UNSELECT"].indexOf(e.data.type)>=0&&+e.data.userInfo.id===E.id||"COLLABROOM"===e.type&&("loaded"===k.status||_?i(e.data):"loading"===k.status&&k.messagePool.push(e.data)))}),t.default={reset:l,getColor:f,getShareUser:d,getCooperators:p},e.exports=t.default},function(e,t){e.exports=ReactRedux},function(e,t,n){function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?i(e):a(e)}var o=n(199),i=n(301),a=n(302),s="[object Null]",u="[object Undefined]",l=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e,t,n){}function o(e,t,n){}function i(e,t,n){}function a(e,t,n){}function s(e){return e.replace(k,"&lt;").replace(E,"&gt;")}function u(e,t,n){if(n=h(n),"href"===t||"src"===t){if("#"===(n=w.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"/"!==n[0])return""}else if("background"===t){if(j.lastIndex=0,j.test(n))return""}else if("style"===t){if(P.lastIndex=0,P.test(n))return"";if(N.lastIndex=0,N.test(n))return"";if(M.lastIndex=0,M.test(n)&&(j.lastIndex=0,j.test(n)))return""}return n=m(n)}function l(e){return e.replace(T,"&quot;")}function c(e){return e.replace(C,'"')}function f(e){return e.replace(S,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function d(e){return e.replace(O,":").replace(x," ")}function p(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return w.trim(t)}function h(e){return e=c(e),e=f(e),e=d(e),e=p(e)}function m(e){return e=l(e),e=s(e)}function v(){return""}function y(e,t){function n(t){return!!r||-1!==w.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),o=[],i=!1;return{onIgnoreTag:function(e,r,a){if(n(e)){if(a.isClosing){var s="[/removed]",u=a.position+s.length;return o.push([!1!==i?i:a.position,u]),i=!1,s}return i||(i=a.position),"[removed]"}return t(e,r,a)},remove:function(e){var t="",n=0;return w.forEach(o,function(r){t+=e.slice(n,r[0]),n=r[1]}),t+=e.slice(n)}}}function g(e){return e.replace(A,"")}function b(e){var t=e.split("");return t=t.filter(function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}),t.join("")}var w=n(88),_={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},k=/</g,E=/>/g,T=/"/g,C=/&quot;/g,S=/&#([a-zA-Z0-9]*);?/gim,O=/&colon;?/gim,x=/&newline;?/gim,P=/\/\*|\*\//gm,j=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,N=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,M=/u\s*r\s*l\s*\(.*/gi,A=/<!--[\s\S]*?-->/g;t.whiteList=_,t.onTag=r,t.onIgnoreTag=o,t.onTagAttr=i,t.onIgnoreTagAttr=a,t.safeAttrValue=u,t.escapeHtml=s,t.escapeQuote=l,t.unescapeQuote=c,t.escapeHtmlEntities=f,t.escapeDangerHtml5Entities=d,t.clearNonPrintableCharacter=p,t.friendlyAttrValue=h,t.escapeAttrValue=m,t.onIgnoreTagStripAll=v,t.StripTagBody=y,t.stripCommentTag=g,t.stripBlankChar=b},function(e,t,n){function r(e){var t=e.indexOf(" ");if(-1===t)var n=e.slice(1,-1);else var n=e.slice(1,t+1);return n=s.trim(n).toLowerCase(),"/"===n[0]&&(n=n.slice(1)),"/"===n[n.length-1]&&(n=n.slice(0,-1)),n}function o(e){return"</"===e.slice(0,2)}function i(e,t,n){"user strict";var i="",a=0,s=!1,u=!1,l=0,c=e.length,f="",d="";for(l=0;l<c;l++){var p=e.charAt(l);if(!1===s){if("<"===p){s=l;continue}}else if(!1===u){if("<"===p){i+=n(e.slice(a,l)),s=l,a=l;continue}if(">"===p){i+=n(e.slice(a,s)),f=e.slice(s,l+1),d=r(f),i+=t(s,i.length,d,f,o(f)),a=l+1,s=!1;continue}if('"'===p||"'"===p){u=p;continue}}else if(p===u){u=!1;continue}}return a<e.length&&(i+=n(e.substr(a))),i}function a(e,t){"user strict";function n(e,n){e=s.trim(e),e=e.replace(u,"").toLowerCase(),e.length<1||o.push(t(e,n||""))}for(var r=0,o=[],i=!1,a=e.length,l=0;l<a;l++){var c,f=e.charAt(l);if(!1!==i||"="!==f)if(!1===i||l!==r||'"'!==f&&"'"!==f)" "!==f||(c=s.trim(e.slice(r,l)),!1===i?n(c):n(i,c),i=!1,r=l+1);else{var d=e.indexOf(f,l+1);if(-1===d)break;c=s.trim(e.slice(r+1,d)),n(i,c),i=!1,l=d,r=l+1}else i=e.slice(r,l),r=l+1}return r<e.length&&(!1===i?n(e.slice(r)):n(i,e.slice(r))),s.trim(o.join(" "))}var s=n(88),u=/[^a-zA-Z0-9_:\.\-]/gim;t.parseTag=i,t.parseAttr=a},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return c(cow.currentUser,e)}function i(e){if(u(e)||l(e)){if(e.team_role&&"creator"===e.team_role)return!0}else if(e.isOwner)return!0;return!1}function a(e){if(u(e)||l(e)){if(e.team_role&&"member"===e.team_role)return!0}else if(!i(e))return!0;return!1}function s(e){return!(!u(e)&&!l(e)||!e.team_role||"admin"!==e.team_role)}function u(e){return e.accountType&&("enterprise_standard"===e.accountType||"enterprise_expired"===e.accountType)}function l(e){return e.accountType&&"enterprise_dingding"===e.accountType}function c(e,t){return e.id&&t.id&&e.id===t.id||e.email&&t.email&&e.email===t.email}function f(e,t){return!!i(e)||!(!s(e)||i(t)||s(t))}function d(e,t){var n=[];if(!e||!/^[\w-@\.\u4E00-\u9FFF]+$/.test(e))return n;if(e=e.toLowerCase(),t)if(e.match(/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*\.)+[a-z]{2,6})$/i)){var r=new RegExp("^"+e);k.default.each(t,function(e){r.test(e.email||"")&&n.push(e)})}else k.default.each(t,function(t){if(t.name_pinyin&&!(t.id<0)){if(!A[t.id]){if(!t.name_pinyin||t.id<0)return;var r=t.name_pinyin.split("|");A[t.id]={name:t.name,firstLetters:r[0],fullPinyin:r[1],fullPinyinS:r[1].replace(/\'/g,""),emailPrefix:(null!==t.email?t.email.split("@")[0]:void 0)||"",emailFull:t.email||""}}var o=A[t.id],i=o.name.toLowerCase().indexOf(e)+1,a=o.firstLetters.toLowerCase().indexOf(e)+1,s=o.fullPinyin.toLowerCase().indexOf("'"+e)+1,u=o.emailPrefix.toLowerCase().indexOf(e)+1,l=o.emailFull.toLowerCase().indexOf(e)+1,c=o.fullPinyinS.toLowerCase().indexOf(e)+1,f=k.default.min([i,20*a,20*s,20*u,1e4*l,1e3*c].filter(function(e){return e>0}));void 0!==f&&t.status>-1&&n.push({weight:f,user:t})}}),n=n.sort(function(e,t){return e.weight-t.weight}).map(function(e){return e.user});return n}function p(e){var t="/api/getUserInfo?email="+e;return(0,E.ajaxGet)(t)}function h(e,t){return new Promise(function(n,r){if(0===e.length)return void n();var o={file_id:t,users:[]};e.forEach(function(e){var t="number"==typeof e.id?e.id:e.email;o.users.push(t)}),(0,E.ajaxPost)("/api/invite",o).then(function(e){if(0===e.code&&e.data.success){var t=[];e.data.detail.forEach(function(e){void 0!==e.user&&t.push(e.user)}),n(t)}else r(new Error("failed to invite users"))},function(){r(new Error("failed to invite users"))})})}function m(){return(0,E.ajaxGet)("/api/share/recent_contact")}function v(e){return new Promise(function(t,n){(0,E.ajaxGet)("/smapi/teams/mine/members",e).then(function(e){0===e.code?t(e.data||[]):n(e)},function(e){n(e)})})}function y(e,t){var n={guid:e,user_id:t};return new Promise(function(e,t){(0,E.ajaxPost)("/api/share/delete",n).then(function(n){0===n.code?e(n):t(new Error("failed to delete share for user"))},function(e){t(e)})})}function g(){return new Promise(function(e,t){(0,E.ajaxGet)("/smapi/teams/mine/permissions").then(function(n){if(0===n.code){var r=cow.currentUser.team_role;e({share:(n.data.share||[]).indexOf(r)>-1,invite:(n.data.invite||[]).indexOf(r)>-1,setAdmin:(n.data.setAdmin||[]).indexOf(r)>-1})}else t(new Error(n.message))},function(e){t(e)})})}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(n,r){(0,E.ajaxGet)("/smapi/users/email?email="+e).then(function(e){if(0===e.code)n(w({},e.data,{requestId:t}));else{var o=new Error(e.message);o.requestId=t,r(o)}},function(e){e.requestId=t,r(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=n(1),k=r(_),E=n(7),T=function(e){var t=e.accountType;return"personal_free"===(void 0===t?"":t)},C=function(e){var t=e.accountType;return"personal_premium"===(void 0===t?"":t)},S=function(e){var t=e.accountType;return/^enterprise/.test(void 0===t?"":t)},O=function(e){var t=e.accountType,n=void 0===t?"":t,r=e.isOfficial,o=void 0!==r&&r;return"enterprise_expired"===n&&!o},x=function(e){var t=e.accountType,n=void 0===t?"":t,r=e.isOfficial,o=void 0!==r&&r;return"enterprise_expired"===n&&o},P=function(e){var t=e.isOfficial;return!(void 0!==t&&t)},j=function(e){var t=e.team;return!!(void 0===t?{}:t).dingtalkCorp},N=function(e){var t=e.accountType,n=void 0===t?"":t,r=e.isExpired;return!(void 0===r||!r)||/expired/.test(n)},M=function(e){var t=e.team,n=void 0===t?{}:t,r=e.is_seat,o=void 0===r?0:r;return 0===n.seatMemberCount||o>0},A={};t.default={isSelf:o,isSameUser:c,isCreator:i,isMember:a,isAdmin:s,isEnterpriseStandard:u,isEnterpriseDingding:l,hasPermissionRemoveUserFromTeam:f,searchByKeyword:d,getUserInfoByEmail:p,addNewShareUsers:h,getRecentMember:m,getTeamMembers:v,deleteShareUser:y,getMyPermission:g,searchByEmail:b,isPersonalFree:T,isPersonalPremium:C,isEnterpriseTrialExpried:O,isEnterprisePayingExpried:x,isEnterprise:S,isTrial:P,isOriginatedFromDingtalk:j,isExpired:N,isOnSeat:M},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=void 0;switch(e){case 2:t="新表格";break;case 3:t="老表格";break;case 4:t="新文档";break;case 5:t="老文档"}return t}function a(e){var t=void 0;switch(e){case 2:t="newSheetOps";break;case 3:t="oldSheetOps";break;case 4:t="newDocOps";break;case 5:t="oldDocOps"}return t}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(488),l=r(u),c=n(204),f=r(c),d=n(1),p=r(d),h=function(){function e(){o(this,e);var t=/[&?]trackDebug/.test(location.search);l.default.init({show_log:t||!1,server_url:"https://postdsc.shimo.im/sa",web_url:"https://shence.shimo.im/",heatmap_url:"https://static.sensorsdata.cn/sdk/1.9.7/heatmap.min.js",heatmap:{clickmap:"default",loadTimeout:3e3},use_app_track:!0}),this.trackMaps={},l.default.clearAllRegister({});var n=p.default.get(window.cow,"currentUser.teamId")||0,r=p.default.get(window.cow,"currentUser.id"),i=!!(r<0);l.default.setProfile({enterpriseId:n,anonymous:i});var a=p.default.get(window.cow,"readonly");a&&l.default.registerPage({readonly:a})}return s(e,[{key:"autoTrack",value:function(){var e=p.default.get(window.cow,"currentUser.id");l.default.login(e),l.default.quick("autoTrack")}},{key:"autoTrackSinglePage",value:function(){l.default.quick("autoTrackSinglePage")}},{key:"import",value:function(e){e&&(this.trackMaps=p.default.assign({},this.trackMaps,e))}},{key:"track",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){(0,f.default)(e,t);var r=a(e),o=i(e),s=this.trackMaps[t]||t;l.default.track(r,{moduleName:o,opsName:this.trackMaps[s]||s,opsSuccessed:n})}}},{key:"loadingStatusTrack",value:function(e,t,n){var r=p.default.get(window.cow,"currentFile.guid");l.default.track("loadingStatus",{moduleName:i(e),loadTime:t,fileID:r,fileLoadSucessed:n})}},{key:"syncStatusTrack",value:function(e,t,n){var r=p.default.get(window.cow,"currentFile.guid");l.default.track("syncStatus",{fileType:i(e),type:t,status:n,fileID:r})}},{key:"exportTrack",value:function(e,t,n){var r=p.default.get(window.cow,"currentFile.guid");l.default.track("export",{fileType:i(e),fileFormat:t,fileUrl:r,exportSucessed:n})}},{key:"copyPasteTrack",value:function(e,t,n){l.default.track("copyPaste",{fileType:i(e),pasteTime:t,pasteSuccessed:n})}},{key:"editErrorTrack",value:function(e,t){l.default.track("editError",{fileType:i(e),errorType:t})}},{key:"editTrack",value:function(e){var t=p.default.get(window.cow,"currentFile.guid");this.editingGuid!==t&&(this.editingGuid=t,l.default.track("edit",{fileType:i(e),fileID:t}))}}]),e}();e.exports=new h},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ACTION_TYPE_ADD_MEMBER=t.ACTION_TYPE_UPLOAD_EXCEED_10M=t.ACTION_TYPE_ADD_COLLAB=t.ACTION_TYPE_CREATE_OR_MOVE_IN_OR_COPY=void 0;var i=n(0),a=r(i),s=n(153),u=r(s),l=n(47),c=r(l),f=n(203),d="create_or_move_in_or_copy",p="add_collaborator",h="upload_exceed_10m",m="off_seat",v="expired",y="trial_expired",g="personal_free",b="add_member",w="add_member_expired",_="add_member_trial_expired",k=function(){e(".shimo-modal-overlay").trigger("click")},E=function(e){var t,n,r,i,s;return s={},o(s,d,(t={},o(t,m,{title:"操作失败",description:"您是非席位成员，不能在超过5人协作的文件夹内创建／移入文件，请联系企业创建者将您设置为<b>席位成员</b>",buttons:[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]}),o(t,v,{title:"操作失败",description:'\n        <div>您的企业版已到期，不能在超过5人协作的文件夹内创建／移入文件，续费企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"续费企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(t,y,{title:"操作失败",description:'\n        <div>您的试用已到期，不能在超过5人协作的文件夹内创建／移入文件，升级企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"升级企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(t,g,{title:"操作失败",content:a.default.createElement("div",null,a.default.createElement("div",null,"基础版账号不能在超过5人协作的文件夹内创建／移入文件，升级高级版无此限制"),a.default.createElement("a",{className:"need-to-hack-the-confirm-wrap btn btn-link",onClick:function(){return(0,f.renderInviteFriendsModal)(e)}},"免费升级高级版")),buttons:[{type:"link-button",buttonLabel:"购买高级版",href:"/payment",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),t)),o(s,p,(n={},o(n,m,{title:"操作失败",description:"您是非席位成员，协作上限为 5人，请联系企业创建者将您设置为<b>席位成员</b>",buttons:[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]}),o(n,v,{title:"操作失败",description:'\n        <div>您的企业版已到期，协作上限为 5人，续费企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"续费企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(n,y,{title:"操作失败",description:'\n        <div>您的试用已到期，协作上限为 5人，升级企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"升级企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(n,g,{title:"操作失败",content:a.default.createElement("div",null,a.default.createElement("div",null,"基础版账号的协作上限为 5人，升级高级版无此限制"),a.default.createElement("a",{className:"need-to-hack-the-confirm-wrap btn btn-link",onClick:function(){return(0,f.renderInviteFriendsModal)(e)}},"免费升级高级版")),buttons:[{type:"link-button",buttonLabel:"购买高级版",href:"/payment",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),n)),o(s,h,(r={},o(r,m,{title:"操作失败",description:"您是非席位成员，单图片／附件体积上限为 10M，请联系企业创建者将您设置为<b>席位成员</b>",buttons:[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]}),o(r,v,{title:"操作失败",description:'\n        <div>您的企业版已到期，单图片／附件体积上限为 10M，续费企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"续费企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(r,y,{title:"操作失败",description:'\n        <div>您的试用已到期，单图片／附件体积上限为 10M，升级企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"升级企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(r,g,{title:"操作失败",content:a.default.createElement("div",null,a.default.createElement("div",null,"基础版账号单图片／附件体积上限为 10M，升级高级版无此限制"),a.default.createElement("a",{className:"need-to-hack-the-confirm-wrap btn btn-link",onClick:function(){return(0,f.renderInviteFriendsModal)(e)}},"免费升级高级版")),buttons:[{type:"link-button",buttonLabel:"购买高级版",href:"/payment",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),r)),o(s,b,(i={},o(i,w,{title:"操作失败",description:'\n        <div>您的试用已到期，升级企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"升级企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),o(i,_,{title:"操作失败",description:'\n        <div>您的企业版已到期，续费企业版无此限制</div>\n        <a class="btn btn-link" target="_blank" href="/pricing">了解更多企业版特权</a>\n      ',buttons:[{type:"link-button",buttonLabel:"续费企业版",href:"/enterprise/billing",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]}),i)),s},T=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments[2]);return e===d&&t>5},C=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return e===p&&t>4},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.cow.currentUser,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.cow.currentFile,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.cow.currentFile.collaboratorCount||0,o=!0,i="";return(T(n,t,r)||C(n,t,r)||n===h)&&(u.default.isPersonalFree(e)?(o=!1,i=g):u.default.isEnterprise(e)&&!u.default.isOriginatedFromDingtalk(e)&&(u.default.isExpired(e)?u.default.isTrial(e)?(o=!1,i=y):(o=!1,i=v):u.default.isOnSeat(e)||(o=!1,i=m))),n===h&&(u.default.isEnterpriseDingding(e)||u.default.isEnterprise(e)&&u.default.isOriginatedFromDingtalk(e)&&!u.default.isOnSeat(e)&&(o=!1,i=m)),n===b&&u.default.isEnterprise(e)&&u.default.isExpired(e)&&(u.default.isTrial(e)?(o=!1,i=w):(o=!1,i=_)),o||(k(),(0,c.default)(E(e)[n][i])),o};t.default=S,t.ACTION_TYPE_CREATE_OR_MOVE_IN_OR_COPY=d,t.ACTION_TYPE_ADD_COLLAB=p,t.ACTION_TYPE_UPLOAD_EXCEED_10M=h,t.ACTION_TYPE_ADD_MEMBER=b}).call(t,n(2))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e,t){if((0,r.isDingtalkPc)()&&(window.location.url=e),e&&t){var n=window.cow.childWindows[t];(0,r.isIE)()||(0,r.isFireFox)()?window.cow.childWindows[t]=window.open(e):!n||n.closed?window.cow.childWindows[t]=window.open(e,t):n.focus()}else e&&window.open(e)},i=function(e){if(e&&e.guid){var t=e.guid,n=e.type,r={"-3":"sheet","-2":"docs","-1":"spreadsheet",0:"doc",1:"folder"},i="/"+r[n]+"/"+t+(1!=+e.type&&cow.inviteCode?"?r="+cow.inviteCode:"");o(i,t)}},a=function(e){var t=e.match(/(folder|doc|docs|spreadsheet|sheet)\/([0-9a-zA-Z]{16})/),n="";t&&3===t.length&&(n=t[2]),o(e,n)};t.default={openFile:i,openLink:a},e.exports=t.default},function(e,t,n){var r=n(72);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(161)("keys"),o=n(104);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(45),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t,n){var r=n(81),o=n(368),i=n(162),a=n(160)("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n(222)("iframe"),r=i.length,o="<",a=">";for(t.style.display="none",n(369).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+a+"document.F=Object"+o+"/script"+a),e.close(),l=e.F;r--;)delete l[u][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(51).f,o=n(53),i=n(76)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){t.f=n(76)},function(e,t,n){var r=n(45),o=n(50),i=n(164),a=n(168),s=n(51).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(230),i=r(o);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=[{name:"color"},{name:"background"},{name:"font-size"},{name:"width"},{name:"height"},{name:"rowspan"},{name:"colspan"},{name:"align",values:["left","center","right","justify"]},{name:"bold",values:[!1,!0]},{name:"italic",values:[!1,!0]},{name:"underline",values:[!1,!0]},{name:"vertical",values:["top","middle","bottom"]},{name:"strike",values:[!1,!0]},{name:"wrap",values:["text-wrap","text-no-wrap"]},{name:"fixedRowsTop"},{name:"fixedColumnsLeft"},{name:"link"},{name:"format",values:["normal","0,0","0,0.00","0%","0.00%","0.00E+00","(0,0)","(0,0.00)","¥0,0","¥0,0.00","$0,0","$0,0.00","YYYY/MM/DD","YYYY-MM-DD","HH:mm:ss","YYYY/MM/DD HH:mm:ss","¥ (#,##0)","¥ (#,##0.00)","@"]},{name:"formula"},{name:"filter"},{name:"border-top"},{name:"border-right"},{name:"border-bottom"},{name:"border-left"},{name:"line"},{name:"guid"},{name:"author"},{name:"size"},{name:"list"},{name:"layout",values:["embed","block"]},{name:"margin",values:["none","small","medium","large"]},{name:"font",values:["serif","monospace","microsoftyahei","simsun","kaiti","simhei","fangsong","droid","source","arial"]},{name:"header"},{name:"indent"},{name:"comment"},{name:"comment-block"},{name:"code-block",values:[!0]}],i="|",a=":",s=o.reduce(function(e,t,n){return t.index=n,e[t.name]=t,e},{});e.exports={pack:function(e){if("object"==typeof e&&null!==e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(void 0!==r){var o=s[n];o&&(n=o.index,o.values&&null!==r&&-1===(r=o.values.indexOf(r)))||t.push(null===r?n:n+a+JSON.stringify("string"==typeof r?encodeURIComponent(r):r))}}return t.sort().join(i)}},unpack:function(e){if("string"!=typeof e)return{};for(var t={},n=e.split(i),s=0;s<n.length;s++){var u=n[s].split(a),l=r(u,2),c=l[0],f=l[1],d=o[c];if(f){f=JSON.parse(f);var p=typeof f;"string"===p&&(f=decodeURIComponent(f)),d&&(c=d.name,d.values&&"number"===p&&void 0!==d.values[f]&&(f=d.values[f]))}else d&&(c=d.name),f=null;t[c]=f}return t},merge:function(e,t,n){if(n&&!e)return t;if(!t)return e;e=this.unpack(e),t=this.unpack(t);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r],n||null!==e[r]||delete e[r]);return this.pack(e)},invert:function(e,t){if(t){if(!e)return t.split(i).map(function(e){var t=e.indexOf(a);return-1===t?e:e.slice(0,t)}).join(i);e=this.unpack(e),t=this.unpack(t);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?t[n]=e[n]:t[n]=null);return this.pack(t)}},transform:function(e,t,n){if(n)return t;if(t){if(!e)return t;e=this.unpack(e),t=this.unpack(t);for(var r in t)t.hasOwnProperty(r)&&void 0!==e[r]&&delete t[r];return this.pack(t)}},diff:function(e,t){if(!e)return t;e=this.unpack(e),t&&(t=this.unpack(t));for(var n={},r=!0,o=t?Object.keys(e).concat(Object.keys(t)):Object.keys(e),i=0;i<o.length;i++){var a=o[i],s=t?t[a]:void 0;e[a]!==s&&(r=!1,n[a]=void 0===s?null:s)}return r?void 0:this.pack(n)}}},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(8),f=o(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"init",value:function(){return this.$view=r("#confirm"),this.$head=this.$(".dialog-head"),this.$headSpan=this.$(".header-text"),this.$body=this.$(".dialog-body"),this.$foot=this.$(".dialog-foot"),this.$okBtn=this.$(".btn-ok"),this.$cancelBtn=this.$(".btn-cancel"),this.buttons=["ok","cancel"],this.modal=!1,this.reset()}},{key:"reset",value:function(){return this.headText="确认",this.bodyText="确认吗？",this.okText="确认",this.cancelText="取消",this.externalClass="",this.okCallback=null,this.cancelCallback=null,this.checkBox=null,this.checkBoxValue=!1}},{key:"show",value:function(e){if(this.$foot.empty(),this.okCallback=e.okCallback,this.cancelCallback=e.cancelCallback,this.headText=e.headText||this.headText,this.bodyText=e.bodyText||this.bodyText,this.okText=e.okText||this.okText,this.cancelText=e.cancelText||this.cancelText,this.externalClass=e.externalClass||this.externalClass,this.modal=e.modal||!1,this.buttons=e.buttons||["ok","cancel"],e.checkBox&&(this.checkBox=e.checkBox,this.checkBoxValue=e.checkBoxValue||!1),"object"===u(this.buttons[0])?(this.$okBtn.hide(),this.$cancelBtn.hide(),this.createFoot()):(this.$foot.append('<div class="btn btn-ok">确认</div><div class="btn btn-cancel">取消</div>'),this.$okBtn=this.$(".btn-ok"),this.$cancelBtn=this.$(".btn-cancel"),-1===this.buttons.indexOf("ok")?this.$okBtn.hide():this.$okBtn.show(),-1===this.buttons.indexOf("cancel")?this.$cancelBtn.hide():this.$cancelBtn.show(),this.$okBtn.text(this.okText),this.$cancelBtn.text(this.cancelText)),this.$headSpan.text(this.headText),this.$body.html(this.bodyText),this.checkBox){var t=this.checkBoxValue?"active":"";this.$body.append('<div class="confirm-checkbox '+t+'">'+this.checkBox+"</div>")}return this.$view.addClass(this.externalClass).show()}},{key:"createFoot",value:function(){var e=this,t=r();if(this.buttons.forEach(function(n){var o=n.type||"button",i=n.target||"_blank",a=n.href||"",s="custom-confirm-btn "+(n.customClass||""),u=n.label||n.buttonLabel||"",l=!!n.closeAfterClick,c="function"==typeof n.onClick?n.onClick:function(){},f=r();"button"===o?f=r(document.createElement("div")):"link-button"===o&&(f=r(document.createElement("a")),f.attr({href:a,target:i})),f.addClass(n.class||s),f.text(u);var d=function(t,n){return function(r){if(t(r),n)return e.hide(),r.stopPropagation()}}(c,l);f.on("click",d),t.push(f[0])}),t.length>0)return this.$foot.append(t)}},{key:"hide",value:function(){return this.$view.removeClass(this.externalClass).hide(),this.reset()}}],[{key:"initClass",value:function(){this.prototype.eventMap={"click .btn-ok":"clickOK","click .btn-cancel":"clickCancel","click .dialog":"clickSelf","click .confirm-close":"close","click .confirm-checkbox":"changeCheckBox",click:"click"},this.prototype.domEvents={clickOK:function(e){if(!r(e.target).hasClass("custom-confirm-btn"))return"function"==typeof this.okCallback&&this.okCallback({checkBoxValue:this.checkBoxValue}),this.hide(),e.stopPropagation()},clickCancel:function(e){if(!r(e.target).hasClass("custom-confirm-btn"))return"function"==typeof this.cancelCallback&&this.cancelCallback(),this.hide(),e.stopPropagation()},click:function(e){if(!this.modal)return"function"==typeof this.cancelCallback&&this.cancelCallback(),this.hide(),e.stopPropagation()},clickSelf:function(e){return e.stopPropagation()},changeCheckBox:function(e){return this.checkBoxValue=!this.checkBoxValue,r(".confirm-checkbox").toggleClass("active")},close:function(e){return this.hide()}}}}]),t}(f.default.DomModule);d.initClass(),t.default=new d("#confirm"),e.exports=t.default}).call(t,n(2))},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(87),s=(i(a),function(){var e=r(".dropdown, .dropdown-item"),t=r(".dropdown-btn");e.removeClass("active fixed"),t.removeClass("active"),e.parent(".thumbnail")&&e.parent(".thumbnail").removeClass("active"),r(".dropdown-menu").removeClass("active"),r(".custom-show .custom-box-status").removeClass("box-status"),r("#custom-submit-btn").removeClass("disable").text("提交")});r("html").off().on("click",function(e){e.target.id.indexOf("global-zeroclipboard")>-1||s()});var u=function(e){return o.assignIn(e.prototype,{isOpen:!0,open:function(e){this.$view.addClass("active"),this.isOpen=!0,e&&e.call(this)},close:function(e){this.$view.removeClass("active"),this.isOpen=!1,e&&e.call(this)},toggleOpen:function(e){var t=this.$view.hasClass("active");s(),t||this.$view.addClass("active"),this.isOpen=this.$view.hasClass("active"),e&&e.call(this)}}),e};t.default={clearDropdown:s,dropdownable:u},e.exports=t.default}).call(t,n(2),n(1))},function(e,t,n){(function(t){e.exports=function(e,n,r,o,i){if("Script error."!==e&&i){var a={msg:e,url:window.location.href,error_name:i.name,error_message:i.message,error_stack:i.stack,error_file:n},s=JSON.stringify(a);window._lastJSErrorString!==s&&t.post("/api/log/jserror",a,function(){}),window._lastJSErrorString=s}}}).call(t,n(2))},,function(e,t,n){(function(t){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=o(["","' upload canceled !!"],["","' upload canceled !!"]),u=n(1),l=r(u),c=n(259),f=r(c),d=n(13),p=n(7),h=n(146),m=r(h),v=n(48);e.exports=function(){function e(t){var n=this;i(this,e),this.url=t.url,this._origin=t._origin,this.server=t.server,this.fileQueue=t.fileQueue,this.wechatUploadImage=t.wechatUploadImage,this.maxSize=t.maxSize||m.default.initLimition().fileSize,this.limitExtensions="boolean"!=typeof t.limitExtensions||t.limitExtensions,this.allowedExtensions=t.allowedExtensions||["png","gif","jpg","jpeg"],this.allowedExtensions=this.allowedExtensions.join(",").toLowerCase().split(","),["url","fileQueue"].forEach(function(e){n[e]||console.log(e+" must be assigned")}),this.onSelect=t.onSelect||function(){return!0},this.onValidationError=t.onValidationError||function(){},this.onSubmit=t.onSubmit||function(){},this.onUploadBegin=t.onUploadBegin||function(e,t,n){return n()},this.onUploadComplete=t.onUploadComplete||function(){},this.onUploadError=t.onUploadError||function(){},this.onUploadProgress=t.onUploadProgress||function(){},this.onWechatUploadComplete=t.onWechatUploadComplete||function(){},this.onUploadFromWechat=t.onUploadFromWechat||function(){},this.isAvatar=!!t.isAvatar}return a(e,[{key:"createOpacityFormInside",value:function(e,n){var r=this,o=t(e);n=t.extend({},n);var i=n.width||o.width(),a=n.height||o.height(),s=n.isMultiple||!1,u=n.title||"",c=n.accept||"*";t(e).find("input[type=file]").remove();var f="ajax-upload-id-"+(new Date).getTime(),h=void 0;h=t((0,d.isWechat)()?'<input data-title="'+u+'" type="button" id="'+f+'" class="toolbar-upload-file-input" name="files[]" />':'<input data-title="'+u+'" type="file" accept="'+c+'" id="'+f+'" class="toolbar-upload-file-input" name="files[]" '+(s?"multiple":"")+"/>"),h.css({position:"absolute",cursor:"pointer",top:"0px",width:i,height:a,left:"0px","z-index":"100","font-size":"200px",opacity:"0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0",overflow:"hidden"}),o.css({position:"relative"});var m=this;(0,d.isWechat)()&&m.wechatUploadImage&&h.click(function(){m.wechatUploadImage(function(e){r.isAvatar&&m.onUploadFromWechat();var t="/api/upload/wechat"+(r.isAvatar?"?type=avatar":"");(0,p.ajaxPost)(t,{mediaId:e}).then(function(e){0===e.code?m.onWechatUploadComplete(e.data.data):m.onUploadError(e)}).catch(function(){m.onUploadError()})})}),h.change(function(e){var n=[];l.default.each(e.target.files,function(e){var t=(0,v.genGuid)("placeholder");r.onSelect(e,t)&&n.push({guid:t,type:"form",fields:{file:e}})}),r.uploadFiles(n),t(e.target).val("")}),h.prependTo(o)}},{key:"uploadFiles",value:function(e){var t=this,n=[],r=[],o=!1,i=!1,a=!1;e.forEach(function(e){var s=e.fields.file,u=void 0;u="blob"===e.type?e.filename||s.type.slice(6):s.name,t.isExtensionAllowed(u)?t.maxSize===1/0?s.size>=524288e3?a=!0:(t.onSubmit(s,e.guid),n.push(e),r.push(u)):s.size<=t.maxSize?(t.onSubmit(s,e.guid),n.push(e),r.push(u)):i=!0:o=!0}),o?this.onValidationError("typeInvalid"):i?this.onValidationError("sizeInvalid"):a&&this.onValidationError("maxSizeInvalid"),this.onUploadBegin(n,r,function(){var e=t.fileQueue.length>0;n.forEach(function(e){return t.fileQueue.push(e)}),e||t.uploadFiles1By1()})}},{key:"isExtensionAllowed",value:function(e){return!this.limitExtensions||l.default.includes(this.allowedExtensions,e.split(".").pop().toLowerCase())}},{key:"uploadFiles1By1",value:function(){var e=this;if(!l.default.isEmpty(this.fileQueue)){var t=this.fileQueue[0],n=t.guid,r=t.fields.file,o=void 0;o="blob"===t.type?t.filename||r.type.slice(6):r.name,t.abortUpload=function(n){t.xhr&&t.xhr.abort(),"function"!=typeof n&&(n=function(){console.log(s,t.guid)}),n(),e.fileQueue.shift(),e.uploadFiles1By1()},this.constructor.prepareUploadInfo().then(function(){var i=void 0,a=new f.default({accessToken:window.cow.accessToken,_origin:e._origin||""});a.getStoreType(r).then(function(s){i=s,a.getInfo({qs:{server:e.server||"qiniu",type:i},body:[o]}).then(function(s){var u=s[0];a.upload(t.fields.file,u,{onProgress:function(t){if(t.lengthComputable){var r=t.loaded/t.total,o=Math.floor(100*r);e.onUploadProgress(o,n)}}}).then(function(t){"attachments"===i&&(delete t.data.images,t.data.name=r.name||o,t.data.size=r.size),e.onUploadComplete(t,n),e.fileQueue.shift(),e.uploadFiles1By1()}).catch(function(t){e.onUploadError(t,n),e.fileQueue.shift(),e.uploadFiles1By1()})})})})}}}],[{key:"prepareUploadInfo",value:function(e){return window.cow.accessToken&&new Date-window.cow.accessTokenDate<=36e5?new Promise(function(e){e({accessToken:window.cow.accessToken})}):new Promise(function(t,n){(0,p.ajaxPost)("/api/upload/token",e||{}).then(function(e){0===e.code?(window.cow.accessToken=e.data.accessToken,window.cow.accessTokenDate=new Date,t(e.data)):n(e)}).catch(n)})}}]),e}()}).call(t,n(2))},function(e,t,n){var r,o;!function(i){r=[n(2)],void 0!==(o=function(e){return i(e)}.apply(t,r))&&(e.exports=o)}(function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:n[0]||""};if(o.browser&&(r[o.browser]=!0,r.version=o.version,r.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(r[o.platform]=!0),(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv||r.edge){var i="msie";o.browser=i,r[i]=!0}if(r.safari&&r.blackberry){var a="blackberry";o.browser=a,r[a]=!0}if(r.safari&&r.playbook){var s="playbook";o.browser=s,r[s]=!0}if(r.bb){var u="blackberry";o.browser=u,r[u]=!0}if(r.opr){var l="opera";o.browser=l,r[l]=!0}if(r.safari&&r.android){var c="android";o.browser=c,r[c]=!0}if(r.safari&&r.kindle){var f="kindle";o.browser=f,r[f]=!0}if(r.safari&&r.silk){var d="silk";o.browser=d,r[d]=!0}return r.name=o.browser,r.platform=o.platform,r}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser})},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(340),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){var r;void 0!==(r=function(){var e=function(){this.numToAttrib={},this.attribToNum={},this.nextNum=0};return e.prototype.putAttrib=function(e,t){var n=String(e);if(n in this.attribToNum)return this.attribToNum[n];if(t)return-1;var r=this.nextNum++;return this.attribToNum[n]=r,this.numToAttrib[r]=[String(e[0]||""),String(e[1]||"")],r},e.prototype.getAttrib=function(e){var t=this.numToAttrib[e];return t?[t[0],t[1]]:t},e.prototype.getAttribKey=function(e){var t=this.numToAttrib[e];return t?t[0]:""},e.prototype.getAttribValue=function(e){var t=this.numToAttrib[e];return t?t[1]:""},e.prototype.eachAttrib=function(e){for(var t in this.numToAttrib){var n=this.numToAttrib[t];e(n[0],n[1])}},e.prototype.toJsonable=function(){return{numToAttrib:this.numToAttrib,nextNum:this.nextNum}},e.prototype.fromJsonable=function(e){if(e){this.numToAttrib=e.numToAttrib,this.nextNum=e.nextNum,this.attribToNum={};for(var t in this.numToAttrib)this.attribToNum[String(this.numToAttrib[t])]=Number(t);return this}},e}.call(t,n,t,e))&&(e.exports=r)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(5),d=r(f);t.default=function(e){return function(t){function n(){o(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.checkClick=e.checkClick.bind(e),e.checkResize=e.checkResize.bind(e),e}return a(n,t),u(n,[{key:"componentDidMount",value:function(){this.bindClick(),this.bindResize()}},{key:"componentWillUnmount",value:function(){this.unbindClick(),this.unbindResize()}},{key:"isDescendant",value:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"checkClick",value:function(e){var t=d.default.findDOMNode(this),n=e.target,r=this.refs.composedComponent.componentClick;n!==t&&!this.isDescendant(t,n)&&document.documentElement.contains(n)&&"function"==typeof r&&r(e,t)}},{key:"checkResize",value:function(e){var t=this.refs.composedComponent.componentResize;"function"==typeof t&&t(e)}},{key:"bindClick",value:function(){document.addEventListener("mouseup",this.checkClick),document.addEventListener("touchend",this.checkClick)}},{key:"unbindClick",value:function(){document.removeEventListener("mouseup",this.checkClick),document.removeEventListener("touchend",this.checkClick)}},{key:"bindResize",value:function(){window.addEventListener("resize",this.checkResize)}},{key:"unbindResize",value:function(){window.removeEventListener("resize",this.checkResize)}},{key:"render",value:function(){return c.default.createElement(e,s({ref:"composedComponent"},this.props))}}]),n}(l.Component)},e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=new a(e),n=i(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(10),i=n(95),a=n(183),s=n(68),u=r(s);u.Axios=a,u.create=function(e){return r(o.merge(s,e))},u.Cancel=n(99),u.CancelToken=n(197),u.isCancel=n(98),u.all=function(e){return Promise.all(e)},u.spread=n(198),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(68),i=n(10),a=n(192),s=n(193),u=n(195),l=n(196);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase(),e.baseURL&&!u(e.url)&&(e.url=l(e.baseURL,e.url));var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(97);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(10);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}},function(e,t,n){"use strict";var r=n(10);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function o(e){for(var t,n,o=String(e),a="",s=0,u=i;o.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=o.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=o},function(e,t,n){"use strict";var r=n(10);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(10);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(10),i=n(194),a=n(98),s=n(68);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(99);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var r=n(100),o=r.Symbol;e.exports=o},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(t){var n=d.default.isString(t)?e(t):t;p.push(n)}function i(t){t.find("[data-time]").each(function(t){var n=e(t);return n.html(a(n.attr("data-time"),"1"===n.attr("full")))})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"/",i=new Date,a=+i/1e3,u=new Date(e),l=+new Date(e)/1e3,c=a-l;if(n){if(c<60)return"刚刚";if(c<3600)return parseInt(c/60,10)+"分钟前"}var f=new Date(i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" 00:00:00"),d=new Date(e),p=864e5,h=f-d+p,m=s(u.getHours())+":"+s(u.getMinutes());if(h>0&&h<=p)return r?"今天":"今天 "+m;if(h>p&&h<=2*p)return r?"昨天":"昨天 "+m;var v=""+(u.getMonth()+1)+o+u.getDate()+" "+m;return r&&(v=""+(u.getMonth()+1)+o+u.getDate()),(t||u.getFullYear()!==i.getFullYear())&&(v=""+u.getFullYear()+o+v),v}function s(e){return e<10?"0"+e:e}function u(e,t){var n=null;n=t?new Date(new Date(e).valueOf()+t):new Date(e);var r=new Date;return n.setHours(0,0,0,0)>=r.setHours(0,0,0,0)}function l(e){var t=864e5,n=0,r=[[]],o=function(e){switch(n){case 0:return u(e);case 1:return u(e,t);case 2:return u(e,7*t);case 3:return u(e,30*t);default:return!0}},i=function e(t){return o(t.lastUsedAt)?r[n].push(t):(n++,r[n]=[],e(t))};return d.default.forEach(e,i),r}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lastUsedAt",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={},o=[];d.default.forEach(e,function(e){var n=new Date(e[t]),o=n.getFullYear()+"/"+s(n.getMonth()+1)+"/"+s(n.getDate());r.hasOwnProperty(o)||(r[o]=[]),r[o].push(e)});for(var i in r)r.hasOwnProperty(i)&&o.push({timestamp:i,timeLabel:a(i,!1,!1,!0,"／"),files:r[i]});var u=n?"desc":"asc";return d.default.orderBy(o,["timestamp"],[u])}Object.defineProperty(t,"__esModule",{value:!0}),t.autoRefresh=o,t.format=a,t.sortByDate=l,t.sortByDay=c;var f=n(1),d=r(f),p=[];window.setInterval(function(){for(var e=0;e<p.length;e++){i(p[e])}},15e3)}).call(t,n(2))},function(e,t){e.exports=Redux},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.reducer=t.actions=t.ModalRoot=t.Modal=void 0;var i=n(547),a=o(i),s=n(548),u=o(s),l=n(466),c=r(l),f=n(549),d=o(f);t.Modal=u.default,t.ModalRoot=a.default,t.actions=c,t.reducer=d.default,t.register=i.register},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.renderInviteFriendsModal=void 0;var o=n(0),i=r(o),a=n(5),s=n(315),u=r(s);n(325),t.default=u.default;var l=void 0;t.renderInviteFriendsModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.cow.currentUser,t="invite-friends-modal-container";l=document.getElementById(t),l||(l=document.createElement("div"),l.id=t,document.body.appendChild(l)),(0,a.render)(i.default.createElement(u.default,{onClose:function(){return(0,a.unmountComponentAtNode)(l)},currentUser:e}),l)}},function(e,t,n){"use strict";function r(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function o(e,t){if(t){var n=[];for(var o in t)n.push(o+"="+t[o]);n.length>0&&(e+="?"+n.join("&"))}var i=r();i.onreadystatechange=function(){if(4===i.readyState)return i.responseText},i.open("GET",e,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send()}function i(){var e=window.navigator.userAgent.toLowerCase();return window.ActiveXObject||/firefox|Safari|Chrome/i.test(e)?0:/shimo-iphone-app/g.test(e)?1:/shimo-android-app/g.test(e)?2:/micromessenger/g.test(e)?3:/(ipad|iphone|ipod)/g.test(e)?4:/(android)/g.test(e)?5:/dingtalk/i.test(e)?6:7}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0;if(1!==String(e).length||4!==String(t).length)throw new Error("params is error, please check the parmas");if(window.cow&&cow.domain){if("shimo.im"!==cow.domain&&"shimo.run"!==cow.domain)return!1}else if("shimo.im"!==location.hostname&&"staging.shimo.run"!==location.hostname)return!1;if(!n.userId){if(!window.cow||!window.cow.currentUser)throw new Error("params is error, userId is required");n.userId=cow.currentUser.id}return n.fileId||window.cow&&window.cow.currentFile&&(n.fileId=cow.currentFile.guid),r="timing"===n.type?s+"/timing":s+"/increment",o(r,{name:""+e+u+t,uid:n.userId,fileId:n.fileId,value:n.value||1})}var s="https://statistics.shimo.im",u=i();e.exports=a},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(479),i=r(o),a=n(585),s=r(a);i.default.Timeago=s.default,t.default=i.default,e.exports=t.default},,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(451),i=r(o);i.default.configure({minimum:.6,easing:"linear",positionUsing:"",speed:250,trickle:!0,trickleRate:.01,trickleSpeed:150,showSpinner:!1,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div></div></div>'}),t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(281);var l=n(0),c=r(l),f=n(5),d=r(f),p=n(213),h=r(p),m=n(214),v=r(m),y=n(282),g=r(y),b=n(283),w=n(13),_=n(34),k=n(433),E=r(k),T=n(47),C=r(T),S=n(26),O=n(153),x=r(O),P=n(24),j=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedKeys:[],visible:!1},n.handleMenu=n.handleMenu.bind(n),n.handleClick=n.handleClick.bind(n),n.deleteFile=n.deleteFile.bind(n),n}return a(t,e),u(t,[{key:"report",value:function(e){"doc"===e?(0,b.docStatistic)():"sheet"===e&&(0,b.sheetStatistic)();var t=document.createElement("div"),n=function(){return document.body.removeChild(t)};document.body.appendChild(t),d.default.render(c.default.createElement(g.default,{close:n}),t)}},{key:"deleteFile",value:function(){var e=window.cow.currentFile;(0,S.updateFile)(e,{is_delete:1}).then(function(){location.href="/desktop"}).catch(function(e){x.default.isEnterpriseStandard(cow.currentUser)||x.default.isEnterpriseDingding(cow.currentUser)?(0,P.showAlert)({title:e.responseText||"删除失败",type:"error"}):(0,P.showAlert)({title:"删除失败",type:"error"})})}},{key:"deleteReportFile",value:function(){var e=window.cow.currentFile,t=_.FILE_ZH_TYPE_MAP[e.type.toString()];if((0,w.isMobile)()){var n=document.createElement("div"),r=function(){return c.default.unmountComponentAtNode(n)};d.default.render(c.default.createElement(E.default,{close:r,delete:this.deleteFile,label:t}),n),document.body.appendChild(n)}else{var o={title:"确认操作",buttons:[]},i={buttonLabel:"确认删除",customClass:"btn-error",closeAfterClick:!0,onClick:this.deleteFile},a={buttonLabel:"取消",customClass:"",closeAfterClick:!0};o.buttons=[i,a],o.description="确认删除"+t+"吗？<br />删除后，所有协作者都无法访问此"+t,(0,C.default)(o)}}},{key:"handleMenu",value:function(e){var t=e.key,n=(e.selectedKeys,cow.currentFile.type);if(this.setState({selectedKeys:["report"],visible:!this.state.visible}),"delete"===t)return void this.deleteReportFile();0===n||-2===n?this.report("doc"):-1!==n&&-3!==n||this.report("sheet")}},{key:"handleClick",value:function(){this.setState(s({},this.state,{visible:!this.state.visible}))}},{key:"render",value:function(){var e=cow.currentFile.type,t=0===e||-2===e?"举报文档":"举报表格",n="report";if(cow.currentFile&&cow.currentFile.permissions){cow.currentFile.permissions.manageable&&(n="delete",t=t.replace("举报","删除"))}var r=c.default.createElement(h.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this.handleMenu,onDeselect:this.handleMenu},c.default.createElement(p.Item,{key:n,className:"operations-noselect"},t)),o=this.props.targetOffsetY||0,i={points:["tr","br"],overlay:{adjustX:1,adjustY:1},offset:[10,10],targetOffset:[0,o]};return c.default.createElement(v.default,{className:(this.props.reportLoginClass||"")+" operations "+(this.state.visible?"btn-active":"inactive"),type:"primary",overlay:r,align:i,onClick:this.handleClick,children:c.default.createElement(N,null)})}}]),t}(l.Component);t.default=j;var N=function(){return c.default.createElement("span",{className:"options-icon-wrap"})};j.propTypes={reportLoginClass:l.PropTypes.string,targetOffsetY:l.PropTypes.number},e.exports=t.default},function(e,t,n){(function(r,o){var i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=[n(8),n(332),n(333),n(94),n(278)],void 0!==(a=function(e,t,n,i,a){return function(u){function l(){return l.__super__.constructor.apply(this,arguments)}return s(l,u),l.prototype.init=function(){var e;return e=this,this.$view.html(r.template(t)({})),this.inMention=!1,this.maxSearch=6,this.halfMaxSearch=.5*this.maxSearch,this.$resultListView=this.$view.children(".result-list"),this.$placeholder=this.$view.find(".placeholder"),this.docResultList=[],this.userResultList=[],this.allResultList=[],this.placeholderText="在此@同伴或者文档",this.$placeholder.text(this.placeholderText),this.$arrowUp=this.$view.find(">.arrow-up"),this.$arrowDown=this.$view.find(">.arrow-down"),this.docGuid=window.cow.currentFile.guid,this.fileId=window.cow.currentFile.id,this.start=r.debounce(function(e){return function(t){return e.search(t)}}(this),500),o("body").append('<div id="mention-pop-shadow" contenteditable="true"></div'),this.$shadow=o("#mention-pop-shadow"),o(document).on("mousedown",function(t){0===e.$view.has(o(t.target)).length&&e.cancel()})},l.prototype.currentTarget=void 0,l.prototype.currentKeyword="",l.prototype.currentNode=null,l.prototype.currentCursorPosition=0,l.prototype.timer=void 0,l.prototype.eventMap={"mouseenter .mention-result":"mouseEnterResult","click .mention-result":"clickResult","click .placeholder":"stopPropagation","click .down":"stopPropagation"},l.prototype.domEvents={mouseEnterResult:function(e){var t;t=o(e.target),t.hasClass("active")||(this.$resultListView.find("li").removeClass("active"),t.addClass("active"))},clickResult:function(e){return this.create(),e.stopPropagation()},stopPropagation:function(e){return e.stopPropagation()}},l.prototype.mentionList={doc:{},user:{}},l.prototype.mentionable=function(t){var n;return n=this,t instanceof o||(t=o(t)),t.off("click"),t.off("keyup"),t.on("click keyup",function(r){var o,i,a,s,u,l,c,f;(u=r.keyCode)!==e.keyCodes.UP&&u!==e.keyCodes.DOWN&&u!==e.keyCodes.ENTER&&(n.currentTarget=t,s=window.getSelection().getRangeAt(0),f=s.endOffset,i=s.endContainer,n.currentCursorPosition=s.endOffset,n.currentNodeIndex=n.getCurrentNodeIndex(i),a=i.parentNode,"DIV"===i.parentNode.nodeName&&"true"===a.getAttribute("contenteditable")&&"#text"===i.nodeName&&(c=i.nodeValue.slice(0,f).split(/\s+/),o=c[c.length-1],o.indexOf("@")>-1?(l=o.slice(o.lastIndexOf("@")+1),n.start(l)):n.cancel({keyword:l})))}),t.on("keydown",function(t){var r;n.inMention&&((r=t.keyCode)!==e.keyCodes.UP&&r!==e.keyCodes.DOWN||(n.select(t.keyCode===e.keyCodes.UP?"up":"down"),t.preventDefault()),t.keyCode===e.keyCodes.ENTER&&(n.create(),t.preventDefault()))}),t.on("paste",function(e){var n,r;return n=function(e){return e.replace(/(<[\w\W]*?)(style)([\w\W]*?>)/g,function(e,t,n,r){return t+"style_replace"+r})},r=function(e){return o.trim(e.replace(/<\/?((?!a)(\w+))\s*[\w\W]*?>/g,""))},setTimeout(function(){var e;return e=t.html(),e=n(e),e=r(r(e)),t.html(e)},0)})},l.prototype.cancel=function(){if(this.inMention)return this.hide(),this.inMention=!1},l.prototype.show=function(){return this.position(this.currentTarget),this.$view.addClass("active"),this.inMention=!0},l.prototype.hide=function(){return this.$view.removeClass("active"),this.$resultListView.empty(),this.$placeholder.html(this.placeholderText).show(),this.inMention=!1},l.prototype.select=function(e){var t,n,r;n=this.$resultListView.find("li"),"init"===e?n.removeClass("active").first().addClass("active"):(t=this.$resultListView.find("li.active"),t.length>0&&(r=t.attr("data-index"),"down"===e&&r<n.length-1&&t.removeClass("active").next("li").addClass("active"),"up"===e&&r>0&&t.removeClass("active").prev("li").addClass("active")))},l.prototype.create=function(){var e,t,n,r,a,s,u,l,c,f,d,p,h,m,v,y;if(t=this.$resultListView.find("li.active"),0!==t.length)return y={type:t.attr("data-type"),name:t.attr("data-name")},"doc"===y.type&&(y.guid=t.attr("data-guid")),"user"===y.type&&(y.id=t.attr("data-id")),this.currentTarget.focus(),p=this.currentTarget[0].childNodes[this.currentNodeIndex],this.moveCursor(p,this.currentCursorPosition),h=p.parentNode,d=p.nextSibling,r=p.nodeValue,n=r.lastIndexOf("@"),s=this.currentCursorPosition,m=r.slice(0,n),r.slice(n,s),v=r.slice(s),l=document.createTextNode(m+" "),c=document.createTextNode(" "+v),u=document.createElement("a"),e=o(u),"doc"===y.type&&(e.attr("data-file-id",y.id),e.attr("href","/"+y.guid)),"user"===y.type&&(e.attr("href","javascript:void(0);"),f=i.isOnline(y.id),f&&e.addClass("online"),e.attr("data-user-id",y.id),e.attr("contenteditable","false")),e.addClass("mention-"+y.type),u.innerText=u.textContent=y.name,h.insertBefore(l,d),h.insertBefore(u,d),h.insertBefore(c,d),h.removeChild(p),a=c,this.moveCursor(a,1),null===d&&h.insertBefore(document.createElement("br"),d),setTimeout(function(e){return function(){return e.cancel()}}(this),100)},l.prototype.position=function(e){var t,n,r,i,a,s,u,l,c,f,d,p,h,m,v,y,g,b,w,_,k;if(h=this,this.$shadow.html(this.currentTarget.html()),["fontSize","width","height","lineHeight","padding","border","outline"].forEach(function(e){return h.$shadow.css(e,h.currentTarget.css(e))}),m=this.$shadow[0],c=m.childNodes[this.currentNodeIndex])return l=c.nextSibling,g=c.nodeValue,f=c.parentNode,i=this.currentCursorPosition,n=g.slice(0,i).lastIndexOf("@"),d=g.slice(0,n),p=g.slice(n),a=document.createTextNode(d),s=document.createTextNode(p),y=document.createElement("span"),y.innerText="1",f.insertBefore(a,l),f.insertBefore(y,l),f.insertBefore(s,l),f.removeChild(c),r=o(y).offset(),v=o(".doc-comment-input").offset(),r.top+=v.top+5e3,r.left+=v.left+5e3,v.left-=10,u=+/\d+/.exec(this.$view.css("maxHeight"))[0],b=this.$view.height(),k=this.$view.width(),w=v.left,t=r.left-v.left,t+20>k&&(w+=t-k+20,t-=t-k+20),o(window).height()-v.top<u?(_=r.top-b-25,this.$arrowUp.hide(),this.$arrowDown.show().find("span").css("left",t)):(_=r.top+25,this.$arrowDown.hide(),this.$arrowUp.show().find("span").css("left",t)),this.$view.css({left:w,top:_-50})},l.prototype.search=function(e){if(!(window.cow.currentUser.id<0))return this.mentionStr=e,e?(this.docResultList=[],this.userResultList=[],this.render("result"),function(e){return function(t){return a.searchAll(t,"file,recent_contact,team_member,collaborator",0,6,e.fileId).then(function(n){var o,i,a,s;if(t===e.mentionStr)return e.docResultList=r.get(n,"file.results",[]).map(function(e){return e.source}),i=r.get(n,"recent_contact.results",[]),a=r.get(n,"team_member.results",[]),o=r.get(n,"collaborator.results",[]),e.userResultList=r.unionBy(r.unionBy(i,a,"id"),o,"id"),s=e.userResultList.splice(e.halfMaxSearch),e.docResultList.length>e.halfMaxSearch?e.docResultList.splice(e.maxSearch-e.userResultList.length):e.docResultList.length<e.halfMaxSearch&&s.length>0&&(s.splice(e.halfMaxSearch-e.docResultList.length),e.userResultList=e.userResultList.concat(s)),e.render("result"),e.select("init")})}}(this)(e)):(this.userResultList=[],this.docResultList=[],this.render("placeholder"))},l.prototype.render=function(e){if(!(window.cow.currentUser.id<0))return this.$resultListView.empty(),"placeholder"===e&&(this.$placeholder.show(),this.$resultListView.hide(),this.show()),"result"===e?(this.$placeholder.hide(),this.userResultList.length||this.docResultList.length?(this.$resultListView.append(r.template(n)({list:this.userResultList})).append(r.template(n)({list:this.docResultList})).show(),this.$resultListView.find("li").each(function(e){return o(this).attr("data-index",e)}),this.show()):this.hide()):void 0},l.prototype.moveCursor=function(e,t,n){var r,o;n=n||this.currentTarget[0],r=document.createRange(),r.selectNodeContents(n),r.setStart(e,t),r.collapse(!0),o=window.getSelection(),o.removeAllRanges(),o.addRange(r)},l.prototype.getCurrentNodeIndex=function(e,t){var n,r,o,i,a;for(a=-1,t=t||this.currentTarget[0],i=t.childNodes,r=n=0,o=i.length;n<o;r=++n)i[r]===e&&(a=r);return a},l}(e.DomModule)}.apply(t,i))&&(e.exports=a)}).call(t,n(1),n(2))},function(e,t,n){var r,o,i;!function(a,s){o=[e,n(308),n(310),n(311)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var l=o(t),c=o(n),f=o(r),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return s(t,e),p(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,f.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(c.default);e.exports=h})},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(341),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Divider=t.ItemGroup=t.MenuItemGroup=t.MenuItem=t.Item=t.SubMenu=void 0;var o=n(413),i=r(o),a=n(419),s=r(a),u=n(423),l=r(u),c=n(424),f=r(c),d=n(425),p=r(d);t.SubMenu=s.default,t.Item=l.default,t.MenuItem=l.default,t.MenuItemGroup=f.default,t.ItemGroup=f.default,t.Divider=p.default,t.default=i.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(280),f=r(c),d=n(11),p=r(d),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:!1},n.handleVisibleChange=n.handleVisibleChange.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{type:u.PropTypes.string,onClick:u.PropTypes.func,trigger:u.PropTypes.string,overlay:u.PropTypes.element,visible:u.PropTypes.bool,disabled:u.PropTypes.bool,onVisibleChange:u.PropTypes.func,style:u.PropTypes.object,prefixCls:u.PropTypes.string,getPopupContainer:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-dropdown-button",type:"default",mask:!1,disabled:!1,align:{points:["tr","br"],overlay:{adjustX:1,adjustY:1},offset:[0,5],targetOffset:[0,0]}}}}]),s(t,[{key:"handleVisibleChange",value:function(e){this.setState({active:e})}},{key:"render",value:function(){var e=(0,p.default)(this.props.prefixCls,this.props.className,{active:this.state.active});return l.default.createElement(f.default,{align:this.props.align,className:this.props.className,mask:this.props.mask,onVisibleChange:this.handleVisibleChange,overlay:this.props.overlay,trigger:this.props.trigger,getPopupContainer:this.props.getPopupContainer},l.default.createElement("div",{className:e,disabled:this.props.disabled,onClick:this.props.onClick},this.props.children))}}]),t}(u.Component);t.default=h,e.exports=t.default},,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(5),s=r(a);n(242);var u=document.createElement("div"),l=null,c=function(e){return i.default.createElement("div",{className:"report-toast"},i.default.createElement("span",{className:"info"===e.type?"report-toast-img report-toast-img-info":"report-toast-img report-toast-img-error"}),i.default.createElement("p",{className:"report-toast-info"},e.title))};c.propTypes={type:o.PropTypes.string,title:o.PropTypes.string};var f=function(e){var t=e.title,n=e.type,r=void 0===n?"info":n;s.default.render(i.default.createElement(c,{title:t,type:r}),u),document.body.appendChild(u),clearTimeout(l),l=setTimeout(function(){document.body.removeChild(u)},3e3)};t.default=f,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"error":t,o=e.errDetail,i=void 0===o?{}:o,s=e.confirm,u=void 0===s?{}:s;r({tag:"track_reload",confirm:u.title+u.description,guid:window.cow.tempCurrentFile.guid,userId:window.cow.currentUser.id},n,0,0,i);var l=u.onConfirm||function(){return window.location.reload()};(0,a.default)({title:u.title||"操作异常",description:u.description||"系统检测到操作异常。为了更好的使用，请刷新当前页面",confirmFun:l})};var i=n(47),a=o(i);e.exports=t.default}).call(t,n(174))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={adjustX:1,adjustY:1},o=[0,0],i=t.placements={left:{points:["cr","cl"],overflow:r,offset:[-4,0],targetOffset:o},right:{points:["cl","cr"],overflow:r,offset:[4,0],targetOffset:o},top:{points:["bc","tc"],overflow:r,offset:[0,-4],targetOffset:o},bottom:{points:["tc","bc"],overflow:r,offset:[0,4],targetOffset:o},topLeft:{points:["bl","tl"],overflow:r,offset:[0,-4],targetOffset:o},leftTop:{points:["tr","tl"],overflow:r,offset:[-4,0],targetOffset:o},topRight:{points:["br","tr"],overflow:r,offset:[0,-4],targetOffset:o},rightTop:{points:["tl","tr"],overflow:r,offset:[4,0],targetOffset:o},bottomRight:{points:["tr","br"],overflow:r,offset:[0,4],targetOffset:o},rightBottom:{points:["bl","br"],overflow:r,offset:[4,0],targetOffset:o},bottomLeft:{points:["tl","bl"],overflow:r,offset:[0,4],targetOffset:o},leftBottom:{points:["br","bl"],overflow:r,offset:[-4,0],targetOffset:o}};t.default=i},function(e,t,n){"use strict";function r(){}function o(){return""}function i(){return window.document}Object.defineProperty(t,"__esModule",{value:!0});var a=n(32),s=n.n(a),u=n(0),l=n.n(u),c=n(14),f=n.n(c),d=n(5),p=(n.n(d),n(46)),h=n.n(p),m=n(357),v=n(228),y=n.n(v),g=n(360),b=n(240),w=n(410),_=n.n(w),k="undefined"!=typeof navigator&&!!navigator.userAgent.match(/(Android|iPhone|iPad|iPod|iOS|UCWEB)/i),E=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"],T=h()({displayName:"Trigger",propTypes:{children:f.a.any,action:f.a.oneOfType([f.a.string,f.a.arrayOf(f.a.string)]),showAction:f.a.any,hideAction:f.a.any,getPopupClassNameFromAlign:f.a.any,onPopupVisibleChange:f.a.func,afterPopupVisibleChange:f.a.func,popup:f.a.oneOfType([f.a.node,f.a.func]).isRequired,popupStyle:f.a.object,prefixCls:f.a.string,popupClassName:f.a.string,popupPlacement:f.a.string,builtinPlacements:f.a.object,popupTransitionName:f.a.oneOfType([f.a.string,f.a.object]),popupAnimation:f.a.any,mouseEnterDelay:f.a.number,mouseLeaveDelay:f.a.number,zIndex:f.a.number,focusDelay:f.a.number,blurDelay:f.a.number,getPopupContainer:f.a.func,getDocument:f.a.func,destroyPopupOnHide:f.a.bool,mask:f.a.bool,maskClosable:f.a.bool,onPopupAlign:f.a.func,popupAlign:f.a.object,popupVisible:f.a.bool,maskTransitionName:f.a.oneOfType([f.a.string,f.a.object]),maskAnimation:f.a.string},mixins:[_()({autoMount:!1,isVisible:function(e){return e.state.popupVisible},getContainer:function(e){var t=e.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(t.getPopupContainer?t.getPopupContainer(Object(d.findDOMNode)(e)):t.getDocument().body).appendChild(n),n}})],getDefaultProps:function(){return{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:o,getDocument:i,onPopupVisibleChange:r,afterPopupVisibleChange:r,onPopupAlign:r,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]}},getInitialState:function(){var e=this.props,t=void 0;return t="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,{popupVisible:t}},componentWillMount:function(){var e=this;E.forEach(function(t){e["fire"+t]=function(n){e.fireEvents(t,n)}})},componentDidMount:function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},componentWillReceiveProps:function(e){var t=e.popupVisible;void 0!==t&&this.setState({popupVisible:t})},componentDidUpdate:function(e,t){var n=this.props,r=this.state;if(this.renderComponent(null,function(){t.popupVisible!==r.popupVisible&&n.afterPopupVisibleChange(r.popupVisible)}),r.popupVisible){var o=void 0;return!this.clickOutsideHandler&&this.isClickToHide()&&(o=n.getDocument(),this.clickOutsideHandler=y()(o,"mousedown",this.onDocumentClick)),void(!this.touchOutsideHandler&&k&&(o=o||n.getDocument(),this.touchOutsideHandler=y()(o,"click",this.onDocumentClick)))}this.clearOutsideHandler()},componentWillUnmount:function(){this.clearDelayTimer(),this.clearOutsideHandler()},onMouseEnter:function(e){this.fireEvents("onMouseEnter",e),this.delaySetPopupVisible(!0,this.props.mouseEnterDelay)},onMouseLeave:function(e){this.fireEvents("onMouseLeave",e),this.delaySetPopupVisible(!1,this.props.mouseLeaveDelay)},onPopupMouseEnter:function(){this.clearDelayTimer()},onPopupMouseLeave:function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&this._component&&this._component.getPopupDomNode&&Object(m.a)(this._component.getPopupDomNode(),e.relatedTarget)||this.delaySetPopupVisible(!1,this.props.mouseLeaveDelay)},onFocus:function(e){this.fireEvents("onFocus",e),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.props.focusDelay))},onMouseDown:function(e){this.fireEvents("onMouseDown",e),this.preClickTime=Date.now()},onTouchStart:function(e){this.fireEvents("onTouchStart",e),this.preTouchTime=Date.now()},onBlur:function(e){this.fireEvents("onBlur",e),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.props.blurDelay)},onClick:function(e){if(this.fireEvents("onClick",e),this.focusTime){var t=void 0;if(this.preClickTime&&this.preTouchTime?t=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?t=this.preClickTime:this.preTouchTime&&(t=this.preTouchTime),Math.abs(t-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,e.preventDefault();var n=!this.state.popupVisible;(this.isClickToHide()&&!n||n&&this.isClickToShow())&&this.setPopupVisible(!this.state.popupVisible)},onDocumentClick:function(e){if(!this.props.mask||this.props.maskClosable){var t=e.target,n=Object(d.findDOMNode)(this),r=this.getPopupDomNode();Object(m.a)(n,t)||Object(m.a)(r,t)||this.close()}},getPopupDomNode:function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},getRootDomNode:function(){return Object(d.findDOMNode)(this)},getPopupClassNameFromAlign:function(e){var t=[],n=this.props,r=n.popupPlacement,o=n.builtinPlacements,i=n.prefixCls;return r&&o&&t.push(Object(b.b)(o,i,e)),n.getPopupClassNameFromAlign&&t.push(n.getPopupClassNameFromAlign(e)),t.join(" ")},getPopupAlign:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?Object(b.a)(r,t,n):n},getComponent:function(){var e=this.props,t=this.state,n={};return this.isMouseEnterToShow()&&(n.onMouseEnter=this.onPopupMouseEnter),this.isMouseLeaveToHide()&&(n.onMouseLeave=this.onPopupMouseLeave),l.a.createElement(g.a,s()({prefixCls:e.prefixCls,destroyPopupOnHide:e.destroyPopupOnHide,visible:t.popupVisible,className:e.popupClassName,action:e.action,align:this.getPopupAlign(),onAlign:e.onPopupAlign,animation:e.popupAnimation,getClassNameFromAlign:this.getPopupClassNameFromAlign},n,{getRootDomNode:this.getRootDomNode,style:e.popupStyle,mask:e.mask,zIndex:e.zIndex,transitionName:e.popupTransitionName,maskAnimation:e.maskAnimation,maskTransitionName:e.maskTransitionName}),"function"==typeof e.popup?e.popup():e.popup)},setPopupVisible:function(e){this.clearDelayTimer(),this.state.popupVisible!==e&&("popupVisible"in this.props||this.setState({popupVisible:e}),this.props.onPopupVisibleChange(e))},delaySetPopupVisible:function(e,t){var n=this,r=1e3*t;this.clearDelayTimer(),r?this.delayTimer=setTimeout(function(){n.setPopupVisible(e),n.clearDelayTimer()},r):this.setPopupVisible(e)},clearDelayTimer:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},clearOutsideHandler:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},createTwoChains:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},isClickToShow:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},isClickToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},isMouseEnterToShow:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")},isMouseLeaveToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")},isFocusToShow:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},isBlurToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},forcePopupAlign:function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},fireEvents:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)},close:function(){this.setPopupVisible(!1)},render:function(){var e=this.props,t=e.children,n=l.a.Children.only(t),r={};return this.isClickToHide()||this.isClickToShow()?(r.onClick=this.onClick,r.onMouseDown=this.onMouseDown,r.onTouchStart=this.onTouchStart):(r.onClick=this.createTwoChains("onClick"),r.onMouseDown=this.createTwoChains("onMouseDown"),r.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?r.onMouseEnter=this.onMouseEnter:r.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?r.onMouseLeave=this.onMouseLeave:r.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(r.onFocus=this.onFocus,r.onBlur=this.onBlur):(r.onFocus=this.createTwoChains("onFocus"),r.onBlur=this.createTwoChains("onBlur")),l.a.cloneElement(n,r)}});t.default=T},function(e,t,n){var r=n(347);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(52)&&!n(82)(function(){return 7!=Object.defineProperty(n(222)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(72),o=n(45).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(53),o=n(73),i=n(349)(!1),a=n(160)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(225);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(158);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){if(o(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,s,u],f=0;l=new Error(t.replace(/%s/g,function(){return c[f++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var o=function(e){};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=u.default.unstable_batchedUpdates?function(e){u.default.unstable_batchedUpdates(n,e)}:n;return(0,a.default)(e,t,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(229),a=r(i),s=n(5),u=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(t){var r=new a.default(t);n.call(e,r)}return e.addEventListener?(e.addEventListener(t,r,!1),{remove:function(){e.removeEventListener(t,r,!1)}}):e.attachEvent?(e.attachEvent("on"+t,r),{remove:function(){e.detachEvent("on"+t,r)}}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(358),a=r(i);e.exports=t.default},function(e,t,n){e.exports={default:n(361),__esModule:!0}},function(e,t,n){"use strict";var r=n(164),o=n(70),i=n(232),a=n(71),s=n(53),u=n(165),l=n(367),c=n(167),f=n(370),d=n(76)("iterator"),p=!([].keys&&"next"in[].keys()),h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,y,g,b,w){l(n,t,y);var _,k,E,T=function(e){if(!p&&e in x)return x[e];switch(e){case h:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",S=g==m,O=!1,x=e.prototype,P=x[d]||x["@@iterator"]||g&&x[g],j=!p&&P||T(g),N=g?S?T("entries"):j:void 0,M="Array"==t?x.entries||P:P;if(M&&(E=f(M.call(new e)))!==Object.prototype&&E.next&&(c(E,C,!0),r||s(E,d)||a(E,d,v)),S&&P&&P.name!==m&&(O=!0,j=function(){return P.call(this)}),r&&!w||!p&&!O&&x[d]||a(x,d,j),u[t]=j,u[C]=v,g)if(_={values:S?j:T(m),keys:b?j:T(h),entries:N},w)for(k in _)k in x||i(x,k,_[k]);else o(o.P+o.F*(p||O),t,_);return _}},function(e,t,n){e.exports=n(71)},function(e,t,n){var r=n(223),o=n(162).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(105),o=n(102),i=n(73),a=n(157),s=n(53),u=n(221),l=Object.getOwnPropertyDescriptor;t.f=n(52)?l:function(e,t){if(e=i(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.ownerDocument,n=t.body,r=void 0,o=a.default.css(e,"position");if("fixed"!==o&&"absolute"!==o)return"html"===e.nodeName.toLowerCase()?null:e.parentNode;for(r=e.parentNode;r&&r!==n;r=r.parentNode)if("static"!==(o=a.default.css(r,"position")))return r;return null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=e.children;return g.a.isValidElement(t)&&!t.key?g.a.cloneElement(t,{key:T}):t}function o(){}Object.defineProperty(t,"__esModule",{value:!0});var i=n(32),a=n.n(i),s=n(170),u=n.n(s),l=n(74),c=n.n(l),f=n(83),d=n.n(f),p=n(75),h=n.n(p),m=n(77),v=n.n(m),y=n(0),g=n.n(y),b=n(14),w=n.n(b),_=n(403),k=n(404),E=n(238),T="rc_animate_"+Date.now(),C=function(e){function t(e){c()(this,t);var n=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return S.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:Object(_.e)(r(e))},n.childrenRefs={},n}return v()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter(function(e){return!!e.props[t]})),n.forEach(function(t){t&&e.performAppear(t.key)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var n=Object(_.e)(r(e)),o=this.props;o.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(e){t.stop(e)});var i=o.showProp,a=this.currentlyAnimatingKeys,s=o.exclusive?Object(_.e)(r(o)):this.state.children,l=[];i?(s.forEach(function(e){var t=e&&Object(_.a)(n,e.key),r=void 0;(r=t&&t.props[i]||!e.props[i]?t:g.a.cloneElement(t||e,u()({},i,!0)))&&l.push(r)}),n.forEach(function(e){e&&Object(_.a)(s,e.key)||l.push(e)})):l=Object(_.d)(s,n),this.setState({children:l}),n.forEach(function(e){var n=e&&e.key;if(!e||!a[n]){var r=e&&Object(_.a)(s,n);if(i){var o=e.props[i];if(r){!Object(_.b)(s,n,i)&&o&&t.keysToEnter.push(n)}else o&&t.keysToEnter.push(n)}else r||t.keysToEnter.push(n)}}),s.forEach(function(e){var r=e&&e.key;if(!e||!a[r]){var o=e&&Object(_.a)(n,r);if(i){var s=e.props[i];if(o){!Object(_.b)(n,r,i)&&s&&t.keysToLeave.push(r)}else s&&t.keysToLeave.push(r)}else o||t.keysToLeave.push(r)}})}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?Object(_.b)(e,t,n):Object(_.a)(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var n=this.state.children,r=null;n&&(r=n.map(function(n){if(null===n||void 0===n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return g.a.createElement(k.a,{key:n.key,ref:function(t){return e.childrenRefs[n.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},n)}));var o=t.component;if(o){var i=t;return"string"==typeof o&&(i=a()({className:t.className,style:t.style},t.componentProps)),g.a.createElement(o,i,r)}return r[0]||null}}]),t}(g.a.Component);C.isAnimate=!0,C.propTypes={component:w.a.any,componentProps:w.a.object,animation:w.a.object,transitionName:w.a.oneOfType([w.a.string,w.a.object]),transitionEnter:w.a.bool,transitionAppear:w.a.bool,exclusive:w.a.bool,transitionLeave:w.a.bool,onEnd:w.a.func,onEnter:w.a.func,onLeave:w.a.func,onAppear:w.a.func,showProp:w.a.string},C.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:o,onEnter:o,onLeave:o,onAppear:o};var S=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var o=e.props;if(delete e.currentlyAnimatingKeys[t],!o.exclusive||o===e.nextProps){var i=Object(_.e)(r(o));e.isValidChildByKey(i,t)?"appear"===n?E.a.allowAppearCallback(o)&&(o.onAppear(t),o.onEnd(t,!0)):E.a.allowEnterCallback(o)&&(o.onEnter(t),o.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var o=Object(_.e)(r(n));if(e.isValidChildByKey(o,t))e.performEnter(t);else{var i=function(){E.a.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};Object(_.c)(e.state.children,o,n.showProp)?i():e.setState({children:o},i)}}}};t.default=C},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,n){"use strict";var r={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}};t.a=r},function(e,t,n){"use strict";var r=n(409),o=n.n(r),i=n(74),a=n.n(i),s=n(83),u=n.n(s),l=n(75),c=n.n(l),f=n(77),d=n.n(f),p=n(0),h=n.n(p),m=n(14),v=n.n(m),y=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),u()(t,[{key:"shouldComponentUpdate",value:function(e){return e.hiddenClassName||e.visible}},{key:"render",value:function(){var e=this.props,t=e.hiddenClassName,n=e.visible,r=o()(e,["hiddenClassName","visible"]);return t||h.a.Children.count(r.children)>1?(!n&&t&&(r.className+=" "+t),h.a.createElement("div",r)):h.a.Children.only(r.children)}}]),t}(p.Component);y.propTypes={children:v.a.any,className:v.a.string,visible:v.a.bool,hiddenClassName:v.a.string},t.a=y},function(e,t,n){"use strict";function r(e,t){return e[0]===t[0]&&e[1]===t[1]}function o(e,t,n){var r=e[t]||{};return u()({},r,n)}function i(e,t,n){var o=n.points;for(var i in e)if(e.hasOwnProperty(i)&&r(e[i].points,o))return t+"-placement-"+i;return""}function a(e,t){this[e]=t}t.a=o,t.b=i,t.c=a;var s=n(32),u=n.n(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return!e.length||e.every(function(e){return!!e.props.disabled})}function i(e,t){var n=t,r=e.children,o=e.eventKey;if(n){var i=void 0;if((0,C.loopMenuItem)(r,function(e,t){e&&!e.props.disabled&&n===(0,C.getKeyFromChildrenIndex)(e,o,t)&&(i=!0)}),i)return n}return n=null,e.defaultActiveFirst?((0,C.loopMenuItem)(r,function(e,t){n||!e||e.props.disabled||(n=(0,C.getKeyFromChildrenIndex)(e,o,t))}),n):n}function a(e,t,n){n&&(void 0!==t?(this.instanceArray[e]=this.instanceArray[e]||[],this.instanceArray[e][t]=n):this.instanceArray[e]=n)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(170),u=r(s),l=n(32),c=r(l),f=n(0),d=r(f),p=n(14),h=r(p),m=n(5),v=r(m),y=n(106),g=r(y),b=n(414),w=r(b),_=n(11),k=r(_),E=n(415),T=r(E),C=n(107),S=n(418),O=r(S),x={propTypes:{focusable:h.default.bool,multiple:h.default.bool,style:h.default.object,defaultActiveFirst:h.default.bool,visible:h.default.bool,activeKey:h.default.string,selectedKeys:h.default.arrayOf(h.default.string),defaultSelectedKeys:h.default.arrayOf(h.default.string),defaultOpenKeys:h.default.arrayOf(h.default.string),openKeys:h.default.arrayOf(h.default.string),children:h.default.any},getDefaultProps:function(){return{prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,visible:!0,focusable:!0,style:{}}},getInitialState:function(){var e=this.props;return{activeKey:i(e,e.activeKey)}},componentWillReceiveProps:function(e){var t=void 0;if("activeKey"in e)t={activeKey:i(e,e.activeKey)};else{var n=this.state.activeKey,r=i(e,n);r!==n&&(t={activeKey:r})}t&&this.setState(t)},shouldComponentUpdate:function(e){return this.props.visible||e.visible},componentWillMount:function(){this.instanceArray=[]},onKeyDown:function(e,t){var n=this,r=e.keyCode,o=void 0;if(this.getFlatInstanceArray().forEach(function(t){t&&t.props.active&&(o=t.onKeyDown(e))}),o)return 1;var i=null;return r!==g.default.UP&&r!==g.default.DOWN||(i=this.step(r===g.default.UP?-1:1)),i?(e.preventDefault(),this.setState({activeKey:i.props.eventKey},function(){(0,T.default)(v.default.findDOMNode(i),v.default.findDOMNode(n),{onlyScrollIfNeeded:!0}),t&&t(i)}),1):void 0===i?(e.preventDefault(),this.setState({activeKey:null}),1):void 0},getOpenChangesOnItemHover:function(e){var t=this.props.mode,n=e.key,r=e.hover,o=e.trigger,i=this.state.activeKey;if(o&&!r&&!this.props.closeSubMenuOnMouseLeave&&e.item.isSubMenu&&"inline"!==t||this.setState({activeKey:r?n:null}),r&&"inline"!==t){var a=this.getFlatInstanceArray().filter(function(e){return e&&e.props.eventKey===i})[0];if(a&&a.isSubMenu&&a.props.eventKey!==n)return{item:a,originalEvent:e,key:a.props.eventKey,open:!1}}return[]},getFlatInstanceArray:function(){var e=this.instanceArray;return e.some(function(e){return Array.isArray(e)})&&(e=[],this.instanceArray.forEach(function(t){Array.isArray(t)?e.push.apply(e,t):e.push(t)}),this.instanceArray=e),e},renderCommonMenuItem:function(e,t,n,r){var o=this.state,i=this.props,s=(0,C.getKeyFromChildrenIndex)(e,i.eventKey,t),u=e.props,l=s===o.activeKey,f=(0,c.default)({mode:i.mode,level:i.level,inlineIndent:i.inlineIndent,renderMenuItem:this.renderMenuItem,rootPrefixCls:i.prefixCls,index:t,parentMenu:this,ref:u.disabled?void 0:(0,w.default)(e.ref,a.bind(this,t,n)),eventKey:s,closeSubMenuOnMouseLeave:i.closeSubMenuOnMouseLeave,onItemHover:this.onItemHover,active:!u.disabled&&l,multiple:i.multiple,onClick:this.onClick,openTransitionName:this.getOpenTransitionName(),openAnimation:i.openAnimation,onOpenChange:this.onOpenChange,onDeselect:this.onDeselect,onDestroy:this.onDestroy,onSelect:this.onSelect},r);return"inline"===i.mode&&(f.closeSubMenuOnMouseLeave=f.openSubMenuOnMouseEnter=!1),d.default.cloneElement(e,f)},renderRoot:function(e){var t;this.instanceArray=[];var n=(t={},(0,u.default)(t,e.prefixCls,1),(0,u.default)(t,e.prefixCls+"-"+e.mode,1),(0,u.default)(t,e.className,!!e.className),t),r={className:(0,k.default)(n),role:"menu","aria-activedescendant":""};return e.id&&(r.id=e.id),e.focusable&&(r.tabIndex="0",r.onKeyDown=this.onKeyDown),d.default.createElement(O.default,(0,c.default)({style:e.style,tag:"ul",hiddenClassName:e.prefixCls+"-hidden",visible:e.visible},r),d.default.Children.map(e.children,this.renderMenuItem))},step:function(e){var t=this.getFlatInstanceArray(),n=this.state.activeKey,r=t.length;if(!r)return null;e<0&&(t=t.concat().reverse());var i=-1;if(t.every(function(e,t){return!e||e.props.eventKey!==n||(i=t,!1)}),this.props.defaultActiveFirst||-1===i||!o(t.slice(i,r-1)))for(var a=(i+1)%r,s=a;;){var u=t[s];if(u&&!u.props.disabled)return u;if((s=(s+1+r)%r)===a)return null}}};t.default=x,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=n(109),l=function(e){function t(e){var n,i;return r(this,t),i=n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o(n,i)}return i(t,e),a(t,[{key:"setData",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),"number"==typeof this.data&&1!==this.data)throw new Error('The value of data should be "1", got '+this.data);return this}},{key:"name",value:function(){return"CellOperator"}}]),t}(u);l.packId=4,e.exports=l},function(e,t,n){(function(t){function n(e,t){return null==e?void 0:e[t]}function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(){this.__data__=ve?ve(null):{}}function a(e){return this.has(e)&&delete this.__data__[e]}function s(e){var t=this.__data__;if(ve){var n=t[e];return n===q?void 0:n}return ce.call(t,e)?t[e]:void 0}function u(e){var t=this.__data__;return ve?void 0!==t[e]:ce.call(t,e)}function l(e,t){return this.__data__[e]=ve&&void 0===t?q:t,this}function c(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(){this.__data__=[]}function d(e){var t=this.__data__,n=k(t,e);return!(n<0)&&(n==t.length-1?t.pop():he.call(t,n,1),!0)}function p(e){var t=this.__data__,n=k(t,e);return n<0?void 0:t[n][1]}function h(e){return k(this.__data__,e)>-1}function m(e,t){var n=this.__data__,r=k(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function v(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(){this.__data__={hash:new o,map:new(me||c),string:new o}}function g(e){return O(this,e).delete(e)}function b(e){return O(this,e).get(e)}function w(e){return O(this,e).has(e)}function _(e,t){return O(this,e).set(e,t),this}function k(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1}function E(e,t){t=P(t,e)?[t]:S(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[M(t[n++])];return n&&n==r?e:void 0}function T(e){return!(!R(e)||N(e))&&(L(e)||r(e)?de:ee).test(A(e))}function C(e){if("string"==typeof e)return e;if(F(e))return ge?ge.call(e):"";var t=e+"";return"0"==t&&1/e==-H?"-0":t}function S(e){return we(e)?e:be(e)}function O(e,t){var n=e.__data__;return j(t)?n["string"==typeof t?"string":"hash"]:n.map}function x(e,t){var r=n(e,t);return T(r)?r:void 0}function P(e,t){if(we(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!F(e))||(G.test(e)||!z.test(e)||null!=t&&e in Object(t))}function j(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function N(e){return!!ue&&ue in e}function M(e){if("string"==typeof e||F(e))return e;var t=e+"";return"0"==t&&1/e==-H?"-0":t}function A(e){if(null!=e){try{return le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function I(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(V);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(I.Cache||v),n}function D(e,t){return e===t||e!==e&&t!==t}function L(e){var t=R(e)?fe.call(e):"";return t==$||t==Y}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){return!!e&&"object"==typeof e}function F(e){return"symbol"==typeof e||U(e)&&fe.call(e)==K}function B(e){return null==e?"":C(e)}function W(e,t,n){var r=null==e?void 0:E(e,t);return void 0===r?n:r}var V="Expected a function",q="__lodash_hash_undefined__",H=1/0,$="[object Function]",Y="[object GeneratorFunction]",K="[object Symbol]",z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,X=/^\./,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,Z=/\\(\\)?/g,ee=/^\[object .+?Constructor\]$/,te="object"==typeof t&&t&&t.Object===Object&&t,ne="object"==typeof self&&self&&self.Object===Object&&self,re=te||ne||Function("return this")(),oe=Array.prototype,ie=Function.prototype,ae=Object.prototype,se=re["__core-js_shared__"],ue=function(){var e=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),le=ie.toString,ce=ae.hasOwnProperty,fe=ae.toString,de=RegExp("^"+le.call(ce).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pe=re.Symbol,he=oe.splice,me=x(re,"Map"),ve=x(Object,"create"),ye=pe?pe.prototype:void 0,ge=ye?ye.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=l,c.prototype.clear=f,c.prototype.delete=d,c.prototype.get=p,c.prototype.has=h,c.prototype.set=m,v.prototype.clear=y,v.prototype.delete=g,v.prototype.get=b,v.prototype.has=w,v.prototype.set=_;var be=I(function(e){e=B(e);var t=[];return X.test(e)&&t.push(""),e.replace(J,function(e,n,r,o){t.push(r?o.replace(Z,"$1"):n||e)}),t});I.Cache=v;var we=Array.isArray;e.exports=W}).call(t,n(25))},function(e,t,n){(function(t){function n(e,t){return null==e?void 0:e[t]}function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(){this.__data__=we?we(null):{}}function a(e){return this.has(e)&&delete this.__data__[e]}function s(e){var t=this.__data__;if(we){var n=t[e];return n===$?void 0:n}return he.call(t,e)?t[e]:void 0}function u(e){var t=this.__data__;return we?void 0!==t[e]:he.call(t,e)}function l(e,t){return this.__data__[e]=we&&void 0===t?$:t,this}function c(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(){this.__data__=[]}function d(e){var t=this.__data__,n=E(t,e);return!(n<0)&&(n==t.length-1?t.pop():ge.call(t,n,1),!0)}function p(e){var t=this.__data__,n=E(t,e);return n<0?void 0:t[n][1]}function h(e){return E(this.__data__,e)>-1}function m(e,t){var n=this.__data__,r=E(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function v(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(){this.__data__={hash:new o,map:new(be||c),string:new o}}function g(e){return x(this,e).delete(e)}function b(e){return x(this,e).get(e)}function w(e){return x(this,e).has(e)}function _(e,t){return x(this,e).set(e,t),this}function k(e,t,n){var r=e[t];he.call(e,t)&&R(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function E(e,t){for(var n=e.length;n--;)if(R(e[n][0],t))return n;return-1}function T(e){return!(!F(e)||A(e))&&(U(e)||r(e)?ve:re).test(D(e))}function C(e,t,n,r){if(!F(e))return e;t=N(t,e)?[t]:O(t);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var u=I(t[o]),l=n;if(o!=a){var c=s[u];l=r?r(c,u,s):void 0,void 0===l&&(l=F(c)?c:j(t[o+1])?[]:{})}k(s,u,l),s=s[u]}return e}function S(e){if("string"==typeof e)return e;if(W(e))return ke?ke.call(e):"";var t=e+"";return"0"==t&&1/e==-Y?"-0":t}function O(e){return Te(e)?e:Ee(e)}function x(e,t){var n=e.__data__;return M(t)?n["string"==typeof t?"string":"hash"]:n.map}function P(e,t){var r=n(e,t);return T(r)?r:void 0}function j(e,t){return!!(t=null==t?K:t)&&("number"==typeof e||oe.test(e))&&e>-1&&e%1==0&&e<t}function N(e,t){if(Te(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!W(e))||(Q.test(e)||!J.test(e)||null!=t&&e in Object(t))}function M(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function A(e){return!!de&&de in e}function I(e){if("string"==typeof e||W(e))return e;var t=e+"";return"0"==t&&1/e==-Y?"-0":t}function D(e){if(null!=e){try{return pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function L(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(H);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(L.Cache||v),n}function R(e,t){return e===t||e!==e&&t!==t}function U(e){var t=F(e)?me.call(e):"";return t==z||t==G}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function B(e){return!!e&&"object"==typeof e}function W(e){return"symbol"==typeof e||B(e)&&me.call(e)==X}function V(e){return null==e?"":S(e)}function q(e,t,n){return null==e?e:C(e,t,n)}var H="Expected a function",$="__lodash_hash_undefined__",Y=1/0,K=9007199254740991,z="[object Function]",G="[object GeneratorFunction]",X="[object Symbol]",J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,Z=/^\./,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=/\\(\\)?/g,re=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,ie="object"==typeof t&&t&&t.Object===Object&&t,ae="object"==typeof self&&self&&self.Object===Object&&self,se=ie||ae||Function("return this")(),ue=Array.prototype,le=Function.prototype,ce=Object.prototype,fe=se["__core-js_shared__"],de=function(){var e=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pe=le.toString,he=ce.hasOwnProperty,me=ce.toString,ve=RegExp("^"+pe.call(he).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=se.Symbol,ge=ue.splice,be=P(se,"Map"),we=P(Object,"create"),_e=ye?ye.prototype:void 0,ke=_e?_e.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=l,c.prototype.clear=f,c.prototype.delete=d,c.prototype.get=p,c.prototype.has=h,c.prototype.set=m,v.prototype.clear=y,v.prototype.delete=g,v.prototype.get=b,v.prototype.has=w,v.prototype.set=_;var Ee=L(function(e){e=V(e);var t=[];return Z.test(e)&&t.push(""),e.replace(ee,function(e,n,r,o){t.push(r?o.replace(ne,"$1"):n||e)}),t});L.Cache=v;var Te=Array.isArray;e.exports=q}).call(t,n(25))},function(e,t,n){(function(t,r,o){function i(e){return e&&e.__esModule?e:{default:e}}var a,s,u,l,c,f,d,p,h,m,v,y,g,b,w,_,k,E,T,C,S,O,x,P,j,N,M,A,I,D=n(7),L=n(304),R=i(L),U=n(23),F=i(U);m={},j=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],a=j.concat(["showMenuItems","chooseImage","previewImage","uploadImage","downloadImage","hideMenuItems"]),E="/wechat/get_signature",N={},h=!1,c=200,T=!1,d={},v=!0,S=function(){var e,t;if(e=!1,t=null,v=!0,[].forEach.call(arguments,function(n){return"function"==typeof n?t=n:"boolean"==typeof n?e=n:void 0}),!s())return void("function"==typeof t&&t());void 0!==e&&null!==e&&(h=!!e),"function"==typeof t?P(t):P(),k()},s=function(){var e;return e=navigator.userAgent.toLowerCase(),!!/micromessenger/.test(e)&&!/micromessenger.*?windowswechat/.test(e)},M=function(e){return R.default.showMenuItems({menuList:e})},C=function(e){return R.default.hideMenuItems({menuList:e})},k=function(e){var t;return t=_(e),(0,D.ajaxGet)(E,t).then(function(e){if(0===e.code)return l(e,t)})},_=function(e){var n;return n=window.encodeURIComponent(window.location.href.split("#")[0]),e&&t.len>0&&window.cow.originalUrl&&(n=window.encodeURIComponent(window.cow.originalUrl)),{noncestr:y(),timestamp:f(),url:n}},f=function(){return parseInt((new Date).getTime()/1e3)+""},y=function(e){var t,n,r,o;for(r=17,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=[];r-=1;)o.push(t[parseInt(62*Math.random())]);return n=o.join(""),e?e+"-"+n:n},l=function(e,t){var n;return n={debug:h,appId:e.data.appId,timestamp:t.timestamp,nonceStr:t.noncestr,signature:e.data.signature,jsApiList:a},R.default.config(n)},P=function(e){return R.default.ready(function(){return"function"==typeof e&&e(),O()}),R.default.error(function(e){if(v)return k(!0),v=!1})},O=function(){var e,t,n;for(A(),e=0,t=j.length;e<t;e++)n=j[e],p(n)},A=function(){var e,t,n,r;for([],e=0,t=j.length;e<t;e++)r=j[e],n=N[r],void 0!==n&&null!==n||(n=N[r]={}),n.title=document.title,n.link=window.location.href,n.desc=g(),"onMenuShareTimeline"===r&&(n.title=n.desc),n.imgUrl=b(),"onMenuShareQQ"===r&&""===n.desc&&(n.desc="..."),n.success=function(){},n.cancel=function(){},n.trigger=function(){O()}},b=function(e){var t,n,i;return null==e&&(e=!0),n=function(e){var t;return t=window.location.protocol,0===e.indexOf("http://")||0===e.indexOf("https://")?e:0===e.indexOf("//")?t+e:t+"//"+window.location.host+e},(i=r.get(cow,"currentUser.id",-1)>0?r.get(cow,"currentUser.team",null):r.get(cow,"currentFile.team",null))&&i.resources?i.resources.wechatShareLogo:("doc"!==cow.pageType&&"newdoc"!==cow.pageType||(t=o("#innerdocbody, #ql-view-inner .ql-editor").find("img")),t&&t.length>0&&t.eq(0).attr("src")?n(t.eq(0).attr("src")):e?n("https://assets-cdn.shimo.im/assets/images/weixin_preview-5b8770f7a6.jpg"):void 0)},p=function(e,t){var n,o;if(n=N[e],void 0!==t&&null!==t)for(o in t)n[o]=t[o];return T?R.default[e](r.assign(n,d[e])):R.default[e](n)},x=function(e,t){T=!0,e&&t&&(d[e]=t)},g=function(){var e,t,n,r,i;if("newdoc"===cow.pageType)return pad.quill.getText(0,60);if("doc"===cow.pageType){for(e=o("#innerdocbody").find('[id^="magicdomid"]'),i="",t=0,n=e.length;t<n&&(r=e[t],o(r).hasClass("table-div")||(""!==i&&""!==i.substr(-1,1)&&(i+=" "),i+=w(r).trim(),!(i.length>=c)));t++);return i}return""},w=function(e){var t,n,r,i,a,s,u,l,c;if(u="",n=o(e).children(),n.length>0)for(i=0,s=n.length;i<s;i++)a=n[i],u+=w(a);else t=o(e).parent(),t.hasClass("link-block")&&(t.attr("class")||"").indexOf("url-")>-1?u+="@"+o(e).text():"IMG"===e.tagName.toUpperCase()?u+="":(o(e).attr("class")||"").indexOf("user-")>-1?(r=o(e).attr("class"),r=r.match(/user-\d+/)[0]||"",""!==r&&(c=r.split("-")[1]),u+="@"+F.default.get(c).name):o(e).hasClass("attachment-file-name")?u+=" ["+o(e).attr("title")+"] ":o(e).hasClass("attachment-file-size")?u+="":(l=o(e).text(),u+=";&nbsp"===l?" ":l);return u},u=function(e){return R.default.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var n;if(n=t.localIds,"function"==typeof e)return e(n)}})},I=function(e){return u(function(t){var n,r,o,i;for(i=[],n=0,r=t.length;n<r;n++)o=t[n],i.push(R.default.uploadImage({localId:o,isShowProgressTips:1,success:function(t){var n;if(n=t.serverId,"function"==typeof e)return e(n)}}));return i})},m.init=S,m.showMenuItems=M,m.hideMenuItems=C,m.checkInWechatBrowser=s,m.setCustomizeShareStyle=x,m.getImgUrl=b,m.uploadImage=I,e.exports=m}).call(t,n(27),n(1),n(2))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(178),d=o(f),p=n(180),h=o(p),m=n(13),v=n(432),y=o(v),g=n(209),b=o(g),w=n(435),_=o(w),k=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n.componentClick=n.componentClick.bind(n),n.closeMenuPopover=n.closeMenuPopover.bind(n),n.delayedCloseMenuPopover=n.delayedCloseMenuPopover.bind(n),n.clearTimeout=n.clearTimeout.bind(n),n.handleVisibleChange=n.handleVisibleChange.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{currentUser:l.PropTypes.object}}}]),u(t,[{key:"handleVisibleChange",value:function(e){this.setState({visible:e})}},{key:"closeMenuPopover",value:function(){this.state.visible&&this.setState({visible:!1})}},{key:"delayedCloseMenuPopover",value:function(){this.timer=setTimeout(this.closeMenuPopover,300)}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearTimeout(this.timer)})},{key:"componentClick",value:function(e){if(!(this.props.currentUser.id<0||(0,m.isMobile)())){var t=this.refs.popover.getPopupDomNode();this.state.visible&&!t.contains(e.target)&&this.closeMenuPopover()}}},{key:"renderContent",value:function(){var e=this.props.currentUser;return window.cow&&"profile"===window.cow.pageType&&window.cow.alphaFeatures&&window.cow.alphaFeatures.lizard?c.default.createElement(_.default,{onMouseEnter:this.clearTimeout,onMouseLeave:this.delayedCloseMenuPopover,currentUser:e,closeMenuPopover:this.closeMenuPopover}):c.default.createElement(_.default,{currentUser:e,closeMenuPopover:this.closeMenuPopover})}},{key:"toProfile",value:function(){r("/profile")}},{key:"render",value:function(){var e=this,t=this.props.currentUser,n=t.avatar,r=this.state.visible;if((0,m.isMobile)())return c.default.createElement("div",{className:"config-avatar-wrap",onClick:this.toProfile},c.default.createElement(y.default,{customClass:"config-avatar",avatarSrc:n}));if(t.id<0)return c.default.createElement("div",{className:"config-avatar-wrap"},c.default.createElement(y.default,{customClass:"config-avatar anonymous",avatarSrc:n}));if(window.cow&&"profile"===window.cow.pageType&&window.cow.alphaFeatures&&window.cow.alphaFeatures.lizard)return c.default.createElement(d.default,{ref:"popover",overlayClassName:"header-menu-popover",visible:r,onVisibleChange:this.handleVisibleChange,align:{offset:[13,3]},content:this.renderContent()},c.default.createElement("div",{className:"config-avatar-wrap",onMouseEnter:function(){return e.handleVisibleChange(!0)},onMouseLeave:this.delayedCloseMenuPopover},c.default.createElement(y.default,{customClass:"config-avatar",avatarSrc:n})));var o=c.default.createElement(d.default,{ref:"popover",overlayClassName:"header-menu-popover",visible:r,onVisibleChange:this.handleVisibleChange,align:{offset:[13,3]},content:this.renderContent()},c.default.createElement("div",{className:"config-avatar-wrap"},c.default.createElement(y.default,{customClass:"config-avatar",avatarSrc:n})));if(window.cow&&window.cow.shareStatus&&window.cow.currentFile){var i=/readonly/.test(window.cow.shareStatus.mode),a=window.cow.currentFile.authorized,s=window.cow.currentFile.type;return c.default.createElement("div",null,!i||a||-3!==s&&-1!==s?o:c.default.createElement("div",null,c.default.createElement("div",{style:{float:"right",marginLeft:"10px"}},c.default.createElement(b.default,null)),c.default.createElement("div",{style:{float:"right"}},o)))}return c.default.createElement("div",null,o)}}]),t}(l.Component);t.default=(0,h.default)(k),e.exports=t.default}).call(t,n(27))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(5),f=r(c),d=n(209),p=r(d),h=n(11),m=r(h),v=n(26),y=n(13),g=n(24),b=n(216),w=r(b);n(440);var _=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={starred:e.currentFile.starred},n.notLoggedStar=n.notLoggedStar.bind(n),n.loggedStar=n.loggedStar.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{currentFile:u.PropTypes.object,currentUser:u.PropTypes.object}}}]),s(t,[{key:"notLoggedStar",value:function(){var e=this.props.currentFile.id,t=this.props.currentFile.guid;(0,y.isMobile)()?window.location.href="/register?redirect_url="+encodeURIComponent("/desktop?fileid="+e+"&guid="+t):window.location.href="/register?redirect_url="+encodeURIComponent("/favorites?fileid="+e+"&guid="+t)}},{key:"loggedStar",value:function(){var e=this,t=this.props.currentFile,n=t.id,r=t.type,o=this.props.currentUser.id>0,i=0===r||-2===r?"文档已标星":"表格已标星";this.state.starred?(0,v.unstarFile)(n).then(function(){(0,y.isMobile)()?(0,w.default)({title:"已取消标星"}):(0,g.showAlert)({title:"已取消标星"}),e.setState({starred:!1})},function(e){(0,g.showAlert)({title:e.message,type:"error"})}):(0,v.starFile)(n).then(function(){o&&((0,y.isMobile)()?(0,w.default)({title:i}):(0,g.showAlert)({title:i})),e.setState({starred:!0})},function(e){(0,g.showAlert)({title:e.message,type:"error"})})}},{key:"isReadonly",value:function(e){return!!e.match(/readonly/)}},{key:"isEditable",value:function(e){return!!e.match(/editable/)}},{key:"componentDidMount",value:function(){var e=this.props.currentFile,t=e.shareMode,n=e.type,r=e.teamId,o=this.props.currentUser.id>0,i=this.isReadonly,a=this.isEditable,s=!(0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&!o,u=(0,y.isMobile)()&&a(t)&&(-1===n||-3===n)&&!o,c=(0,y.isMobile)()&&a(t)&&(-1===n||-3===n)&&o,d=(0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&!o,h=(0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&o;s&&f.default.render(l.default.createElement(p.default,null),document.querySelector(".report-dropdown-button")),(c||h)&&f.default.render(l.default.createElement(p.default,{reportLoginClass:"mobile-login"}),document.querySelector(".report-dropdown-button")),(u||d)&&(r?f.default.render(l.default.createElement(p.default,{reportLoginClass:"mobile-sheet-enterprise-no-login"}),document.querySelector(".report-dropdown-button")):f.default.render(l.default.createElement(p.default,{reportLoginClass:"mobile-no-login"}),document.querySelector(".report-dropdown-button")))}},{key:"render",value:function(){var e=this.props.currentFile,t=e.shareMode,n=e.type,r=e.teamId,o=this.props.currentUser.id>0,i=this.isReadonly,a=this.isEditable;if(!(0,y.isMobile)()&&i(t)&&(0===n||-2===n)&&!o)return l.default.createElement("span",null,l.default.createElement("a",{className:"readonly-operation mark-star new-normal-header-btn",onClick:this.notLoggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"})),l.default.createElement("a",{href:"/register",className:"readonly-operation register-or-login new-normal-header-btn"},"注册 / 登录"));if(!(0,y.isMobile)()&&i(t)&&(0===n||-2===n)&&o){var s=(0,m.default)({"readonly-operation":!0,"mark-star":!0,active:this.state.starred,"new-normal-header-btn":!0});return l.default.createElement("span",null,l.default.createElement("a",{className:s,onClick:this.loggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"})))}if(!(0,y.isMobile)()&&a(t)&&(0===n||-2===n)&&!o)return l.default.createElement("div",{className:"right-btn-group"},l.default.createElement("div",{className:"right-btn mark-star new-normal-header-btn",onClick:this.notLoggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"})),l.default.createElement("a",{href:"/register",className:"right-btn register-or-login new-normal-header-btn"},"注册 / 登录"));if(!(0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&!o)return l.default.createElement("div",{className:"readonly-btn-group"},l.default.createElement("a",{className:"readonly-operation mark-star new-normal-header-btn",onClick:this.notLoggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"})),l.default.createElement("a",{href:"/register",className:"readonly-operation register-or-login new-normal-header-btn"},"注册 / 登录"),l.default.createElement("span",{className:"report-dropdown-button w-r-s-n-report-dropdown-button"}));if(!(0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&o){var u=(0,m.default)({"readonly-loggin-star":!0,"header-star-btn":!0,"s-header-star-btn":!0,"new-normal-header-btn":!0,active:this.state.starred});return l.default.createElement("a",{className:u,onClick:this.loggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"}),l.default.createElement("span",{className:"s-tooltip"},this.state.starred?"取消标星":"标星"))}if(!(0,y.isMobile)()&&a(t)&&(-1===n||-3===n)&&!o)return l.default.createElement("div",{className:"right-btn-group"},l.default.createElement("a",{className:"right-btn mark-star new-normal-header-btn",onClick:this.notLoggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"})),l.default.createElement("a",{href:"/register",className:"right-btn register-or-login new-normal-header-btn"},"注册 / 登录"));if((0,y.isMobile)()&&i(t)&&(0===n||-2===n)&&!o)return r?l.default.createElement("span",null,l.default.createElement("a",{className:"favorite-btn",onClick:this.notLoggedStar},"收藏")):l.default.createElement("span",null,l.default.createElement("a",{href:"/register",className:"mobile-register-or-login"},"注册 / 登录"));if((0,y.isMobile)()&&i(t)&&(0===n||-2===n)&&o){var c=(0,m.default)({"readonly-operation":!0,"mobile-star":!0,"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:c,onClick:this.loggedStar},this.state.starred?"已收藏":"标星收藏"))}if((0,y.isMobile)()&&a(t)&&(0===n||-2===n)&&!o)return r?l.default.createElement("span",null,l.default.createElement("a",{className:"favorite-btn",onClick:this.notLoggedStar},"收藏")):l.default.createElement("span",null,l.default.createElement("a",{href:"/register",className:"mobile-register-or-login"},"注册 / 登录"));if((0,y.isMobile)()&&a(t)&&(0===n||-2===n)&&o){var f=(0,m.default)({"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:f,onClick:this.loggedStar},this.state.starred?"已收藏":"标星收藏"))}if((0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&!o)return r?l.default.createElement("div",{className:"readonly-btn-group"},l.default.createElement("span",{className:"report-dropdown-button e-r-s-n-report-dropdown-button"}),l.default.createElement("a",{className:"readonly-operation mobile-readonly-anonymous-star",onClick:this.notLoggedStar},"标星收藏")):l.default.createElement("div",{className:"readonly-btn-group"},l.default.createElement("span",{className:"report-dropdown-button m-r-s-n-report-dropdown-button"}),l.default.createElement("a",{href:"/register",className:"readonly-operation register-or-login"},"注册 / 登录"));if((0,y.isMobile)()&&i(t)&&(-1===n||-3===n)&&o){var d=(0,m.default)({"readonly-operation":!0,"mobile-star":!0,"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("span",{className:"report-dropdown-button m-r-s-l-report-dropdown-button"}),l.default.createElement("a",{className:d,onClick:this.loggedStar},this.state.starred?"已收藏":"标星收藏"))}if((0,y.isMobile)()&&a(t)&&(-1===n||-3===n)&&!o)return r?l.default.createElement("span",null,l.default.createElement("span",{className:"report-dropdown-button e-e-s-n-report-dropdown-button"}),l.default.createElement("a",{className:"mobile-editable-anonymous-star",onClick:this.notLoggedStar},"标星收藏")):l.default.createElement("span",null,l.default.createElement("span",{className:"report-dropdown-button m-e-s-n-report-dropdown-button"}),l.default.createElement("a",{href:"/register",className:"mobile-register-or-login"},"注册 / 登录"));if((0,y.isMobile)()&&a(t)&&(-1===n||-3===n)&&o){var p=(0,m.default)({"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("span",{className:"report-dropdown-button m-e-s-l-report-dropdown-button"}),l.default.createElement("a",{className:p,onClick:this.loggedStar},this.state.starred?"已收藏":"标星收藏"))}return null}}]),t}(u.Component);t.default=_,e.exports=t.default},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(460);window.cow.fallbackHash={"sm_lib.css":{namespace:"sheet",resource:"sm_lib.css",hash:"4747d79db9"},"m_sheet.css":{namespace:"sheet",resource:"m_sheet.css",hash:"67dd6c8d82"},"sheet.css":{namespace:"sheet",resource:"sheet.css",hash:"d7c98e7512"},"sheet.js":{namespace:"sheet",resource:"sheet.js",hash:"bdfc3f301c"},"sheetofflinesync.js":{namespace:"sheet",resource:"sheetofflinesync.js",hash:"e94f72fa39"},"smdocs.js":{namespace:"docs",resource:"smdocs.js",hash:"b9dd8c509a"},"smdocs.css":{namespace:"docs",resource:"smdocs.css",hash:"f9c8032009"},"readonly.css":{namespace:"docs",resource:"readonly.css",hash:"b6cb871ff9"}};var a=function(){function e(){var t=this;r(this,e),this.hash=window.cow.hash&&window.cow.hash.pro||{},this.resources=[],this.resourceType=this.getResourceType(),this.load=function(e){return(0,i.load)(t.resources).then(e)}}return o(e,[{key:"add",value:function(e){var t=this.hash[this.prefix+e]||this.hash[e]||window.cow.fallbackHash[e];if(void 0===t)throw new Error("invalid resource name: "+e);var n=this.getResourceURL(t);return this.push(n)}},{key:"push",value:function(e){return this.resources.push(e),this}},{key:"getResourceURL",value:function(e){var t=e.resource.lastIndexOf("."),n=e.resource.slice(t),r=e.resource.slice(0,t);return"devSheet"===this.resourceType?this.baseURL+"/"+r+n:this.baseURL+"/"+e.namespace+"/"+r+"-"+e.hash+n}},{key:"getResourceType",value:function(){var e=location,t=e.hostname,n=e.port,r="default";return"local.shimodev.com"===t?r="devDoc":"8080"===n&&(r="devSheet"),r}},{key:"baseURL",get:function(){return{devDoc:"/webpack",devSheet:"http://"+window.location.host,default:"https://assets-cdn.shimo.im"}[this.resourceType]}},{key:"prefix",get:function(){var e="",t=location.hostname;return t.indexOf(".shimodev.com")>-1?e=t.replace(".shimodev.com","-"):"staging.shimo.run"===t&&(e="pre-"),e}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i||(i=w?(0,l.default)(y.HOST,{query:{accessToken:window.cow.rnToken}}):window.electronSdk?(0,l.default)(window.electronSdk.getEnv().APP_URL,{query:f.default.pick(s.default.getJSON(),"rememberMeToken","userId")}):(0,l.default)(location.protocol+"//"+location.host,{query:f.default.pick(s.default.getJSON(),"rememberMeToken","userId")}),i.on("connect_error",function(e){window.ga&&window.ga("send","event","socket","connect-error",e.toString()),console.log("connect_error"),console.error(e)}).on("error",function(e){if(console.log("error: "+e),"need_login"===e&&f.default.indexOf(["home","folder","doc","sheet","newdoc"],window.cow.pageType)>-1)return void(b||(location.href="/"));"undefined"!=typeof ga&&window.ga("send","event","socket","error",e),p.default.notify("socket:error",e),(0,g.ajaxPost)("/api/log/jserror",f.default.pick(e,f.default.keysIn(e).concat(["message","stack"])))})),i};var i,a=n(111),s=o(a),u=n(251),l=o(u),c=n(1),f=o(c),d=n(4),p=o(d),h=n(9),m=r(h),v=n(35),y=r(v),g=n(7),b=m.isRNClient(),w=m.isRNClientWithToken();e.exports=t.default},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){"object"===(void 0===e?"undefined":i(e))&&(t=e,e=void 0),t=t||{};var n,r=a(e),s=r.source,f=r.id,d=r.path,p=c[f]&&d in c[f].nsps,h=t.forceNew||t["force new connection"]||!1===t.multiplex||p;return h?(l("ignoring socket cache for %s",s),n=u(s,t)):(c[f]||(l("new io instance for %s",s),c[f]=u(s,t)),n=c[f]),r.query&&!t.query?t.query=r.query:t&&"object"===i(t.query)&&(t.query=o(t.query)),n.socket(r.path,t)}function o(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1),s=n(7),u=n(17),l=n(3)("socket.io-client");e.exports=t=r;var c=t.managers={};t.protocol=s.protocol,t.connect=r,t.Manager=n(17),t.Socket=n(44)},function(e,t,n){(function(t){"use strict";function r(e,n){var r=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),i("parse %s",e),r=o(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":"),s=a?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}var o=n(2),i=n(3)("socket.io-client:url");e.exports=r}).call(t,function(){return this}())},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var a=n.exec(e||""),s={},u=14;u--;)s[r[u]]=a[u]||"";return-1!=o&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t,n){(function(r){function o(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function u(){try{return t.storage.debug}catch(e){}if(void 0!==r&&"env"in r)return r.env.DEBUG}function l(){try{return window.localStorage}catch(e){}}t=e.exports=n(5),t.log=a,t.formatArgs=i,t.save=s,t.load=u,t.useColors=o,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(u())}).call(t,n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){function r(){return t.colors[c++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(l||n);e.diff=i,e.prev=l,e.curr=n,l=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=a[u];n=o.call(e,i),a.splice(u,1),u--}return n}),a=t.formatArgs.apply(e,a),(o.log||t.log||console.log.bind(console)).apply(e,a)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o,t.coerce=u,t.disable=a,t.enable=i,t.enabled=s,t.humanize=n(6),t.names=[],t.skips=[],t.formatters={};var l,c=0},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,l,"day")||i(e,u,"hour")||i(e,s,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,l=24*u,c=365.25*l;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return n(e);if("number"===i&&!1===isNaN(e))return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function r(){}function o(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=d.stringify(e.data)),f("encoded %j as %s",e,n),n}function i(e,t){function n(e){var n=h.deconstructPacket(e),r=o(n.packet),i=n.buffers;i.unshift(r),t(i)}h.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return c();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var o="";"-"!=e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!=e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var i=e.charAt(r);if(","==i)break;if(n.nsp+=i,r==e.length)break}else n.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(n.id="";++r;){var i=e.charAt(r);if(null==i||Number(i)!=i){--r;break}if(n.id+=e.charAt(r),r==e.length)break}n.id=Number(n.id)}return e.charAt(++r)&&(n=u(n,e.substr(r))),f("decoded %s as %j",e,n),n}function u(e,t){try{e.data=d.parse(t)}catch(e){return c()}return e}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error"}}var f=n(8)("socket.io-parser"),d=n(11),p=n(13),h=n(14),m=n(16);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=r,t.Decoder=a,r.prototype.encode=function(e,n){if(f("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)i(e,n);else{n([o(e)])}},p(a.prototype),a.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new l(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!m(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(9),t.log=i,t.formatArgs=o,t.save=a,t.load=s,t.useColors=r,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},function(e,t,n){function r(){return t.colors[c++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(l||n);e.diff=i,e.prev=l,e.curr=n,l=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var i=a[s];n=o.call(e,i),a.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a)),(o.log||t.log||console.log.bind(console)).apply(e,a)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=u,t.disable=a,t.enable=i,t.enabled=s,t.humanize=n(10),t.names=[],t.skips=[],t.formatters={};var l,c=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,l,"day")||i(e,u,"hour")||i(e,s,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,l=24*u,c=365.25*l;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?o(e):r(e)}},function(e,t,n){(function(e,n){var r=!1;(function(){function o(e,t){function n(e){if(n[e]!==v)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,c="function"==typeof u&&b;if(c){(a=function(){return 1}).toJSON=a;try{c="0"===u(0)&&"0"===u(new r)&&'""'==u(new i)&&u(g)===v&&u(v)===v&&u()===v&&"1"===u(a)&&"[1]"==u([a])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,g,null])&&u({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===u(null,a)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new l(-1))}catch(e){c=!1}}o=c}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){a=f(s);var d=5==a.a.length&&1===a.a[0];if(d){try{d=!f('"\t"')}catch(e){}if(d)try{d=1!==f("01")}catch(e){}if(d)try{d=1!==f("1.")}catch(e){}}}}catch(e){d=!1}o=d}}return n[e]=!!o}e||(e=u.Object()),t||(t=u.Object());var r=e.Number||u.Number,i=e.String||u.String,s=e.Object||u.Object,l=e.Date||u.Date,c=e.SyntaxError||u.SyntaxError,f=e.TypeError||u.TypeError,d=e.Math||u.Math,p=e.JSON||u.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,m,v,y=s.prototype,g=y.toString,b=new l(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!n("json")){var w="[object Function]",_="[object Date]",k="[object Number]",E="[object String]",T="[object Array]",C="[object Boolean]",S=n("bug-string-char-index");if(!b)var O=d.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],P=function(e,t){return x[t]+365*(e-1970)+O((e-1969+(t=+(t>1)))/4)-O((e-1901+t)/100)+O((e-1601+t)/400)};if((h=y.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=g?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)h.call(r,o)&&i++;return n=r=null,i?m=2==i?function(e,t){var n,r={},o=g.call(e)==w;for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o=g.call(e)==w;for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,o,i=g.call(e)==w,s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(o=r.length;n=r[--o];s.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var j={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N="000000",M=function(e,t){return(N+(t||0)).slice(-e)},A="\\u00",I=function(e){for(var t='"',n=0,r=e.length,o=!S||r>10,i=o&&(S?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=j[a];break;default:if(a<32){t+=A+M(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},D=function(e,t,n,r,o,i,a){var s,u,l,c,d,p,y,b,w,S,x,j,N,A,L,R;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if((u=g.call(s))!=_||h.call(s,"toJSON"))"function"==typeof s.toJSON&&(u!=k&&u!=E&&u!=T||h.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(P){for(d=O(s/864e5),l=O(d/365.2425)+1970-1;P(l+1,0)<=d;l++);for(c=O((d-P(l,0))/30.42);P(l,c+1)<=d;c++);d=1+d-P(l,c),p=(s%864e5+864e5)%864e5,y=O(p/36e5)%24,b=O(p/6e4)%60,w=O(p/1e3)%60,S=p%1e3}else l=s.getUTCFullYear(),c=s.getUTCMonth(),d=s.getUTCDate(),y=s.getUTCHours(),b=s.getUTCMinutes(),w=s.getUTCSeconds(),S=s.getUTCMilliseconds();s=(l<=0||l>=1e4?(l<0?"-":"+")+M(6,l<0?-l:l):M(4,l))+"-"+M(2,c+1)+"-"+M(2,d)+"T"+M(2,y)+":"+M(2,b)+":"+M(2,w)+"."+M(3,S)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if((u=g.call(s))==C)return""+s;if(u==k)return s>-1/0&&s<1/0?""+s:"null";if(u==E)return I(""+s);if("object"==typeof s){for(A=a.length;A--;)if(a[A]===s)throw f();if(a.push(s),x=[],L=i,i+=o,u==T){for(N=0,A=s.length;N<A;N++)j=D(N,s,n,r,o,i,a),x.push(j===v?"null":j);R=x.length?o?"[\n"+i+x.join(",\n"+i)+"\n"+L+"]":"["+x.join(",")+"]":"[]"}else m(r||s,function(e){var t=D(e,s,n,r,o,i,a);t!==v&&x.push(I(e)+":"+(o?" ":"")+t)}),R=x.length?o?"{\n"+i+x.join(",\n"+i)+"\n"+L+"}":"{"+x.join(",")+"}":"{}";return a.pop(),R}};t.stringify=function(e,t,n){var r,o,i,s;if(a[typeof t]&&t)if((s=g.call(t))==w)o=t;else if(s==T){i={};for(var u,l=0,c=t.length;l<c;u=t[l++],((s=g.call(u))==E||s==k)&&(i[u]=1));}if(n)if((s=g.call(n))==k){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else s==E&&(r=n.length<=10?n:n.slice(0,10));return D("",(u={},u[""]=e,u),o,i,r,"",[])}}if(!n("json-parse")){var L,R,U=i.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},B=function(){throw L=R=null,c()},W=function(){for(var e,t,n,r,o,i=R,a=i.length;L<a;)switch(o=i.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=S?i.charAt(L):i[L],L++,e;case 34:for(e="@",L++;L<a;)if((o=i.charCodeAt(L))<32)B();else if(92==o)switch(o=i.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[o],L++;break;case 117:for(t=++L,n=L+4;L<n;L++)(o=i.charCodeAt(L))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||B();e+=U("0x"+i.slice(t,L));break;default:B()}else{if(34==o)break;for(o=i.charCodeAt(L),t=L;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++L);e+=i.slice(t,L)}if(34==i.charCodeAt(L))return L++,e;B();default:if(t=L,45==o&&(r=!0,o=i.charCodeAt(++L)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(L+1))>=48&&o<=57&&B(),r=!1;L<a&&(o=i.charCodeAt(L))>=48&&o<=57;L++);if(46==i.charCodeAt(L)){for(n=++L;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==L&&B(),L=n}if(101==(o=i.charCodeAt(L))||69==o){for(o=i.charCodeAt(++L),43!=o&&45!=o||L++,n=L;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==L&&B(),L=n}return+i.slice(t,L)}if(r&&B(),"true"==i.slice(L,L+4))return L+=4,!0;if("false"==i.slice(L,L+5))return L+=5,!1;if("null"==i.slice(L,L+4))return L+=4,null;B()}return"$"},V=function(e){var t,n;if("$"==e&&B(),"string"==typeof e){if("@"==(S?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=W());n||(n=!0))n&&(","==e?"]"==(e=W())&&B():B()),","==e&&B(),t.push(V(e));return t}if("{"==e){for(t={};"}"!=(e=W());n||(n=!0))n&&(","==e?"}"==(e=W())&&B():B()),","!=e&&"string"==typeof e&&"@"==(S?e.charAt(0):e[0])&&":"==W()||B(),t[e.slice(1)]=V(W());return t}B()}return e},q=function(e,t,n){var r=H(e,t,n);r===v?delete e[t]:e[t]=r},H=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(g.call(o)==T)for(r=o.length;r--;)q(o,r,n);else m(o,function(e){q(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return L=0,R=""+e,n=V(W()),"$"!=W()&&B(),L=R=null,t&&g.call(t)==w?H((r={},r[""]=n,r),"",t):n}}}return t.runInContext=o,t}var i="function"==typeof r&&r.amd,a={function:!0,object:!0},s=a[typeof t]&&t&&!t.nodeType&&t,u=a[typeof window]&&window||this,l=s&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof n&&n;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),s&&!i)o(u,s);else{var c=u.JSON,f=u.JSON3,d=!1,p=o(u,u.JSON3={noConflict:function(){return d||(d=!0,u.JSON=c,u.JSON3=f,c=f=null),p}});u.JSON={parse:p.parse,stringify:p.stringify}}i&&r(function(){return p})}).call(this)}).call(t,n(12)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var r=n(15),o=n(16);t.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var u in e)a[u]=t(e[u]);return a}return e}var n=[],i=e.data,a=e;return a.data=t(i),a.attachments=n.length,{packet:a,buffers:n}},t.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){return t[e.num]}if(r(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var i in e)e[i]=n(e[i]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){function i(t,u,l){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){a++;var c=new FileReader;c.onload=function(){l?l[u]=this.result:s=this.result,--a||n(s)},c.readAsArrayBuffer(t)}else if(r(t))for(var f=0;f<t.length;f++)i(t[f],f,t);else if(t&&"object"==typeof t&&!o(t))for(var d in t)i(t[d],d,t)}var a=0,s=t;i(s),a||n(s)}}).call(t,function(){return this}())},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);e&&"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new u.Encoder,this.decoder=new u.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(18),a=n(44),s=n(35),u=n(7),l=n(46),c=n(47),f=n(3)("socket.io-client:manager"),d=n(42),p=n(48),h=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},s(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e,t){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=l(n,"open",function(){r.onopen(),e&&e()}),a=l(n,"error",function(t){if(f("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;f("connect attempt will timeout after %d",s);var u=setTimeout(function(){f("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(a),this},r.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(e,"ping",c(this,"onping"))),this.subs.push(l(e,"pong",c(this,"onpong"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){f("error",e),this.emitAll("error",e)},r.prototype.socket=function(e,t){function n(){~d(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[e];if(!r){r=new a(this,e,t),this.nsps[e]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},r.prototype.packet=function(e){f("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){f("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(f("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(f("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(f("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(19)},function(e,t,n){e.exports=n(20),e.exports.parser=n(27)},function(e,t,n){(function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=c(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=c(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof t&&t;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i=n(21),a=n(35),s=n(3)("engine.io-client:socket"),u=n(42),l=n(27),c=n(2),f=n(43),d=n(36);e.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=l.protocol,r.Socket=r,r.Transport=n(26),r.transports=n(21),r.parser=n(27),r.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=o(this.query);return t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id),new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;f=f||t}f||(s('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!f)if("pong"===t.type&&"probe"===t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",c),!c)return;r.priorWebsocketSuccess="websocket"===c.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){f||"closed"!==d.readyState&&(s("changing transport and sending upgrade packet"),l(),d.setTransport(c),c.send([{type:"upgrade"}]),d.emit("upgrade",c),c=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,d.emit("upgradeError",n)}}))}function n(){f||(f=!0,l(),c.close(),c=null)}function o(t){var r=new Error("probe error: "+t);r.transport=c.name,n(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",r)}function i(){o("transport closed")}function a(){o("socket closed")}function u(e){c&&e.name!==c.name&&(s('"%s" works - aborting "%s"',e.name,c.name),n())}function l(){c.removeListener("open",t),c.removeListener("error",o),c.removeListener("close",i),d.removeListener("close",a),d.removeListener("upgrading",u)}s('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),f=!1,d=this;r.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",o),c.once("close",i),this.once("close",a),this.once("upgrading",u),c.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(f(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){s("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~u(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e){function r(t){var n=!1,r=!1,s=!1!==t.jsonp;if(e.location){var u="https:"===location.protocol,l=location.port;l||(l=u?443:80),n=t.hostname!==location.hostname||l!==t.port,r=t.secure!==u}if(t.xdomain=n,t.xscheme=r,"open"in new o(t)&&!t.forceJSONP)return new i(t);if(!s)throw new Error("JSONP disabled");return new a(t)}var o=n(22),i=n(24),a=n(39),s=n(40);t.polling=r,t.websocket=s}).call(t,function(){return this}())},function(e,t,n){(function(t){var r=n(23);e.exports=function(e){var n=e.xdomain,o=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(e){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){(function(t){function r(){}function o(e){if(u.call(this,e),this.requestTimeout=e.requestTimeout,t.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=e.hostname!==t.location.hostname||r!==e.port,this.xs=e.secure!==n}else this.extraHeaders=e.extraHeaders}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var s=n(22),u=n(25),l=n(35),c=n(37),f=n(3)("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=i,c(o,u),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new i(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},o.prototype.doPoll=function(){f("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new s(e),r=this;try{f("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(e){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},f("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}t.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(e){}t.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],o=0,i=n.length;o<i;o++)r.push(n[o]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",a):t.addEventListener&&t.addEventListener("beforeunload",a,!1))}).call(t,function(){return this}())},function(e,t,n){function r(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=n(26),i=n(36),a=n(27),s=n(37),u=n(38),l=n(3)("engine.io-client:polling");e.exports=r;var c=function(){return null!=new(n(22))({xdomain:!1}).responseType}();s(r,o),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){l("pre-pause polling complete"),--r||t()})),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",function(){l("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var o=n(27),i=n(35);e.exports=r,i(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(e){function r(e,n){return n("b"+t.packets[e.type]+e.data.data)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,i=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=g[e.type];for(var s=0;s<i.length;s++)a[s+1]=i[s];return r(a.buffer)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,n,!0,r)},o.readAsArrayBuffer(e.data)}function a(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(y)return i(e,n,r);var o=new Uint8Array(1);return o[0]=g[e.type],r(new _([o.buffer,e.data]))}function s(e){try{e=h.decode(e)}catch(e){return!1}return e}function u(e,t,n){for(var r=new Array(e.length),o=p(e.length,n),i=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},a=0;a<e.length;a++)i(a,e[a],o)}var l,c=n(28),f=n(29),d=n(30),p=n(31),h=n(32);e&&e.ArrayBuffer&&(l=n(33));var m="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),v="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=m||v;t.protocol=3;var g=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=c(g),w={type:"error",data:"parser error"},_=n(34);t.encodePacket=function(t,n,i,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof i&&(s=i,i=null);var u=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&u instanceof ArrayBuffer)return o(t,n,s);if(_&&u instanceof e.Blob)return a(t,n,s);if(u&&u.base64)return r(t,s);var l=g[t.type];return void 0!==t.data&&(l+=i?h.encode(String(t.data)):String(t.data)),s(""+l)},t.encodeBase64Packet=function(n,r){var o="b"+t.packets[n.type];if(_&&n.data instanceof e.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(n.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var s=new Uint8Array(n.data),u=new Array(s.length),l=0;l<s.length;l++)u[l]=s[l];a=String.fromCharCode.apply(null,u)}return o+=e.btoa(a),r(o)},t.decodePacket=function(e,n,r){if(void 0===e)return w;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=s(e)))return w;var o=e.charAt(0);return Number(o)==o&&b[o]?e.length>1?{type:b[o],data:e.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(e),o=i[0],a=d(e,1);return _&&"blob"===n&&(a=new _([a])),{type:b[o],data:a}},t.decodeBase64Packet=function(e,t){var n=b[e.charAt(0)];if(!l)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=l.decode(e.substr(1));return"blob"===t&&_&&(r=new _([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function o(e){return e.length+":"+e}function i(e,r){t.encodePacket(e,!!a&&n,!0,function(e){r(null,o(e))})}"function"==typeof n&&(r=n,n=null);var a=f(e);return n&&a?_&&!y?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void u(e,i,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var o;if(""==e)return r(w,0,1);for(var i,a,s="",u=0,l=e.length;u<l;u++){var c=e.charAt(u);if(":"!=c)s+=c;else{if(""==s||s!=(i=Number(s)))return r(w,0,1);if(a=e.substr(u+1,i),s!=a.length)return r(w,0,1);if(a.length){if(o=t.decodePacket(a,n,!0),w.type==o.type&&w.data==o.data)return r(w,0,1);if(!1===r(o,u+i,l))return}u+=i,s=""}}return""!=s?r(w,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}if(!e.length)return n(new ArrayBuffer(0));u(e,r,function(e,t){var r=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}o[i++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)o[i++]=parseInt(s[a]);o[i++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)o[i++]=r[a]}),n(o.buffer)})},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,a=i.toString(),s=new Uint8Array(a.length+1),o=0;o<a.length;o++)s[o]=parseInt(a[o]);if(s[a.length]=255,_){var u=new _([t.buffer,s.buffer,e]);n(null,u)}})}u(e,r,function(e,t){return n(new _(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,i=[],a=!1;o.byteLength>0;){for(var s=new Uint8Array(o),u=0===s[0],l="",c=1;255!=s[c];c++){if(l.length>310){a=!0;break}l+=s[c]}if(a)return r(w,0,1);o=d(o,2+l.length),l=parseInt(l);var f=d(o,0,l);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var p=new Uint8Array(f);f="";for(var c=0;c<p.length;c++)f+=String.fromCharCode(p[c])}i.push(f),o=d(o,l)}var h=i.length;i.forEach(function(e,o){r(t.decodePacket(e,n,!0),o,h)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t,n){(function(t){function r(e){function n(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(o(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&n(e[i]))return!0}return!1}return n(e)}var o=n(15);e.exports=r}).call(t,function(){return this}())},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)i[s]=o[a];return i.buffer}},function(e,t){function n(e,t,n){function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}var i=!1;return n=n||r,o.count=e,0===e?t():o}function r(){}e.exports=n},function(e,t,n){var r;(function(e,o){!function(i){function a(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function s(e){for(var t,n=e.length,r=-1,o="";++r<n;)t=e[r],t>65535&&(t-=65536,o+=b(t>>>10&1023|55296),t=56320|1023&t),o+=b(t);return o}function u(e,t){return b(e>>t&63|128)}function l(e){if(0==(4294967168&e))return b(e);var t="";return 0==(4294965248&e)?t=b(e>>6&31|192):0==(4294901760&e)?(t=b(e>>12&15|224),t+=u(e,6)):0==(4292870144&e)&&(t=b(e>>18&7|240),t+=u(e,12),t+=u(e,6)),t+=b(63&e|128)}function c(e){for(var t,n=a(e),r=n.length,o=-1,i="";++o<r;)t=n[o],i+=l(t);return i}function f(){if(g>=y)throw Error("Invalid byte index");var e=255&v[g];if(g++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,t,n,r,o;if(g>y)throw Error("Invalid byte index");if(g==y)return!1;if(e=255&v[g],g++,0==(128&e))return e;if(192==(224&e)){var t=f();if((o=(31&e)<<6|t)>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=f(),n=f(),(o=(15&e)<<12|t<<6|n)>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=f(),n=f(),r=f(),(o=(15&e)<<18|t<<12|n<<6|r)>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function p(e){v=a(e),y=v.length,g=0;for(var t,n=[];!1!==(t=d());)n.push(t);return s(n)}var h="object"==typeof t&&t,m=("object"==typeof e&&e&&e.exports,"object"==typeof o&&o);m.global!==m&&m.window;var v,y,g,b=String.fromCharCode,w={version:"1.0.0",encode:c,decode:p};void 0!==(r=function(){return w}.call(t,n,t,e))&&(e.exports=r)}()}).call(t,n(12)(e),function(){return this}())},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,r,o,i,a,s=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(t=0;t<u;t+=4)r=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],i=n[e.charCodeAt(t+2)],a=n[e.charCodeAt(t+3)],f[l++]=r<<2|o>>4,f[l++]=(15&o)<<4|i>>2,f[l++]=(3&i)<<6|63&a;return c}}()},function(e,t){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new i;n(e);for(var o=0;o<e.length;o++)r.append(e[o]);return t.type?r.getBlob(t.type):r.getBlob()}function o(e,t){return n(e),new Blob(e,t||{})}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,a=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),s=a&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),u=i&&i.prototype.append&&i.prototype.getBlob;e.exports=function(){return a?s?t.Blob:o:u?r:void 0}()}).call(t,function(){return this}())},function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do{t=a[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function r(e){var t=0;for(c=0;c<e.length;c++)t=t*s+u[e.charAt(c)];return t}function o(){var e=n(+new Date);return e!==i?(l=0,i=e):e+"."+n(l++)}for(var i,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,u={},l=0,c=0;c<s;c++)u[a[c]]=c;o.encode=n,o.decode=r,e.exports=o},function(e,t,n){(function(t){function r(){}function o(e){i.call(this,e),this.query=this.query||{},s||(t.___eio||(t.___eio=[]),s=t.___eio),this.index=s.length;var n=this;s.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(25),a=n(37);e.exports=o;var s,u=/\n/g,l=/\\n/g;a(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,a=document.createElement("form"),s=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=c,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),e=e.replace(l,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){(function(t){function r(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=f&&!e.forceNode,this.usingBrowserWebSocket||(d=o),i.call(this,e)}var o,i=n(26),a=n(27),s=n(36),u=n(37),l=n(38),c=n(3)("engine.io-client:websocket"),f=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{o=n(41)}catch(e){}var d=f;d||"undefined"!=typeof window||(d=o),e.exports=r,u(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new d(e):new d(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var o=e.length,i=0,s=o;i<s;i++)!function(e){a.encodePacket(e,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),r.perMessageDeflate){("string"==typeof i?t.Buffer.byteLength(i):i.length)<r.perMessageDeflate.threshold&&(a.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,a)}catch(e){c("websocket closed before onclose event")}--o||n()})}(e[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===r.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(o,"]").replace(i,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o=n(7),i=n(35),a=n(45),s=n(46),u=n(47),l=n(3)("socket.io-client:socket"),c=n(29);e.exports=r;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=i.prototype.emit;i(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",u(this,"onopen")),s(e,"packet",u(this,"onpacket")),s(e,"close",u(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),n=o.EVENT;c(t)&&(n=o.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){l("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},r.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);l("sending ack %j",r);var i=c(r)?o.BINARY_ACK:o.ACK;t.packet({type:i,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function n(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}e.exports=n},function(e,t){"use strict";function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}e.exports=n},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])})},function(e,t,n){(function(t){var r=n(0);e.exports=r.createClass({displayName:"exports",propTypes:{customClass:r.PropTypes.string,title:r.PropTypes.string,description:r.PropTypes.string,content:r.PropTypes.node,confirmLabel:r.PropTypes.string,abortLabel:r.PropTypes.string,confirmClass:r.PropTypes.string,abortClass:r.PropTypes.string,confirmFun:r.PropTypes.func,abortFun:r.PropTypes.func,buttons:r.PropTypes.array},getDefaultProps:function(){return{customClass:"",title:"确认弹窗",description:"确定执行该操作吗？",confirmLabel:"确认",abortLabel:"取消",confirmFun:function(){},abortFun:function(){},confirmClass:"",abortClass:"",buttons:[]}},render:function(){return r.createElement("div",{className:"confirm-wrap",onClick:this._handleWrapClick},r.createElement("div",{className:"confirm-dialog dialog "+this.props.customClass},r.createElement("div",{className:"confirm-dialog-header dialog-head"},r.createElement("span",null,this.props.title),r.createElement("span",{className:"hicon icon-close confirm-close",onClick:this._abort})),this._renderDialogBody(),this._renderFooter()))},_customButtonClickFun:function(e,t){var n=this;return function(){"function"==typeof e&&e(),"boolean"==typeof t&&t&&n._cleanup()}},_renderDialogBody:function(){var e=this.props.content;return e?r.createElement("div",{className:"confirm-dialog-content dialog-body"},e):r.createElement("div",{className:"confirm-dialog-content dialog-body",dangerouslySetInnerHTML:{__html:this.props.description}})},_renderFooter:function(){var e=this;if(this.props.buttons.length>0){var n=[];return t.each(this.props.buttons,function(t,o){var i=t.type||"button",a=t.onClick||function(){},s=t.customClass||"",u=t.href||"",l=t.target||"_blank",c=t.buttonLabel||"",f=!!t.closeAfterClick;"link-button"===i?n.push(r.createElement("a",{key:o,className:"btn confirm-btn "+s,href:u,onClick:e._customButtonClickFun(a,f),target:l},c)):"button"===i&&n.push(r.createElement("button",{key:o,className:"btn confirm-btn "+s,onClick:e._customButtonClickFun(a,f)},c))}),r.createElement("div",{className:"confirm-dialog-footer dialog-foot"},n)}return r.createElement("div",{className:"confirm-dialog-footer dialog-foot"},r.createElement("button",{role:"confirm",type:"button",className:"btn btn-ok confirm-btn "+this.props.confirmClass,ref:"confirm",onClick:this._confirm},this.props.confirmLabel),r.createElement("button",{role:"abort",type:"button",className:"btn confirm-btn "+this.props.abortClass,onClick:this._abort},this.props.abortLabel))},_confirm:function(){this.props.confirmFun(),this._cleanup()},_abort:function(){this.props.abortFun(),this._cleanup()},_cleanup:function(){this.props.cleanup&&this.props.cleanup()},_handleWrapClick:function(e){e.target.className.indexOf("confirm-wrap")>-1&&this._abort()}})}).call(t,n(1))},function(e,t,n){(function(r){var o,i;o=[n(87),n(255),n(48),n(101)],void 0!==(i=function(e,t,n,o){return function(){function e(){this.guid=n.genGuid(),this.$view=r("<div></div").addClass("alert hide animated "+this.guid),r("body").append(this.$view),this.$view.html(t),this.$title=this.$view.find(".title"),this.$titleText=this.$title.find("span.text"),this.$content=this.$view.find(".content")}return e.prototype.timeout=void 0,e.prototype.filterXss=function(e){return e=o(e,{whiteList:{span:["class"],br:[]}})},e.prototype.alert=function(e){var t,n;return n=this,e.title?(this.$titleText.html(this.filterXss(e.title)),this.$title.show()):this.$title.hide(),e.content?this.$content.html(this.filterXss(e.content)).show():this.$content.hide(),this.$view.removeClass(null!=(t=this.preOption)?t.type:void 0),this.$view.addClass(e.type),e.delay=e.delay||1e3,this.timeout?(this.hide(),window.setTimeout(function(){return n.$view.removeClass("hide")},100),window.clearTimeout(this.timeout)):this.$view.removeClass("hide"),Infinity!==e.delay&&(this.timeout=window.setTimeout(function(){return n.hide(),n.timeout=void 0},e.delay)),this.preOption=e},e.prototype.hide=function(){return this.$view.addClass("hide")},e}()}.apply(t,o))&&(e.exports=i)}).call(t,n(2))},function(e,t,n){(function(r){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0!==(o=function(){var e=[].slice,t={on:function(e,t,n){return o(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!o(this,"once",e,[t,n])||!t)return this;var i=this,a=r.once(function(){i.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,n)},off:function(e,t,n){var i,a,s,u,l,c,f,d;if(!this._events||!o(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(u=e?[e]:r.keys(this._events),l=0,c=u.length;l<c;l++)if(e=u[l],s=this._events[e]){if(this._events[e]=i=[],t||n)for(f=0,d=s.length;f<d;f++)a=s[f],(t&&t!==a.callback&&t!==a.callback._callback||n&&n!==a.context)&&i.push(a);i.length||delete this._events[e]}return this},trigger:function(t){if(!this._events)return this;var n=e.call(arguments,1);if(!o(this,"trigger",t,n))return this;var r=this._events[t],i=this._events.all;return r&&a(r,n),i&&a(i,arguments),this},stopListening:function(e,t,n){var o=this._listeningTo;if(!o)return this;var a=!t&&!n;n||"object"!==(void 0===t?"undefined":i(t))||(n=this),e&&((o={})[e._listenId]=e);for(var s in o)e=o[s],e.off(t,n,this),(a||r.isEmpty(e._events))&&delete this._listeningTo[s];return this}},n=/\s+/,o=function(e,t,r,o){if(!r)return!0;if("object"===(void 0===r?"undefined":i(r))){for(var a in r)e[t].apply(e,[a,r[a]].concat(o));return!1}if(n.test(r)){for(var s=r.split(n),u=0,l=s.length;u<l;u++)e[t].apply(e,[s[u]].concat(o));return!1}return!0},a=function(e,t){var n,r=-1,o=e.length,i=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,a);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,a,s);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t);return}},s={listenTo:"on",listenToOnce:"once"};return r.each(s,function(e,n){t[n]=function(t,n,o){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=r.uniqueId("l"))]=t,o||"object"!==(void 0===n?"undefined":i(n))||(o=this),t[e](n,o,this),this}}),t.bind=t.on,t.unbind=t.off,t}.call(t,n,t,e))&&(e.exports=o)}).call(t,n(1))},function(e,t){e.exports='<div class="alert-wrap">\n    <div class="title">\n        <span class="text">TITLE..</span>\n    </div>\n    <div class="content">\n      CONTENT...\n    </div>\n</div>\n'},function(e,t,n){function r(e){return void 0===e||null===e}function o(e){var t=e.indexOf(" ");if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=c.trim(e.slice(t+1,-1));var n="/"===e[e.length-1];return n&&(e=c.trim(e.slice(0,-1))),{html:e,closing:n}}function i(e){e=e||{},e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=a.onIgnoreTagStripAll),e.whiteList=e.whiteList||a.whiteList,e.onTag=e.onTag||a.onTag,e.onTagAttr=e.onTagAttr||a.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||a.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||a.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||a.safeAttrValue,e.escapeHtml=e.escapeHtml||a.escapeHtml,this.options=e}var a=n(151),s=n(152),u=s.parseTag,l=s.parseAttr,c=n(88);i.prototype.process=function(e){if(e=e||"",!(e=e.toString()))return"";var t=this,n=t.options,i=n.whiteList,s=n.onTag,f=n.onIgnoreTag,d=n.onTagAttr,p=n.onIgnoreTagAttr,h=n.safeAttrValue,m=n.escapeHtml;if(n.stripBlankChar&&(e=a.stripBlankChar(e)),n.allowCommentTag||(e=a.stripCommentTag(e)),n.stripIgnoreTagBody){var v=a.StripTagBody(n.stripIgnoreTagBody,f);f=v.onIgnoreTag}else v=!1;var y=u(e,function(e,t,n,a,u){var v={sourcePosition:e,position:t,isClosing:u,isWhite:n in i},y=s(n,a,v);if(!r(y))return y;if(v.isWhite){if(v.isClosing)return"</"+n+">";var g=o(a),b=i[n],w=l(g.html,function(e,t){var o=-1!==c.indexOf(b,e),i=d(n,e,t,o);if(!r(i))return i;if(o)return t=h(n,e,t),t?e+'="'+t+'"':e;var i=p(n,e,t,o);return r(i)?void 0:i}),a="<"+n;return w&&(a+=" "+w),g.closing&&(a+=" /"),a+=">"}var y=f(n,a,v);return r(y)?m(a):y},m);return v&&(y=v.remove(y)),y},e.exports=i},function(e,t,n){(function(r){var o;void 0!==(o=function(){return r(document).on("DOMMouseScroll mousewheel",".scrollable",function(e){var t=r(this),n=this.scrollTop,o=this.scrollHeight,i=t.height(),a="DOMMouseScroll"==e.type?-40*e.originalEvent.detail:e.originalEvent.wheelDelta,s=a>0,u=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1};return!s&&-a>o-i-n?(t.scrollTop(o),u()):s&&a>n?(t.scrollTop(0),u()):void 0}),{}}.call(t,n,t,e))&&(e.exports=o)}).call(t,n(2))},function(e,t,n){(function(n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){function t(e){if(e.originalEvent.changedTouches[0].identifier!==f)return void a();e.type="tap",n.event.dispatch.call(this,e),a()}function i(e){e=e.originalEvent,1===e.touches.length&&e.touches[0].identifier==f||a();var t=e.touches[0];(Math.abs(t.clientX-l)>=r||Math.abs(t.clientX-c)>=r)&&a()}function a(){s.off("touchend",t),n(window).off("touchmove",i).off("touchcancel",a)}var s=n(this),u=e.originalEvent.touches[0],l=u.clientX,c=u.clientY,f=u.identifier;s.on("touchend",t),n(window).on("touchmove",i).on("touchcancel",a),setTimeout(a,o)}function t(e){function t(e){e.type="tap",n.event.dispatch.call(this,e),a()}function i(e){(Math.abs(e.clientX-u)>=r||Math.abs(e.clientY-l)>=r)&&a()}function a(){s.off("click",t),n(window).off("mousemove",i)}var s=n(this),u=e.clientX,l=e.clientY;s.on("click",t),n(window).on("mousemove",i),setTimeout(a,o)}var r=5,o=400;n.event.special.tap={setup:function(){"ontouchstart"in window?n(this).on("touchstart",e.bind(this)):n(this).on("mousedown",t.bind(this))},teardown:function(){n(this).off("touchstart",e).off("mousedown",t)}},n.fn.tap=function(e){return this[e?"on":"trigger"]("tap",e)}};t.default=r,e.exports=t.default}).call(t,n(2))},function(e,t,n){"use strict";(function(t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(86),s=n(264),u=n(271),l=n(272),c=n(273),f={qiniu:"https://up.qbox.me/",local:"https://uploader.shimo.im"},d=function(){function e(t){if(r(this,e),this.options=a({validPhotoTypes:e.validPhotoTypes},t),"string"!=typeof this.options.accessToken)throw new TypeError("accessToken must be a string");var n="bearer "+this.options.accessToken;this.options.headers?this.options.headers.Authorization=n:this.options.headers={Authorization:n}}return i(e,[{key:"getStoreType",value:function(e,t,n){return c(e,t,a({validPhotoTypes:this.options.validPhotoTypes},n))}},{key:"getInfo",value:function(e){var t=this;return new Promise(function(n,r){var o=s.post(t._getOrigin("local")+"/token");t._setHeaders(o,t.options.headers),t._setHeaders(o,e.headers);var i=e.qs||{};if(o.query({server:i.server,type:i.type}),!Array.isArray(e.body))throw new TypeError("body must be an array of string");o.send(e.body.map(function(e){if(null!=e&&"string"==typeof e)return e;throw new TypeError("`file` must be a string")})),o.then(function(t){return n(e.rawResponse?t:t.body)},function(e){return r(u(e))})})}},{key:"upload",value:function(e,n,r){var i=this;return new Promise(function(a,c){if(null==e||"object"!==(void 0===e?"undefined":o(e))&&"string"!=typeof e)throw new TypeError("`file` must be a Blob/File/Buffer/String");if(null==n&&(n={}),"string"!=typeof n.serverUrl)throw new TypeError("`serverUrl` must be a string");var f=s.post(n.serverUrl);null==r&&(r={}),i._setHeaders(f,i.options.headers),i._setHeaders(f,r.headers),void 0!==t&&t.isBuffer(e)&&(e=l(e)),f.attach("file",e);for(var d in n)"serverUrl"!==d&&n.hasOwnProperty(d)&&f.field(d,n[d]);"function"==typeof r.onProgress&&f.on("progress",function(e){null==e.percent&&"number"==typeof e.total&&"number"==typeof e.loaded&&(e.percent=e.loaded/e.total*100),r.onProgress(e)}),f.then(function(e){return a(r.rawResponse?e:e.body)},function(e){return c(u(e))})})}},{key:"_getOrigin",value:function(e){return this.options._origin||f[e]}},{key:"_setHeaders",value:function(e,t){if(null!=t&&"object"===(void 0===t?"undefined":o(t)))for(var n in t)t.hasOwnProperty(n)&&e.set(n,t[n])}}],[{key:"getStoreType",value:function(t,n,r){return c(t,n,a({validPhotoTypes:e.validPhotoTypes},r))}},{key:"validPhotoTypes",get:function(){return["jpeg","pjpeg","webp","png","apng","tiff","x-tiff","bmp","gif","x-icon"]}}]),e}();e.exports=d}).call(t,n(260).Buffer)},function(e,t,n){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function o(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?f(e,t,n):h(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return u(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(u(t),e=i(e,t<0?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function d(e,t){var n=t.length<0?0:0|m(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function h(e,t){if(a.isBuffer(t)){var n=0|m(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?i(e,0):d(e,t);if("Buffer"===t.type&&Z(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),a.alloc(+e)}function y(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return $(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,o);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(o){var c=-1;for(l=n;l<s;l++)if(i(e,l)===i(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var f=!0,d=0;d<u;d++)if(i(e,l+d)!==i(t,d)){f=!1;break}if(f)return l}return-1}function k(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function E(e,t,n,r){return G($(t,e.length-n),e,n,r)}function T(e,t,n,r){return G(Y(t),e,n,r)}function C(e,t,n,r){return T(e,t,n,r)}function S(e,t,n,r){return G(z(t),e,n,r)}function O(e,t,n,r){return G(K(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=n){var u,l,c,f;switch(s){case 1:i<128&&(a=i);break;case 2:u=e[o+1],128==(192&u)&&(f=(31&i)<<6|63&u)>127&&(a=f);break;case 3:u=e[o+1],l=e[o+2],128==(192&u)&&128==(192&l)&&(f=(15&i)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[o+1],l=e[o+2],c=e[o+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(f=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=s}return j(r)}function j(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=H(e[i]);return o}function I(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function F(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,o){return o||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function V(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function z(e){return J.toByteArray(V(e))}function G(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function X(e){return e!==e}var J=n(261),Q=n(262),Z=n(263);t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=o(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return l(null,e,t,n)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):g.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,o){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,s=n-t,u=Math.min(i,s),l=this.slice(r,o),c=e.slice(t,n),f=0;f<u;++f)if(l[f]!==c[f]){i=l[f],s=c[f];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var o=t-e;r=new a(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=a.isBuffer(e)?e:$(new a(e,r).toString()),u=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(25))},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-r(e)}function i(e){var t,n,o,i,a,s=e.length;i=r(e),a=new f(3*s/4-i),n=i>0?s-4:s;var u=0;for(t=0;t<n;t+=4)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[u++]=o>>16&255,a[u++]=o>>8&255,a[u++]=255&o;return 2===i?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[u++]=255&o):1===i&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[u++]=o>>8&255,a[u++]=255&o),a}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(a(r));return o.join("")}function u(e){for(var t,n=e.length,r=n%3,o="",i=[],a=16383,u=0,c=n-r;u<c;u+=a)i.push(s(e,u,u+a>c?c:u+a));return 1===r?(t=e[n-1],o+=l[t>>2],o+=l[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=l[t>>10],o+=l[t>>4&63],o+=l[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=o,t.toByteArray=i,t.fromByteArray=u;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=d.length;p<h;++p)l[p]=d[p],c[d.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=l}return(p?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?d/u:d*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[n+p]=255&a,p+=h,a/=256,l-=8);e[n+p-h]|=128*m}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){function r(){}function o(e){if(!m(e))return e;var t=[];for(var n in e)i(t,n,e[n]);return t.join("&")}function i(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){i(e,t,n)});else if(m(n))for(var r in n)i(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function a(e){for(var t,n,r={},o=e.split("&"),i=0,a=o.length;i<a;++i)t=o[i],n=t.indexOf("="),-1==n?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function s(e){var t,n,r,o,i=e.split(/\r?\n/),a={};i.pop();for(var s=0,u=i.length;s<u;++s)n=i[s],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),o=w(n.slice(t+1)),a[r]=o;return a}function u(e){return/[\/+]json\b/.test(e)}function l(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function c(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new l(n)}catch(t){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=t,n.xhr?(e.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",t);var r;try{n._isResponseOK(t)||(r=new Error(t.statusText||"Unsuccessful HTTP response"),r.original=e,r.response=t,r.status=t.status)}catch(e){r=e}r?n.callback(r,t):n.callback(null,t)})}function f(e,t,n){var r=b("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}var d;"undefined"!=typeof window?d=window:"undefined"!=typeof self?d=self:(console.warn("Using browser-only version of superagent in non-browser environment"),d=this);var p=n(265),h=n(266),m=n(89),v=n(267),y=n(268),g=n(270),b=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=c,b.getXHR=function(){if(!(!d.XMLHttpRequest||d.location&&"file:"==d.location.protocol&&d.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var w="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=o,b.parseString=a,b.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},y(l.prototype),l.prototype._parseBody=function(e){var t=b.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&u(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},l.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=t,o.url=n,o},b.Response=l,p(c.prototype),h(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},c.prototype.auth=function(e,t,n){switch("object"==typeof t&&null!==t&&(n=t),n||(n={type:"function"==typeof btoa?"basic":"auto"}),n.type){case"basic":this.set("Authorization","Basic "+btoa(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},c.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new d.FormData),this._formData},c.prototype.callback=function(e,t){if(this._maxRetries&&this._retries++<this._maxRetries&&g(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._appendQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");v(this._sort)?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},c.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||r,this._appendQueryString(),this._end()},c.prototype._end=function(){var e=this,t=this.xhr=b.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var o=this._header["content-type"],i=this._serializer||b.serialize[o?o.split(";")[0]:""];!i&&u(o)&&(i=b.serialize["application/json"]),i&&(n=i(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},b.get=function(e,t,n){var r=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.head=function(e,t,n){var r=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.options=function(e,t,n){var r=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.del=f,b.delete=f,b.patch=function(e,t,n){var r=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.post=function(e,t,n){var r=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.put=function(e,t,n){var r=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var i=n(89);e.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},r.prototype.retry=function(e){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=i(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},r.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t,n){function r(e){return"[object Function]"===(o(e)?Object.prototype.toString.call(e):"")}var o=n(89);e.exports=r},function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var i=n(269);e.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var n=i.params(t);for(var r in n)this[r]=n[r];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e}},function(e,t){t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&delete e.cookie,e}},function(e,t){var n=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];e.exports=function(e,t){return!!(e&&e.code&&~n.indexOf(e.code))||(!!(t&&t.status&&t.status>=500)||(!!(e&&"timeout"in e&&"ECONNABORTED"==e.code)||!!(e&&"crossDomain"in e)))}},function(e,t,n){"use strict";function r(e){var t={status:500,message:"UNKNOWN"};if(e&&(e.message&&(t.message=e.message),e.status&&(t.status=e.status),e.response)){var n=t.responseText=e.response.text||"";try{var r=JSON.parse(n);(r.message||"string"==typeof r.error)&&(t.message=r.message||r.error)}catch(e){}}return t}e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return e}},function(e,t,n){"use strict";var r=n(274);e.exports=function(e,t,n){return new Promise(function(o,i){if("undefined"==typeof Blob)throw new Error("Blob is not supported in running browser");if(e instanceof Blob==!1)throw new TypeError("`file` must be a Blob / File");null==n&&(n={});var a=n.validPhotoTypes instanceof Array?n.validPhotoTypes:[],s=new FileReader;s.onload=function(){var e=r(this.result);if(!e)return!0!==t?o("attachments"):i(new Error("Failed to check file type"));var n=e.mime.split("/");if("image"===n[0]&&a.indexOf(n[1])>-1)return o("images");o("attachments")},s.onerror=function(e){i(new Error("Failed to read file: "+String(e)))},s.readAsArrayBuffer(e)})}},function(e,t,n){"use strict";e.exports=function(e){var t=new Uint8Array(e);if(!(t&&t.length>1))return null;if(255===t[0]&&216===t[1]&&255===t[2])return{ext:"jpg",mime:"image/jpeg"};if(137===t[0]&&80===t[1]&&78===t[2]&&71===t[3])return{ext:"png",mime:"image/png"};if(71===t[0]&&73===t[1]&&70===t[2])return{ext:"gif",mime:"image/gif"};if(87===t[8]&&69===t[9]&&66===t[10]&&80===t[11])return{ext:"webp",mime:"image/webp"};if(70===t[0]&&76===t[1]&&73===t[2]&&70===t[3])return{ext:"flif",mime:"image/flif"};if((73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3])&&67===t[8]&&82===t[9])return{ext:"cr2",mime:"image/x-canon-cr2"};if(73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3])return{ext:"tif",mime:"image/tiff"};if(66===t[0]&&77===t[1])return{ext:"bmp",mime:"image/bmp"};if(73===t[0]&&73===t[1]&&188===t[2])return{ext:"jxr",mime:"image/vnd.ms-photo"};if(56===t[0]&&66===t[1]&&80===t[2]&&83===t[3])return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(80===t[0]&&75===t[1]&&3===t[2]&&4===t[3]&&109===t[30]&&105===t[31]&&109===t[32]&&101===t[33]&&116===t[34]&&121===t[35]&&112===t[36]&&101===t[37]&&97===t[38]&&112===t[39]&&112===t[40]&&108===t[41]&&105===t[42]&&99===t[43]&&97===t[44]&&116===t[45]&&105===t[46]&&111===t[47]&&110===t[48]&&47===t[49]&&101===t[50]&&112===t[51]&&117===t[52]&&98===t[53]&&43===t[54]&&122===t[55]&&105===t[56]&&112===t[57])return{ext:"epub",mime:"application/epub+zip"};if(80===t[0]&&75===t[1]&&3===t[2]&&4===t[3]&&77===t[30]&&69===t[31]&&84===t[32]&&65===t[33]&&45===t[34]&&73===t[35]&&78===t[36]&&70===t[37]&&47===t[38]&&109===t[39]&&111===t[40]&&122===t[41]&&105===t[42]&&108===t[43]&&108===t[44]&&97===t[45]&&46===t[46]&&114===t[47]&&115===t[48]&&97===t[49])return{ext:"xpi",mime:"application/x-xpinstall"};if(!(80!==t[0]||75!==t[1]||3!==t[2]&&5!==t[2]&&7!==t[2]||4!==t[3]&&6!==t[3]&&8!==t[3]))return{ext:"zip",mime:"application/zip"};if(117===t[257]&&115===t[258]&&116===t[259]&&97===t[260]&&114===t[261])return{ext:"tar",mime:"application/x-tar"};if(82===t[0]&&97===t[1]&&114===t[2]&&33===t[3]&&26===t[4]&&7===t[5]&&(0===t[6]||1===t[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(31===t[0]&&139===t[1]&&8===t[2])return{ext:"gz",mime:"application/gzip"};if(66===t[0]&&90===t[1]&&104===t[2])return{ext:"bz2",mime:"application/x-bzip2"};if(55===t[0]&&122===t[1]&&188===t[2]&&175===t[3]&&39===t[4]&&28===t[5])return{ext:"7z",mime:"application/x-7z-compressed"};if(120===t[0]&&1===t[1])return{ext:"dmg",mime:"application/x-apple-diskimage"};if(0===t[0]&&0===t[1]&&0===t[2]&&(24===t[3]||32===t[3])&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]||51===t[0]&&103===t[1]&&112===t[2]&&53===t[3]||0===t[0]&&0===t[1]&&0===t[2]&&28===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&109===t[8]&&112===t[9]&&52===t[10]&&50===t[11]&&109===t[16]&&112===t[17]&&52===t[18]&&49===t[19]&&109===t[20]&&112===t[21]&&52===t[22]&&50===t[23]&&105===t[24]&&115===t[25]&&111===t[26]&&109===t[27]||0===t[0]&&0===t[1]&&0===t[2]&&28===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&105===t[8]&&115===t[9]&&111===t[10]&&109===t[11]||0===t[0]&&0===t[1]&&0===t[2]&&28===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&109===t[8]&&112===t[9]&&52===t[10]&&50===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&0===t[15])return{ext:"mp4",mime:"video/mp4"};if(0===t[0]&&0===t[1]&&0===t[2]&&28===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&77===t[8]&&52===t[9]&&86===t[10])return{ext:"m4v",mime:"video/x-m4v"};if(77===t[0]&&84===t[1]&&104===t[2]&&100===t[3])return{ext:"mid",mime:"audio/midi"};if(26===t[0]&&69===t[1]&&223===t[2]&&163===t[3]){var n=t.subarray(4,4100),r=n.findIndex(function(e,t,n){return 66===n[t]&&130===n[t+1]});if(r>=0){var o=r+3,i=function(e){return Array.from(e).every(function(e,t){return n[o+t]===e.charCodeAt(0)})};if(i("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(i("webm"))return{ext:"webm",mime:"video/webm"}}}return 0===t[0]&&0===t[1]&&0===t[2]&&20===t[3]&&102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]?{ext:"mov",mime:"video/quicktime"}:82===t[0]&&73===t[1]&&70===t[2]&&70===t[3]&&65===t[8]&&86===t[9]&&73===t[10]?{ext:"avi",mime:"video/x-msvideo"}:48===t[0]&&38===t[1]&&178===t[2]&&117===t[3]&&142===t[4]&&102===t[5]&&207===t[6]&&17===t[7]&&166===t[8]&&217===t[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===t[0]&&0===t[1]&&1===t[2]&&"b"===t[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===t[0]&&68===t[1]&&51===t[2]||255===t[0]&&251===t[1]?{ext:"mp3",mime:"audio/mpeg"}:102===t[4]&&116===t[5]&&121===t[6]&&112===t[7]&&77===t[8]&&52===t[9]&&65===t[10]||77===t[0]&&52===t[1]&&65===t[2]&&32===t[3]?{ext:"m4a",mime:"audio/m4a"}:79===t[28]&&112===t[29]&&117===t[30]&&115===t[31]&&72===t[32]&&101===t[33]&&97===t[34]&&100===t[35]?{ext:"opus",mime:"audio/opus"}:79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]?{ext:"ogg",mime:"audio/ogg"}:102===t[0]&&76===t[1]&&97===t[2]&&67===t[3]?{ext:"flac",mime:"audio/x-flac"}:82===t[0]&&73===t[1]&&70===t[2]&&70===t[3]&&87===t[8]&&65===t[9]&&86===t[10]&&69===t[11]?{ext:"wav",mime:"audio/x-wav"}:35===t[0]&&33===t[1]&&65===t[2]&&77===t[3]&&82===t[4]&&10===t[5]?{ext:"amr",mime:"audio/amr"}:37===t[0]&&80===t[1]&&68===t[2]&&70===t[3]?{ext:"pdf",mime:"application/pdf"}:77===t[0]&&90===t[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==t[0]&&70!==t[0]||87!==t[1]||83!==t[2]?123===t[0]&&92===t[1]&&114===t[2]&&116===t[3]&&102===t[4]?{ext:"rtf",mime:"application/rtf"}:0===t[0]&&97===t[1]&&115===t[2]&&109===t[3]?{ext:"wasm",mime:"application/wasm"}:119===t[0]&&79===t[1]&&70===t[2]&&70===t[3]&&(0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]||79===t[4]&&84===t[5]&&84===t[6]&&79===t[7])?{ext:"woff",mime:"application/font-woff"}:119===t[0]&&79===t[1]&&70===t[2]&&50===t[3]&&(0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]||79===t[4]&&84===t[5]&&84===t[6]&&79===t[7])?{ext:"woff2",mime:"application/font-woff"}:76===t[34]&&80===t[35]&&(0===t[8]&&0===t[9]&&1===t[10]||1===t[8]&&0===t[9]&&2===t[10]||2===t[8]&&0===t[9]&&2===t[10])?{ext:"eot",mime:"application/octet-stream"}:0===t[0]&&1===t[1]&&0===t[2]&&0===t[3]&&0===t[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===t[0]&&84===t[1]&&84===t[2]&&79===t[3]&&0===t[4]?{ext:"otf",mime:"application/font-sfnt"}:0===t[0]&&0===t[1]&&1===t[2]&&0===t[3]?{ext:"ico",mime:"image/x-icon"}:70===t[0]&&76===t[1]&&86===t[2]&&1===t[3]?{ext:"flv",mime:"video/x-flv"}:37===t[0]&&33===t[1]?{ext:"ps",mime:"application/postscript"}:253===t[0]&&55===t[1]&&122===t[2]&&88===t[3]&&90===t[4]&&0===t[5]?{ext:"xz",mime:"application/x-xz"}:83===t[0]&&81===t[1]&&76===t[2]&&105===t[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===t[0]&&69===t[1]&&83===t[2]&&26===t[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===t[0]&&114===t[1]&&50===t[2]&&52===t[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===t[0]&&83===t[1]&&67===t[2]&&70===t[3]||73===t[0]&&83===t[1]&&99===t[2]&&40===t[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===t[0]&&60===t[1]&&97===t[2]&&114===t[3]&&99===t[4]&&104===t[5]&&62===t[6]&&10===t[7]&&100===t[8]&&101===t[9]&&98===t[10]&&105===t[11]&&97===t[12]&&110===t[13]&&45===t[14]&&98===t[15]&&105===t[16]&&110===t[17]&&97===t[18]&&114===t[19]&&121===t[20]?{ext:"deb",mime:"application/x-deb"}:33===t[0]&&60===t[1]&&97===t[2]&&114===t[3]&&99===t[4]&&104===t[5]&&62===t[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===t[0]&&171===t[1]&&238===t[2]&&219===t[3]?{ext:"rpm",mime:"application/x-rpm"}:31===t[0]&&160===t[1]||31===t[0]&&157===t[1]?{ext:"Z",mime:"application/x-compress"}:76===t[0]&&90===t[1]&&73===t[2]&&80===t[3]?{ext:"lz",mime:"application/x-lzip"}:208===t[0]&&207===t[1]&&17===t[2]&&224===t[3]&&161===t[4]&&177===t[5]&&26===t[6]&&225===t[7]?{ext:"msi",mime:"application/x-msi"}:6===t[0]&&14===t[1]&&43===t[2]&&52===t[3]&&2===t[4]&&5===t[5]&&1===t[6]&&1===t[7]&&13===t[8]&&1===t[9]&&2===t[10]&&1===t[11]&&1===t[12]&&2===t[13]?{ext:"mxf",mime:"application/mxf"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,u=o(r.length),l=t(n)?Object(new n(u)):new Array(u),c=0;c<u;)s=r[c],l[c]=a?void 0===i?a(s,c):a.call(i,s,c):s,c+=1;return l.length=u,l}}()),t.default={},e.exports=t.default},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(25))},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(462),i=n(334);e.exports=r},function(e,t,n){function r(e){var t=e.apiUrl;return new Promise(function(n,r){(0,u.ajaxPost)(t,(0,l.omit)(e,"apiUrl")).then(function(e){0===e.code?n(e.data):e&&void 0===e.code?n(e):r(new Error(e.message))},function(e){r(e)})})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file,recent_contact,team_member,collaborator",n=arguments[2],o=arguments[3],i=arguments[4],a=arguments[5];return r({apiUrl:c.SEARCH_ALL,keyword:e,type:t,page:n,pageSize:o,fileId:i,teamId:a})}function i(e,t,n){return r({apiUrl:c.SEARCH_FILES,keyword:e,page:t,pageSize:n})}function a(e,t,n,o){return r({apiUrl:c.SEARCH_RECENT_CONTACTS,keyword:e,page:t,pageSize:n,teamId:o})}function s(e,t,n){return r({apiUrl:c.SEARCH_TEAM_MEMBERS,keyword:e,page:t,pageSize:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.searchAll=o,t.searchFiles=i,t.searchRecentContacts=a,t.searchTeamMembers=s;var u=n(7),l=n(1),c=n(35);t.default={searchAll:o,searchFiles:i,searchRecentContacts:a,searchTeamMembers:s}},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=n(149),i=n(150),a="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(426),d=r(f),p=n(429),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDocumentScroll=n.handleDocumentScroll.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{trigger:l.PropTypes.array,overlay:l.PropTypes.element,style:l.PropTypes.object,onVisibleChange:l.PropTypes.func,visible:l.PropTypes.bool,align:l.PropTypes.object,mask:l.PropTypes.bool,getPopupContainer:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-dropdown",trigger:["click"],mask:!1}}}]),u(t,[{key:"componentDidMount",value:function(){this.mousewheelHandler=this.handleDocumentScroll(),document.addEventListener("mousewheel",this.mousewheelHandler,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousewheel",this.mousewheelHandler,!1)}},{key:"handleDocumentScroll",value:function(){var e=this;return(0,h.default)(function(t){"sm-dropdown-mask"===t.target.className&&e.refs.dropdown.refs.trigger.setPopupVisible(!1)},200)}},{key:"render",value:function(){return c.default.createElement(d.default,s({ref:"dropdown",overlayClassName:this.props.className},this.props))}}]),t}(l.Component);t.default=m,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(24),f=n(7),d=n(49),p=r(d),h=n(13),m=n(216),v=r(m),y=n(34);n(242);var g=function(e){var t=0===e.order,n=null;n=t?l.default.createElement("input",{type:"radio",name:"report-reason",value:e.reason,defaultChecked:!0}):l.default.createElement("input",{type:"radio",name:"report-reason",value:e.reason});var r=function(){e.changeSelection(e.order)};return l.default.createElement("div",{className:e.selection===e.order?"report-dialog-radio active":"report-dialog-radio",onClick:r},l.default.createElement("label",null,n,"0"===e.reason?"其他原因":e.reason))};g.propTypes={order:u.PropTypes.number,changeSelection:u.PropTypes.func,selection:u.PropTypes.number,reason:u.PropTypes.string};var b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={reportReason:"政治敏感",selection:0},n.doReport=n.doReport.bind(n),n.changeSelection=n.changeSelection.bind(n),n.handleReportInfo=n.handleReportInfo.bind(n),n.renderBodyTpl=n.renderBodyTpl.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{close:u.PropTypes.func}}}]),s(t,[{key:"checkData",value:function(){if(3===this.state.selection){var e=this.emailInput?this.emailInput.value:"",t=this.textarea.value,n=(0,h.isMobile)()?v.default:c.showAlert;return e?y.emailReg.test(e)?!!t||(n({title:"请输入详细原因",type:"error"}),!1):(n({title:"邮箱格式不对",type:"error"}),!1):(n({title:"邮箱不能为空",type:"error"}),!1)}return!0}},{key:"doReport",value:function(){var e=this;if(this.checkData()){var t=window.navigator.plugins,n=Array.from(t).map(function(e){return e.name}).join(),r=window.navigator.userAgent,o=window.cow.currentUser.id>0?window.cow.currentUser.id:""+n+r,i=window.cow.currentFile.guid,a=this.emailInput?this.emailInput.value:"",s={guid:i,userId:o,email:a,reportReason:this.state.reportReason,reportReasonInfo:this.textarea.value},u=(0,h.isMobile)()?v.default:c.showAlert;(0,f.ajaxPost)("/smapi/files/report",s).then(function(t){if(0!==t.code)throw new Error("");u({title:"举报已收到，感谢您的反馈"}),e.props.close()}).catch(function(){u({title:"抱歉，您的网络状况不佳，请再提交一次",type:"error"})})}}},{key:"changeSelection",value:function(e){this.setState({selection:e})}},{key:"handleReportInfo",value:function(e){this.setState({reportReason:e.target.value})}},{key:"renderBodyTpl",value:function(){var e=this,t=["政治敏感","疑似诈骗","低俗色情","抄袭／侵权","垃圾广告","0"],n=(0,h.isMobile)(),r=this.state.selection;return l.default.createElement("div",{className:""},l.default.createElement("div",{className:"report-dialog-header"},l.default.createElement("span",{className:"report-dialog-title"},"请选择举报的理由")),l.default.createElement("div",{className:"report-dialog-body"},l.default.createElement("div",{className:"report-dialog-radios",onChange:this.handleReportInfo},t.map(function(t,n){return l.default.createElement(g,{key:n,reason:t,order:n,selection:r,changeSelection:e.changeSelection})})),3===r?l.default.createElement("div",null,l.default.createElement("input",{className:"report-dialog-textarea sm-form-control",style:{height:"auto",marginBottom:"10px"},ref:function(t){e.emailInput=t},placeholder:"填写举报人邮箱（必填）"}),l.default.createElement("textarea",{className:"report-dialog-textarea sm-form-control",ref:function(t){e.textarea=t},placeholder:"请提供有效证明材料，如疑似抄袭请填写原文链接或描述内容出处（必填）"})):l.default.createElement("textarea",{className:"report-dialog-textarea sm-form-control",ref:function(t){e.textarea=t},placeholder:"如有需要，请填写举报详情，也可留下您的联系方式，处理后我们会尽快联系您。"})),l.default.createElement("div",{className:"report-dialog-footer"},l.default.createElement("button",{className:"report-dialog-btn report-dialog-btn-report",onClick:this.doReport},"举报"),!n&&l.default.createElement("button",{className:"report-dialog-btn report-dialog-btn-cancel",onClick:this.props.close},"取消")))}},{key:"render",value:function(){return l.default.createElement(p.default,{customClass:"report-dialog",open:!0,onClose:this.props.close,bodyTpl:this.renderBodyTpl,enableCloseClickMask:!1,hasCloseButton:!0})}}]),t}(u.Component);t.default=b,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),i=n(204),a=r(i),s=function(){switch(!0){case!(0,o.isMobile)():(0,a.default)(6,"0055");break;case(0,o.isIOS)():(0,a.default)(6,"0000");break;case(0,o.isAndroid)():(0,a.default)(6,"0002")}},u=function(){switch(!0){case!(0,o.isMobile)():(0,a.default)(6,"0056");break;case(0,o.isIOS)():(0,a.default)(6,"0001");break;case(0,o.isAndroid)():(0,a.default)(6,"0003")}};t.default={docStatistic:s,sheetStatistic:u},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(91),a=n(244),s=n(245),u=n(80).v4,l=function(){function e(t){var n=this;r(this,e),this.key="shimo-offline-data",this.userId=t.userId,t.localStorage||"undefined"==typeof localStorage||(t.localStorage=localStorage),this.clientId=t.clientId,this.store=t.localStorage;try{this.store.setItem("test","test")}catch(e){throw new Error("离线功能暂时不可用")}var o=this._getAll(),i=u();Object.keys(o).forEach(function(e){if(o[e]){var t=Object.keys(o[e]);t.forEach(function(r){t[0]&&/^[a-zA-Z0-9]{16}$/.test(t[0])&&(n.set(r,o[e][r],i),o=n._getAll(),delete o[e][r],n.store.setItem(n.key,JSON.stringify(o)),o=n._getAll())})}})}return o(e,[{key:"_getAll",value:function(){return JSON.parse(this.store.getItem(this.key))||{}}},{key:"getAll",value:function(){return this._getAll()[this.userId]||{}}},{key:"get",value:function(e,t){var n=t||this.clientId;return a(this._getAll(),this.userId+"."+n+"."+e)}},{key:"remove",value:function(e,t){var n=t||this.clientId,r=this._getAll();a(r,this.userId+"."+n+"."+e)&&(delete r[this.userId][n][e],0===Object.keys(r[this.userId][n]).length&&delete r[this.userId][n]),this.store.setItem(this.key,JSON.stringify(r))}},{key:"set",value:function(e,t,n){var r=n||this.clientId,o=this._getAll(),a=this.userId;s(o,a+"."+r+"."+e,i({guid:e},t)),this.store.setItem(this.key,JSON.stringify(o))}}]),e}();e.exports=l},function(e,t,n){(function(r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),s=function(){function e(){o(this,e),this.isReady=!1,this.guideDocTitle="欢迎使用石墨文档",this.$tipContainter=r("body"),this.sheetSplashName="spread_sheet_splash",this.needToGuide()&&(window.cow.guideStatus?this.guideStatus=window.cow.guideStatus:this.getGuideInfo()),this.accountTypeStatus=""}return i(e,[{key:"needToGuide",value:function(){return(["payment","home","folder"].indexOf(window.cow.pageType)>=0||this.isGuideDoc())&&!cow.isMobile&&!cow.readonly&&cow.currentUser.id>0}},{key:"checkIsReady",value:function(){var e=this,t=r.Deferred();return e.isReady?t.resolve(e.guideStatus):e.getGuideInfo().then(function(){return e.isReady=!0,t.resolve(e.guideStatus)}).catch(function(){return t.reject()}),t.promise()}},{key:"getGuideInfo",value:function(){var e=this;return(0,a.ajaxGet)("/api/user_guide_info",{guide_type:"web"}).then(function(t){if(0===t.code)return window.cow.guideStatus=t.data.status,e.guideStatus=window.cow.guideStatus,window.cow.guideStatus.tips=[],e.isReady=!0,"";throw new Error(t.message)})}},{key:"getMembershipInfo",value:function(){var e=this;return(0,a.ajaxGet)("/api/get_membership_info",{}).then(function(t){if(0===t.code)return e.shouldNotifyRenewal=t.data.shouldNotifyRenewal,e.shouldNotifyExpiration=t.data.shouldNotifyExpiration,e.shouldNotifyExceedMemberCount=t.data.shouldNotifyExceedMemberCount,cow.currentUser.accountTypeExpiredAt=t.data.accountTypeExpiredAt,"";throw new Error(t.message)})}},{key:"removeMembershipTip",value:function(){return(0,a.ajaxPost)("/flash_messages/read",{message_name:"membership_"+this.accountTypeStatus})}},{key:"removeTipAjax",value:function(e){var t=this;return(0,a.ajaxPost)("/api/update_user_guide_info",{guide_type:"web",type:e}).then(function(n){if(0===n.code)return window.cow.guideStatus[e]=t.guideStatus[e]=!0,""})}},{key:"isGuideDoc",value:function(){return"doc"===window.cow.pageType&&window.cow.currentFile.name===this.guideDocTitle}}]),e}();t.default=new s,e.exports=t.default}).call(t,n(2))},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(91),u=n(110),l=n(80).v4,c=n(288).EventEmitter2,f=n(289)("collab:client"),d=n(454),p=n(329),h=[].slice,m={memory:n(456),localStorage:n(284)},v={etherpad:n(457),spreadsheet:n(458),quill:n(459)},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.id=e.id||l(),n.userId=e.userId,n.rev=e.rev,n.docType=e.docType,n.fileId=e.fileId,n.pullUrl=e.pullUrl.replace("{fileId}",n.fileId),n.composeUrl=e.composeUrl.replace("{fileId}",n.fileId),n.editor=v[e.type](e.editor);var i="string"==typeof e.store?m[e.store||"memory"]:e.store,a=void 0;try{a=new i({userId:n.userId,clientId:n.id})}catch(e){n.emit("warning","离线编辑功能暂不可用"),a=new m.memory({userId:n.userId,clientId:n.id})}return n.store=n.wrapStore(a),n.editor.setUserChangeNotificationCallback(function(){try{n.compose()}catch(e){n.onFatalError(e)}}),n.changePool=[],n.delayRunTimeouts={},n.onPullSuccess=n.onPullSuccess.bind(n),n.onPullError=n.onPullError.bind(n),n.onComposeSuccess=n.onComposeSuccess.bind(n),n.onComposeError=n.onComposeError.bind(n),f("id %s created",n.id),n.pull(),n}return i(t,e),a(t,[{key:"compose",value:function(){if(this.editor.getInInternationalComposition&&this.editor.getInInternationalComposition())return void this.delayRun(this.compose,1e3);var e=Date.now();if(this.saving=!0,this.lastComposeTime&&e-this.lastComposeTime<1e3)return f("compose too ofter, delay run in %s ms",e-this.lastComposeTime),void this.delayRun(this.compose,e-this.lastComposeTime);this.lastComposeTime=e;var t=this.editor.getUncommittedChanges(this.waitingForResponse);if(t&&t.changeset){f("store offline data to localStorage",t);var n=s({},t,{rev:this.rev,fileId:this.fileId,clientId:this.clientId});this.waitingForResponse?this.store.set(this.fileId,{committingCS:this._lastComposeData,userCS:n,docType:this.docType}):this.store.set(this.fileId,{committingCS:n,docType:this.docType})}if(!this.stopped){if(this.waitingForResponse)return void this.delayRun(this.compose,3e3);var r=this.editor.prepareUserChangeset();if(!r||!r.changeset)return void(this.saving=!1);f("id %s compose new cs based on rev %s",this.id,this.rev),r.rev=this.rev,f("id %s sending changeset rev: %s cs: %j",this.id,r.rev,r.changeset);var o=this._lastComposeData={fileId:this.fileId,clientId:this.id,rev:r.rev,changeset:r.changeset,apool:JSON.stringify(r.apool),guid:l().replace(/-/g,"")};u({url:this.composeUrl,method:"post",data:o}).then(this.onComposeSuccess).catch(this.onComposeError),this.waitingForResponse=!0}}},{key:"pull",value:function(){var e=this;if(!this.stopped){if(this.changePool.length>0)return void this.onPullSuccess();if(!this.pulling){this.pulling=!0;var t=this.pullUrl.split("?"),n=p.parse(t[1]);s(n,{rev:this.rev,clientId:this.id,sse:1});var r=this.eventSource=new d(t[0]+"?"+p.stringify(n));r.addEventListener("changes",function(t){JSON.parse(t.data).forEach(function(t){return e.changePool.push(t)}),e.pull()}),r.addEventListener("pull_error",function(t){var n=void 0;try{n=JSON.parse(t.data)}catch(t){n={message:"Bad error message from server"},f("bad error message content : "+t)}f("pull_error message "+n.message),e.onPullError(new Error(n.message))});var o=function(){var t=Date.now();e.lastErrorTime||(e.lastErrorTime=t);var n=t-e.lastErrorTime<5e3;e.lastErrorTime=t,e.pulling=!1;try{r.close()}catch(e){}if(n)return e.delayRun(e.pull,5e3);e.pull()};r.addEventListener("close",o),r.addEventListener("error",o),r.addEventListener("pull_error",o)}}}},{key:"resend",value:function(){this.stopped||(f("resend"),u({url:this.composeUrl,method:"post",params:{resend:1},data:this._lastComposeData}).then(this.onComposeSuccess).catch(this.onComposeError))}},{key:"onPullSuccess",value:function(){if(this.editor.getInInternationalComposition&&this.editor.getInInternationalComposition())return void this.delayRun(this.onPullSuccess,1e3,e);var e=this.changePool.shift();if(f("pull success",e),!e)return void this.pull();if(e.rev&&this.rev>e.rev)return f("changeset rev is lower than current rev"),void this.emit("error",new Error("Unexpected changeset rev, remote "+e.rev+" current "+this.rev));if("new"===e.type){f("id %s applyChangesToBase %j",this.id,e);try{this.editor.applyChangesToBase(e)}catch(e){this.onFatalError(e)}}else if("accept"===e.type){f("id %s accept commit %j",this.id,e),this.store.remove(this.fileId),this.waitingForResponse=!1,this.emit("accept");try{this.editor.applyPreparedChangesetToBase({changeset:e.changeset,newRev:e.rev,padId:e.padId,type:e.type})}catch(e){this.onFatalError(e)}}else("pull_error"===e.type||e.errorMessage)&&this.emit("error",new Error(e.message||e.errorMessage));e.rev&&(this.rev=e.rev),this.pull()}},{key:"onPullError",value:function(e){if(e&&e instanceof Error)return this.emit("bad_changeset",s({rev:this.rev},this.editor.getUncommittedChanges())),f("bad changeset, trying clear delayRun resend"),clearInterval(this.resendInterval),this.emit("error",new Error("bad_changeset"))}},{key:"onComposeSuccess",value:function(e){if("2"!==String(e.status)[0]&&(e.data||e.code)){var t=new Error(e.message||JSON.stringify(e.data));t.status=e.status||e.code,this.onComposeError(t)}}},{key:"onComposeError",value:function(e){return console.error(e),this._isNetworkError(e)&&(this.state="OFFLINE"),this.delayRun(this.resend,1500)}},{key:"onFatalError",value:function(e){console.error(e),this.emit("error",e)}},{key:"delayRun",value:function(e,t){var n=this,r=e.toString(),o=this.delayRunTimeouts[r],i=h.call(arguments).slice(2);o&&clearTimeout(o),this.delayRunTimeouts[r]=setTimeout(function(){return e.apply(n,i)},t)}},{key:"stop",value:function(e){f("id %s stopped",this.id),this.stopped=!0;for(var t in this.delayRunTimeouts)clearTimeout(this.delayRunTimeouts[t]);clearInterval(this.resendInterval),clearTimeout(this.waitingForResponseTimeout),e&&this.emit("error",e),setTimeout(this.removeAllListeners,0),this.eventSource.close()}},{key:"_isNetworkError",value:function(e){if(!e)return!1;var t=String(e.message).toLowerCase();return[0,502,503,429,408].indexOf(e.status)>-1||t.indexOf("connect")>-1||t.indexOf("no available worker")>-1||t.indexOf("no available receiver")>-1||t.indexOf("socket hang up")>-1}},{key:"wrapStore",value:function(e){var t=this,n={};return["getAll","get","remove","set"].forEach(function(r){e&&"function"==typeof e[r]&&(n[r]=function(){e[r].apply(e,arguments),t.emit.apply(this,["store:"+r].concat(h.call(arguments,0)))})}),n}},{key:"state",set:function(e){e!==this._state&&(this._state=e,f("id %s change state to %s",this.id,e),this.emit("save_state",e))},get:function(){return this._state}},{key:"saving",set:function(e){var t=this._saving=e;this.state=t?"SAVING":"SAVED"},get:function(){return this._saving}},{key:"waitingForResponse",set:function(e){var t=this;(this._waitingForResponse=e)?(this.lastSavingTime=Date.now(),this.waitingForResponseTimeout=setTimeout(function(){f("accept commit timeout"),t.emit("error",new Error("accept_commit_timeout"))},6e4),this.resendInterval=setInterval(function(){f("resend data due to 5s timeout"),t.resend()},5e3)):(this.saving=!1,this.lastSavedTime=Date.now(),clearTimeout(this.waitingForResponseTimeout),clearInterval(this.resendInterval))},get:function(){return this._waitingForResponse}}]),t}(c);e.exports=y},function(e,t,n){var r;!function(o){function i(){this._events={},this._conf&&a.call(this,this._conf)}function a(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function s(e){this._events={},this.newListener=!1,a.call(this,e)}function u(e,t,n,r){if(!n)return[];var o,i,a,s,l,c,f,d=[],p=t.length,h=t[r],m=t[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(o=0,i=n._listeners.length;o<i;o++)e&&e.push(n._listeners[o]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(u(e,t,n[a],r+1)));return d}if("**"===h){f=r+1===p||r+2===p&&"*"===m,f&&n._listeners&&(d=d.concat(u(e,t,n,p)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!f&&(d=d.concat(u(e,t,n[a],p))),d=d.concat(u(e,t,n[a],r))):d=a===m?d.concat(u(e,t,n[a],r+2)):d.concat(u(e,t,n[a],r)));return d}d=d.concat(u(e,t,n[h],r+1))}if(s=n["*"],s&&u(e,t,s,r+1),l=n["**"])if(r<p){l._listeners&&u(e,t,l,p);for(a in l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===m?u(e,t,l[a],r+2):a===h?u(e,t,l[a],r+1):(c={},c[a]=l[a],u(e,t,{"**":c},r+1)))}else l._listeners?u(e,t,l,p):l["*"]&&l["*"]._listeners&&u(e,t,l["*"],p);return d}function l(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var o=this.listenerTree,i=e.shift();i;){if(o[i]||(o[i]={}),o=o[i],0===e.length){if(o._listeners){if("function"==typeof o._listeners)o._listeners=[o._listeners,t];else if(c(o._listeners)&&(o._listeners.push(t),!o._listeners.warned)){var a=f;void 0!==this._events.maxListeners&&(a=this._events.maxListeners),a>0&&o._listeners.length>a&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace&&console.trace())}}else o._listeners=t;return!0}i=e.shift()}return!0}var c=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=10;s.EventEmitter2=s,s.prototype.delimiter=".",s.prototype.setMaxListeners=function(e){this._events||i.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},s.prototype.event="",s.prototype.once=function(e,t){return this.many(e,1,t),this},s.prototype.many=function(e,t,n){function r(){0==--t&&o.off(e,r),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(e,r),o},s.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,o,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(t=new Array(s),o=1;o<s;o++)t[o]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,a,l,this.listenerTree,0)}else{if("function"==typeof(a=this._events[e])){switch(this.event=e,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];a.apply(this,t)}return!0}a&&(a=a.slice())}if(a&&a.length){if(s>3)for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,o,a,s=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),o=1;o<l;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,l){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,a,c,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,l){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),o=1;o<l;o++)t[o-1]=arguments[o];s.push(a.apply(this,t))}else if(a&&a.length){if(l>3)for(t=new Array(l-1),o=1;o<l;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,l){case 1:s.push(a[r].call(this));break;case 2:s.push(a[r].call(this,arguments[1]));break;case 3:s.push(a[r].call(this,arguments[1],arguments[2]));break;default:s.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},s.prototype.on=function(e,t){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");if(this._events||i.call(this),this.emit("newListener",e,t),this.wildcard)return l.call(this,e,t),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],t];else if(c(this._events[e])&&(this._events[e].push(t),!this._events[e].warned)){var n=f;void 0!==this._events.maxListeners&&(n=this._events.maxListeners),n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace&&console.trace())}}else this._events[e]=t;return this},s.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(e,t){function n(e){if(e!==o){var t=Object.keys(e);for(var r in t){var i=t[r],a=e[i];a instanceof Function||"object"!=typeof a||(Object.keys(a).length>0&&n(e[i]),0===Object.keys(a).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();i=u.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var l=i[s];if(r=l._listeners,c(r)){for(var f=-1,d=0,p=r.length;d<p;d++)if(r[d]===t||r[d].listener&&r[d].listener===t||r[d]._origin&&r[d]._origin===t){f=d;break}if(f<0)continue;return this.wildcard?l._listeners.splice(f,1):this._events[e].splice(f,1),0===r.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},s.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||i.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=u.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var o=n[r];o._listeners=null}else{if(!this._events||!this._events[e])return this;this._events[e]=null}return this},s.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return u.call(this,t,n,this.listenerTree,0),t}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),c(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},s.prototype.listenersAny=function(){return this._all?this._all:[]},(r=function(){return s}.call(t,n,t,e))!==o&&(e.exports=r)}()},function(e,t,n){(function(r){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function u(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}function l(){try{return window.localStorage}catch(e){}}t=e.exports=n(452),t.log=a,t.formatArgs=i,t.save=s,t.load=u,t.useColors=o,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(u())}).call(t,n(92))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=o(c),d=n(5),p=o(d),h=n(11),m=o(h),v=n(180),y=o(v),g=n(212),b=o(g),w=n(601),_=o(w);n(602);var k=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={position:n.calcPosition()},n.getTooltipContainer=n.getTooltipContainer.bind(n),n.componentResize=n.componentResize.bind(n),n.componentClick=n.componentClick.bind(n),n.handleTriggerEvent=n.handleTriggerEvent.bind(n),n.handleTriggerEvents=r.zipObject(e.triggerEvents,e.triggerEvents.map(function(){return n.handleTriggerEvent})),e.isDebounced&&(n.handleTriggerEvents=r.zipObject(e.triggerEvents,e.triggerEvents.map(function(t){return e.debounceConfig&&r.isNumber(e.debounceConfig[t])?r.debounce(n.handleTriggerEvent,e.debounceConfig[t]):r.debounce(n.handleTriggerEvent,e.maxWait)}))),n}return u(t,e),l(t,null,[{key:"propTypes",get:function(){return{text:c.PropTypes.string,colorName:c.PropTypes.string,customClass:c.PropTypes.string,positionNodeElement:c.PropTypes.instanceOf(Element),triggerNodeElement:c.PropTypes.instanceOf(Element),triggerEvents:c.PropTypes.array,autoUpdate:c.PropTypes.bool,isDebounced:c.PropTypes.bool,debounceConfig:c.PropTypes.object,maxWait:c.PropTypes.number,offsetLeft:c.PropTypes.number,offsetTop:c.PropTypes.number,color:c.PropTypes.string,hasBubble:c.PropTypes.bool,viewRect:c.PropTypes.shape({minLeft:c.PropTypes.number,minTop:c.PropTypes.number,maxLeft:c.PropTypes.numner,maxTop:c.PropTypes.number}),visible:c.PropTypes.bool,placement:c.PropTypes.oneOf(["top","right","bottom","left","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]),autoHide:c.PropTypes.bool,onNeedHide:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{offsetLeft:0,offSetTop:0,color:"#41464b",hasBubble:!0,placement:"left",colorName:"yellow",autoUpdate:!0,isDebounced:!1,maxWait:300,triggerEvents:[]}}}]),l(t,[{key:"componentDidMount",value:function(){this.bindTriggerEvents()}},{key:"componentWillReceiveProps",value:function(e){e&&(e.visible&&!this.props.visible?(this.updatePosition(e),this.bindTriggerEvents(e)):!e.visible&&this.props.visible?this.unbindTriggerEvents(this.props):e.autoUpdate&&!this.props.autoUpdate?this.bindTriggerEvents(e):!e.autoUpdate&&this.props.autoUpdate?this.unbindTriggerEvents(this.props):e.triggerNodeElement&&!this.props.triggerNodeElement?this.bindTriggerEvents(e):!e.triggerNodeElement&&this.props.triggerNodeElement?this.unbindTriggerEvents(this.props):e.triggerEvents.length!==this.props.triggerEvents.length&&(this.unbindTriggerEvents(this.props),this.bindTriggerEvents(e)))}},{key:"componentWillUnmount",value:function(){this.intervalId>-1&&(clearInterval(this.intervalId),this.intervalId=-1),this.unbindTriggerEvents()}},{key:"bindTriggerEvents",value:function(e){var t=this,n=e||this.props,r=n.autoUpdate,o=n.triggerNodeElement,i=n.triggerEvents;r&&o&&i.length&&i.forEach(function(e){o.addEventListener(e,t.handleTriggerEvents[e])})}},{key:"unbindTriggerEvents",value:function(e){var t=this,n=e||this.props,r=n.autoUpdate,o=n.triggerNodeElement,i=n.triggerEvents;r&&o&&i.length&&i.forEach(function(e){o.removeEventListener(e,t.handleTriggerEvents[e])})}},{key:"handleTriggerEvent",value:function(){this.props.visible&&this.updatePosition()}},{key:"calcPosition",value:function(e){var t=e||this.props,n=t.positionNodeElement,r=t.offsetLeft,o=t.offsetTop;if(!n)return{left:0,top:0};var i=n.getBoundingClientRect(),a=i.top+window.pageYOffset-n.clientTop;return{left:i.left+window.pageXOffset-n.clientLeft+(isNaN(r)?0:r),top:a+(isNaN(o)?0:o)}}},{key:"getTooltipContainer",value:function(){return p.default.findDOMNode(this)}},{key:"renderBubble",value:function(){var e=this.props,t=e.hasBubble,n=e.visible;return t&&n?f.default.createElement(_.default,null):f.default.createElement("div",{className:"guide-no-bubble"})}},{key:"componentResize",value:function(){this.updatePosition()}},{key:"componentClick",value:function(){this.props.autoHide&&"function"==typeof this.props.onNeedHide&&this.props.onNeedHide()}},{key:"updatePosition",value:function(e,t){var n=this.state.position,r=this.calcPosition(e);["top","left"].some(function(e){return r[e]!==n[e]})&&this.setState({position:r},function(){"function"==typeof t&&t(r)})}},{key:"render",value:function(){var e;if(!this.props.positionNodeElement)return null;var t=this.state.position,n=this.props,o=n.customClass,a=n.colorName,s=n.viewRect;if(s&&(r.isNumber(s.minLeft)&&t.left<s.minLeft||r.isNumber(s.minTop)&&t.top<s.minTop||r.isNumber(s.maxLeft)&&t.left>s.maxLeft||r.isNumber(s.maxTop)&&t.top>s.maxTop))return null;var u=r.assign({position:"fixed",pointerEvents:"none"},t),l=(0,m.default)((e={"guide-tip-wrap":!0},i(e,""+o,!!o),i(e,""+a,!!a),e));return f.default.createElement("div",{className:l,style:u},f.default.createElement(b.default,{title:this.props.text,arrowPointAtCenter:!0,placement:this.props.placement,visible:this.props.visible,getTooltipContainer:this.getTooltipContainer},this.renderBubble()))}}]),t}(c.Component);t.default=(0,y.default)(k),e.exports=t.default}).call(t,n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(33),f=n(11),d=r(f),p=n(24),h=n(7),m=n(26),v=n(155),y=r(v),g=n(205),b=r(g),w=n(47),_=r(w),k=n(550),E=r(k),T=n(586),C=r(T),S=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderItem=n.renderItem.bind(n),n.renderAction=n.renderAction.bind(n),n.handleUserListClick=n.handleUserListClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,data:u.PropTypes.array,getPopupContainer:u.PropTypes.func,setPermission:u.PropTypes.func,getSharedUsers:u.PropTypes.func,getListData:u.PropTypes.func,onButtonClick:u.PropTypes.func,renderActionComponent:u.PropTypes.func,hasMore:u.PropTypes.bool,sharedUserCount:u.PropTypes.number}}},{key:"defaultProps",get:function(){return{data:[],overflow:[0,40],sharedUserCount:0}}}]),s(t,[{key:"handleUserListClick",value:function(e,t){var n=this;if("transfer"===t)return this.props.onButtonClick("transfer");var r="升级到高级版或企业版，获得无限制协作",o=this.props.file.guid,i=this.props.sharedUserCount;e.id?this.props.setPermission(this.props.file.guid,e.id,t,!0).then(function(e){if(e.error){if(!(0,y.default)(void 0,(0,m.findFileByGuid)(void 0,o),v.ACTION_TYPE_ADD_COLLAB,i))return;return-1!==e.error.message.indexOf(r)?(0,_.default)({title:"到达上限",description:e.error.message,buttons:[{buttonLabel:"了解详情",customClass:"btn btn-ok",closeAfterClick:!0,type:"link-button",href:"/payment"},{buttonLabel:"取消",customClass:"btn",closeAfterClick:!0,type:"button"}]}):void(0,p.showAlert)({title:e.error.message,type:"error"})}"add"===t?(0,p.showAlert)({title:"添加成功"}):"remove"===t&&(0,p.showAlert)({title:"移除成功"})}):(0,h.ajaxPost)("/api/invite",{file_id:this.props.file.id,users:e.email}).then(function(t){var a=t.data,s=a.success,u=a.detail;if(s)n.props.getSharedUsers(n.props.file.guid),n.forceUpdate();else{if(!(0,y.default)(e,(0,m.findFileByGuid)(o),v.ACTION_TYPE_ADD_COLLAB,i))return;if(u.length&&u[0].error){-1!==u[0].error.message.indexOf(r)?(0,_.default)({title:"到达上限",description:u[0].error.message,buttons:[{buttonLabel:"了解详情",customClass:"btn btn-ok",closeAfterClick:!0,type:"link-button",href:"/payment"},{buttonLabel:"取消",customClass:"btn",closeAfterClick:!0,type:"button"}]}):(0,p.showAlert)({title:u[0].error.message,type:"error"})}else(0,p.showAlert)({title:"未知错误, 请稍后重试",type:"error"})}})}},{key:"renderAction",value:function(e){return this.props.renderActionComponent?this.props.renderActionComponent(e):l.default.createElement(C.default,{userId:e.id,email:e.email,file:this.props.file,permission:e.permission,getPopupContainer:this.props.getPopupContainer,handleActionClick:this.handleUserListClick})}},{key:"renderItem",value:function(e){var t=cow.currentUser.id===e.id?e.name+" (我)":e.name,n=(0,d.default)("user-list-item",{outsider:e.isOutsider,disabled:"disabled"===e.teamRole});return l.default.createElement("div",{className:n,key:e.id||-1},l.default.createElement(c.ImageIcon,{customClass:"avatar",defaultImg:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",realImg:e.avatar}),l.default.createElement("span",{className:"name"},l.default.createElement(b.default,{width:86},t)),l.default.createElement("span",{className:"email ellipsis"},e.email),this.renderAction(e))}},{key:"render",value:function(){return l.default.createElement(E.default,{className:"user-list",initData:this.props.data,data:this.props.data,hasMore:this.props.hasMore,renderItem:this.renderItem,getListData:this.props.getListData,getPopupContainer:this.props.getPopupContainer})}}]),t}(u.Component);t.default=S,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(33),d=n(202),p=n(205),h=(r(p),n(478)),m=r(h),v=n(482),y=r(v),g=n(483),b=r(g),w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAddPanelBtnClick=n.handleAddPanelBtnClick.bind(n),n.handleTransferButtonClick=n.handleTransferButtonClick.bind(n),n.handleContentSwitch=n.handleContentSwitch.bind(n),n.renderBody=n.renderBody.bind(n),n.onClose=n.onClose.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{file:l.PropTypes.object,storage:l.PropTypes.object,maxShareCount:l.PropTypes.number,getSharedUsers:l.PropTypes.func,setPermission:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{disableAddUser:!1}}}]),u(t,[{key:"handleAddPanelBtnClick",value:function(){this.props.popModal(),this.props.pushModal(y.default,{file:this.props.file})}},{key:"handleTransferButtonClick",value:function(){this.props.popModal(),this.props.pushModal(b.default,{file:this.props.file})}},{key:"handleContentSwitch",value:function(e){"add"===e&&this.handleAddPanelBtnClick(),"transfer"===e&&this.handleTransferButtonClick()}},{key:"onClose",value:function(){this.props.cleanModals()}},{key:"renderHeader",value:function(){return c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},"协作"),c.default.createElement("span",{className:"hicon icon-close dialog-close-btn",onClick:this.onClose}))}},{key:"renderBody",value:function(){return c.default.createElement(m.default,s({},this.props,{showButton:!0,onButtonClick:this.handleContentSwitch}))}},{key:"render",value:function(){return c.default.createElement(f.Dialog,{open:!0,hasMask:!1,ref:"target",customClass:"teamworker-sharelist-inner",headTpl:this.renderHeader,bodyTpl:this.renderBody,actions:[],onClose:this.onClose})}}]),t}(l.Component);t.default=(0,d.register)("SharedUsersDialog",w),e.exports=t.default},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LOADING_STATE=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(26),d=r(f),p=10,h=t.LOADING_STATE={INITIAL:"initial",LOADING:"loading",LOADED:"loaded",FAILED:"failed"},m={result:null,page:0,pageCount:0,count:0,loadingState:h.INITIAL},v=function(){return function(t){var n=function(n){function r(t){o(this,r);var n=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return n.state=m,n.onSearch=e.debounce(n.onSearch.bind(n),300),n.reset=n.reset.bind(n),n}return a(r,n),u(r,[{key:"componentWillReceiveProps",value:function(e){this.props.visible&&!e.visible&&this.reset()}},{key:"reset",value:function(){this.setState(m)}},{key:"onSearch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||!e.trim())return void this.reset();this.setState({loadingState:h.LOADING}),d.default.searchFile(e,n,p).then(function(e){var n=e.page,r=e.pageCount,o=e.count,i=e.results;n>0&&(i=(t.state.result||[]).concat(i)),t.setState({page:n,result:i,pageCount:r,count:o,loadingState:h.LOADED})},function(){t.setState({result:[],loadingState:h.FAILED})})}},{key:"render",value:function(){var e=this.state,n=e.page,r=e.pageCount,o=e.count,i={onSearch:this.onSearch,paging:{page:n,pageCount:r,count:o},searchResult:this.state.result,loadingState:this.state.loadingState};return c.default.createElement(t,s({},this.props,i))}}]),r}(c.default.Component);return n.propTypes={visible:l.PropTypes.bool},n}};t.default=v}).call(t,n(1))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=null,r=function(){for(var r=0;r<t.length;r++){var o=t[r];if(o.condition===e)return"function"==typeof o.result?o.result():o.result}return"function"==typeof n?n():n||null},o=function(e){return n=e,{done:r}};return{when:function e(n,i){return t.push({condition:n,result:i}),{when:e,others:o,done:r}},others:o,done:r}},e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!!t.reduce(function(e,t){return e?e[t]:null},window)};t.default=n,e.exports=t.default},function(e,t){function n(e){var t="";return s.some(function(n){return n.tag===e&&(t=n.items[0].tag,!0)}),t}function r(e,t){var n=[];if(s.some(function(t){return t.tag===e&&(n=t.items,!0)})){var r=null;if(n.some(function(e){return e.tag===t&&(r=e,!0)}))return r}return null}function o(){return{groupTag:s[0].tag,item:s[0].items[0]}}function i(e){var t=-1;return s.some(function(n,r){return n.tag===e&&(t=r,!0)})?t:-1}function a(e,t){return s.some(function(n){return n.tag===t&&!!n.items.some(function(t){return t.tag===e})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstTagInGroup=n,t.getItemData=r,t.getDefaultData=o,t.getGroupIndex=i,t.isIncludeGroup=a;var s=[{label:"协作功能",tag:"cooperation",items:[{tag:"assignTask",label:"待办事项 指派任务",img:"https://assets-cdn.shimo.im/assets/images/help/team_assign_task-5136ede733.gif",desc:"在文档内添加 <b>任务列表</b>，创建待办事项。输入 <b>“@” + 协作者的名字</b> 提及协作者、分配任务，对方会收到消息通知"},{tag:"invite",label:"邀请好友协作",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_invite-a462dd5645.gif",desc:"在文档内页，点击页面右上角 <b>“协作”</b> ，添加成员的邮箱，开始协作编辑。可以给协作者设置不同的<b>权限</b> “只能评论”、“只能阅读”"},{tag:"share",label:"公开链接分享",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_share-c9de567e7a.gif",desc:"在文档内页，点击页面右上角 <b>“分享”</b> 开启公开链接，复制链接给朋友，朋友即可访问文档。可以设置分享权限 <b>“只读／可写”</b>，可以随时关闭公开链接"},{tag:"comment",label:"划词评论",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_comment-caad713501.gif",desc:"选中文档里的文字／图片，或者点击某行文字右侧的 <b>“评论”</b> 按钮，添加划词评论"},{tag:"history",label:"编辑历史与还原",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_history-a3980efd56.gif",desc:"在文档内页，点击页面右上角的 <b>“查看” - “历史”</b>，你的所有编辑记录都在这里，还可随时还原历史编辑"},{tag:"at",label:"提醒 @人 @文档",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_at-cedcc4f72c.gif",desc:"在文档里输入 <b>“@” + 协作者的名字</b> 提及协作者、分配任务，对方会收到消息提醒。输入 <b>“@” + 文件名</b> 提及你的文档、表格、文件夹，创建文档索引"}]},{label:"文档功能",tag:"doc",items:[{tag:"import",label:"导入文档",img:"https://assets-cdn.shimo.im/assets/images/help/doc_import-a57f5c2d70.gif",desc:"在桌面，点击页面左上角的 <b>“新建” - “导入”</b>，导入文档，支持导入 <b>Word／Excel</b> 文件"},{tag:"export",label:"导出文档",img:"https://assets-cdn.shimo.im/assets/images/help/doc_export-db846391ec.gif",desc:"在文档内页，点击页面右上角 <b>“操作” - “导出”</b>，可以导出文档为 <b>pdf</b> 格式、<b>Word</b> 文件、<b>jpg</b> 图片"},{tag:"hyperlink",label:"插入超链接",img:"https://assets-cdn.shimo.im/assets/images/help/doc_hyperlink-88b929d698.gif",desc:"选中需要插入链接的文字，点击工具栏 <b>“插入” - “超链接”</b>，输入链接地址，按回车键确定"},{tag:"uploadFile",label:"插入图片、附件",img:"https://assets-cdn.shimo.im/assets/images/help/doc_upload_file-6e6f1da0b4.gif",desc:"将光标定位在文档中需要插入文件的位置，点击工具栏 <b>“插入” - “图片”／“附件”</b>，选择文件上传"},{tag:"format",label:"格式编辑",img:"https://assets-cdn.shimo.im/assets/images/help/doc_format-196afd42ae.gif",desc:"选中需要调整格式的文字或段落，点击工具栏中相应的工具，编辑格式"},{tag:"wordCount",label:"字数统计",img:"https://assets-cdn.shimo.im/assets/images/help/doc_word_count-378b691e8f.gif",desc:"选中想要统计字数的文字，页面下方会显示对应字数"}]}];t.default=s},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(512),i=n(515);e.exports=r},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||c.test(e)?f(e.slice(2),n?2:8):u.test(e)?a:+e}var o=n(79),i=n(279),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;e.exports=r},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(199),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;void 0!==(o=function(){function e(e,t,r){m.WeixinJSBridge?WeixinJSBridge.invoke(e,n(t),function(t){a(e,t,r)}):l(e,r)}function t(e,t,n){m.WeixinJSBridge?WeixinJSBridge.on(e,function(r){n&&n.trigger&&n.trigger(r),a(e,r,t)}):n?l(e,n):l(e,t)}function n(e){return e=e||{},e.appId=N.appId,e.verifyAppId=N.appId,e.verifySignType="sha1",e.verifyTimestamp=N.timestamp+"",e.verifyNonceStr=N.nonceStr,e.verifySignature=N.signature,e}function o(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function i(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function a(e,t,n){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var r=t.errMsg;r||(r=t.err_msg,delete t.err_msg,r=s(e,r),t.errMsg=r),n=n||{},n._complete&&(n._complete(t),delete n._complete),r=t.errMsg||"",N.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var o=r.indexOf(":");switch(r.substring(o+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function s(e,t){var n=e,r=g[n];r&&(n=r);var o="ok";if(t){var i=t.indexOf(":");o=t.substring(i+1),"confirm"==o&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),o=o.replace(/_/g," "),o=o.toLowerCase(),("access denied"==o||"no permission to execute"==o)&&(o="permission denied"),"config"==n&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return t=n+":"+o}function u(e){if(e){for(var t=0,n=e.length;n>t;++t){var r=e[t],o=y[r];o&&(e[t]=o)}return e}}function l(e,t){if(!(!N.debug||t&&t.isInnerInvoke)){var n=g[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function c(e){if(!(E||T||N.debug||x<"6.0.2"||j.systemType<0)){var t=new Image;j.appId=N.appId,j.initTime=P.initEndTime-P.initStartTime,j.preVerifyTime=P.preVerifyEndTime-P.preVerifyStartTime,L.getNetworkType({isInnerInvoke:!0,success:function(e){j.networkType=e.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+j.version+"&o="+j.isPreVerifyOk+"&s="+j.systemType+"&c="+j.clientVersion+"&a="+j.appId+"&n="+j.networkType+"&i="+j.initTime+"&p="+j.preVerifyTime+"&u="+j.url;t.src=n}})}}function f(){return(new Date).getTime()}function d(e){C&&(m.WeixinJSBridge?e():b.addEventListener&&b.addEventListener("WeixinJSBridgeReady",e,!1))}function p(){L.invoke||(L.invoke=function(e,t,r){m.WeixinJSBridge&&WeixinJSBridge.invoke(e,n(t),r)},L.on=function(e,t){m.WeixinJSBridge&&WeixinJSBridge.on(e,t)})}var h,m=window;if(!m.jWeixin){var v,y={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},g=function(){var e={};for(var t in y)e[y[t]]=t;return e}(),b=m.document,w=b.title,_=navigator.userAgent.toLowerCase(),k=navigator.platform.toLowerCase(),E=!(!k.match("mac")&&!k.match("win")),T=-1!=_.indexOf("wxdebugger"),C=-1!=_.indexOf("micromessenger"),S=-1!=_.indexOf("android"),O=-1!=_.indexOf("iphone")||-1!=_.indexOf("ipad"),x=function(){var e=_.match(/micromessenger\/(\d+\.\d+\.\d+)/)||_.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),P={initStartTime:f(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},j={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:O?1:S?2:-1,clientVersion:x,url:encodeURIComponent(location.href)},N={},M={_completes:[]},A={state:0,data:{}};d(function(){P.initEndTime=f()});var I=!1,D=[],L=(v={config:function(t){N=t,l("config",t);var n=!1!==N.check;d(function(){if(n)e(y.config,{verifyJsApiList:u(N.jsApiList)},function(){M._complete=function(e){P.preVerifyEndTime=f(),A.state=1,A.data=e},M.success=function(e){j.isPreVerifyOk=0},M.fail=function(e){M._fail?M._fail(e):A.state=-1};var e=M._completes;return e.push(function(){c()}),M.complete=function(t){for(var n=0,r=e.length;r>n;++n)e[n]();M._completes=[]},M}()),P.preVerifyStartTime=f();else{A.state=1;for(var t=M._completes,r=0,o=t.length;o>r;++r)t[r]();M._completes=[]}}),N.beta&&p()},ready:function(e){0!=A.state?e():(M._completes.push(e),!C&&N.debug&&e())},error:function(e){x<"6.0.2"||(-1==A.state?e(A.data):M._fail=e)},checkJsApi:function(t){var n=function(e){var t=e.checkResult;for(var n in t){var r=g[n];r&&(t[r]=t[n],delete t[n])}return e};e("checkJsApi",{jsApiList:u(t.jsApiList)},function(){return t._complete=function(e){if(S){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=n(e)},t}())},onMenuShareTimeline:function(n){t(y.onMenuShareTimeline,{complete:function(){e("shareTimeline",{title:n.title||w,desc:n.title||w,img_url:n.imgUrl||"",link:n.link||location.href,type:n.type||"link",data_url:n.dataUrl||""},n)}},n)},onMenuShareAppMessage:function(n){t(y.onMenuShareAppMessage,{complete:function(){e("sendAppMessage",{title:n.title||w,desc:n.desc||"",link:n.link||location.href,img_url:n.imgUrl||"",type:n.type||"link",data_url:n.dataUrl||""},n)}},n)},onMenuShareQQ:function(n){t(y.onMenuShareQQ,{complete:function(){e("shareQQ",{title:n.title||w,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareWeibo:function(n){t(y.onMenuShareWeibo,{complete:function(){e("shareWeiboApp",{title:n.title||w,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareQZone:function(n){t(y.onMenuShareQZone,{complete:function(){e("shareQZone",{title:n.title||w,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},startRecord:function(t){e("startRecord",{},t)},stopRecord:function(t){e("stopRecord",{},t)},onVoiceRecordEnd:function(e){t("onVoiceRecordEnd",e)},playVoice:function(t){e("playVoice",{localId:t.localId},t)},pauseVoice:function(t){e("pauseVoice",{localId:t.localId},t)},stopVoice:function(t){e("stopVoice",{localId:t.localId},t)},onVoicePlayEnd:function(e){t("onVoicePlayEnd",e)},uploadVoice:function(t){e("uploadVoice",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},downloadVoice:function(t){e("downloadVoice",{serverId:t.serverId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},translateVoice:function(t){e("translateVoice",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},chooseImage:function(t){e("chooseImage",{scene:"1|2",count:t.count||9,sizeType:t.sizeType||["original","compressed"],sourceType:t.sourceType||["album","camera"]},function(){return t._complete=function(e){if(S){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},t}())},getLocation:function(e){},previewImage:function(t){e(y.previewImage,{current:t.current,urls:t.urls},t)},uploadImage:function(t){e("uploadImage",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},downloadImage:function(t){e("downloadImage",{serverId:t.serverId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},getLocalImgData:function(t){!1===I?(I=!0,e("getLocalImgData",{localId:t.localId},function(){return t._complete=function(e){if(I=!1,D.length>0){var t=D.shift();wx.getLocalImgData(t)}},t}())):D.push(t)},getNetworkType:function(t){var n=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var r=t.indexOf(":"),o=t.substring(r+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e};e("getNetworkType",{},function(){return t._complete=function(e){e=n(e)},t}())},openLocation:function(t){e("openLocation",{latitude:t.latitude,longitude:t.longitude,name:t.name||"",address:t.address||"",scale:t.scale||28,infoUrl:t.infoUrl||""},t)}},r(v,"getLocation",function(t){t=t||{},e(y.getLocation,{type:t.type||"wgs84"},function(){return t._complete=function(e){delete e.type},t}())}),r(v,"hideOptionMenu",function(t){e("hideOptionMenu",{},t)}),r(v,"showOptionMenu",function(t){e("showOptionMenu",{},t)}),r(v,"closeWindow",function(t){t=t||{},e("closeWindow",{},t)}),r(v,"hideMenuItems",function(t){e("hideMenuItems",{menuList:t.menuList},t)}),r(v,"showMenuItems",function(t){e("showMenuItems",{menuList:t.menuList},t)}),r(v,"hideAllNonBaseMenuItem",function(t){e("hideAllNonBaseMenuItem",{},t)}),r(v,"showAllNonBaseMenuItem",function(t){e("showAllNonBaseMenuItem",{},t)}),r(v,"scanQRCode",function(t){t=t||{},e("scanQRCode",{needResult:t.needResult||0,scanType:t.scanType||["qrCode","barCode"]},function(){return t._complete=function(e){if(O){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},t}())}),r(v,"openAddress",function(t){e(y.openAddress,{},function(){return t._complete=function(e){e=i(e)},t}())}),r(v,"openProductSpecificView",function(t){e(y.openProductSpecificView,{pid:t.productId,view_type:t.viewType||0,ext_info:t.extInfo},t)}),r(v,"addCard",function(t){for(var n=t.cardList,r=[],o=0,i=n.length;i>o;++o){var a=n[o],s={card_id:a.cardId,card_ext:a.cardExt};r.push(s)}e(y.addCard,{card_list:r},function(){return t._complete=function(e){var t=e.card_list;if(t){t=JSON.parse(t);for(var n=0,r=t.length;r>n;++n){var o=t[n];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},t}())}),r(v,"chooseCard",function(t){e("chooseCard",{app_id:N.appId,location_id:t.shopId||"",sign_type:t.signType||"SHA1",card_id:t.cardId||"",card_type:t.cardType||"",card_sign:t.cardSign,time_stamp:t.timestamp+"",nonce_str:t.nonceStr},function(){return t._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},t}())}),r(v,"openCard",function(t){for(var n=t.cardList,r=[],o=0,i=n.length;i>o;++o){var a=n[o],s={card_id:a.cardId,code:a.code};r.push(s)}e(y.openCard,{card_list:r},t)}),r(v,"consumeAndShareCard",function(t){e(y.consumeAndShareCard,{consumedCardId:t.cardId,consumedCode:t.code},t)}),r(v,"chooseWXPay",function(t){e(y.chooseWXPay,o(t),t)}),r(v,"openEnterpriseRedPacket",function(t){e(y.openEnterpriseRedPacket,o(t),t)}),r(v,"startSearchBeacons",function(t){e(y.startSearchBeacons,{ticket:t.ticket},t)}),r(v,"stopSearchBeacons",function(t){e(y.stopSearchBeacons,{},t)}),r(v,"onSearchBeacons",function(e){t(y.onSearchBeacons,e)}),r(v,"openEnterpriseChat",function(t){e("openEnterpriseChat",{useridlist:t.userIds,chatname:t.groupName},t)}),v),R=1,U={};return b.addEventListener("error",function(e){if(!S){var t=e.target,n=t.tagName,r=t.src;if("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){if(-1!=r.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var o=t["wx-id"];if(o||(o=R++,t["wx-id"]=o),U[o])return;U[o]=!0,wx.ready(function(){wx.getLocalImgData({localId:r,success:function(e){t.src=e.localData}})})}}}},!0),b.addEventListener("load",function(e){if(!S){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var r=t["wx-id"];r&&(U[r]=!1)}}},!0),h&&(m.wx=m.jWeixin=L),L}}.call(t,n,t,e))&&(e.exports=o)},,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),a=r(i),s=i.PropTypes.number,u=i.PropTypes.string,l=i.PropTypes.bool,c={backgroundPosition:"center",backgroundRepeat:"no-repeat"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/qrcode?size="+(e>300?e:300)+"&margin=0&url="+t},d=function(e){var t=e.className,n=e.size,r=void 0===n?100:n,i=e.url,s=e.isWechat,u=e.ticket;return a.default.createElement("div",{className:t,style:o({width:r,height:r,backgroundSize:s&&u?"117%":"cover",backgroundImage:s&&u?"url(https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="+u+")":"url("+f(r,i)+")"},c)})};d.propTypes={className:u,size:s,url:u.isRequired,isWechat:l,ticket:u},t.default=d,e.exports=t.default},function(e,t,n){var r,o,i;!function(a,s){o=[e,n(309)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}e.exports=n},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return o(e,t,n);if(s.nodeList(e))return i(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function i(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return u(document.body,e,t,n)}var s=n(312),u=n(313);e.exports=r},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e,t,n,r,o){var a=i.apply(this,arguments);return e.addEventListener(n,a,o),{destroy:function(){e.removeEventListener(n,a,o)}}}function o(e,t,n,o,i){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return r(e,t,n,o,i)}))}function i(e,t,n,r){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&r.call(e,n)}}var a=n(314);e.exports=o},function(e,t){function n(e,t){for(;e&&e.nodeType!==r;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=n},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(33),s=n(316),u=r(s),l=n(323),c=r(l),f=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.currentUser;return i.default.createElement(a.Dialog,{open:!0,enableCloseClickMask:!0,title:"免费获得石墨文档高级版！",headTpl:function(e){return i.default.createElement(u.default,{title:e,onClose:n})},bodyTpl:function(){return i.default.createElement(c.default,{currentUser:r})},actions:[],onClose:n})};f.propTypes={onClose:o.PropTypes.func,currentUser:o.PropTypes.object},t.default=f,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(317),s=r(a),u=n(320),l=r(u),c=function(e){var t=e.title,n=e.onClose,r=void 0===n?function(){}:n;return i.default.createElement("div",null,t,i.default.createElement(s.default,{template:i.default.createElement(l.default,null)},i.default.createElement("span",{className:"question-tip"},"?")),i.default.createElement("span",{className:"hicon icon-close dialog-close right",onClick:function(){return r()}}))};c.propTypes={title:o.PropTypes.string,onClose:o.PropTypes.func},t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(318),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o);n(319);var a=o.PropTypes.node,s=function(e){var t=e.template,n=e.children;return i.default.createElement("div",{className:"bubble--"},i.default.createElement("div",{className:"bubble--container"},i.default.createElement("div",{className:"bubble--content"},t),i.default.createElement("div",{className:"bubble--tip"})),n)};s.propTypes={template:a,children:a},t.default=s,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(321),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o);n(322);var a=function(){return i.default.createElement("div",{className:"bonus-tip-wrapper"},i.default.createElement("div",{className:"bonus-tip-head"},"石墨文档 ",i.default.createElement("b",null,"高级版"),i.default.createElement("span",{className:"price-desc right"},i.default.createElement("span",{className:"price-number"},"¥ 9")," / 人 / 月")),i.default.createElement("hr",null),i.default.createElement("div",{className:"bonus-tip-body"},i.default.createElement("div",null,"可多人协作的文档与表格",i.default.createElement("span",{className:"right"},"✓")),i.default.createElement("div",null,"单文件协作人数上限",i.default.createElement("span",{className:"right"},"无限")),i.default.createElement("div",null,"单图片附件体积上限",i.default.createElement("span",{className:"right"},"无限")),i.default.createElement("div",null,"优先使用新功能",i.default.createElement("span",{className:"right"},"✓")),i.default.createElement("div",null,"优先售后与技术支持",i.default.createElement("span",{className:"right"},"✓"))))};t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(307),d=r(f),p=n(324),h=r(p),m=n(7),v=n(24),y=n(16),g=r(y),b=15,w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={imgUrl:"",ticket:"",isWechat:!0,invite:{count:0,bonus:0,isBound:!1,isObtained:!1}},n.changeToHigh=n.changeToHigh.bind(n),n.getInviteUser=n.getInviteUser.bind(n),n.resolveInviteStatus=n.resolveInviteStatus.bind(n),n.bindNotification=n.bindNotification.bind(n),n.rewardWechat=n.rewardWechat.bind(n),n.rewardByInvitor=n.rewardByInvitor.bind(n),n.noRewardWechat=n.noRewardWechat.bind(n),n.reloadSession=n.reloadSession.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.getImgUrl(),this.getInviteUser(),this.bindNotification()}},{key:"componentWillUnmount",value:function(){var e=this.listener;g.default.unbind("INVITE_ACTS",e)}},{key:"getInviteUser",value:function(){var e=this;(0,m.ajaxGet)("/smapi/invite/invite_info").then(function(t){if(0===t.code){var n=e.resolveInviteStatus(t.data);e.setState({invite:s({},e.state.invite,n)})}}).catch(function(e){console.log(e)})}},{key:"resolveInviteStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.have_rewarded,n=void 0===t?0:t,r=e.not_yet_rewarded,o=void 0===r?0:r,i=e.rewarded_by_self_count,a=void 0===i?0:i,s=e.self_bind,u=void 0!==s&&s,l=e.rewarded_by_self_bind,c=void 0!==l&&l,f=e.is_reward_just;return void 0!==f&&f&&this.reloadSession(),{count:n+o-a,bonus:o*b,isBound:u,isObtained:c}}},{key:"getImgUrl",value:function(){var e=this;(0,m.ajaxGet)("/wechat/binding_qrcode").then(function(t){if(0!==t.code||!t.data.url)return null;e.setState({imgUrl:t.data.url,ticket:t.data.ticket})}).catch(function(e){console.log(e,"error")})}},{key:"changeToHigh",value:function(){var e=this;if(0===this.state.invite.bonus)return null;(0,m.ajaxPost)("/smapi/invite/invitee_convert",{}).then(function(t){0===t.code?(e.setState({invite:s({},e.state.invite,e.resolveInviteStatus(t.data))}),(0,v.showAlert)({title:"兑换成功！"})):(0,v.showAlert)({title:t.message,type:"error"})}).catch(function(e){console.log(e)})}},{key:"bindNotification",value:function(){var e=this;e.listener=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name;switch(n){case"wechat_rewarded":e.rewardWechat();break;case"invitor_bind":e.rewardByInvitor();break;case"wechat_no_reward":e.noRewardWechat();break;default:console.error("unexpected notification name ["+n+"] from push #INVITE_ACTS")}e.reloadSession()},g.default.bind("INVITE_ACTS",this.listener)}},{key:"rewardWechat",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{isBound:!0,isObtained:!0})})}},{key:"rewardByInvitor",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{count:e.count+1,bonus:e.bonus+b})})}},{key:"noRewardWechat",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{isBound:!0})})}},{key:"reloadSession",value:function(){(0,m.ajaxGet)("/relogin").then(function(e){"403"===e.code&&(window.location.href="/login?redirect_url="+encodeURIComponent(window.location.href))})}},{key:"render",value:function(){var e=this.state.invite,t=e.count,n=void 0===t?0:t,r=e.bonus,o=void 0===r?0:r,i=e.isBound,a=void 0!==i&&i,s=e.isObtained,u=void 0!==s&&s,l=this.props.currentUser,f=void 0===l?{}:l,p=location.origin+"?inviterid="+f.id+"&invitername="+f.name+"&share=1&force=1",m=location.origin+"/?inviterid="+f.id+"&invitername="+encodeURIComponent(f.name),v="试试可多人实时协作的云端文档和表格吧，还能免费获得 15 天高级版帐号，点击链接开始使用 "+m;return c.default.createElement("div",null,c.default.createElement("div",{className:"invite-friends-body-wrapper"},c.default.createElement("div",{className:"invite-friends-section-wrapper"},c.default.createElement("div",{className:"invite-friends-section-title"},"方式一：邀请好友注册并绑定微信"),c.default.createElement("div",{className:"invite-friends-desc"},c.default.createElement("div",{className:"invite-friends-text"},c.default.createElement("div",{className:"paragraph"},"每当您成功邀请一位好友注册石墨文档并绑定他的微信时， 你可以免费获得 15 天高级版。"),c.default.createElement("div",{className:"paragraph"},c.default.createElement(h.default,{text:v},c.default.createElement("a",null,"点击这里复制专属邀请链接"))," 或 扫码分享石墨文档给朋友。")),c.default.createElement(d.default,{className:"qrcode",size:80,url:p})),c.default.createElement("div",{className:"invite-friends-summary-wrapper"},c.default.createElement("div",{className:"invite-friends-text invite-friends-text-success"},"已成功邀请并绑定微信的好友",c.default.createElement("span",{className:"right"},n,"人")),c.default.createElement("div",{className:"invite-friends-text"},"可兑换高级版使用期",c.default.createElement("span",{className:"right"},o,"天"),c.default.createElement("span",{className:"invite-friends-claim "+(0!==o?"highlight":"disabled"),onClick:this.changeToHigh},"立即兑换高级版")))),c.default.createElement("hr",null),c.default.createElement("div",{className:"invite-friends-section-wrapper invite-friends-section-wrapper-bindself"},c.default.createElement("div",{className:"invie-frinends-section-left",style:{paddingTop:16}},c.default.createElement("div",{className:"invite-friends-section-title"},"方式二：绑定你的微信号"),c.default.createElement("div",null,c.default.createElement("span",{className:a?"line-through":""},"用微信扫码，绑定帐号，立即获得 15 天高级版。"),u?c.default.createElement("span",{className:"bind-success"},"已获得 ✓"):null)),a?null:c.default.createElement(d.default,{className:"qrcode",size:80,url:this.state.imgUrl,isWechat:this.state.isWechat,ticket:this.state.ticket}))),c.default.createElement("div",{className:"invite-friends-modal-footer"},"每人每月不到一杯咖啡的价格，即可获得更多企业管理功能。",c.default.createElement("b",null,c.default.createElement("a",{href:"/pricing",target:"_blank"},"了解更多 >"))))}}]),t}(l.Component);w.propTypes={currentUser:l.PropTypes.object},t.default=w,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(211),f=r(c),d=n(24),p=u.PropTypes.string,h=u.PropTypes.func,m=u.PropTypes.node,v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.initClipboard()}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"initClipboard",value:function(){var e=this.props,t=e.onCopy,n=void 0===t?function(){}:t,r=e.onError,o=void 0===r?function(){}:r;this.clipboard=new f.default(this.elm),this.clipboard.on("success",function(){n(),(0,d.showAlert)({title:"复制成功！",duration:1500})}),this.clipboard.on("error",function(){o(),f.default.isSupported()?(0,d.showAlert)({title:"复制失败！",duration:1500,type:"error"}):(0,d.showAlert)({title:"您的浏览器不支持此功能，请手动复制，或使用最新的 chrome 浏览器。",duration:15e3,type:"error"})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.text,r=t.children;return l.default.createElement("span",{"data-clipboard-action":"copy","data-clipboard-text":n,ref:function(t){e.elm=t}},r)}}]),t}(u.Component);v.propTypes={text:p,onCopy:h,onError:h,children:m},t.default=v,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return null===e||void 0===e}function o(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function i(e,t,n){var i,c;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return!!u(t)&&(e=a.call(e),t=a.call(t),l(e,t,n));if(o(e)){if(!o(t))return!1;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}try{var f=s(e),d=s(t)}catch(e){return!1}if(f.length!=d.length)return!1;for(f.sort(),d.sort(),i=f.length-1;i>=0;i--)if(f[i]!=d[i])return!1;for(i=f.length-1;i>=0;i--)if(c=f[i],!l(e[c],t[c],n))return!1;return typeof e==typeof t}var a=Array.prototype.slice,s=n(327),u=n(328),l=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:i(e,t,n))}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=o?n:r,t.supported=n,t.unsupported=r},function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}function o(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=n);void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};default:return function(e,t,n){if(void 0===n[e])return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function i(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"==typeof e?a(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var s=n(330),u=n(86),l=n(331);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=u({arrayFormat:"none"},t);var n=o(t),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:l(i),n(l(o),i,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=a(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){t=u({encode:!0,strict:!0,arrayFormat:"none"},t);var n=r(t);return e?Object.keys(e).sort().map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return i(r,t);if(Array.isArray(o)){var a=[];return o.slice().forEach(function(e){void 0!==e&&a.push(n(r,e,a.length))}),a.join("&")}return i(r,t)+"="+i(o,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],r(n),r(o))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(s),n=1;n<t.length;n++)e=r(t,n).join(""),t=e.match(s);return e}}function i(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=u.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=o(n[0]);r!==n[0]&&(t[n[0]]=r)}n=u.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),a=0;a<i.length;a++){var s=i[a];e=e.replace(new RegExp(s,"g"),t[s])}return e}var a="%[a-f0-9]{2}",s=new RegExp(a,"gi"),u=new RegExp("("+a+")+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return i(e)}}},function(e,t){e.exports='<div class="arrow-up">\n  <span class="top"></span>\n  <span class="down"></span>\n</div>\n<div class="arrow-down">\n  <span class="top"></span>\n  <span class="down"></span>\n</div>\n<ul>\n  <li class="placeholder">@朋友或者文档</li>\n</ul>\n<ul class="result-list">\n</ul>'},function(e,t){e.exports='<% _.each(list, function (data, index) { %>\n\t\t<li class="mention-result" data-guid="<%= data.guid %>" data-name="<%= data.name %>" data-id="<%= data.id %>" data-type="<% data.guid ? print(\'doc\') : print(\'user\') %>">\n\t\t\t<% if (!data.guid){ %>\n\t\t\t\t<img class="avatar" src="<%= data.avatar %>"><%= data.name %>\n\t\t\t<% } else { %>\n        <% if (data.type === \'folder\') {%>\n            <span class="file-sprite file-folder-icon mention-icon"></span>\n        <% } else if (data.type === \'document\' || data.type === \'newdoc\') { %>\n            <span class="file-sprite file-doc-icon mention-icon"></span>\n        <% } else if (data.type === \'sheet\' || data.type === \'spreadsheet\') { %>\n            <span class="file-sprite file-spreadsheet-icon mention-icon"></span>\n        <% } %>\n\t\t\t\t<%= data.name %>\n\t\t\t<% } %>\n\t\t</li>\n<% }) %>\n\n'},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},,function(e,t){function n(e){return e}e.exports=n},,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(0,k.isRNClientWithToken)()&&!window.cow.forClientDebug?T.push("./assets/styles/quill.css").push("./assets/scripts/quill.bundle"):T.add("smdocs.css").add("smdocs.js"),T.load(function(){return window.SmDocs.injectDeps(E),window.SmDocs})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDoc=o;var i=n(249),a=r(i),s=n(23),u=r(s),l=n(147),c=r(l),f=n(16),d=r(f),p=n(208),h=r(p),m=n(472),v=r(m),y=n(287),g=r(y),b=n(210),w=r(b),_=n(145),k=n(9),E={Contact:u.default,cooperation:c.default,Mention:w.default,LoadingBar:h.default,Push:d.default,qltable:v.default,CollabClient:g.default,loadSheet:_.loadSheet},T=new a.default},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(465);e.exports=r},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(212),d=r(f),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"getPopupDomNode",value:function(){return this.refs.tooltip.getPopupDomNode()}},{key:"renderOverlay",value:function(){var e=this.props,t=e.title,n=e.prefixCls,r=e.content,o=e.innerClass;return c.default.createElement("div",{className:o},t&&c.default.createElement("div",{className:(o||n)+"-title"},t),c.default.createElement("div",{className:(o||n)+"-inner-content"},r))}},{key:"render",value:function(){return c.default.createElement(d.default,s({ref:"tooltip"},this.props,{overlay:this.renderOverlay()}))}}],[{key:"defaultProps",get:function(){return{prefixCls:"sm-popover",placement:"bottomRight",trigger:"click",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{},innerClass:""}}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(342),p=r(d),h=n(411),m=n(11),v=r(m);n(412);var y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n.onVisibleChange=n.onVisibleChange.bind(n),n.onPopupAlign=n.onPopupAlign.bind(n),n}return s(t,e),l(t,null,[{key:"defaultProps",get:function(){return{prefixCls:"sm-tooltip",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,onVisibleChange:function(){}}}},{key:"propTypes",get:function(){return{title:c.PropTypes.string,overlay:c.PropTypes.oneOfType([c.PropTypes.node,c.PropTypes.func]),onVisibleChange:c.PropTypes.func,visible:c.PropTypes.bool,prefixCls:c.PropTypes.string,openClassName:c.PropTypes.string,arrowPointAtCenter:c.PropTypes.bool,builtinPlacements:c.PropTypes.object,trigger:c.PropTypes.oneOf(["hover","click","focus","none"]),placement:c.PropTypes.oneOf(["top","right","bottom","left","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"])}}}]),l(t,[{key:"onVisibleChange",value:function(e){this.setState({visible:e}),this.props.onVisibleChange(e)}},{key:"getPopupDomNode",value:function(){return this.refs.tooltip.getPopupDomNode()}},{key:"getPlacements",value:function(){var e=this.props,t=e.builtinPlacements,n=e.arrowPointAtCenter;return t||(0,h.getPlacements)({arrowPointAtCenter:n,verticalArrowShift:8,horizontalArrowShif:16,arrowWidth:5})}},{key:"onPopupAlign",value:function(e,t){var n=this.getPlacements(),r=Object.keys(n).filter(function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]})[0];if(r){var o=e.getBoundingClientRect(),i={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?i.top=o.height-t.offset[1]+"px":(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(i.top=-t.offset[1]+"px"),r.indexOf("left")>=0||r.indexOf("Right")>=0?i.left=o.width-t.offset[0]+"px":(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(i.left=-t.offset[0]+"px"),e.style.transformOrigin=i.left+" "+i.top}}},{key:"render",value:function(){var e,t=this.state,n=this.props,r=n.prefixCls,i=n.title,a=n.overlay,s=n.children,l=t.visible;n.hasOwnProperty("visible")?l=n.visible:i||a||(l=!1);var c=null;"string"==typeof i?c=function(){return f.default.createElement("span",{className:r+"-text"},i)}:a&&(c=a);var d=s?s.props:{},h=(0,v.default)((e={},o(e,d.className,!!d.className),o(e,n.openClassName||r+"-open",!0),e));return f.default.createElement(p.default,u({overlay:c,visible:l,onPopupAlign:this.onPopupAlign,ref:"tooltip"},n,{builtinPlacements:this.getPlacements(),onVisibleChange:this.onVisibleChange}),l?f.default.cloneElement(s,{className:h}):s)}}]),t}(c.Component);t.default=y,e.exports=t.default},function(e,t,n){"use strict";e.exports=n(343)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),s=r(a),u=n(218),l=n(219),c=r(l),f=s.default.createClass({displayName:"Tooltip",propTypes:{trigger:a.PropTypes.any,children:a.PropTypes.any,defaultVisible:a.PropTypes.bool,visible:a.PropTypes.bool,placement:a.PropTypes.string,transitionName:a.PropTypes.string,animation:a.PropTypes.any,onVisibleChange:a.PropTypes.func,afterVisibleChange:a.PropTypes.func,overlay:a.PropTypes.oneOfType([s.default.PropTypes.node,s.default.PropTypes.func]).isRequired,overlayStyle:a.PropTypes.object,overlayClassName:a.PropTypes.string,prefixCls:a.PropTypes.string,mouseEnterDelay:a.PropTypes.number,mouseLeaveDelay:a.PropTypes.number,getTooltipContainer:a.PropTypes.func,destroyTooltipOnHide:a.PropTypes.bool,align:a.PropTypes.object,arrowContent:a.PropTypes.any},getDefaultProps:function(){return{prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null}},getPopupElement:function(){var e=this.props,t=e.arrowContent,n=e.overlay,r=e.prefixCls;return[s.default.createElement("div",{className:r+"-arrow",key:"arrow"},t),s.default.createElement("div",{className:r+"-inner",key:"content"},"function"==typeof n?n():n)]},getPopupDomNode:function(){return this.refs.trigger.getPopupDomNode()},render:function(){var e=this.props,t=e.overlayClassName,n=e.trigger,r=e.mouseEnterDelay,a=e.mouseLeaveDelay,l=e.overlayStyle,f=e.prefixCls,d=e.children,p=e.onVisibleChange,h=e.transitionName,m=e.animation,v=e.placement,y=e.align,g=e.destroyTooltipOnHide,b=e.defaultVisible,w=e.getTooltipContainer,_=o(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),k=i({},_);return"visible"in this.props&&(k.popupVisible=this.props.visible),s.default.createElement(c.default,i({popupClassName:t,ref:"trigger",prefixCls:f,popup:this.getPopupElement,action:n,builtinPlacements:u.placements,popupPlacement:v,popupAlign:y,getPopupContainer:w,onPopupVisibleChange:p,popupTransitionName:h,popupAnimation:m,defaultPopupVisible:b,destroyPopupOnHide:g,mouseLeaveDelay:a,popupStyle:l,mouseEnterDelay:r},k),d)}});t.default=f,e.exports=t.default},function(e,t,n){e.exports={default:n(345),__esModule:!0}},function(e,t,n){n(346),e.exports=n(50).Object.assign},function(e,t,n){var r=n(70);r(r.S+r.F,"Object",{assign:n(348)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(103),o=n(163),i=n(105),a=n(226),s=n(224),u=Object.assign;e.exports=!u||n(82)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,l=1,c=o.f,f=i.f;u>l;)for(var d,p=s(arguments[l++]),h=c?r(p).concat(c(p)):r(p),m=h.length,v=0;m>v;)f.call(p,d=h[v++])&&(n[d]=p[d]);return n}:u},function(e,t,n){var r=n(73),o=n(350),i=n(351);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=o(u.length),c=i(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(159),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(159),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){"use strict";var r=n(353),o=n(227),i=n(354);e.exports=function(){function e(e,t,n,r,a,s){s!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return e}function o(e,t,n){function o(e,t){var n=g.hasOwnProperty(t)?g[t]:null;k.hasOwnProperty(t)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function l(e,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;n.hasOwnProperty(u)&&b.mixins(e,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==u){var l=n[a],c=r.hasOwnProperty(a);if(o(c,a),b.hasOwnProperty(a))b[a](e,l);else{var f=g.hasOwnProperty(a),h="function"==typeof l,m=h&&!f&&!c&&!1!==n.autobind;if(m)i.push(a,l),r[a]=l;else if(c){var v=g[a];s(f&&("DEFINE_MANY_MERGED"===v||"DEFINE_MANY"===v),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",v,a),"DEFINE_MANY_MERGED"===v?r[a]=d(r[a],l):"DEFINE_MANY"===v&&(r[a]=p(r[a],l))}else r[a]=l}}}else;}function c(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var o=n in b;s(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;s(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function f(e,t){s(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(s(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return f(o,n),f(o,r),o}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=h(e,o)}}function v(e){var t=r(function(e,r,o){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=a,this.updater=o||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;s("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new E,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],y.forEach(l.bind(null,t)),l(t,w),l(t,e),l(t,_),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),s(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in g)t.prototype[o]||(t.prototype[o]=null);return t}var y=[],g={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)l(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=i({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=i({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=i({},e.propTypes,t)},statics:function(e,t){c(e,t)},autobind:function(){}},w={componentDidMount:function(){this.__isMounted=!0}},_={componentWillUnmount:function(){this.__isMounted=!1}},k={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},E=function(){};return i(E.prototype,e.prototype,k),v}var i=n(86),a=n(356),s=n(227),u="mixins";e.exports=o},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}t.a=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return null===e||void 0===e}function i(){return d}function a(){return p}function s(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;l.default.call(this),this.nativeEvent=e;var r=a;"defaultPrevented"in e?r=e.defaultPrevented?i:a:"getPreventDefault"in e?r=e.getPreventDefault()?i:a:"returnValue"in e&&(r=e.returnValue===p?i:a),this.isDefaultPrevented=r;var o=[],s=void 0,u=void 0,c=h.concat();for(m.forEach(function(e){t.match(e.reg)&&(c=c.concat(e.props),e.fix&&o.push(e.fix))}),s=c.length;s;)u=c[--s],this[u]=e[u];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),s=o.length;s;)(0,o[--s])(this,e);this.timeStamp=e.timeStamp||Date.now()}Object.defineProperty(t,"__esModule",{value:!0});var u=n(359),l=r(u),c=n(86),f=r(c),d=!0,p=!1,h=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],m=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){o(e.which)&&(e.which=o(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,o=void 0,i=t.wheelDelta,a=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,l=t.detail;i&&(o=i/120),l&&(o=0-(l%3==0?l/3:l)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(r=0,n=0-o):a===e.VERTICAL_AXIS&&(n=0,r=o)),void 0!==s&&(r=s/120),void 0!==u&&(n=-1*u/120),n||r||(r=o),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==o&&(e.delta=o)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,i=void 0,a=e.target,s=t.button;return a&&o(e.pageX)&&!o(t.clientX)&&(n=a.ownerDocument||document,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===a?e.toElement:e.fromElement),e}}],v=l.default.prototype;(0,f.default)(s.prototype,v,{constructor:s,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=p,v.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=d,v.stopPropagation.call(this)}}),t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(){return!1}function o(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=i,e.exports=t.default},function(e,t,n){"use strict";var r=n(32),o=n.n(r),i=n(74),a=n.n(i),s=n(83),u=n.n(s),l=n(75),c=n.n(l),f=n(77),d=n.n(f),p=n(0),h=n.n(p),m=n(14),v=n.n(m),y=n(5),g=n.n(y),b=n(392),w=n(236),_=n(408),k=n(239),E=n(240),T=function(e){function t(e){a()(this,t);var n=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return C.call(n),n.savePopupRef=E.c.bind(n,"popupInstance"),n.saveAlignRef=E.c.bind(n,"alignInstance"),n}return d()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.rootNode=this.getPopupDomNode()}},{key:"getPopupDomNode",value:function(){return g.a.findDOMNode(this.popupInstance)}},{key:"getMaskTransitionName",value:function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t}},{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t}},{key:"getClassName",value:function(e){return this.props.prefixCls+" "+this.props.className+" "+e}},{key:"getPopupElement",value:function(){var e=this.savePopupRef,t=this.props,n=t.align,r=t.style,i=t.visible,a=t.prefixCls,s=t.destroyPopupOnHide,u=this.getClassName(this.currentAlignClassName||t.getClassNameFromAlign(n)),l=a+"-hidden";i||(this.currentAlignClassName=null);var c=o()({},r,this.getZIndexStyle()),f={className:u,prefixCls:a,ref:e,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:c};return s?h.a.createElement(w.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},i?h.a.createElement(b.a,{target:this.getTarget,key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:n,onAlign:this.onAlign},h.a.createElement(_.a,o()({visible:!0},f),t.children)):null):h.a.createElement(w.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},h.a.createElement(b.a,{target:this.getTarget,key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:i,childrenProps:{visible:"xVisible"},disabled:!i,align:n,onAlign:this.onAlign},h.a.createElement(_.a,o()({hiddenClassName:l},f),t.children)))}},{key:"getZIndexStyle",value:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e}},{key:"getMaskElement",value:function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=h.a.createElement(k.a,{style:this.getZIndexStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible}),n&&(t=h.a.createElement(w.default,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t}},{key:"render",value:function(){return h.a.createElement("div",null,this.getMaskElement(),this.getPopupElement())}}]),t}(p.Component);T.propTypes={visible:v.a.bool,style:v.a.object,getClassNameFromAlign:v.a.func,onAlign:v.a.func,getRootDomNode:v.a.func,onMouseEnter:v.a.func,align:v.a.any,destroyPopupOnHide:v.a.bool,className:v.a.string,prefixCls:v.a.string,onMouseLeave:v.a.func};var C=function(){var e=this;this.onAlign=function(t,n){var r=e.props,o=r.getClassNameFromAlign(n);e.currentAlignClassName!==o&&(e.currentAlignClassName=o,t.className=e.getClassName(o)),r.onAlign(t,n)},this.getTarget=function(){return e.props.getRootDomNode()}};t.a=T},function(e,t,n){n(362);var r=n(50).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(70);r(r.S+r.F*!n(52),"Object",{defineProperty:n(51).f})},function(e,t,n){e.exports={default:n(364),__esModule:!0}},function(e,t,n){n(365),n(371),e.exports=n(168).f("iterator")},function(e,t,n){"use strict";var r=n(366)(!0);n(231)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(159),o=n(158);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(166),o=n(102),i=n(167),a={};n(71)(a,n(76)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(51),o=n(81),i=n(103);e.exports=n(52)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(45).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(53),o=n(226),i=n(160)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){n(372);for(var r=n(45),o=n(71),i=n(165),a=n(76)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],f=c&&c.prototype;f&&!f[a]&&o(f,a,l),i[l]=i.Array}},function(e,t,n){"use strict";var r=n(373),o=n(374),i=n(165),a=n(73);e.exports=n(231)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(376),__esModule:!0}},function(e,t,n){n(377),n(382),n(383),n(384),e.exports=n(50).Symbol},function(e,t,n){"use strict";var r=n(45),o=n(53),i=n(52),a=n(70),s=n(232),u=n(378).KEY,l=n(82),c=n(161),f=n(167),d=n(104),p=n(76),h=n(168),m=n(169),v=n(379),y=n(380),g=n(81),b=n(72),w=n(73),_=n(157),k=n(102),E=n(166),T=n(381),C=n(234),S=n(51),O=n(103),x=C.f,P=S.f,j=T.f,N=r.Symbol,M=r.JSON,A=M&&M.stringify,I="prototype",D=p("_hidden"),L=p("toPrimitive"),R={}.propertyIsEnumerable,U=c("symbol-registry"),F=c("symbols"),B=c("op-symbols"),W=Object[I],V="function"==typeof N,q=r.QObject,H=!q||!q[I]||!q[I].findChild,$=i&&l(function(){return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x(W,t);r&&delete W[t],P(e,t,n),r&&e!==W&&P(W,t,r)}:P,Y=function(e){var t=F[e]=E(N[I]);return t._k=e,t},K=V&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},z=function(e,t,n){return e===W&&z(B,t,n),g(e),t=_(t,!0),g(n),o(F,t)?(n.enumerable?(o(e,D)&&e[D][t]&&(e[D][t]=!1),n=E(n,{enumerable:k(0,!1)})):(o(e,D)||P(e,D,k(1,{})),e[D][t]=!0),$(e,t,n)):P(e,t,n)},G=function(e,t){g(e);for(var n,r=v(t=w(t)),o=0,i=r.length;i>o;)z(e,n=r[o++],t[n]);return e},X=function(e,t){return void 0===t?E(e):G(E(e),t)},J=function(e){var t=R.call(this,e=_(e,!0));return!(this===W&&o(F,e)&&!o(B,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,D)&&this[D][e])||t)},Q=function(e,t){if(e=w(e),t=_(t,!0),e!==W||!o(F,t)||o(B,t)){var n=x(e,t);return!n||!o(F,t)||o(e,D)&&e[D][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=j(w(e)),r=[],i=0;n.length>i;)o(F,t=n[i++])||t==D||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===W,r=j(n?B:w(e)),i=[],a=0;r.length>a;)!o(F,t=r[a++])||n&&!o(W,t)||i.push(F[t]);return i};V||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===W&&t.call(B,n),o(this,D)&&o(this[D],e)&&(this[D][e]=!1),$(this,e,k(1,n))};return i&&H&&$(W,e,{configurable:!0,set:t}),Y(e)},s(N[I],"toString",function(){return this._k}),C.f=Q,S.f=z,n(233).f=T.f=Z,n(105).f=J,n(163).f=ee,i&&!n(164)&&s(W,"propertyIsEnumerable",J,!0),h.f=function(e){return Y(p(e))}),a(a.G+a.W+a.F*!V,{Symbol:N});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=O(p.store),oe=0;re.length>oe;)m(re[oe++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=N(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!V,"Object",{create:X,defineProperty:z,defineProperties:G,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),M&&a(a.S+a.F*(!V||l(function(){var e=N();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(b(t)||void 0!==e)&&!K(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,A.apply(M,r)}}),N[I][L]||n(71)(N[I],L,N[I].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(104)("meta"),o=n(72),i=n(53),a=n(51).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(82)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},p=function(e){return l&&h.NEED&&u(e)&&!i(e,r)&&c(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(e,t,n){var r=n(103),o=n(163),i=n(105);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),u=i.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(225);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(73),o=n(233).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},function(e,t){},function(e,t,n){n(169)("asyncIterator")},function(e,t,n){n(169)("observable")},function(e,t,n){e.exports={default:n(386),__esModule:!0}},function(e,t,n){n(387),e.exports=n(50).Object.setPrototypeOf},function(e,t,n){var r=n(70);r(r.S,"Object",{setPrototypeOf:n(388).set})},function(e,t,n){var r=n(72),o=n(81),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(220)(Function.call,n(234).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={default:n(390),__esModule:!0}},function(e,t,n){n(391);var r=n(50).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(70);r(r.S,"Object",{create:n(166)})},function(e,t,n){"use strict";var r=n(393);t.a=r.a},function(e,t,n){"use strict";function r(e,t){function n(){o&&(clearTimeout(o),o=null)}function r(){n(),o=setTimeout(e,t)}var o=void 0;return r.clear=n,r}var o=n(74),i=n.n(o),a=n(75),s=n.n(a),u=n(77),l=n.n(u),c=n(0),f=n.n(c),d=n(14),p=n.n(d),h=n(5),m=n.n(h),v=n(394),y=n.n(v),g=n(401),b=n(402),w=function(e){function t(){var n,r,o;i()(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=r=s()(this,e.call.apply(e,[this].concat(u))),r.forceAlign=function(){var e=r.props;if(!e.disabled){var t=m.a.findDOMNode(r);e.onAlign(t,y()(t,e.target(),e.align))}},o=n,s()(r,o)}return l()(t,e),t.prototype.componentDidMount=function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()},t.prototype.componentDidUpdate=function(e){var t=!1,n=this.props;if(!n.disabled)if(e.disabled||e.align!==n.align)t=!0;else{var r=e.target(),o=n.target();Object(b.a)(r)&&Object(b.a)(o)?t=!1:r!==o&&(t=!0)}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()},t.prototype.componentWillUnmount=function(){this.stopMonitorWindowResize()},t.prototype.startMonitorWindowResize=function(){this.resizeHandler||(this.bufferMonitor=r(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=Object(g.a)(window,"resize",this.bufferMonitor))},t.prototype.stopMonitorWindowResize=function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)},t.prototype.render=function(){var e=this.props,t=e.childrenProps,n=e.children,r=f.a.Children.only(n);if(t){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=this.props[t[i]]);return f.a.cloneElement(r,o)}return r},t}(c.Component);w.propTypes={childrenProps:p.a.object,align:p.a.object.isRequired,target:p.a.func,onAlign:p.a.func,monitorBufferTime:p.a.number,monitorWindowResize:p.a.bool,disabled:p.a.bool,children:p.a.any},w.defaultProps={target:function(){return window},onAlign:function(){},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1},t.a=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return e.left<n.left||e.left+t.width>n.right}function i(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function a(e,t,n){return e.left>n.right||e.left+t.width<n.left}function s(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function u(e,t,n){var r=[];return h.default.each(e,function(e){r.push(e.replace(t,function(e){return n[e]}))}),r}function l(e,t){return e[t]=-e[t],e}function c(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function f(e,t){e[0]=c(e[0],t.width),e[1]=c(e[1],t.height)}function d(e,t,n){var r=n.points,c=n.offset||[0,0],d=n.targetOffset||[0,0],p=n.overflow,m=n.target||t,v=n.source||e;c=[].concat(c),d=[].concat(d),p=p||{};var y={},b=0,_=(0,g.default)(v),E=(0,k.default)(v),C=(0,k.default)(m);f(c,E),f(d,C);var S=(0,T.default)(E,C,r,c,d),O=h.default.merge(E,S);if(_&&(p.adjustX||p.adjustY)){if(p.adjustX&&o(S,E,_)){var x=u(r,/[lr]/gi,{l:"r",r:"l"}),P=l(c,0),j=l(d,0);a((0,T.default)(E,C,x,P,j),E,_)||(b=1,r=x,c=P,d=j)}if(p.adjustY&&i(S,E,_)){var N=u(r,/[tb]/gi,{t:"b",b:"t"}),M=l(c,1),A=l(d,1);s((0,T.default)(E,C,N,M,A),E,_)||(b=1,r=N,c=M,d=A)}b&&(S=(0,T.default)(E,C,r,c,d),h.default.mix(O,S)),y.adjustX=p.adjustX&&o(S,E,_),y.adjustY=p.adjustY&&i(S,E,_),(y.adjustX||y.adjustY)&&(O=(0,w.default)(S,E,_,y))}return O.width!==E.width&&h.default.css(v,"width",h.default.width(v)+O.width-E.width),O.height!==E.height&&h.default.css(v,"height",h.default.height(v)+O.height-E.height),h.default.offset(v,{left:O.left,top:O.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform}),{points:r,offset:c,targetOffset:d,overflow:y}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(85),h=r(p),m=n(235),v=r(m),y=n(396),g=r(y),b=n(397),w=r(b),_=n(398),k=r(_),E=n(399),T=r(E);d.__getOffsetParent=v.default,d.__getVisibleRectForElement=g.default,t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(){if(void 0!==f)return f;f="";var e=document.createElement("p").style;for(var t in d)t+"Transform"in e&&(f=t);return f}function o(){return r()?r()+"TransitionProperty":"transitionProperty"}function i(){return r()?r()+"Transform":"transform"}function a(e,t){var n=o();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function s(e,t){var n=i();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}function u(e){return e.style.transitionProperty||e.style[o()]}function l(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(i());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}function c(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(i());if(r&&"none"!==r){var o=void 0,a=r.match(p);if(a)a=a[1],o=a.split(",").map(function(e){return parseFloat(e,10)}),o[4]=t.x,o[5]=t.y,s(e,"matrix("+o.join(",")+")");else{o=r.match(h)[1].split(",").map(function(e){return parseFloat(e,10)}),o[12]=t.x,o[13]=t.y,s(e,"matrix3d("+o.join(",")+")")}}else s(e,"translateX("+t.x+"px) translateY("+t.y+"px) translateZ(0)")}Object.defineProperty(t,"__esModule",{value:!0}),t.getTransformName=i,t.setTransitionProperty=a,t.getTransitionProperty=u,t.getTransformXY=l,t.setTransformXY=c;var f=void 0,d={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"},p=/matrix\((.*)\)/,h=/matrix3d\((.*)\)/},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=(0,u.default)(e),r=void 0,o=void 0,i=void 0,s=e.ownerDocument,l=s.defaultView||s.parentWindow,c=s.body,f=s.documentElement;n;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===n.clientWidth||n===c||n===f||"visible"===a.default.css(n,"overflow")){if(n===c||n===f)break}else{var d=a.default.offset(n);d.left+=n.clientLeft,d.top+=n.clientTop,t.top=Math.max(t.top,d.top),t.right=Math.min(t.right,d.left+n.clientWidth),t.bottom=Math.min(t.bottom,d.top+n.clientHeight),t.left=Math.max(t.left,d.left)}n=(0,u.default)(n)}return r=a.default.getWindowScrollLeft(l),o=a.default.getWindowScrollTop(l),t.left=Math.max(t.left,r),t.top=Math.max(t.top,o),i={width:a.default.viewportWidth(l),height:a.default.viewportHeight(l)},t.right=Math.min(t.right,r+i.width),t.bottom=Math.min(t.bottom,o+i.height),t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),a=r(i),s=n(235),u=r(s);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){var o=a.default.clone(e),i={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+i.width>n.right&&(i.width-=o.left+i.width-n.right),r.adjustX&&o.left+i.width>n.right&&(o.left=Math.max(n.right-i.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+i.height>n.bottom&&(i.height-=o.top+i.height-n.bottom),r.adjustY&&o.top+i.height>n.bottom&&(o.top=Math.max(n.bottom-i.height,n.top)),a.default.mix(o,i)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0,n=void 0,r=void 0;if(a.default.isWindow(e)||9===e.nodeType){var o=a.default.getWindow(e);t={left:a.default.getWindowScrollLeft(o),top:a.default.getWindowScrollTop(o)},n=a.default.viewportWidth(o),r=a.default.viewportHeight(o)}else t=a.default.offset(e),n=a.default.outerWidth(e),r=a.default.outerHeight(e);return t.width=n,t.height=r,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,o){var i=void 0,s=void 0,u=void 0,l=void 0;return i={left:e.left,top:e.top},u=(0,a.default)(t,n[1]),l=(0,a.default)(e,n[0]),s=[l.left-u.left,l.top-u.top],{left:i.left-s[0]+r[0]-o[0],top:i.top-s[1]+r[1]-o[1]}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(400),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,i=e.height,a=void 0,s=void 0;return a=e.left,s=e.top,"c"===n?s+=i/2:"b"===n&&(s+=i),"c"===r?a+=o/2:"r"===r&&(a+=o),{left:a,top:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){var r=s.a.unstable_batchedUpdates?function(e){s.a.unstable_batchedUpdates(n,e)}:n;return i()(e,t,r)}t.a=r;var o=n(229),i=n.n(o),a=n(5),s=n.n(a)},function(e,t,n){"use strict";function r(e){return null!=e&&e==e.window}t.a=r},function(e,t,n){"use strict";function r(e){var t=[];return l.a.Children.forEach(e,function(e){t.push(e)}),t}function o(e,t){var n=null;return e&&e.forEach(function(e){n||e&&e.key===t&&(n=e)}),n}function i(e,t,n){var r=null;return e&&e.forEach(function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}}),r}function a(e,t,n){var r=e.length===t.length;return r&&e.forEach(function(e,o){var i=t[o];e&&i&&(e&&!i||!e&&i?r=!1:e.key!==i.key?r=!1:n&&e.props[n]!==i.props[n]&&(r=!1))}),r}function s(e,t){var n=[],r={},i=[];return e.forEach(function(e){e&&o(t,e.key)?i.length&&(r[e.key]=i,i=[]):i.push(e)}),t.forEach(function(e){e&&r.hasOwnProperty(e.key)&&(n=n.concat(r[e.key])),n.push(e)}),n=n.concat(i)}t.e=r,t.a=o,t.b=i,t.c=a,t.d=s;var u=n(0),l=n.n(u)},function(e,t,n){"use strict";var r=n(84),o=n.n(r),i=n(74),a=n.n(i),s=n(83),u=n.n(s),l=n(75),c=n.n(l),f=n(77),d=n.n(f),p=n(0),h=n.n(p),m=n(5),v=n.n(m),y=n(14),g=n.n(y),b=n(405),w=n(238),_={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},k=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),u()(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){w.a.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){w.a.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){w.a.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=v.a.findDOMNode(this),i=this.props,a=i.transitionName,s="object"===(void 0===a?"undefined":o()(a));this.stop();var u=function(){n.stopper=null,t()};if((b.b||!i.animation[e])&&a&&i[_[e]]){var l=s?a[e]:a+"-"+e,c=l+"-active";s&&a[e+"Active"]&&(c=a[e+"Active"]),this.stopper=Object(b.a)(r,{name:l,active:c},u)}else this.stopper=i.animation[e](r,u)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(h.a.Component);k.propTypes={children:g.a.any},t.a=k},function(e,t,n){"use strict";function r(e,t){for(var n=window.getComputedStyle(e,null),r="",o=0;o<p.length&&!(r=n.getPropertyValue(p[o]+t));o++);return r}function o(e){if(f){var t=parseFloat(r(e,"transition-delay"))||0,n=parseFloat(r(e,"transition-duration"))||0,o=parseFloat(r(e,"animation-delay"))||0,i=parseFloat(r(e,"animation-duration"))||0,a=Math.max(n+t,i+o);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},1e3*a+200)}}function i(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}n.d(t,"b",function(){return f});var a=n(84),s=n.n(a),u=n(406),l=n(407),c=n.n(l),f=0!==u.a.endEvents.length,d=["Webkit","Moz","O","ms"],p=["-webkit-","-moz-","-o-","ms-",""],h=function(e,t,n){var r="object"===(void 0===t?"undefined":s()(t)),a=r?t.name:t,l=r?t.active:t+"-active",f=n,d=void 0,p=void 0,h=c()(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(f=n.end,d=n.start,p=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),i(e),h.remove(a),h.remove(l),u.a.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,f&&f())},u.a.addEndEventListener(e,e.rcEndListener),d&&d(),h.add(a),e.rcAnimTimeout=setTimeout(function(){e.rcAnimTimeout=null,h.add(l),p&&setTimeout(p,0),o(e)},30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};h.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),i(e),u.a.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},u.a.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout(function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,o(e)},0)},h.setTransition=function(e,t,n){var r=t,o=n;void 0===n&&(o=r,r=""),r=r||"",d.forEach(function(t){e.style[t+"Transition"+r]=o})},h.isCssAnimationSupported=f,t.a=h},function(e,t,n){"use strict";function r(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var n in a)if(a.hasOwnProperty(n)){var r=a[n];for(var o in r)if(o in t){s.push(r[o]);break}}}function o(e,t,n){e.addEventListener(t,n,!1)}function i(e,t,n){e.removeEventListener(t,n,!1)}var a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];"undefined"!=typeof window&&"undefined"!=typeof document&&r();var u={addEndEventListener:function(e,t){if(0===s.length)return void window.setTimeout(t,0);s.forEach(function(n){o(e,n,t)})},endEvents:s,removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){i(e,n,t)})}};t.a=u},function(e,t,n){function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var o=n(237)}catch(e){var o=n(237)}var i=/\s+/,a=Object.prototype.toString;e.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(i);return""===n[0]&&n.shift(),n},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},function(e,t,n){"use strict";var r=n(74),o=n.n(r),i=n(83),a=n.n(i),s=n(75),u=n.n(s),l=n(77),c=n.n(l),f=n(0),d=n.n(f),p=n(14),h=n.n(p),m=n(239),v=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.className;return e.visible||(t+=" "+e.hiddenClassName),d.a.createElement("div",{className:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style},d.a.createElement(m.a,{className:e.prefixCls+"-content",visible:e.visible},e.children))}}]),t}(f.Component);v.propTypes={hiddenClassName:h.a.string,className:h.a.string,prefixCls:h.a.string,onMouseEnter:h.a.func,onMouseLeave:h.a.func,children:h.a.any},t.a=v},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.createElement("div");return document.body.appendChild(e),e}function i(e){function t(e,t,n){if(!c||e._component||c(e)||f&&f(e)){e._container||(e._container=h(e));var r=void 0;r=e.getComponent?e.getComponent(t):d(e,t),l.default.unstable_renderSubtreeIntoContainer(e,r,e._container,function(){e._component=this,n&&n.call(this)})}}function n(e){if(e._container){var t=e._container;l.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),e._container=null}}var r=e.autoMount,i=void 0===r||r,a=e.autoDestroy,u=void 0===a||a,c=e.isVisible,f=e.isForceRender,d=e.getComponent,p=e.getContainer,h=void 0===p?o:p,m=void 0;return i&&(m=(0,s.default)({},m,{componentDidMount:function(){t(this)},componentDidUpdate:function(){t(this)}})),i&&u||(m=(0,s.default)({},m,{renderComponent:function(e,n){t(this,e,n)}})),m=u?(0,s.default)({},m,{componentWillUnmount:function(){n(this)}}):(0,s.default)({},m,{removeContainer:function(){n(this)}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(32),s=r(a);t.default=i;var u=n(5),l=r(u);e.exports=t.default},function(e,t,n){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.arrowPointAtCenter)return o.placements;var t=e.arrowWidth,n=void 0===t?5:t,r=e.horizontalArrowShift,s=void 0===r?16:r,u=e.verticalArrowShift,l=void 0===u?12:u;return{left:{points:["cr","cl"],overflow:i,offset:[-4,0],targetOffset:a},right:{points:["cl","cr"],overflow:i,offset:[4,0],targetOffset:a},top:{points:["bc","tc"],overflow:i,offset:[0,-4],targetOffset:a},bottom:{points:["tc","bc"],overflow:i,offset:[0,4],targetOffset:a},topLeft:{points:["bl","tc"],overflow:i,offset:[-(s+n),-4],targetOffset:a},leftTop:{points:["tr","cl"],overflow:i,offset:[-4,-(l+n)],targetOffset:a},topRight:{points:["br","tc"],overflow:i,offset:[s+n,-4],targetOffset:a},rightTop:{points:["tl","cr"],overflow:i,offset:[4,-(l+n)],targetOffset:a},bottomRight:{points:["tr","bc"],overflow:i,offset:[s+n,4],targetOffset:a},rightBottom:{points:["bl","cr"],overflow:i,offset:[4,l+n],targetOffset:a},bottomLeft:{points:["tl","bc"],overflow:i,offset:[-(s+n),4],targetOffset:a},leftBottom:{points:["br","cl"],overflow:i,offset:[-4,l+n],targetOffset:a}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlacements=r;var o=n(218),i={adjustX:1,adjustY:1},a=[0,0]},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),i=r(o),a=n(14),s=r(a),u=n(46),l=r(u),c=n(241),f=r(c),d=n(107),p=(0,l.default)({displayName:"Menu",propTypes:{openSubMenuOnMouseEnter:s.default.bool,closeSubMenuOnMouseLeave:s.default.bool,selectedKeys:s.default.arrayOf(s.default.string),defaultSelectedKeys:s.default.arrayOf(s.default.string),defaultOpenKeys:s.default.arrayOf(s.default.string),openKeys:s.default.arrayOf(s.default.string),mode:s.default.string,onClick:s.default.func,onSelect:s.default.func,onDeselect:s.default.func,onDestroy:s.default.func,openTransitionName:s.default.string,openAnimation:s.default.oneOfType([s.default.string,s.default.object]),level:s.default.number,eventKey:s.default.string,selectable:s.default.bool,children:s.default.any},mixins:[f.default],getDefaultProps:function(){return{openSubMenuOnMouseEnter:!0,closeSubMenuOnMouseLeave:!0,selectable:!0,onClick:d.noop,onSelect:d.noop,onOpenChange:d.noop,onDeselect:d.noop,defaultSelectedKeys:[],defaultOpenKeys:[]}},getInitialState:function(){var e=this.props,t=e.defaultSelectedKeys,n=e.defaultOpenKeys;return"selectedKeys"in e&&(t=e.selectedKeys||[]),"openKeys"in e&&(n=e.openKeys||[]),{selectedKeys:t,openKeys:n}},componentWillReceiveProps:function(e){var t={};"selectedKeys"in e&&(t.selectedKeys=e.selectedKeys||[]),"openKeys"in e&&(t.openKeys=e.openKeys||[]),this.setState(t)},onDestroy:function(e){var t=this.state,n=this.props,r=t.selectedKeys,o=t.openKeys,i=r.indexOf(e);"selectedKeys"in n||-1===i||r.splice(i,1),i=o.indexOf(e),"openKeys"in n||-1===i||o.splice(i,1)},onItemHover:function(e){var t=e.item,n=this.props,r=n.mode,o=n.closeSubMenuOnMouseLeave,i=e.openChanges,a=void 0===i?[]:i;if("inline"!==r&&!o&&t.isSubMenu){var s=this.state.activeKey,u=this.getFlatInstanceArray().filter(function(e){return e&&e.props.eventKey===s})[0];u&&u.props.open&&(a=a.concat({key:t.props.eventKey,item:t,originalEvent:e,open:!0}))}a=a.concat(this.getOpenChangesOnItemHover(e)),a.length&&this.onOpenChange(a)},onSelect:function(e){var t=this.props;if(t.selectable){var n=this.state.selectedKeys,r=e.key;n=t.multiple?n.concat([r]):[r],"selectedKeys"in t||this.setState({selectedKeys:n}),t.onSelect((0,i.default)({},e,{selectedKeys:n}))}},onClick:function(e){this.props.onClick(e)},onOpenChange:function(e){var t=this.props,n=this.state.openKeys.concat(),r=!1,o=function(e){var t=!1;if(e.open)(t=-1===n.indexOf(e.key))&&n.push(e.key);else{var o=n.indexOf(e.key);t=-1!==o,t&&n.splice(o,1)}r=r||t};Array.isArray(e)?e.forEach(o):o(e),r&&("openKeys"in this.props||this.setState({openKeys:n}),t.onOpenChange(n))},onDeselect:function(e){var t=this.props;if(t.selectable){var n=this.state.selectedKeys.concat(),r=e.key,o=n.indexOf(r);-1!==o&&n.splice(o,1),"selectedKeys"in t||this.setState({selectedKeys:n}),t.onDeselect((0,i.default)({},e,{selectedKeys:n}))}},getOpenTransitionName:function(){var e=this.props,t=e.openTransitionName,n=e.openAnimation;return t||"string"!=typeof n||(t=e.prefixCls+"-open-"+n),t},isInlineMode:function(){return"inline"===this.props.mode},lastOpenSubMenu:function(){var e=[],t=this.state.openKeys;return t.length&&(e=this.getFlatInstanceArray().filter(function(e){return e&&-1!==t.indexOf(e.props.eventKey)})),e[0]},renderMenuItem:function(e,t,n){if(!e)return null;var r=this.state,o={openKeys:r.openKeys,selectedKeys:r.selectedKeys,openSubMenuOnMouseEnter:this.props.openSubMenuOnMouseEnter};return this.renderCommonMenuItem(e,t,n,o)},render:function(){var e=(0,i.default)({},this.props);return e.className+=" "+e.prefixCls+"-root",this.renderRoot(e)}});t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";e.exports=n(416)},function(e,t,n){"use strict";function r(e,t,n){n=n||{},9===t.nodeType&&(t=o.getWindow(t));var r=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,a=n.alignWithTop,s=n.alignWithLeft,u=n.offsetTop||0,l=n.offsetLeft||0,c=n.offsetBottom||0,f=n.offsetRight||0;r=void 0===r||r;var d=o.isWindow(t),p=o.offset(e),h=o.outerHeight(e),m=o.outerWidth(e),v=void 0,y=void 0,g=void 0,b=void 0,w=void 0,_=void 0,k=void 0,E=void 0,T=void 0,C=void 0;d?(k=t,C=o.height(k),T=o.width(k),E={left:o.scrollLeft(k),top:o.scrollTop(k)},w={left:p.left-E.left-l,top:p.top-E.top-u},_={left:p.left+m-(E.left+T)+f,top:p.top+h-(E.top+C)+c},b=E):(v=o.offset(t),y=t.clientHeight,g=t.clientWidth,b={left:t.scrollLeft,top:t.scrollTop},w={left:p.left-(v.left+(parseFloat(o.css(t,"borderLeftWidth"))||0))-l,top:p.top-(v.top+(parseFloat(o.css(t,"borderTopWidth"))||0))-u},_={left:p.left+m-(v.left+g+(parseFloat(o.css(t,"borderRightWidth"))||0))+f,top:p.top+h-(v.top+y+(parseFloat(o.css(t,"borderBottomWidth"))||0))+c}),w.top<0||_.top>0?!0===a?o.scrollTop(t,b.top+w.top):!1===a?o.scrollTop(t,b.top+_.top):w.top<0?o.scrollTop(t,b.top+w.top):o.scrollTop(t,b.top+_.top):i||(a=void 0===a||!!a,a?o.scrollTop(t,b.top+w.top):o.scrollTop(t,b.top+_.top)),r&&(w.left<0||_.left>0?!0===s?o.scrollLeft(t,b.left+w.left):!1===s?o.scrollLeft(t,b.left+_.left):w.left<0?o.scrollLeft(t,b.left+w.left):o.scrollLeft(t,b.left+_.left):i||(s=void 0===s||!!s,s?o.scrollLeft(t,b.left+w.left):o.scrollLeft(t,b.left+_.left)))}var o=n(417);e.exports=r},function(e,t,n){"use strict";function r(e){var t=void 0,n=void 0,r=void 0,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=t.left,r=t.top,n-=a.clientLeft||i.clientLeft||0,r-=a.clientTop||i.clientTop||0,{left:n,top:r}}function o(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var o=e.document;n=o.documentElement[r],"number"!=typeof n&&(n=o.body[r])}return n}function i(e){return o(e)}function a(e){return o(e,!0)}function s(e){var t=r(e),n=e.ownerDocument,o=n.defaultView||n.parentWindow;return t.left+=i(o),t.top+=a(o),t}function u(e,t,n){var r="",o=e.ownerDocument,i=n||o.defaultView.getComputedStyle(e,null);return i&&(r=i.getPropertyValue(t)||i[t]),r}function l(e,t){var n=e[T]&&e[T][t];if(k.test(n)&&!E.test(t)){var r=e.style,o=r[S],i=e[C][S];e[C][S]=e[T][S],r[S]="fontSize"===t?"1em":n||0,n=r.pixelLeft+O,r[S]=o,e[C][S]=i}return""===n?"auto":n}function c(e,t){for(var n=0;n<e.length;n++)t(e[n])}function f(e){return"border-box"===x(e,"boxSizing")}function d(e,t,n){var r={},o=e.style,i=void 0;for(i in t)t.hasOwnProperty(i)&&(r[i]=o[i],o[i]=t[i]);n.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=r[i])}function p(e,t,n){var r=0,o=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i++)if(o=t[i])for(a=0;a<n.length;a++){var s=void 0;s="border"===o?o+n[a]+"Width":o+n[a],r+=parseFloat(x(e,s))||0}return r}function h(e){return null!=e&&e==e.window}function m(e,t,n){if(h(e))return"width"===t?I.viewportWidth(e):I.viewportHeight(e);if(9===e.nodeType)return"width"===t?I.docWidth(e):I.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.offsetWidth:e.offsetHeight,i=x(e),a=f(e,i),s=0;(null==o||o<=0)&&(o=void 0,s=x(e,t),(null==s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===n&&(n=a?M:j);var u=void 0!==o||a,l=o||s;if(n===j)return u?l-p(e,["border","padding"],r,i):s;if(u){var c=n===N?-p(e,["border"],r,i):p(e,["margin"],r,i);return l+(n===M?0:c)}return s+p(e,P.slice(n),r,i)}function v(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=m.apply(void 0,n):d(e,D,function(){t=m.apply(void 0,n)}),t}function y(e,t,n){var r=n;{if("object"!==(void 0===t?"undefined":w(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):x(e,t);for(var o in t)t.hasOwnProperty(o)&&y(e,o,t[o])}}function g(e,t){"static"===y(e,"position")&&(e.style.position="relative");var n=s(e),r={},o=void 0,i=void 0;for(i in t)t.hasOwnProperty(i)&&(o=parseFloat(y(e,i))||0,r[i]=o+t[i]-n[i]);y(e,r)}var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,k=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),E=/^(top|right|bottom|left)$/,T="currentStyle",C="runtimeStyle",S="left",O="px",x=void 0;"undefined"!=typeof window&&(x=window.getComputedStyle?u:l);var P=["margin","border","padding"],j=-1,N=2,M=1,A=0,I={};c(["Width","Height"],function(e){I["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],I["viewport"+e](n))},I["viewport"+e]=function(t){var n="client"+e,r=t.document,o=r.body,i=r.documentElement,a=i[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}});var D={position:"absolute",visibility:"hidden",display:"block"};c(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);I["outer"+t]=function(t,n){return t&&v(t,e,n?A:M)};var n="width"===e?["Left","Right"]:["Top","Bottom"];I[e]=function(t,r){if(void 0===r)return t&&v(t,e,j);if(t){var o=x(t);return f(t)&&(r+=p(t,["padding","border"],n,o)),y(t,e,r)}}}),e.exports=b({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return s(e);g(e,t)},isWindow:h,each:c,css:y,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(h(e)){if(void 0===t)return i(e);window.scrollTo(t,a(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(h(e)){if(void 0===t)return a(e);window.scrollTo(i(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),i=r(o),a=n(0),s=r(a),u=n(14),l=r(u),c=n(46),f=r(c),d=(0,f.default)({displayName:"DOMWrap",propTypes:{tag:l.default.string,hiddenClassName:l.default.string,visible:l.default.bool},getDefaultProps:function(){return{tag:"div"}},render:function(){var e=(0,i.default)({},this.props);e.visible||(e.className=e.className||"",e.className+=" "+e.hiddenClassName);var t=e.tag;return delete e.tag,delete e.hiddenClassName,delete e.visible,s.default.createElement(t,e)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(170),i=r(o),a=n(32),s=r(a),u=n(0),l=r(u),c=n(14),f=r(c),d=n(46),p=r(d),h=n(420),m=r(h),v=n(106),y=r(v),g=n(11),b=r(g),w=n(107),_=0,k=(0,p.default)({displayName:"SubMenu",propTypes:{parentMenu:f.default.object,title:f.default.node,children:f.default.any,selectedKeys:f.default.array,openKeys:f.default.array,onClick:f.default.func,onOpenChange:f.default.func,rootPrefixCls:f.default.string,eventKey:f.default.string,multiple:f.default.bool,active:f.default.bool,onSelect:f.default.func,closeSubMenuOnMouseLeave:f.default.bool,openSubMenuOnMouseEnter:f.default.bool,onDeselect:f.default.func,onDestroy:f.default.func,onItemHover:f.default.func,onMouseEnter:f.default.func,onMouseLeave:f.default.func,onTitleMouseEnter:f.default.func,onTitleMouseLeave:f.default.func,onTitleClick:f.default.func},mixins:[n(421)],getDefaultProps:function(){return{onMouseEnter:w.noop,onMouseLeave:w.noop,onTitleMouseEnter:w.noop,onTitleMouseLeave:w.noop,onTitleClick:w.noop,title:""}},getInitialState:function(){return this.isSubMenu=1,{defaultActiveFirst:!1}},componentWillUnmount:function(){var e=this.props,t=e.onDestroy,n=e.eventKey,r=e.parentMenu;t&&t(n),r.subMenuInstance===this&&this.clearSubMenuTimers()},onDestroy:function(e){this.props.onDestroy(e)},onKeyDown:function(e){var t=e.keyCode,n=this.menuInstance,r=this.isOpen();if(t===y.default.ENTER)return this.onTitleClick(e),this.setState({defaultActiveFirst:!0}),!0;if(t===y.default.RIGHT)return r?n.onKeyDown(e):(this.triggerOpenChange(!0),this.setState({defaultActiveFirst:!0})),!0;if(t===y.default.LEFT){var o=void 0;if(!r)return;return o=n.onKeyDown(e),o||(this.triggerOpenChange(!1),o=!0),o}return!r||t!==y.default.UP&&t!==y.default.DOWN?void 0:n.onKeyDown(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onMouseEnter:function(e){var t=this.props;this.clearSubMenuLeaveTimer(),t.onMouseEnter({key:t.eventKey,domEvent:e})},onMouseLeave:function(e){var t=this,n=this.props,r=n.parentMenu,o=n.eventKey;r.subMenuInstance=this,r.subMenuLeaveFn=function(){if("inline"!==n.mode){var r=t.isOpen();r&&n.closeSubMenuOnMouseLeave&&n.active?n.onItemHover({key:o,item:t,hover:!1,trigger:"mouseleave",openChanges:[{key:o,item:t,trigger:"mouseleave",open:!1}]}):(n.active&&n.onItemHover({key:o,item:t,hover:!1,trigger:"mouseleave"}),r&&n.closeSubMenuOnMouseLeave&&t.triggerOpenChange(!1))}n.onMouseLeave({key:o,domEvent:e})},r.subMenuLeaveTimer=setTimeout(r.subMenuLeaveFn,100)},onTitleMouseEnter:function(e){var t=this.props,n=t.parentMenu,r=t.eventKey,o=this;this.clearSubMenuTitleLeaveTimer(),n.menuItemInstance&&n.menuItemInstance.clearMenuItemMouseLeaveTimer();var i=[];t.openSubMenuOnMouseEnter&&i.push({key:r,item:o,trigger:"mouseenter",open:!0}),t.onItemHover({key:r,item:o,hover:!0,trigger:"mouseenter",openChanges:i}),this.setState({defaultActiveFirst:!1}),t.onTitleMouseEnter({key:r,domEvent:e})},onTitleMouseLeave:function(e){var t=this,n=this.props,r=n.parentMenu,o=n.eventKey;r.subMenuInstance=this,r.subMenuTitleLeaveFn=function(){"inline"===n.mode&&n.active&&n.onItemHover({key:o,item:t,hover:!1,trigger:"mouseleave"}),n.onTitleMouseLeave({key:n.eventKey,domEvent:e})},r.subMenuTitleLeaveTimer=setTimeout(r.subMenuTitleLeaveFn,100)},onTitleClick:function(e){var t=this.props;t.onTitleClick({key:t.eventKey,domEvent:e}),t.openSubMenuOnMouseEnter||(this.triggerOpenChange(!this.isOpen(),"click"),this.setState({defaultActiveFirst:!1}))},onSubMenuClick:function(e){this.props.onClick(this.addKeyPath(e))},onSelect:function(e){this.props.onSelect(e)},onDeselect:function(e){this.props.onDeselect(e)},getPrefixCls:function(){return this.props.rootPrefixCls+"-submenu"},getActiveClassName:function(){return this.getPrefixCls()+"-active"},getDisabledClassName:function(){return this.getPrefixCls()+"-disabled"},getSelectedClassName:function(){return this.getPrefixCls()+"-selected"},getOpenClassName:function(){return this.props.rootPrefixCls+"-submenu-open"},saveMenuInstance:function(e){this.menuInstance=e},addKeyPath:function(e){return(0,s.default)({},e,{keyPath:(e.keyPath||[]).concat(this.props.eventKey)})},triggerOpenChange:function(e,t){var n=this.props.eventKey;this.onOpenChange({key:n,item:this,trigger:t,open:e})},clearSubMenuTimers:function(){this.clearSubMenuLeaveTimer(),this.clearSubMenuTitleLeaveTimer()},clearSubMenuTitleLeaveTimer:function(){var e=this.props.parentMenu;e.subMenuTitleLeaveTimer&&(clearTimeout(e.subMenuTitleLeaveTimer),e.subMenuTitleLeaveTimer=null,e.subMenuTitleLeaveFn=null)},clearSubMenuLeaveTimer:function(){var e=this.props.parentMenu;e.subMenuLeaveTimer&&(clearTimeout(e.subMenuLeaveTimer),e.subMenuLeaveTimer=null,e.subMenuLeaveFn=null)},isChildrenSelected:function(){var e={find:!1};return(0,w.loopMenuItemRecusively)(this.props.children,this.props.selectedKeys,e),e.find},isOpen:function(){return-1!==this.props.openKeys.indexOf(this.props.eventKey)},renderChildren:function(e){var t=this.props,n={mode:"horizontal"===t.mode?"vertical":t.mode,visible:this.isOpen(),level:t.level+1,inlineIndent:t.inlineIndent,focusable:!1,onClick:this.onSubMenuClick,onSelect:this.onSelect,onDeselect:this.onDeselect,onDestroy:this.onDestroy,selectedKeys:t.selectedKeys,eventKey:t.eventKey+"-menu-",openKeys:t.openKeys,openTransitionName:t.openTransitionName,openAnimation:t.openAnimation,onOpenChange:this.onOpenChange,closeSubMenuOnMouseLeave:t.closeSubMenuOnMouseLeave,defaultActiveFirst:this.state.defaultActiveFirst,multiple:t.multiple,prefixCls:t.rootPrefixCls,id:this._menuId,ref:this.saveMenuInstance};return l.default.createElement(m.default,n,e)},render:function(){var e,t=this.isOpen();this.haveOpen=this.haveOpen||t;var n=this.props,r=this.getPrefixCls(),o=(e={},(0,i.default)(e,n.className,!!n.className),(0,i.default)(e,r+"-"+n.mode,1),e);o[this.getOpenClassName()]=t,o[this.getActiveClassName()]=n.active,o[this.getDisabledClassName()]=n.disabled,o[this.getSelectedClassName()]=this.isChildrenSelected(),this._menuId||(n.eventKey?this._menuId=n.eventKey+"$Menu":this._menuId="$__$"+ ++_+"$Menu"),o[r]=!0,o[r+"-"+n.mode]=1;var a={},u={},c={};n.disabled||(a={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},u={onClick:this.onTitleClick},c={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var f={};return"inline"===n.mode&&(f.paddingLeft=n.inlineIndent*n.level),l.default.createElement("li",(0,s.default)({className:(0,b.default)(o)},a,{style:n.style}),l.default.createElement("div",(0,s.default)({style:f,className:r+"-title"},c,u,{"aria-expanded":t,"aria-owns":this._menuId,"aria-haspopup":"true",title:"string"==typeof n.title?n.title:void 0}),n.title,l.default.createElement("i",{className:r+"-arrow"})),this.renderChildren(n.children))}});k.isSubMenu=1,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(84),i=r(o),a=n(32),s=r(a),u=n(0),l=r(u),c=n(14),f=r(c),d=n(46),p=r(d),h=n(241),m=r(h),v=n(236),y=r(v),g=(0,p.default)({displayName:"SubPopupMenu",propTypes:{onSelect:f.default.func,onClick:f.default.func,onDeselect:f.default.func,onOpenChange:f.default.func,onDestroy:f.default.func,openTransitionName:f.default.string,openAnimation:f.default.oneOfType([f.default.string,f.default.object]),openKeys:f.default.arrayOf(f.default.string),closeSubMenuOnMouseLeave:f.default.bool,visible:f.default.bool,children:f.default.any},mixins:[m.default],onDeselect:function(e){this.props.onDeselect(e)},onSelect:function(e){this.props.onSelect(e)},onClick:function(e){this.props.onClick(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onDestroy:function(e){this.props.onDestroy(e)},onItemHover:function(e){var t=e.openChanges,n=void 0===t?[]:t;n=n.concat(this.getOpenChangesOnItemHover(e)),n.length&&this.onOpenChange(n)},getOpenTransitionName:function(){return this.props.openTransitionName},renderMenuItem:function(e,t,n){if(!e)return null;var r=this.props,o={openKeys:r.openKeys,selectedKeys:r.selectedKeys,openSubMenuOnMouseEnter:!0};return this.renderCommonMenuItem(e,t,n,o)},render:function(){var e=this.renderFirst;if(this.renderFirst=1,this.haveOpened=this.haveOpened||this.props.visible,!this.haveOpened)return null;var t=!0;!e&&this.props.visible&&(t=!1);var n=(0,s.default)({},this.props);n.className+=" "+n.prefixCls+"-sub";var r={};return n.openTransitionName?r.transitionName=n.openTransitionName:"object"===(0,i.default)(n.openAnimation)&&(r.animation=(0,s.default)({},n.openAnimation),t||delete r.animation.appear),l.default.createElement(y.default,(0,s.default)({},r,{showProp:"visible",component:"",transitionAppear:t}),this.renderRoot(n))}});t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(106),i=r(o),a=n(228),s=r(a),u=n(422),l=r(u),c=n(5),f=r(c);t.default={componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){"inline"!==this.props.mode&&(this.props.open?this.bindRootCloseHandlers():this.unbindRootCloseHandlers())},handleDocumentKeyUp:function(e){e.keyCode===i.default.ESC&&this.props.onItemHover({key:this.props.eventKey,item:this,hover:!1})},handleDocumentClick:function(e){if(!(0,l.default)(f.default.findDOMNode(this),e.target)){this.props.onItemHover({hover:!1,item:this,key:this.props.eventKey}),this.triggerOpenChange(!1)}},bindRootCloseHandlers:function(){this._onDocumentClickListener||(this._onDocumentClickListener=(0,s.default)(document,"click",this.handleDocumentClick),this._onDocumentKeyupListener=(0,s.default)(document,"keyup",this.handleDocumentKeyUp))},unbindRootCloseHandlers:function(){this._onDocumentClickListener&&(this._onDocumentClickListener.remove(),this._onDocumentClickListener=null),this._onDocumentKeyupListener&&(this._onDocumentKeyupListener.remove(),this._onDocumentKeyupListener=null)},componentWillUnmount:function(){this.unbindRootCloseHandlers()}},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),i=r(o),a=n(0),s=r(a),u=n(14),l=r(u),c=n(46),f=r(c),d=n(106),p=r(d),h=n(11),m=r(h),v=n(107),y=(0,f.default)({displayName:"MenuItem",propTypes:{rootPrefixCls:l.default.string,eventKey:l.default.string,active:l.default.bool,children:l.default.any,selectedKeys:l.default.array,disabled:l.default.bool,title:l.default.string,onSelect:l.default.func,onClick:l.default.func,onDeselect:l.default.func,parentMenu:l.default.object,onItemHover:l.default.func,onDestroy:l.default.func,onMouseEnter:l.default.func,onMouseLeave:l.default.func},getDefaultProps:function(){return{onSelect:v.noop,onMouseEnter:v.noop,onMouseLeave:v.noop}},componentWillUnmount:function(){var e=this.props;e.onDestroy&&e.onDestroy(e.eventKey),e.parentMenu.menuItemInstance===this&&this.clearMenuItemMouseLeaveTimer()},onKeyDown:function(e){if(e.keyCode===p.default.ENTER)return this.onClick(e),!0},onMouseLeave:function(e){var t=this,n=this.props,r=n.eventKey,o=n.parentMenu;o.menuItemInstance=this,o.menuItemMouseLeaveFn=function(){n.active&&n.onItemHover({key:r,item:t,hover:!1,domEvent:e,trigger:"mouseleave"})},o.menuItemMouseLeaveTimer=setTimeout(o.menuItemMouseLeaveFn,30),n.onMouseLeave({key:r,domEvent:e})},onMouseEnter:function(e){var t=this.props,n=t.eventKey,r=t.parentMenu;this.clearMenuItemMouseLeaveTimer(),r.subMenuInstance&&r.subMenuInstance.clearSubMenuTimers(),t.onItemHover({key:n,item:this,hover:!0,domEvent:e,trigger:"mouseenter"}),t.onMouseEnter({key:n,domEvent:e})},onClick:function(e){var t=this.props,n=this.isSelected(),r=t.eventKey,o={key:r,keyPath:[r],item:this,domEvent:e};t.onClick(o),t.multiple?n?t.onDeselect(o):t.onSelect(o):n||t.onSelect(o)},getPrefixCls:function(){return this.props.rootPrefixCls+"-item"},getActiveClassName:function(){return this.getPrefixCls()+"-active"},getSelectedClassName:function(){return this.getPrefixCls()+"-selected"},getDisabledClassName:function(){return this.getPrefixCls()+"-disabled"},clearMenuItemMouseLeaveTimer:function(){var e=this.props,t=e.parentMenu;t.menuItemMouseLeaveTimer&&(clearTimeout(t.menuItemMouseLeaveTimer),t.menuItemMouseLeaveTimer=null,t.menuItemMouseLeaveFn=null)},isSelected:function(){return-1!==this.props.selectedKeys.indexOf(this.props.eventKey)},render:function(){var e=this.props,t=this.isSelected(),n={};n[this.getActiveClassName()]=!e.disabled&&e.active,n[this.getSelectedClassName()]=t,n[this.getDisabledClassName()]=e.disabled,n[this.getPrefixCls()]=!0,n[e.className]=!!e.className;var r=(0,i.default)({},e.attribute,{title:e.title,className:(0,m.default)(n),role:"menuitem","aria-selected":t,"aria-disabled":e.disabled}),o={};e.disabled||(o={onClick:this.onClick,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter});var a=(0,i.default)({},e.style);return"inline"===e.mode&&(a.paddingLeft=e.inlineIndent*e.level),s.default.createElement("li",(0,i.default)({style:a},r,o),e.children)}});y.isMenuItem=1,t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(14),s=r(a),u=n(46),l=r(u),c=(0,l.default)({displayName:"MenuItemGroup",propTypes:{renderMenuItem:s.default.func,index:s.default.number,className:s.default.string,rootPrefixCls:s.default.string},getDefaultProps:function(){return{disabled:!0}},renderInnerMenuItem:function(e,t){var n=this.props;return(0,n.renderMenuItem)(e,n.index,t)},render:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.rootPrefixCls,o=r+"-item-group-title",a=r+"-item-group-list";return i.default.createElement("li",{className:n+" "+r+"-item-group"},i.default.createElement("div",{className:o,title:"string"==typeof e.title?e.title:void 0},e.title),i.default.createElement("ul",{className:a},i.default.Children.map(e.children,this.renderInnerMenuItem)))}});c.isMenuItemGroup=!0,t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(14),s=r(a),u=n(46),l=r(u),c=(0,l.default)({displayName:"Divider",propTypes:{disabled:s.default.bool,className:s.default.string,rootPrefixCls:s.default.string},getDefaultProps:function(){return{disabled:!0}},render:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.rootPrefixCls;return i.default.createElement("li",{className:n+" "+r+"-item-divider"})}});t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(427),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(0),f=r(c),d=n(14),p=r(d),h=n(5),m=r(h),v=n(219),y=r(v),g=n(428),b=r(g),w=function(e){function t(n){a(this,t);var r=s(this,e.call(this,n));return _.call(r),r.state="visible"in n?{visible:n.visible}:{visible:n.defaultVisible},r}return u(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.visible;void 0!==t&&this.setState({visible:t})},t.prototype.getMenuElement=function(){var e=this.props,t=e.overlay,n=e.prefixCls,r={prefixCls:n+"-menu",onClick:this.onClick};return"string"==typeof t.type&&delete r.prefixCls,f.default.cloneElement(t,r)},t.prototype.getPopupDomNode=function(){return this.refs.trigger.getPopupDomNode()},t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,r=e.transitionName,o=e.animation,a=e.align,s=e.placement,u=e.getPopupContainer,c=e.showAction,d=e.hideAction,p=e.overlayClassName,h=e.overlayStyle,m=e.trigger,v=i(e,["prefixCls","children","transitionName","animation","align","placement","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","trigger"]);return f.default.createElement(y.default,l({},v,{prefixCls:t,ref:"trigger",popupClassName:p,popupStyle:h,builtinPlacements:b.default,action:m,showAction:c,hideAction:d,popupPlacement:s,popupAlign:a,popupTransitionName:r,popupAnimation:o,popupVisible:this.state.visible,afterPopupVisibleChange:this.afterVisibleChange,popup:this.getMenuElement(),onPopupVisibleChange:this.onVisibleChange,getPopupContainer:u}),n)},t}(c.Component);w.propTypes={minOverlayWidthMatchTrigger:p.default.bool,onVisibleChange:p.default.func,onOverlayClick:p.default.func,prefixCls:p.default.string,children:p.default.any,transitionName:p.default.string,overlayClassName:p.default.string,animation:p.default.any,align:p.default.object,overlayStyle:p.default.object,placement:p.default.string,overlay:p.default.node,trigger:p.default.array,showAction:p.default.array,hideAction:p.default.array,getPopupContainer:p.default.func,visible:p.default.bool,defaultVisible:p.default.bool},w.defaultProps={minOverlayWidthMatchTrigger:!0,prefixCls:"rc-dropdown",trigger:["hover"],showAction:[],hideAction:[],overlayClassName:"",overlayStyle:{},defaultVisible:!1,onVisibleChange:function(){},placement:"bottomLeft"};var _=function(){var e=this;this.onClick=function(t){var n=e.props,r=n.overlay.props;"visible"in n||e.setState({visible:!1}),n.onOverlayClick&&n.onOverlayClick(t),r.onClick&&r.onClick(t)},this.onVisibleChange=function(t){var n=e.props;"visible"in n||e.setState({visible:t}),n.onVisibleChange(t)},this.afterVisibleChange=function(t){if(t&&e.props.minOverlayWidthMatchTrigger){var n=e.getPopupDomNode(),r=m.default.findDOMNode(e);r&&n&&r.offsetWidth>n.offsetWidth&&(n.style.width=r.offsetWidth+"px",e.refs.trigger&&e.refs.trigger._component&&e.refs.trigger._component.alignInstance&&e.refs.trigger._component.alignInstance.forceAlign())}}};t.default=w,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={adjustX:1,adjustY:1},o=[0,0],i=t.placements={topLeft:{points:["bl","tl"],overflow:r,offset:[0,-4],targetOffset:o},topCenter:{points:["bc","tc"],overflow:r,offset:[0,-4],targetOffset:o},topRight:{points:["br","tr"],overflow:r,offset:[0,-4],targetOffset:o},bottomLeft:{points:["tl","bl"],overflow:r,offset:[0,4],targetOffset:o},bottomCenter:{points:["tc","bc"],overflow:r,offset:[0,4],targetOffset:o},bottomRight:{points:["tr","br"],overflow:r,offset:[0,4],targetOffset:o}};t.default=i},function(e,t,n){function r(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return i(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),o(e,t,{leading:r,maxWait:t,trailing:s})}var o=n(430),i=n(79),a="Expected a function";e.exports=r},function(e,t,n){function r(e,t,n){function r(t){var n=g,r=b;return g=b=void 0,T=t,_=e.apply(r,n)}function c(e){return T=e,k=setTimeout(p,t),C?r(e):_}function f(e){var n=e-E,r=e-T,o=t-n;return S?l(o,w-r):o}function d(e){var n=e-E,r=e-T;return void 0===E||n>=t||n<0||S&&r>=w}function p(){var e=i();if(d(e))return h(e);k=setTimeout(p,f(e))}function h(e){return k=void 0,O&&g?r(e):(g=b=void 0,_)}function m(){void 0!==k&&clearTimeout(k),T=0,g=E=b=k=void 0}function v(){return void 0===k?_:h(i())}function y(){var e=i(),n=d(e);if(g=arguments,b=this,E=e,n){if(void 0===k)return c(E);if(S)return k=setTimeout(p,t),r(E)}return void 0===k&&(k=setTimeout(p,t)),_}var g,b,w,_,k,E,T=0,C=!1,S=!1,O=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,o(n)&&(C=!!n.leading,S="maxWait"in n,w=S?u(a(n.maxWait)||0,t):w,O="trailing"in n?!!n.trailing:O),y.cancel=m,y.flush=v,y}var o=n(79),i=n(431),a=n(300),s="Expected a function",u=Math.max,l=Math.min;e.exports=r},function(e,t,n){var r=n(100),o=function(){return r.Date.now()};e.exports=o},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(33),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{avatarSrc:u.PropTypes.string,customClass:u.PropTypes.string}}}]),s(t,[{key:"render",value:function(){var e=this.props.avatarSrc;return l.default.createElement("div",{className:"avatar "+this.props.customClass},l.default.createElement(c.ImageIcon,{customClass:"",defaultImg:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",realImg:e}))}}]),t}(u.Component);t.default=f,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c);n(434);var d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderBodyTpl=n.renderBodyTpl.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{close:u.PropTypes.func.isRequired,label:u.PropTypes.string.isRequired,delete:u.PropTypes.func.isRequired}}}]),s(t,[{key:"renderBodyTpl",value:function(){return l.default.createElement("div",null,l.default.createElement("div",{className:"delete-report-header"},l.default.createElement("span",null,"确认删除",this.props.label,"？")),l.default.createElement("div",{className:"delete-report-body"},l.default.createElement("p",null,"你是企业的管理员，删除后所有协作者都无法访问这个",this.props.label,"。确定删除",this.props.label,"？")),l.default.createElement("div",{className:"delete-report-footer"},l.default.createElement("button",{className:"delete-report-btn delete-report-btn-quit",onClick:this.props.close},"退出"),l.default.createElement("button",{className:"delete-report-btn delete-report-btn-confirm",onClick:this.props.delete},"确认删除")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"delete-report-file-dialog",open:!0,onClose:this.props.close,bodyTpl:this.renderBodyTpl,enableCloseClickMask:!0})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=n(0),c=r(l),f=n(11),d=r(f),p=n(436),h=r(p),m=n(437),v=r(m),y=n(13),g=n(203),b=r(g),w=n(438),_=r(w);n(439);var k=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemClick=n.onMenuItemClick.bind(n),n.onDownloadAppClose=n.onDownloadAppClose.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{currentUser:l.PropTypes.object,onMouseEnter:l.PropTypes.func,onMouseLeave:l.PropTypes.func,closeMenuPopover:l.PropTypes.func}}}]),s(t,[{key:"onMenuItemClick",value:function(e){var t=this,n=this.props.closeMenuPopover,r=e.currentTarget.getAttribute("data-action");if("download"===r&&(this.modalContainer=document.getElementById("downloadapp-modal-container"),this.modalContainer||(this.modalContainer=document.createElement("div"),this.modalContainer.id="downloadapp-modal-container",document.body.appendChild(this.modalContainer)),this.downloadAppModal=(0,u.render)(c.default.createElement(v.default,{onClose:this.onDownloadAppClose}),this.modalContainer)),"invite"===r){var o=this.props.currentUser,i="invite-friends-modal-container";this.infModalContainer=document.getElementById(i),this.infModalContainer||(this.infModalContainer=document.createElement("div"),this.infModalContainer.id=i,document.body.appendChild(this.infModalContainer)),(0,u.render)(c.default.createElement(b.default,{onClose:function(){return(0,u.unmountComponentAtNode)(t.infModalContainer)},currentUser:o}),this.infModalContainer)}"function"==typeof n&&n()}},{key:"renderDividingLine",value:function(){return c.default.createElement("div",{className:"header-menu-dividing"})}},{key:"renderPlainMenuItem",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(0,d.default)({"header-menu-item":!0,"one-line":!0,"enable-click":t}),i=t?this.onMenuItemClick:null;return t&&n?c.default.createElement("a",{className:o,href:n,rel:"external",target:r?"_blank":"",onClick:i},c.default.createElement("span",null,e)):c.default.createElement("div",{className:o,onClick:i},c.default.createElement("span",null,e))}},{key:"renderInviteFriends",value:function(){var e=this.props.currentUser.accountType;return-1===["personal_free","personal_premium"].indexOf(void 0===e?"personal_free":e)?null:c.default.createElement("div",{className:"invite-friends-wrap"},c.default.createElement("div",{className:"header-menu-item enable-click","data-action":"invite",onClick:this.onMenuItemClick},c.default.createElement("span",null,"邀请好友免费获得高级版")),c.default.createElement(_.default,null))}},{key:"onDownloadAppClose",value:function(){(0,u.unmountComponentAtNode)(this.modalContainer)}},{key:"renderDownloadApp",value:function(){return c.default.createElement("div",{className:"header-menu-item enable-click","data-action":"download",onClick:this.onMenuItemClick},c.default.createElement("span",null,"下载石墨文档 App"),c.default.createElement("i",{className:"desktop-sprite download-app-icon"}))}},{key:"renderAccountType",value:function(e){return c.default.createElement("div",{className:"header-menu-item"},c.default.createElement(h.default,{currentUser:this.props.currentUser,onItemClick:this.onMenuItemClick,showUpgrade:e}))}},{key:"renderManageSetting",value:function(){var e=this.props.currentUser,t=e.accountType,n=e.teamRole;return["enterprise_standard","enterprise_dingding","enterprise_expired"].indexOf(t)>-1?this.renderPlainMenuItem("member"===n?"我的企业":"企业管理",!0,"/enterprise",!(0,y.isDingtalkPc)()):null}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.onMouseEnter,r=void 0===n?function(){}:n,o=e.onMouseLeave,i=void 0===o?function(){}:o,a=t.name,s=window.cow||{views:{}},u=s.views,l=u.payment,f=u.invitation,d=u.appStoreLink,p=u.help;return c.default.createElement("div",{className:"header-menu-items",onMouseEnter:r,onMouseLeave:i},this.renderPlainMenuItem(a,!1)," ",this.renderDividingLine(),this.renderAccountType(l)," ",this.renderDividingLine()," ",this.renderPlainMenuItem("帐号设置",!0,"/profile",!1),this.renderManageSetting()," ",f&&d&&p&&this.renderDividingLine(),f&&this.renderInviteFriends(),d&&this.renderDownloadApp()," ",p&&this.renderPlainMenuItem("使用帮助",!0,"https://shimo.im/help",!(0,y.isDingtalkPc)()),(0,y.isDingtalkPc)()?null:this.renderDividingLine(),(0,y.isDingtalkPc)()?null:this.renderPlainMenuItem("退出登录",!0,"/logout",!1))}}]),t}(l.Component);t.default=k,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(4),f=r(c),d=n(7),p=n(13),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={orders:null},n.showEnterPrisePayment=n.showEnterPrisePayment.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{currentUser:u.PropTypes.object,onItemClick:u.PropTypes.func,showUpgrade:u.PropTypes.bool}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this;this.props.currentUser.accountType.match(/^personal_/)||(0,d.ajaxGet)("/orders?type=team").then(function(t){var n=t.data;e.changeOrders(n)})}},{key:"changeOrders",value:function(e){this.setState({orders:e})}},{key:"showEnterPrisePayment",value:function(e,t){var n=this;return function(r){r.preventDefault(),f.default.notify("enterprise-payment-show",{type:e,params:t}),n.props.onItemClick(r)}}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.onItemClick,r=e.showUpgrade,o=t.team,i=t.email,a=t.accountType,s=this.state.orders,u=s&&s[0]&&"offline"===s[0].channel&&!s[0].isPaid,c="",f=null;["enterprise_standard","enterprise_dingding","enterprise_expired"].indexOf(a)>-1?(c=t.isOfficial?"企业版":u?l.default.createElement("a",{href:"#",onClick:this.showEnterPrisePayment("normal",{page:"transfers-inventory",order:s&&s[0]})},"购买企业版"):l.default.createElement("a",{href:"#",onClick:this.showEnterPrisePayment()},"购买企业版"),f=l.default.createElement("span",{className:"enterprise-name"},o&&o.name||"")):"personal_premium"===a?(c="高级版",f=l.default.createElement("span",null,l.default.createElement("a",{href:"/payment?renew",target:"_blank",className:"account-upgrade-btn header-menu-link"},"续费"),l.default.createElement("span",{className:"maybe"},"或"),l.default.createElement("a",{href:"/company/register",target:"_blank",className:"header-menu-link"},"升级到企业版"))):"personal_free"===a&&(c="基础版",f=l.default.createElement("a",{href:"/payment",target:"_blank",onClick:n,className:"account-upgrade-btn header-menu-link"},"升级"));var d=null;return d=i?l.default.createElement("span",{className:"account-email"},i):l.default.createElement("a",{className:"account-email-setting header-menu-link",href:"/profile#setting-email",onClick:n,target:(0,p.isDingtalkPc)()?"_self":"_blank"},"设置您的登录邮箱"),l.default.createElement("div",{className:"account-info"},l.default.createElement("div",{className:"account-type-wrapper"},l.default.createElement("span",{className:"account-type-text"},c),r&&f),d)}}]),t}(u.Component);t.default=h,h.contextTypes={showEnterprisePayment:l.default.PropTypes.func},e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bodyTpl=n.bodyTpl.bind(n),n.onModalClose=n.onModalClose.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func}}}]),s(t,[{key:"bodyTpl",value:function(){return l.default.createElement("div",{className:"download-app-content-wrap"},l.default.createElement("span",{className:"download-app-title"},"扫码下载 石墨文档 App"),l.default.createElement("div",{className:"download-app-url-qrcode"}),l.default.createElement("div",{className:"download-app-actions"},l.default.createElement("a",{href:"https://itunes.apple.com/cn/app/shi-mo-wen-dang-zui-mei-xie/id1013727678?l=en&mt=8",style:{display:"block"},className:"sm-btn sm-btn-primary download-app-btn",target:"_blank"},l.default.createElement("i",{className:"band-icon-sprite ios-band-icon band-icon"}),l.default.createElement("span",{className:"download-btn-text"},"iOS／iPad 下载")),l.default.createElement("a",{href:"https://shimo.im/resources/android_app",style:{display:"block"},className:"sm-btn sm-btn-primary download-app-btn",target:"_blank"},l.default.createElement("i",{className:"band-icon-sprite android-band-icon band-icon"}),l.default.createElement("span",{className:"download-btn-text"},"Android 版下载"))))}},{key:"onModalClose",value:function(){var e=this.props.onClose;"function"==typeof e&&e()}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"download-app-modal",ref:"flatDialog",hasCloseButton:!0,open:!0,enableCloseClickMask:!0,bodyTpl:this.bodyTpl,onClose:this.onModalClose})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(7),d=n(16),p=r(d),h=15,m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={count:0,bonus:0,isBound:!1,isObtained:!0},n.getInviteUser=n.getInviteUser.bind(n),n.bindNotification=n.bindNotification.bind(n),n.rewardWechat=n.rewardWechat.bind(n),n.rewardByInvitor=n.rewardByInvitor.bind(n),n.noRewardWechat=n.noRewardWechat.bind(n),n.reloadSession=n.reloadSession.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.getInviteUser(),this.bindNotification()}},{key:"componentWillUnmount",value:function(){var e=this.listener;p.default.unbind("INVITE_ACTS",e)}},{key:"getInviteUser",value:function(){var e=this;(0,f.ajaxGet)("/smapi/invite/invite_info").then(function(t){if(0===t.code){var n=e.resolveInviteStatus(t.data);e.setState(s({},e.state,n))}}).catch(function(e){console.log(e)})}},{key:"resolveInviteStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.have_rewarded,n=void 0===t?0:t,r=e.not_yet_rewarded,o=void 0===r?0:r,i=e.rewarded_by_self_count,a=void 0===i?0:i,s=e.self_bind,u=void 0!==s&&s,l=e.rewarded_by_self_bind,c=void 0!==l&&l,d=e.is_reward_just;return void 0!==d&&d&&(0,f.ajaxGet)("/relogin").then(function(e){"403"===e.code&&(window.location.href="/login?redirect_url="+encodeURIComponent(window.location.href))}),{count:n+o-a,bonus:o*h,isBound:u,isObtained:c}}},{key:"bindNotification",value:function(){var e=this;e.listener=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name;switch(n){case"wechat_rewarded":e.rewardWechat();break;case"invitor_bind":e.rewardByInvitor();break;case"wechat_no_reward":e.noRewardWechat();break;default:console.error("unexpected notification name ["+n+"] from push #INVITE_ACTS")}e.reloadSession()},p.default.bind("INVITE_ACTS",e.listener)}},{key:"rewardWechat",value:function(){this.setState(s({},this.state,{isBound:!0,isObtained:!0}))}},{key:"rewardByInvitor",value:function(){this.setState(s({},this.state,{count:this.state.count+1,bonus:this.state.bonus+h}))}},{key:"noRewardWechat",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{isBound:!0})})}},{key:"reloadSession",value:function(){(0,f.ajaxGet)("/relogin").then(function(e){"403"===e.code&&(window.location.href="/login?redirect_url="+encodeURIComponent(window.location.href))})}},{key:"render",value:function(){var e=this.state,t=e.isObtained,n=e.bonus;return!t||n?c.default.createElement("span",{className:"bubble"},"可领取"):null}}]),t}(c.default.Component);t.default=m,e.exports=t.default},function(e,t){},function(e,t){},function(e,t,n){var r=n(468),o=n(537),i=n(538),a=n(277),s=n(464),u=n(474),l=Object.prototype,c=l.hasOwnProperty,f=i(function(e,t){if(s(t)||a(t))return void o(t,u(t),e);for(var n in t)c.call(t,n)&&r(e,n,t[n])});e.exports=f},function(e,t,n){(function(e,n){function r(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function i(e){return function(t){return null==t?void 0:t[e]}}function a(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function s(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function u(e){return function(t){return e(t)}}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function d(e,t){return function(n){return e(t(n))}}function p(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function m(){this.__data__=zt?zt(null):{}}function v(e){return this.has(e)&&delete this.__data__[e]}function y(e){var t=this.__data__;if(zt){var n=t[e];return n===Ve?void 0:n}return Dt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return zt?void 0!==t[e]:Dt.call(t,e)}function b(e,t){return this.__data__[e]=zt&&void 0===t?Ve:t,this}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _(){this.__data__=[]}function k(e){var t=this.__data__,n=V(t,e);return!(n<0)&&(n==t.length-1?t.pop():Wt.call(t,n,1),!0)}function E(e){var t=this.__data__,n=V(t,e);return n<0?void 0:t[n][1]}function T(e){return V(this.__data__,e)>-1}function C(e,t){var n=this.__data__,r=V(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(){this.__data__={hash:new h,map:new(Ht||w),string:new h}}function x(e){return ce(this,e).delete(e)}function P(e){return ce(this,e).get(e)}function j(e){return ce(this,e).has(e)}function N(e,t){return ce(this,e).set(e,t),this}function M(e){var t=-1,n=e?e.length:0;for(this.__data__=new S;++t<n;)this.add(e[t])}function A(e){return this.__data__.set(e,Ve),this}function I(e){return this.__data__.has(e)}function D(e){this.__data__=new w(e)}function L(){this.__data__=new w}function R(e){return this.__data__.delete(e)}function U(e){return this.__data__.get(e)}function F(e){return this.__data__.has(e)}function B(e,t){var n=this.__data__;if(n instanceof w){var r=n.__data__;if(!Ht||r.length<Be-1)return r.push([e,t]),this;n=this.__data__=new S(r)}return n.set(e,t),this}function W(e,t){var n=un(e)||Se(e)?s(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!Dt.call(e,i)||o&&("length"==i||he(i,r))||n.push(i);return n}function V(e,t){for(var n=e.length;n--;)if(Ce(e[n][0],t))return n;return-1}function q(e,t){return e&&on(e,t,Re)}function H(e,t){t=me(t,e)?[t]:oe(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[_e(t[n++])];return n&&n==r?e:void 0}function $(e){return Lt.call(e)}function Y(e,t){return null!=e&&t in Object(e)}function K(e,t,n,r,o){return e===t||(null==e||null==t||!Ne(e)&&!Me(t)?e!==e&&t!==t:z(e,t,K,n,r,o))}function z(e,t,n,r,o,i){var a=un(e),s=un(t),u=ze,l=ze;a||(u=an(e),u=u==Ke?nt:u),s||(l=an(t),l=l==Ke?nt:l);var f=u==nt&&!c(e),d=l==nt&&!c(t),p=u==l;if(p&&!f)return i||(i=new D),a||ln(e)?se(e,t,n,r,o,i):ue(e,t,u,n,r,o,i);if(!(o&He)){var h=f&&Dt.call(e,"__wrapped__"),m=d&&Dt.call(t,"__wrapped__");if(h||m){var v=h?e.value():e,y=m?t.value():t;return i||(i=new D),n(v,y,r,o,i)}}return!!p&&(i||(i=new D),le(e,t,n,r,o,i))}function G(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){s=n[o];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var f=new D;if(r)var d=r(l,c,u,e,t,f);if(!(void 0===d?K(c,l,r,qe|He,f):d))return!1}}return!0}function X(e){return!(!Ne(e)||ye(e))&&(Pe(e)||c(e)?Rt:yt).test(ke(e))}function J(e){return Me(e)&&je(e.length)&&!!bt[Lt.call(e)]}function Q(e){return"function"==typeof e?e:null==e?Ue:"object"==typeof e?un(e)?te(e[0],e[1]):ee(e):Fe(e)}function Z(e){if(!ge(e))return Vt(e);var t=[];for(var n in Object(e))Dt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ee(e){var t=fe(e);return 1==t.length&&t[0][2]?we(t[0][0],t[0][1]):function(n){return n===e||G(n,e,t)}}function te(e,t){return me(e)&&be(t)?we(_e(e),t):function(n){var r=De(n,e);return void 0===r&&r===t?Le(n,e):K(t,r,void 0,qe|He)}}function ne(e){return function(t){return H(t,e)}}function re(e){if("string"==typeof e)return e;if(Ae(e))return nn?nn.call(e):"";var t=e+"";return"0"==t&&1/e==-$e?"-0":t}function oe(e){return un(e)?e:sn(e)}function ie(e,t){return function(n,r){if(null==n)return n;if(!Oe(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function ae(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===n(i[u],u,i))break}return t}}function se(e,t,n,r,i,a){var s=i&He,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var f=-1,d=!0,p=i&qe?new M:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var h=e[f],m=t[f];if(r)var v=s?r(m,h,f,t,e,a):r(h,m,f,e,t,a);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!o(t,function(e,t){if(!p.has(t)&&(h===e||n(h,e,r,i,a)))return p.add(t)})){d=!1;break}}else if(h!==m&&!n(h,m,r,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ue(e,t,n,r,o,i,a){switch(n){case ct:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lt:return!(e.byteLength!=t.byteLength||!r(new Ft(e),new Ft(t)));case Ge:case Xe:case tt:return Ce(+e,+t);case Je:return e.name==t.name&&e.message==t.message;case ot:case at:return e==t+"";case et:var s=f;case it:var u=i&He;if(s||(s=p),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;i|=qe,a.set(e,t);var c=se(s(e),s(t),r,o,i,a);return a.delete(e),c;case st:if(tn)return tn.call(e)==tn.call(t)}return!1}function le(e,t,n,r,o,i){var a=o&He,s=Re(e),u=s.length;if(u!=Re(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:Dt.call(t,c)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var d=!0;i.set(e,t),i.set(t,e);for(var p=a;++l<u;){c=s[l];var h=e[c],m=t[c];if(r)var v=a?r(m,h,c,t,e,i):r(h,m,c,e,t,i);if(!(void 0===v?h===m||n(h,m,r,o,i):v)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=e.constructor,g=t.constructor;y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(d=!1)}return i.delete(e),i.delete(t),d}function ce(e,t){var n=e.__data__;return ve(t)?n["string"==typeof t?"string":"hash"]:n.map}function fe(e){for(var t=Re(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,be(o)]}return t}function de(e,t){var n=l(e,t);return X(n)?n:void 0}function pe(e,t,n){t=me(t,e)?[t]:oe(t);for(var r,o=-1,i=t.length;++o<i;){var a=_e(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;var i=e?e.length:0;return!!i&&je(i)&&he(a,i)&&(un(e)||Se(e))}function he(e,t){return!!(t=null==t?Ye:t)&&("number"==typeof e||gt.test(e))&&e>-1&&e%1==0&&e<t}function me(e,t){if(un(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ae(e))||(dt.test(e)||!ft.test(e)||null!=t&&e in Object(t))}function ve(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ye(e){return!!At&&At in e}function ge(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Nt)}function be(e){return e===e&&!Ne(e)}function we(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function _e(e){if("string"==typeof e||Ae(e))return e;var t=e+"";return"0"==t&&1/e==-$e?"-0":t}function ke(e){if(null!=e){try{return It.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ee(e,t,n){var o=un(e)?r:a,i=arguments.length<3;return o(e,Q(t,4),n,i,rn)}function Te(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(We);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(Te.Cache||S),n}function Ce(e,t){return e===t||e!==e&&t!==t}function Se(e){return xe(e)&&Dt.call(e,"callee")&&(!Bt.call(e,"callee")||Lt.call(e)==Ke)}function Oe(e){return null!=e&&je(e.length)&&!Pe(e)}function xe(e){return Me(e)&&Oe(e)}function Pe(e){var t=Ne(e)?Lt.call(e):"";return t==Qe||t==Ze}function je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ye}function Ne(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Me(e){return!!e&&"object"==typeof e}function Ae(e){return"symbol"==typeof e||Me(e)&&Lt.call(e)==st}function Ie(e){return null==e?"":re(e)}function De(e,t,n){var r=null==e?void 0:H(e,t);return void 0===r?n:r}function Le(e,t){return null!=e&&pe(e,t,Y)}function Re(e){return Oe(e)?W(e):Z(e)}function Ue(e){return e}function Fe(e){return me(e)?i(_e(e)):ne(e)}var Be=200,We="Expected a function",Ve="__lodash_hash_undefined__",qe=1,He=2,$e=1/0,Ye=9007199254740991,Ke="[object Arguments]",ze="[object Array]",Ge="[object Boolean]",Xe="[object Date]",Je="[object Error]",Qe="[object Function]",Ze="[object GeneratorFunction]",et="[object Map]",tt="[object Number]",nt="[object Object]",rt="[object Promise]",ot="[object RegExp]",it="[object Set]",at="[object String]",st="[object Symbol]",ut="[object WeakMap]",lt="[object ArrayBuffer]",ct="[object DataView]",ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dt=/^\w*$/,pt=/^\./,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mt=/[\\^$.*+?()[\]{}|]/g,vt=/\\(\\)?/g,yt=/^\[object .+?Constructor\]$/,gt=/^(?:0|[1-9]\d*)$/,bt={};bt["[object Float32Array]"]=bt["[object Float64Array]"]=bt["[object Int8Array]"]=bt["[object Int16Array]"]=bt["[object Int32Array]"]=bt["[object Uint8Array]"]=bt["[object Uint8ClampedArray]"]=bt["[object Uint16Array]"]=bt["[object Uint32Array]"]=!0,bt[Ke]=bt[ze]=bt[lt]=bt[Ge]=bt[ct]=bt[Xe]=bt[Je]=bt[Qe]=bt[et]=bt[tt]=bt[nt]=bt[ot]=bt[it]=bt[at]=bt[ut]=!1;var wt="object"==typeof e&&e&&e.Object===Object&&e,_t="object"==typeof self&&self&&self.Object===Object&&self,kt=wt||_t||Function("return this")(),Et="object"==typeof t&&t&&!t.nodeType&&t,Tt=Et&&"object"==typeof n&&n&&!n.nodeType&&n,Ct=Tt&&Tt.exports===Et,St=Ct&&wt.process,Ot=function(){try{return St&&St.binding("util")}catch(e){}}(),xt=Ot&&Ot.isTypedArray,Pt=Array.prototype,jt=Function.prototype,Nt=Object.prototype,Mt=kt["__core-js_shared__"],At=function(){var e=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),It=jt.toString,Dt=Nt.hasOwnProperty,Lt=Nt.toString,Rt=RegExp("^"+It.call(Dt).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=kt.Symbol,Ft=kt.Uint8Array,Bt=Nt.propertyIsEnumerable,Wt=Pt.splice,Vt=d(Object.keys,Object),qt=de(kt,"DataView"),Ht=de(kt,"Map"),$t=de(kt,"Promise"),Yt=de(kt,"Set"),Kt=de(kt,"WeakMap"),zt=de(Object,"create"),Gt=ke(qt),Xt=ke(Ht),Jt=ke($t),Qt=ke(Yt),Zt=ke(Kt),en=Ut?Ut.prototype:void 0,tn=en?en.valueOf:void 0,nn=en?en.toString:void 0;h.prototype.clear=m,h.prototype.delete=v,h.prototype.get=y,h.prototype.has=g,h.prototype.set=b,w.prototype.clear=_,w.prototype.delete=k,w.prototype.get=E,w.prototype.has=T,w.prototype.set=C,S.prototype.clear=O,S.prototype.delete=x,S.prototype.get=P,S.prototype.has=j,S.prototype.set=N,M.prototype.add=M.prototype.push=A,M.prototype.has=I,D.prototype.clear=L,D.prototype.delete=R,D.prototype.get=U,D.prototype.has=F,D.prototype.set=B;var rn=ie(q),on=ae(),an=$;(qt&&an(new qt(new ArrayBuffer(1)))!=ct||Ht&&an(new Ht)!=et||$t&&an($t.resolve())!=rt||Yt&&an(new Yt)!=it||Kt&&an(new Kt)!=ut)&&(an=function(e){var t=Lt.call(e),n=t==nt?e.constructor:void 0,r=n?ke(n):void 0;if(r)switch(r){case Gt:return ct;case Xt:return et;case Jt:return rt;case Qt:return it;case Zt:return ut}return t});var sn=Te(function(e){e=Ie(e);var t=[];return pt.test(e)&&t.push(""),e.replace(ht,function(e,n,r,o){t.push(r?o.replace(vt,"$1"):n||e)}),t});Te.Cache=S;var un=Array.isArray,ln=xt?u(xt):J;n.exports=Ee}).call(t,n(25),n(44)(e))},function(e,t,n){(function(e,n){function r(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function i(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function s(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function u(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function d(e,t){return function(n){return e(t(n))}}function p(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function m(){this.__data__=Rt?Rt(null):{}}function v(e){return this.has(e)&&delete this.__data__[e]}function y(e){var t=this.__data__;if(Rt){var n=t[e];return n===Pe?void 0:n}return bt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Rt?void 0!==t[e]:bt.call(t,e)}function b(e,t){return this.__data__[e]=Rt&&void 0===t?Pe:t,this}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _(){this.__data__=[]}function k(e){var t=this.__data__,n=B(t,e);return!(n<0)&&(n==t.length-1?t.pop():xt.call(t,n,1),!0)}function E(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]}function T(e){return B(this.__data__,e)>-1}function C(e,t){var n=this.__data__,r=B(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(){this.__data__={hash:new h,map:new(At||w),string:new h}}function x(e){return ae(this,e).delete(e)}function P(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function N(e,t){return ae(this,e).set(e,t),this}function M(e){this.__data__=new w(e)}function A(){this.__data__=new w}function I(e){return this.__data__.delete(e)}function D(e){return this.__data__.get(e)}function L(e){return this.__data__.has(e)}function R(e,t){var n=this.__data__;if(n instanceof w){var r=n.__data__;if(!At||r.length<xe-1)return r.push([e,t]),this;n=this.__data__=new S(r)}return n.set(e,t),this}function U(e,t){var n=Kt(e)||ge(e)?u(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!bt.call(e,i)||o&&("length"==i||fe(i,r))||n.push(i);return n}function F(e,t,n){var r=e[t];bt.call(e,t)&&ye(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function B(e,t){for(var n=e.length;n--;)if(ye(e[n][0],t))return n;return-1}function W(e,t){return e&&re(t,Ce(t),e)}function V(e,t,n,r,o,a,s){var u;if(r&&(u=a?r(e,o,a,s):r(e)),void 0!==u)return u;if(!Ee(e))return e;var l=Kt(e);if(l){if(u=ue(e),!t)return ne(e,u)}else{var f=Yt(e),d=f==Ie||f==De;if(zt(e))return z(e,t);if(f==Ue||f==Ne||d&&!a){if(c(e))return a?e:{};if(u=le(d?{}:e),!t)return oe(e,W(u,e))}else{if(!at[f])return a?e:{};u=ce(e,f,V,t)}}s||(s=new M);var p=s.get(e);if(p)return p;if(s.set(e,u),!l)var h=n?ie(e):Ce(e);return i(h||e,function(o,i){h&&(i=o,o=e[i]),F(u,i,V(o,t,n,r,i,e,s))}),u}function q(e){return Ee(e)?St(e):{}}function H(e,t,n){var r=t(e);return Kt(e)?r:a(r,n(e))}function $(e){return wt.call(e)}function Y(e){return!(!Ee(e)||pe(e))&&(_e(e)||c(e)?_t:ot).test(me(e))}function K(e){if(!he(e))return Nt(e);var t=[];for(var n in Object(e))bt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function z(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function G(e){var t=new e.constructor(e.byteLength);return new Tt(t).set(new Tt(e)),t}function X(e,t){var n=t?G(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function J(e,t,n){return s(t?n(f(e),!0):f(e),r,new e.constructor)}function Q(e){var t=new e.constructor(e.source,rt.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,n){return s(t?n(p(e),!0):p(e),o,new e.constructor)}function ee(e){return Ht?Object(Ht.call(e)):{}}function te(e,t){var n=t?G(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function re(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;F(n,a,void 0===s?e[a]:s)}return n}function oe(e,t){return re(e,$t(e),t)}function ie(e){return H(e,Ce,$t)}function ae(e,t){var n=e.__data__;return de(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=l(e,t);return Y(n)?n:void 0}function ue(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&bt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function le(e){return"function"!=typeof e.constructor||he(e)?{}:q(Ct(e))}function ce(e,t,n,r){var o=e.constructor;switch(t){case $e:return G(e);case Me:case Ae:return new o(+e);case Ye:return X(e,r);case Ke:case ze:case Ge:case Xe:case Je:case Qe:case Ze:case et:case tt:return te(e,r);case Le:return J(e,r,n);case Re:case Ve:return new o(e);case Be:return Q(e);case We:return Z(e,r,n);case qe:return ee(e)}}function fe(e,t){return!!(t=null==t?je:t)&&("number"==typeof e||it.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!yt&&yt in e}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||mt)}function me(e){if(null!=e){try{return gt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ve(e){return V(e,!0,!0)}function ye(e,t){return e===t||e!==e&&t!==t}function ge(e){return we(e)&&bt.call(e,"callee")&&(!Ot.call(e,"callee")||wt.call(e)==Ne)}function be(e){return null!=e&&ke(e.length)&&!_e(e)}function we(e){return Te(e)&&be(e)}function _e(e){var t=Ee(e)?wt.call(e):"";return t==Ie||t==De}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function Ee(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Te(e){return!!e&&"object"==typeof e}function Ce(e){return be(e)?U(e):K(e)}function Se(){return[]}function Oe(){return!1}var xe=200,Pe="__lodash_hash_undefined__",je=9007199254740991,Ne="[object Arguments]",Me="[object Boolean]",Ae="[object Date]",Ie="[object Function]",De="[object GeneratorFunction]",Le="[object Map]",Re="[object Number]",Ue="[object Object]",Fe="[object Promise]",Be="[object RegExp]",We="[object Set]",Ve="[object String]",qe="[object Symbol]",He="[object WeakMap]",$e="[object ArrayBuffer]",Ye="[object DataView]",Ke="[object Float32Array]",ze="[object Float64Array]",Ge="[object Int8Array]",Xe="[object Int16Array]",Je="[object Int32Array]",Qe="[object Uint8Array]",Ze="[object Uint8ClampedArray]",et="[object Uint16Array]",tt="[object Uint32Array]",nt=/[\\^$.*+?()[\]{}|]/g,rt=/\w*$/,ot=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,at={};at[Ne]=at["[object Array]"]=at[$e]=at[Ye]=at[Me]=at[Ae]=at[Ke]=at[ze]=at[Ge]=at[Xe]=at[Je]=at[Le]=at[Re]=at[Ue]=at[Be]=at[We]=at[Ve]=at[qe]=at[Qe]=at[Ze]=at[et]=at[tt]=!0,at["[object Error]"]=at[Ie]=at[He]=!1;var st="object"==typeof e&&e&&e.Object===Object&&e,ut="object"==typeof self&&self&&self.Object===Object&&self,lt=st||ut||Function("return this")(),ct="object"==typeof t&&t&&!t.nodeType&&t,ft=ct&&"object"==typeof n&&n&&!n.nodeType&&n,dt=ft&&ft.exports===ct,pt=Array.prototype,ht=Function.prototype,mt=Object.prototype,vt=lt["__core-js_shared__"],yt=function(){var e=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),gt=ht.toString,bt=mt.hasOwnProperty,wt=mt.toString,_t=RegExp("^"+gt.call(bt).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=dt?lt.Buffer:void 0,Et=lt.Symbol,Tt=lt.Uint8Array,Ct=d(Object.getPrototypeOf,Object),St=Object.create,Ot=mt.propertyIsEnumerable,xt=pt.splice,Pt=Object.getOwnPropertySymbols,jt=kt?kt.isBuffer:void 0,Nt=d(Object.keys,Object),Mt=se(lt,"DataView"),At=se(lt,"Map"),It=se(lt,"Promise"),Dt=se(lt,"Set"),Lt=se(lt,"WeakMap"),Rt=se(Object,"create"),Ut=me(Mt),Ft=me(At),Bt=me(It),Wt=me(Dt),Vt=me(Lt),qt=Et?Et.prototype:void 0,Ht=qt?qt.valueOf:void 0;h.prototype.clear=m,h.prototype.delete=v,h.prototype.get=y,h.prototype.has=g,h.prototype.set=b,w.prototype.clear=_,w.prototype.delete=k,w.prototype.get=E,w.prototype.has=T,w.prototype.set=C,S.prototype.clear=O,S.prototype.delete=x,S.prototype.get=P,S.prototype.has=j,S.prototype.set=N,M.prototype.clear=A,M.prototype.delete=I,M.prototype.get=D,M.prototype.has=L,M.prototype.set=R;var $t=Pt?d(Pt,Object):Se,Yt=$;(Mt&&Yt(new Mt(new ArrayBuffer(1)))!=Ye||At&&Yt(new At)!=Le||It&&Yt(It.resolve())!=Fe||Dt&&Yt(new Dt)!=We||Lt&&Yt(new Lt)!=He)&&(Yt=function(e){var t=wt.call(e),n=t==Ue?e.constructor:void 0,r=n?me(n):void 0;if(r)switch(r){case Ut:return Ye;case Ft:return Le;case Bt:return Fe;case Wt:return We;case Vt:return He}return t});var Kt=Array.isArray,zt=jt||Oe;n.exports=ve}).call(t,n(25),n(44)(e))},function(e,t){function n(e,t,n){if(e==t)return e?[[v,e]]:[];(n<0||e.length<n)&&(n=null);var o=a(e,t),i=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=s(e,t);var u=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var c=r(e,t);return i&&c.unshift([v,i]),u&&c.push([v,u]),l(c),null!=n&&(c=f(c,n)),c=d(c)}function r(e,t){var r;if(!e)return[[m,t]];if(!t)return[[h,e]];var i=e.length>t.length?e:t,a=e.length>t.length?t:e,s=i.indexOf(a);if(-1!=s)return r=[[m,i.substring(0,s)],[v,a],[m,i.substring(s+a.length)]],e.length>t.length&&(r[0][0]=r[2][0]=h),r;if(1==a.length)return[[h,e],[m,t]];var l=u(e,t);if(l){var c=l[0],f=l[1],d=l[2],p=l[3],y=l[4],g=n(c,d),b=n(f,p);return g.concat([[v,y]],b)}return o(e,t)}function o(e,t){for(var n=e.length,r=t.length,o=Math.ceil((n+r)/2),a=o,s=2*o,u=new Array(s),l=new Array(s),c=0;c<s;c++)u[c]=-1,l[c]=-1;u[a+1]=0,l[a+1]=0;for(var f=n-r,d=f%2!=0,p=0,v=0,y=0,g=0,b=0;b<o;b++){for(var w=-b+p;w<=b-v;w+=2){var _,k=a+w;_=w==-b||w!=b&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1;for(var E=_-w;_<n&&E<r&&e.charAt(_)==t.charAt(E);)_++,E++;if(u[k]=_,_>n)v+=2;else if(E>r)p+=2;else if(d){var T=a+f-w;if(T>=0&&T<s&&-1!=l[T]){var C=n-l[T];if(_>=C)return i(e,t,_,E)}}}for(var S=-b+y;S<=b-g;S+=2){var C,T=a+S;C=S==-b||S!=b&&l[T-1]<l[T+1]?l[T+1]:l[T-1]+1;for(var O=C-S;C<n&&O<r&&e.charAt(n-C-1)==t.charAt(r-O-1);)C++,O++;if(l[T]=C,C>n)g+=2;else if(O>r)y+=2;else if(!d){var k=a+f-S;if(k>=0&&k<s&&-1!=u[k]){var _=u[k],E=a+_-k;if(C=n-C,_>=C)return i(e,t,_,E)}}}}return[[h,e],[m,t]]}function i(e,t,r,o){var i=e.substring(0,r),a=t.substring(0,o),s=e.substring(r),u=t.substring(o),l=n(i,a),c=n(s,u);return l.concat(c)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o}function s(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o}function u(e,t){function n(e,t,n){for(var r,o,i,u,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,f="";-1!=(c=t.indexOf(l,c+1));){var d=a(e.substring(n),t.substring(c)),p=s(e.substring(0,n),t.substring(0,c));f.length<p+d&&(f=t.substring(c-p,c)+t.substring(c,c+d),r=e.substring(0,n-p),o=e.substring(n+d),i=t.substring(0,c-p),u=t.substring(c+d))}return 2*f.length>=e.length?[r,o,i,u,f]:null}var r=e.length>t.length?e:t,o=e.length>t.length?t:e;if(r.length<4||2*o.length<r.length)return null;var i,u=n(r,o,Math.ceil(r.length/4)),l=n(r,o,Math.ceil(r.length/2));if(!u&&!l)return null;i=l?u&&u[4].length>l[4].length?u:l:u;var c,f,d,p;return e.length>t.length?(c=i[0],f=i[1],d=i[2],p=i[3]):(d=i[0],p=i[1],c=i[2],f=i[3]),[c,f,d,p,i[4]]}function l(e){e.push([v,""]);for(var t,n=0,r=0,o=0,i="",u="";n<e.length;)switch(e[n][0]){case m:o++,u+=e[n][1],n++;break;case h:r++,i+=e[n][1],n++;break;case v:r+o>1?(0!==r&&0!==o&&(t=a(u,i),0!==t&&(n-r-o>0&&e[n-r-o-1][0]==v?e[n-r-o-1][1]+=u.substring(0,t):(e.splice(0,0,[v,u.substring(0,t)]),n++),u=u.substring(t),i=i.substring(t)),0!==(t=s(u,i))&&(e[n][1]=u.substring(u.length-t)+e[n][1],u=u.substring(0,u.length-t),i=i.substring(0,i.length-t))),0===r?e.splice(n-o,r+o,[m,u]):0===o?e.splice(n-r,r+o,[h,i]):e.splice(n-r-o,r+o,[h,i],[m,u]),n=n-r-o+(r?1:0)+(o?1:0)+1):0!==n&&e[n-1][0]==v?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,r=0,i="",u=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(n=1;n<e.length-1;)e[n-1][0]==v&&e[n+1][0]==v&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),c=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),c=!0)),n++;c&&l(e)}function c(e,t){if(0===t)return[v,e];for(var n=0,r=0;r<e.length;r++){var o=e[r];if(o[0]===h||o[0]===v){var i=n+o[1].length;if(t===i)return[r+1,e];if(t<i){e=e.slice();var a=t-n,s=[o[0],o[1].slice(0,a)],u=[o[0],o[1].slice(a)];return e.splice(r,1,s,u),[r+1,e]}n=i}}throw new Error("cursor_pos is out of bounds!")}function f(e,t){var n=c(e,t),r=n[1],o=n[0],i=r[o],a=r[o+1];if(null==i)return e;if(i[0]!==v)return e;if(null!=a&&i[1]+a[1]===a[1]+i[1])return r.splice(o,2,a,i),p(r,o,2);if(null!=a&&0===a[1].indexOf(i[1])){r.splice(o,2,[a[0],i[1]],[0,i[1]]);var s=a[1].slice(i[1].length);return s.length>0&&r.splice(o+2,0,[a[0],s]),p(r,o,3)}return e}function d(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},r=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},o=2;o<e.length;o+=1)e[o-2][0]===v&&r(e[o-2][1])&&e[o-1][0]===h&&n(e[o-1][1])&&e[o][0]===m&&n(e[o][1])&&(t=!0,e[o-1][1]=e[o-2][1].slice(-1)+e[o-1][1],e[o][1]=e[o-2][1].slice(-1)+e[o][1],e[o-2][1]=e[o-2][1].slice(0,-1));if(!t)return e;for(var i=[],o=0;o<e.length;o+=1)e[o][1].length>0&&i.push(e[o]);return i}function p(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var o=e[r],i=e[r+1];o[0]===i[1]&&e.splice(r,2,[o[0],o[1]+i[1]])}return e}var h=-1,m=1,v=0,y=n;y.INSERT=m,y.DELETE=h,y.EQUAL=v,e.exports=y},function(e,t,n){(function(t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function o(e,t){return!!(e?e.length:0)&&a(e,t,0)>-1}function i(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function a(e,t,n){if(t!==t)return i(e,s,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function s(e){return e!==e}function u(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==H||(e[n]=H,i[o++]=n)}return i}function d(e){return D(e)?Ne(e):{}}function p(e){return!(!D(e)||j(e))&&(I(e)||c(e)?je:ve).test(M(e))}function h(e,t){return t=Me(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Me(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=a,n(e,this,s)}}function m(e,t,n,r){for(var o=-1,i=e.length,a=n.length,s=-1,u=t.length,l=Me(i-a,0),c=Array(u+l),f=!r;++s<u;)c[s]=t[s];for(;++o<a;)(f||o<i)&&(c[n[o]]=e[o]);for(;l--;)c[s++]=e[o++];return c}function v(e,t,n,r){for(var o=-1,i=e.length,a=-1,s=n.length,u=-1,l=t.length,c=Me(i-s,0),f=Array(c+l),d=!r;++o<c;)f[o]=e[o];for(var p=o;++u<l;)f[p+u]=t[u];for(;++a<s;)(d||o<i)&&(f[p+n[a]]=e[o++]);return f}function y(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function g(e,t,n){function r(){return(this&&this!==ke&&this instanceof r?i:e).apply(o?n:this,arguments)}var o=t&$,i=b(e);return r}function b(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=d(e.prototype),r=e.apply(n,t);return D(r)?r:n}}function w(e,t,r){function o(){for(var a=arguments.length,s=Array(a),u=a,l=C(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:f(s,l);return(a-=c.length)<r?E(e,t,_,o.placeholder,void 0,s,c,void 0,void 0,r-a):n(this&&this!==ke&&this instanceof o?i:e,this,s)}var i=b(e);return o}function _(e,t,n,r,o,i,a,s,l,c){function d(){for(var T=arguments.length,S=Array(T),O=T;O--;)S[O]=arguments[O];if(g)var x=C(d),P=u(S,x);if(r&&(S=m(S,r,o,g)),i&&(S=v(S,i,a,g)),T-=P,g&&T<c){var j=f(S,x);return E(e,t,_,d.placeholder,n,S,j,s,l,c-T)}var M=h?n:this,A=y?M[e]:e;return T=S.length,s?S=N(S,s):w&&T>1&&S.reverse(),p&&l<T&&(S.length=l),this&&this!==ke&&this instanceof d&&(A=k||b(A)),A.apply(M,S)}var p=t&Q,h=t&$,y=t&Y,g=t&(z|G),w=t&ee,k=y?void 0:b(e);return d}function k(e,t,r,o){function i(){for(var t=-1,u=arguments.length,l=-1,c=o.length,f=Array(c+u),d=this&&this!==ke&&this instanceof i?s:e;++l<c;)f[l]=o[l];for(;u--;)f[l++]=arguments[++t];return n(d,a?r:this,f)}var a=t&$,s=b(e);return i}function E(e,t,n,r,o,i,a,s,u,l){var c=t&z,f=c?a:void 0,d=c?void 0:a,p=c?i:void 0,h=c?void 0:i;t|=c?X:J,(t&=~(c?J:X))&K||(t&=~($|Y));var m=n(e,t,o,p,f,h,d,s,u,l);return m.placeholder=r,De(m,e,t)}function T(e,t,n,r,o,i,a,s){var u=t&Y;if(!u&&"function"!=typeof e)throw new TypeError(q);var l=r?r.length:0;if(l||(t&=~(X|J),r=o=void 0),a=void 0===a?a:Me(F(a),0),s=void 0===s?s:F(s),l-=o?o.length:0,t&J){var c=r,f=o;r=o=void 0}var d=[e,t,n,r,o,c,f,i,a,s];if(e=d[0],t=d[1],n=d[2],r=d[3],o=d[4],s=d[9]=null==d[9]?u?0:e.length:Me(d[9]-l,0),!s&&t&(z|G)&&(t&=~(z|G)),t&&t!=$)p=t==z||t==G?w(e,t,s):t!=X&&t!=($|X)||o.length?_.apply(void 0,d):k(e,t,n,r);else var p=g(e,t,n);return De(p,e,t)}function C(e){return e.placeholder}function S(e,t){var n=l(e,t);return p(n)?n:void 0}function O(e){var t=e.match(de);return t?t[1].split(pe):[]}function x(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(fe,"{\n/* [wrapped with "+t+"] */\n")}function P(e,t){return!!(t=null==t?ne:t)&&("number"==typeof e||ge.test(e))&&e>-1&&e%1==0&&e<t}function j(e){return!!Se&&Se in e}function N(e,t){for(var n=e.length,r=Ae(t.length,n),o=y(e);r--;){var i=t[r];e[r]=P(i,n)?o[i]:void 0}return e}function M(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function A(e,t){return r(ie,function(n){var r="_."+n[0];t&n[1]&&!o(e,r)&&e.push(r)}),e.sort()}function I(e){var t=D(e)?Pe.call(e):"";return t==ae||t==se}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){return!!e&&"object"==typeof e}function R(e){return"symbol"==typeof e||L(e)&&Pe.call(e)==ue}function U(e){if(!e)return 0===e?e:0;if((e=B(e))===te||e===-te){return(e<0?-1:1)*re}return e===e?e:0}function F(e){var t=U(e),n=t%1;return t===t?n?t-n:t:0}function B(e){if("number"==typeof e)return e;if(R(e))return oe;if(D(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=D(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ce,"");var n=me.test(e);return n||ye.test(e)?be(e.slice(2),n?2:8):he.test(e)?oe:+e}function W(e){return function(){return e}}function V(e){return e}var q="Expected a function",H="__lodash_placeholder__",$=1,Y=2,K=4,z=8,G=16,X=32,J=64,Q=128,Z=256,ee=512,te=1/0,ne=9007199254740991,re=1.7976931348623157e308,oe=NaN,ie=[["ary",Q],["bind",$],["bindKey",Y],["curry",z],["curryRight",G],["flip",ee],["partial",X],["partialRight",J],["rearg",Z]],ae="[object Function]",se="[object GeneratorFunction]",ue="[object Symbol]",le=/[\\^$.*+?()[\]{}|]/g,ce=/^\s+|\s+$/g,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,de=/\{\n\/\* \[wrapped with (.+)\] \*/,pe=/,? & /,he=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,be=parseInt,we="object"==typeof t&&t&&t.Object===Object&&t,_e="object"==typeof self&&self&&self.Object===Object&&self,ke=we||_e||Function("return this")(),Ee=Function.prototype,Te=Object.prototype,Ce=ke["__core-js_shared__"],Se=function(){var e=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Oe=Ee.toString,xe=Te.hasOwnProperty,Pe=Te.toString,je=RegExp("^"+Oe.call(xe).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=Object.create,Me=Math.max,Ae=Math.min,Ie=function(){var e=S(Object,"defineProperty"),t=S.name;return t&&t.length>2?e:void 0}(),De=Ie?function(e,t,n){var r=t+"";return Ie(e,"toString",{configurable:!0,enumerable:!1,value:W(x(r,A(O(r),n)))})}:V,Le=h(function(e,t,n){var r=$;if(n.length){var o=f(n,C(Le));r|=X}return T(e,r,t,n,o)});Le.placeholder={},e.exports=Le}).call(t,n(25))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(109),c=n(108),f=n(78),d=n(447),p=function(e){function t(e){var n,i;return r(this,t),i=n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o(n,i)}return i(t,e),s(t,[{key:"freeze",value:function(){f.freeze(this.data),f.freeze(this.data.rows),f.freeze(this.data.cols)}},{key:"name",value:function(){return"TableOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return{table:this.data}}},{key:"skipDiff",value:function(){return!0}},{key:"_genericSet",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_genericSet",this).call(this,e),r=n.changed,o=n.op;if("object"==typeof o.data){if(o.data.rows||(o.data.rows=new c),o.data.cols||(o.data.cols=new c),o.data.cells||(o.data.cells={}),"function"!=typeof o.data.cells.name&&(o.data.cells=new d({action:o.action,cells:o.data.cells})),"function"!=typeof o.data.rows.pack)throw new Error("rows should be a Delta");if("function"!=typeof o.data.cols.pack)throw new Error("cols should be a Delta");"retain"===o.action&&o.data.rows.isEmpty()&&o.data.cols.isEmpty()&&!Object.keys(o.data.cells).length&&(o.data=1)}if("insert"===o.action){if(!o.data.rows.isDocument())throw new Error("rows should be a document");if(!o.data.cols.isDocument())throw new Error("cols should be a document")}return{changed:r,op:o}}},{key:"pack",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pack",this).call(this);if("object"==typeof e[1]){var n=e[1],r=n.cells,o=n.rows,i=n.cols;if(e[1]=[r.pack()],o.isEmpty()&&i.isEmpty())return e;i.isEmpty()?e[1].push(o.pack()):(e[1].push(o.isEmpty()?0:o.pack()),e[1].push(i.pack()))}return e}},{key:"compose",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"compose",this).call(this,e);if("number"==typeof this.data||"number"==typeof e.data)return n;var r={rows:n.data.rows.compose(e.data.rows),cols:n.data.cols.compose(e.data.cols)},o=new d({cells:n.data.cells,action:n.action});return o.composeWithMutations(e.data),e.data.cells.forEach(function(t){var n=o.get(t),r=e.data.cells.get(t);o.set(t,n.compose(r))}),r.cells=o,n.set({data:r})}},{key:"invert",value:function(e){var n=this,r=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invert",this).call(this,e);if("number"==typeof this.data||"number"==typeof e.data)return r;var o={rows:this.data.rows.invert(e.data.rows),cols:this.data.cols.invert(e.data.cols)},i=new d({cells:e.data.cells,action:r.action});i.composeWithMutations(o,function(t,r){try{return n.data.cells.get(r).invert(t)}catch(t){throw new Error(t.message+": "+e.getAttributes().id+", "+r)}});var a=e.data.rows.isEmpty(),s=e.data.cols.isEmpty();return a&&s||this.data.cells.forEach(function(t){var r=f.parsePosition(t),o=r.row,a=r.col;null!==e.data.rows.composePosition(o)&&null!==e.data.cols.composePosition(a)||i.set(t,n.data.cells.get(t))}),o.cells=i,r.set({data:o})}},{key:"transform",value:function(e,n){var r=this,o=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transform",this).call(this,e,n);if("number"==typeof this.data||"number"==typeof e.data)return o;var i={rows:o.data.rows.transform(this.data.rows,!n),cols:o.data.cols.transform(this.data.cols,!n)},a={rows:this.data.rows.transform(e.data.rows,n),cols:this.data.cols.transform(e.data.cols,n)},s=new d({cells:e.data.cells,action:o.action});s.composeWithMutations(i);var l=e.data.rows.isEmpty(),c=e.data.cols.isEmpty();return this.data.cells.forEach(function(e){var t=f.parsePosition(e),o=t.row,i=t.col;if(l||(o=a.rows.composePosition(o)),c||(i=a.cols.composePosition(i)),null!==o&&null!==i){var u=f.stringifyPosition(o,i);s.set(u,r.data.cells.get(e).transform(s.get(u),n))}}),a.cells=s,o.set({data:a})}}],[{key:"unpack",value:function(e){if(Array.isArray(e[1])){var n=a(e[1],3),r=n[0],o=n[1],i=n[2];e[1]={rows:o?c.unpack(o):null,cols:i?c.unpack(i):null,cells:r}}return u(t.__proto__||Object.getPrototypeOf(t),"unpack",this).call(this,e)}}]),t}(l);p.packId=3,e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(243),a=n(108),s=n(78),u=n(448),l=function(){function e(t){var n=t.cells,o=t.action;if(r(this,e),this.cells={},"function"==typeof n.name){this.proto=n.proto;for(var i in n.cells)n.cells.hasOwnProperty(i)&&(this.cells[i]=n.cells[i])}else this.proto=n;this.action=o}return o(e,[{key:"name",value:function(){return"CellManager"}},{key:"keys",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"get",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;return r=void 0===this.cells[e]?this.proto[e]:this.cells[e],r?(t&&Array.isArray(r)&&(r=this.cells[e]=i.operatorUnpacker(r)),r.action&&r.action!==this.action&&(r=this.cells[e]=r.set({action:this.action}))):r=n?null:new i({action:this.action,data:"insert"===this.action?new a:1}),r}},{key:"forEach",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in this.cells)!this.cells.hasOwnProperty(n)||t&&null===this.cells[n]||e(n);for(var r in this.proto)this.proto.hasOwnProperty(r)&&!this.cells.hasOwnProperty(r)&&null!==this.proto[r]&&e(r)}},{key:"set",value:function(e,t){this.cells[e]=t||null}},{key:"composeWithMutations",value:function(e,t){var n=this,r=e.rows,o=e.cols,i=r.isEmpty(),a=o.isEmpty();if(!i||!a||t){var u={},l={row:{},col:{}};this.forEach(function(e){var c=s.parsePosition(e),f=c.row,d=c.col;if(i||(void 0===l.row[f]&&(l.row[f]=r.composePosition(f)),f=l.row[f]),a||(void 0===l.col[d]&&(l.col[d]=o.composePosition(d)),d=l.col[d]),u[e]||(u[e]=null),null!==f&&null!==d){var p=s.stringifyPosition(f,d),h=n.get(e,!0,!t);u[p]=t?t(h,p):h}},!1),this.cells=u}}},{key:"pack",value:function(){var e=this,t={};return this.forEach(function(n){var r=e.get(n,!1);Array.isArray(r)?t[n]=r:(r.attributes||r.data.isEmpty&&!r.data.isEmpty())&&(t[n]=r.pack())}),u(t)?0:t}}]),e}();e.exports=l},function(e,t,n){(function(e,n){function r(e,t){return null==e?void 0:e[t]}function o(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function i(e,t){return function(n){return e(t(n))}}function a(e){return $.call(e)}function s(e){return!(!g(e)||l(e))&&(v(e)||o(e)?Y:M).test(f(e))}function u(e,t){var n=r(e,t);return s(n)?n:void 0}function l(e){return!!V&&V in e}function c(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||B)}function f(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function d(e){return h(e)&&H.call(e,"callee")&&(!z.call(e,"callee")||$.call(e)==k)}function p(e){return null!=e&&y(e.length)&&!v(e)}function h(e){return b(e)&&p(e)}function m(e){if(p(e)&&(le(e)||"string"==typeof e||"function"==typeof e.splice||ce(e)||d(e)))return!e.length;var t=ue(e);if(t==C||t==x)return!e.size;if(ne||c(e))return!X(e).length;for(var n in e)if(H.call(e,n))return!1;return!0}function v(e){var t=g(e)?$.call(e):"";return t==E||t==T}function y(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){return!!e&&"object"==typeof e}function w(){return!1}var _=9007199254740991,k="[object Arguments]",E="[object Function]",T="[object GeneratorFunction]",C="[object Map]",S="[object Object]",O="[object Promise]",x="[object Set]",P="[object WeakMap]",j="[object DataView]",N=/[\\^$.*+?()[\]{}|]/g,M=/^\[object .+?Constructor\]$/,A="object"==typeof e&&e&&e.Object===Object&&e,I="object"==typeof self&&self&&self.Object===Object&&self,D=A||I||Function("return this")(),L="object"==typeof t&&t&&!t.nodeType&&t,R=L&&"object"==typeof n&&n&&!n.nodeType&&n,U=R&&R.exports===L,F=Function.prototype,B=Object.prototype,W=D["__core-js_shared__"],V=function(){var e=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),q=F.toString,H=B.hasOwnProperty,$=B.toString,Y=RegExp("^"+q.call(H).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=U?D.Buffer:void 0,z=B.propertyIsEnumerable,G=K?K.isBuffer:void 0,X=i(Object.keys,Object),J=u(D,"DataView"),Q=u(D,"Map"),Z=u(D,"Promise"),ee=u(D,"Set"),te=u(D,"WeakMap"),ne=!z.call({valueOf:1},"valueOf"),re=f(J),oe=f(Q),ie=f(Z),ae=f(ee),se=f(te),ue=a;(J&&ue(new J(new ArrayBuffer(1)))!=j||Q&&ue(new Q)!=C||Z&&ue(Z.resolve())!=O||ee&&ue(new ee)!=x||te&&ue(new te)!=P)&&(ue=function(e){var t=$.call(e),n=t==S?e.constructor:void 0,r=n?f(n):void 0;if(r)switch(r){case re:return j;case oe:return C;case ie:return O;case ae:return x;case se:return P}return t});var le=Array.isArray,ce=G||w;n.exports=m}).call(t,n(25),n(44)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=n(109),l=function(e){function t(e){var n,i;return r(this,t),i=n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o(n,i)}return i(t,e),a(t,[{key:"name",value:function(){return"TextOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return this.data}},{key:"setData",value:function(e){switch(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this.action){case"insert":if("string"!=typeof this.data&&"object"!=typeof this.data)throw new Error('data should be a string or an object for "insert" action, got '+this.data);break;case"retain":if("number"!=typeof this.data)throw new Error('data should be a number for "'+this.action+'" action, got '+this.data)}return this}}]),t}(u);l.packId=2,e.exports=l},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(t,n(25))},function(e,t,n){var r,o;!function(i,a){r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(0,function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,r){var o;return o="translate3d"===l.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===l.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},o.transition="all "+n+"ms "+r,o}function r(e,t){return("string"==typeof e?e:a(e)).indexOf(" "+t+" ")>=0}function o(e,t){var n=a(e),o=n+t;r(n,t)||(e.className=o.substring(1))}function i(e,t){var n,o=a(e);r(e,t)&&(n=o.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function a(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var u={};u.version="0.2.0";var l=u.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};u.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(l[t]=n);return this},u.status=null,u.set=function(t){var r=u.isStarted();t=e(t,l.minimum,1),u.status=1===t?null:t;var o=u.render(!r),i=o.querySelector(l.barSelector),a=l.speed,s=l.easing;return o.offsetWidth,c(function(e){""===l.positionUsing&&(l.positionUsing=u.getPositioningCSS()),f(i,n(t,a,s)),1===t?(f(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout(function(){f(o,{transition:"all "+a+"ms linear",opacity:0}),setTimeout(function(){u.remove(),e()},a)},a)):setTimeout(e,a)}),this},u.isStarted=function(){return"number"==typeof u.status},u.start=function(){u.status||u.set(0);var e=function(){setTimeout(function(){u.status&&(u.trickle(),e())},l.trickleSpeed)};return l.trickle&&e(),this},u.done=function(e){return e||u.status?u.inc(.3+.5*Math.random()).set(1):this},u.inc=function(t){var n=u.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),u.set(n)):u.start()},u.trickle=function(){return u.inc(Math.random()*l.trickleRate)},function(){var e=0,t=0;u.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&u.start(),e++,t++,n.always(function(){t--,0===t?(e=0,u.done()):u.set((e-t)/e)}),this):this}}(),u.render=function(e){if(u.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=l.template;var r,i=n.querySelector(l.barSelector),a=e?"-100":t(u.status||0),c=document.querySelector(l.parent);return f(i,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),l.showSpinner||(r=n.querySelector(l.spinnerSelector))&&s(r),c!=document.body&&o(c,"nprogress-custom-parent"),c.appendChild(n),n},u.remove=function(){i(document.documentElement,"nprogress-busy"),i(document.querySelector(l.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&s(e)},u.isRendered=function(){return!!document.getElementById("nprogress")},u.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var c=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),f=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,r=o.length,i=e.charAt(0).toUpperCase()+e.slice(1);r--;)if((n=o[r]+i)in t)return n;return e}function n(n){return n=e(n),i[n]||(i[n]=t(n))}function r(e,t,r){t=n(t),e.style[t]=r}var o=["Webkit","O","Moz","ms"],i={};return function(e,t){var n,o,i=arguments;if(2==i.length)for(n in t)void 0!==(o=t[n])&&t.hasOwnProperty(n)&&r(e,n,o);else r(e,i[1],i[2])}}();return u})},function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function o(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(l||r);e.diff=o,e.prev=l,e.curr=r,l=r;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n}),t.formatArgs.call(e,i);(n.log||t.log||console.log.bind(console)).apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),"function"==typeof t.init&&t.init(n),n}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o.default=o,t.coerce=u,t.disable=a,t.enable=i,t.enabled=s,t.humanize=n(453),t.names=[],t.skips=[],t.formatters={};var l},function(e,t){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,l,"day")||i(e,u,"hour")||i(e,s,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,l=24*u,c=365.25*l;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return n(e);if("number"===i&&!1===isNaN(e))return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){n(455),e.exports=window.EventSource},function(e,t){!function(e){"use strict";function t(e,t,r,o,i){this._internal=new n(e,t,r,o,i)}function n(e,t,n,r,o){this.onStartCallback=t,this.onProgressCallback=n,this.onFinishCallback=r,this.thisArg=o,this.xhr=e,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function r(){this._data={}}function o(){this._listeners=new r}function i(e){f(function(){throw e},0)}function a(e){this.type=e,this.target=void 0}function s(e,t){a.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function u(e,t){o.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url="",this.readyState=b,this.withCredentials=!1,this._internal=new l(this,e,t)}function l(e,n,r){this.url=n.toString(),this.readyState=b,this.withCredentials=v&&void 0!=r&&Boolean(r.withCredentials),this.es=e,this.initialRetry=P(1e3,0),this.heartbeatTimeout=P(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var o=void 0!=r&&void 0!=r.Transport?r.Transport:y,i=new o;this.transport=new t(i,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=g,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=E,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function c(){this.CONNECTING=b,this.OPEN=w,this.CLOSED=_}var f=e.setTimeout,d=e.clearTimeout,p=function(){};t.prototype.open=function(e,t){this._internal.open(e,t)},t.prototype.cancel=function(){this._internal.cancel()},n.prototype.onStart=function(){if(1===this.state){this.state=2;var e=0,t="",n=void 0;if("contentType"in this.xhr)e=200,t="OK",n=this.xhr.contentType;else try{e=this.xhr.status,t=this.xhr.statusText,n=this.xhr.getResponseHeader("Content-Type")}catch(r){e=0,t="",n=void 0}void 0==n&&(n=""),this.onStartCallback.call(this.thisArg,e,t,n)}},n.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var e="";try{e=this.xhr.responseText}catch(e){}for(var t=this.charOffset,n=e.length,r=this.offset;r<n;r+=1){var o=e.charCodeAt(r);o!=="\n".charCodeAt(0)&&o!=="\r".charCodeAt(0)||(this.charOffset=r+1)}this.offset=n;var i=e.slice(t,this.charOffset);this.onProgressCallback.call(this.thisArg,i)}},n.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(d(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},n.prototype.onReadyStateChange=function(){void 0!=this.xhr&&(4===this.xhr.readyState?(this.xhr.status,this.onFinish()):3===this.xhr.readyState?this.onProgress():this.xhr.readyState)},n.prototype.onTimeout2=function(){this.timeout=0;var t=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),n=t[1],r="base64"===t[2]?e.atob(t[3]):decodeURIComponent(t[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",n)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,r)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},n.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},n.prototype.onTimeout0=function(){var e=this;this.timeout=f(function(){e.onTimeout0()},500),3===this.xhr.readyState&&this.onProgress()},n.prototype.handleEvent=function(e){"load"===e.type?this.onFinish():"error"===e.type?this.onFinish():"abort"===e.type?this.onFinish():"progress"===e.type?this.onProgress():"readystatechange"===e.type&&this.onReadyStateChange()},n.prototype.open=function(t,n){this.cancel(),this.url=t,this.withCredentials=n,this.state=1,this.charOffset=0,this.offset=0;var r=this;if(void 0!=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(t))return void(this.timeout=f(function(){r.onTimeout2()},0));if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&void 0!=e.document&&void 0!=e.document.readyState&&"complete"!==e.document.readyState)return void(this.timeout=f(function(){r.onTimeout1()},4));this.xhr.onload=function(e){r.handleEvent({type:"load"})},this.xhr.onerror=function(){r.handleEvent({type:"error"})},this.xhr.onabort=function(){r.handleEvent({type:"abort"})},this.xhr.onprogress=function(){r.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){r.handleEvent({type:"readystatechange"})},this.xhr.open("GET",t,!0),this.xhr.withCredentials=n,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(void 0)}catch(e){throw e}"readyState"in this.xhr&&void 0!=e.opera&&(this.timeout=f(function(){r.onTimeout0()},0))},n.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=p,this.xhr.onerror=p,this.xhr.onabort=p,this.xhr.onprogress=p,this.xhr.onreadystatechange=p,this.xhr.abort(),0!==this.timeout&&(d(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},r.prototype.get=function(e){return this._data[e+"~"]},r.prototype.set=function(e,t){this._data[e+"~"]=t},r.prototype.delete=function(e){delete this._data[e+"~"]},o.prototype.dispatchEvent=function(e){e.target=this;var t=e.type.toString(),n=this._listeners,r=n.get(t);if(void 0!=r)for(var o=r.length,a=void 0,s=0;s<o;s+=1){a=r[s];try{"function"==typeof a.handleEvent?a.handleEvent(e):a.call(this,e)}catch(e){i(e)}}},o.prototype.addEventListener=function(e,t){e=e.toString();var n=this._listeners,r=n.get(e);void 0==r&&(r=[],n.set(e,r));for(var o=r.length;o>=0;o-=1)if(r[o]===t)return;r.push(t)},o.prototype.removeEventListener=function(e,t){e=e.toString();var n=this._listeners,r=n.get(e);if(void 0!=r){for(var o=r.length,i=[],a=0;a<o;a+=1)r[a]!==t&&i.push(r[a]);0===i.length?n.delete(e):n.set(e,i)}},s.prototype=a.prototype;var h=e.XMLHttpRequest,m=e.XDomainRequest,v=void 0!=h&&void 0!=(new h).withCredentials,y=v||void 0!=h&&void 0==m?h:m,g=-1,b=0,w=1,_=2,k=3,E=4,T=5,C=6,S=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,O=1e3,x=18e6,P=function(e,t){var n=e;return n!==n&&(n=t),n<O?O:n>x?x:n},j=function(e,t,n){try{"function"==typeof t&&t.call(e,n)}catch(e){i(e)}};l.prototype.onStart=function(e,t,n){if(this.currentState===b)if(void 0==n&&(n=""),200===e&&S.test(n)){this.currentState=w,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=w,this.es.readyState=w;var r=new a("open");this.es.dispatchEvent(r),j(this.es,this.es.onopen,r)}else if(0!==e){var o="";o=200!==e?"EventSource's response has a status "+e+" "+t.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+n.replace(/\s+/g," ")+". Aborting the connection.",i(new Error(o)),this.close();var r=new a("error");this.es.dispatchEvent(r),j(this.es,this.es.onerror,r)}},l.prototype.onProgress=function(e){if(this.currentState===w){var t=e.length;0!==t&&(this.wasActivity=!0);for(var n=0;n<t;n+=1){var r=e.charCodeAt(n);if(this.state===k&&r==="\n".charCodeAt(0))this.state=E;else if(this.state===k&&(this.state=E),r==="\r".charCodeAt(0)||r==="\n".charCodeAt(0)){if(this.state!==E){this.state===T&&(this.valueStart=n+1);var o=e.slice(this.fieldStart,this.valueStart-1),i=e.slice(this.valueStart+(this.valueStart<n&&e.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),n);if("data"===o)this.dataBuffer.push(i);else if("id"===o)this.lastEventIdBuffer=i;else if("event"===o)this.eventTypeBuffer=i;else if("retry"===o)this.initialRetry=P(Number(i),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===o&&(this.heartbeatTimeout=P(Number(i),this.heartbeatTimeout),0!==this.timeout)){d(this.timeout);var a=this;this.timeout=f(function(){a.onTimeout()},this.heartbeatTimeout)}}if(this.state===E){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var u=new s(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(u),"message"===this.eventTypeBuffer&&j(this.es,this.es.onmessage,u),this.currentState===_)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=r==="\r".charCodeAt(0)?k:E}else this.state===E&&(this.fieldStart=n,this.state=T),this.state===T?r===":".charCodeAt(0)&&(this.valueStart=n+1,this.state=C):this.state===C&&(this.state=7)}}},l.prototype.onFinish=function(){if(this.currentState===w||this.currentState===b){this.currentState=g,0!==this.timeout&&(d(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),this.retry>x&&(this.retry=x);var e=this;this.timeout=f(function(){e.onTimeout()},this.retry),this.retry=2*this.retry+1,this.readyState=b,this.es.readyState=b;var t=new a("error");this.es.dispatchEvent(t),j(this.es,this.es.onerror,t)}},l.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===g){this.wasActivity=!1;var e=this;this.timeout=f(function(){e.onTimeout()},this.heartbeatTimeout),this.currentState=b,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=E;var t=this.url.slice(0,5);t="data:"!==t&&"blob:"!==t?this.url+(-1===this.url.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2):this.url;try{this.transport.open(t,this.withCredentials)}catch(e){throw this.close(),e}}else if(this.wasActivity){this.wasActivity=!1;var e=this;this.timeout=f(function(){e.onTimeout()},this.heartbeatTimeout)}else i(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},l.prototype.close=function(){this.currentState=_,this.transport.cancel(),0!==this.timeout&&(d(this.timeout),this.timeout=0),this.readyState=_,this.es.readyState=_},c.prototype=o.prototype,u.prototype=new c,u.prototype.close=function(){this._internal.close()},c.call(u),v&&(u.prototype.withCredentials=void 0);var N=function(){return void 0!=e.EventSource&&"withCredentials"in e.EventSource.prototype};void 0!=y&&(void 0==e.EventSource||v&&!N())&&(e.NativeEventSource=e.EventSource,e.EventSource=u)}("undefined"!=typeof window?window:this)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(91),a=n(244),s=n(245),u=n(80).v4,l=function(){function e(t){var n=this;r(this,e),this.userId=t.userId,this.clientId=t.clientId,this.stack=t.stack||{};var o=this.stack,i=u();Object.keys(o).forEach(function(e){if(o[e]){var t=Object.keys(o[e]);t.forEach(function(r){t[0]&&/^[a-zA-Z0-9]{16}$/.test(t[0])&&(n.set(r,o[e][r],i),delete o[e][r])})}})}return o(e,[{key:"getAll",value:function(){return this.stack[this.userId]}},{key:"get",value:function(e,t){var n=t||this.clientId;return a(this.stack,this.userId+"."+n+"."+e)}},{key:"remove",value:function(e,t){var n=t||this.clientId;a(this.stack,this.userId+"."+n+"."+e)&&(delete this.stack[this.userId][n][e],0===Object.keys(this.stack[this.userId][n]).length&&delete this.stack[this.userId][n])}},{key:"set",value:function(e,t,n){var r=n||this.clientId,o=this.userId;s(this.stack,o+"."+r+"."+e,i({guid:e},t))}}]),e}();e.exports=l},function(e,t,n){"use strict";e.exports=function(e){var t={};return["setUserChangeNotificationCallback","prepareUserChangeset","getUncommittedChanges","applyPreparedChangesetToBase","getInInternationalComposition"].forEach(function(n){t[n]=e[n].bind(e)}),t.applyChangesToBase=function(t){var n=t.changeset,r=t.author||"",o=t.apool,i=Number(t.authorId);e.applyChangesToBase(n,r,o,i,t.rev)},t}},function(e,t,n){"use strict";var r=n(93);e.exports=function(e){var t=e.store,n=e.actions,o=e._global;return{setUserChangeNotificationCallback:function(e){o.cow.curSheetComposeUserChange=e},prepareUserChangeset:function(){var e=t.getState().msg;return t.dispatch(n.sendChange()),{changeset:r.pack(e.userCS)}},getUncommittedChanges:function(e){var n=t.getState().msg,o=void 0;return o=e?n.userCS:n.committingCS.compose(n.userCS),{changeset:r.pack(o)}},applyPreparedChangesetToBase:function(e){t.dispatch(n.sendChangeSuccess(e))},applyChangesToBase:function(e){t.dispatch(n.receivedNewChange(e))}}}},function(e,t,n){"use strict";e.exports=function(e){var t={};return["setUserChangeNotificationCallback","prepareUserChangeset","getUncommittedChanges","applyPreparedChangesetToBase","applyChangesToBase","getInInternationalComposition"].forEach(function(n){t[n]=e[n].bind(e)}),t}},function(e,t,n){!function(e,n){n(t)}(0,function(e){"use strict";function t(e){var t=window.document;if(void 0===t)throw new Error("browser environment is required!");if(!e||0===e.length)throw new Error('argument "path" is required !');var n=t.getElementsByTagName("head")[0],r=t.createElement("script");return new Promise(function(t,o){r.type="text/javascript",r.onload=function(){r.onload=r.onerror=null,t()},r.onerror=function(e){var t=new Error("[loadJS]script load failed!src: "+r.src);r.onerror=r.onload=null,n.removeChild(r),o(t)},r.src=e,r.async=!0,n.appendChild(r)})}function n(e){function t(e){if(r.body)return e();setTimeout(function(){t(e)})}var n,r=window.document,o=r.createElement("link"),i=(r.getElementsByTagName("head")[0]||r.body).childNodes,a=i[i.length-1],s=r.styleSheets;o.rel="stylesheet",o.href=e;var u,l=function(t){(new Date).getTime()-n>3e4&&(clearTimeout(u),u=null,t(null,new Error("[loadCSS]css load timeout!href: "+e)));for(var r=o.href,i=s.length;i--;)if(s[i].href===r)return t();u=setTimeout(function(){l(t)})};return new Promise(function(e,r){function i(t,n){if(u&&(clearTimeout(u),u=null),o.addEventListener&&o.removeEventListener("load",i),n)return r(n);e()}t(function(){a.parentNode.insertBefore(o,a.nextSibling),n=(new Date).getTime()}),o.addEventListener&&o.addEventListener("load",i),l(i)})}function r(e){for(var t=c.exec(e),n={},r=14;r--;)n[l[r]]=t[r]||"";return n}function o(){var e=[].slice.call(arguments);return Array.isArray(e[0])&&(e=e[0]),e=e.filter(function(e){return"string"==typeof e&&e.trim().length>0}),Promise.all(e.map(function(e){var t=h[e];return t||(t=i(e).catch(function(t){throw delete h[e],t}),h[e]=t),t}))}function i(e){var r=a(e);return"css"===r.type?n(r.path):"js"===r.type?t(r.path):void 0}function a(e){var t=p[e]||u(e),n={path:t},o=r(t);return n.type="css"===s(o.file)?"css":"js",n}function s(e){var t=e.lastIndexOf(".");return t<0?"":e.substr(t+1).trim()}function u(e){if(/^[\w\.\-]+$/.test(e)){var t=s(e);return"/"+e+("css"!==t&&"js"!==t?".js":"")}return e}var l=["source","protocol","authority","userInfo","user","password","host","port","relative","pathname","directory","file","query","hash"],c=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,f="_SHIMO_LOADER_URL_MAPS_",d="_SHIMO_LOADER_CACHE_";if("undefined"==typeof Promise)throw new Error("[shimo_loader]Promise support is needed!");var p=window[f]||{},h=window[d];Object(h)!==h&&(h=window[d]=Object.create(null)),e.URL_MAPS_KEY=f,e.loadJS=t,e.loadCSS=n,e.parseUrl=r,e.load=o,Object.defineProperty(e,"__esModule",{value:!0})})},,function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==s||t==u||t==a||t==l}var o=n(149),i=n(79),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";e.exports=r},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";function t(){return wr.apply(null,arguments)}function n(e){wr=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t;for(t in e)return!1;return!0}function a(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,n,r){return bt(e,t,n,r,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=p()),e._pf}function m(e){if(null==e._isValid){var t=h(e),n=kr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function v(e){var t=d(NaN);return null!=e?f(h(t),e):h(t).userInvalidated=!0,t}function y(e,t){var n,r,o;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=h(t)),a(t._locale)||(e._locale=t._locale),Er.length>0)for(n=0;n<Er.length;n++)r=Er[n],o=t[r],a(o)||(e[r]=o);return e}function g(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Tr&&(Tr=!0,t.updateOffset(this),Tr=!1)}function b(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function k(e,t,n){var r,o=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(r=0;r<o;r++)(n&&e[r]!==t[r]||!n&&_(e[r])!==_(t[r]))&&a++;return a+i}function E(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,n){var r=!0;return f(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var o,i=[],a=0;a<arguments.length;a++){if(o="","object"==typeof arguments[a]){o+="\n["+a+"] ";for(var s in arguments[0])o+=s+": "+arguments[0][s]+", ";o=o.slice(0,-2)}else o=arguments[a];i.push(o)}E(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function C(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Cr[e]||(E(n),Cr[e]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e){var t,n;for(n in e)t=e[n],S(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function x(e,t){var n,r=f({},e);for(n in t)c(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&o(e[n])&&(r[n]=f({},r[n]));return r}function P(e){null!=e&&this.set(e)}function j(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return S(r)?r.call(t,n):r}function N(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function M(){return this._invalidDate}function A(e){return this._ordinal.replace("%d",e)}function I(e,t,n,r){var o=this._relativeTime[n];return S(o)?o(e,t,n,r):o.replace(/%d/i,e)}function D(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)}function L(e,t){var n=e.toLowerCase();Dr[n]=Dr[n+"s"]=Dr[t]=e}function R(e){return"string"==typeof e?Dr[e]||Dr[e.toLowerCase()]:void 0}function U(e){var t,n,r={};for(n in e)c(e,n)&&(t=R(n))&&(r[t]=e[n]);return r}function F(e,t){Lr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Lr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function W(e,n){return function(r){return null!=r?(q(this,e,r),t.updateOffset(this,n),this):V(this,e)}}function V(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function H(e){return e=R(e),S(this[e])?this[e]():this}function $(e,t){if("object"==typeof e){e=U(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=R(e),S(this[e]))return this[e](t);return this}function Y(e,t,n){var r=""+Math.abs(e),o=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}function K(e,t,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),e&&(Br[e]=o),t&&(Br[t[0]]=function(){return Y(o.apply(this,arguments),t[1],t[2])}),n&&(Br[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(Rr);for(t=0,n=r.length;t<n;t++)Br[r[t]]?r[t]=Br[r[t]]:r[t]=z(r[t]);return function(t){var o,i="";for(o=0;o<n;o++)i+=S(r[o])?r[o].call(t,e):r[o];return i}}function X(e,t){return e.isValid()?(t=J(t,e.localeData()),Fr[t]=Fr[t]||G(t),Fr[t](e)):e.localeData().invalidDate()}function J(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Ur.lastIndex=0;r>=0&&Ur.test(e);)e=e.replace(Ur,n),Ur.lastIndex=0,r-=1;return e}function Q(e,t,n){oo[e]=S(t)?t:function(e,r){return e&&n?n:t}}function Z(e,t){return c(oo,e)?oo[e](t._strict,t._locale):new RegExp(ee(e))}function ee(e){return te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,o){return t||n||r||o}))}function te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ne(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),s(t)&&(r=function(e,n){n[t]=_(e)}),n=0;n<e.length;n++)io[e[n]]=r}function re(e,t){ne(e,function(e,n,r,o){r._w=r._w||{},t(e,r._w,r,o)})}function oe(e,t,n){null!=t&&c(io,e)&&io[e](t,n._a,n,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||yo).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone}function se(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[yo.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ue(e,t,n){var r,o,i,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?(o=vo.call(this._shortMonthsParse,a),-1!==o?o:null):(o=vo.call(this._longMonthsParse,a),-1!==o?o:null):"MMM"===t?-1!==(o=vo.call(this._shortMonthsParse,a))?o:(o=vo.call(this._longMonthsParse,a),-1!==o?o:null):-1!==(o=vo.call(this._longMonthsParse,a))?o:(o=vo.call(this._shortMonthsParse,a),-1!==o?o:null)}function le(e,t,n){var r,o,i;if(this._monthsParseExact)return ue.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=_(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function fe(e){return null!=e?(ce(this,e),t.updateOffset(this,!0),this):V(this,"Month")}function de(){return ie(this.year(),this.month())}function pe(e){return this._monthsParseExact?(c(this,"_monthsRegex")||me.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=wo),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function he(e){return this._monthsParseExact?(c(this,"_monthsRegex")||me.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=_o),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function me(){function e(e,t){return t.length-e.length}var t,n,r=[],o=[],i=[];for(t=0;t<12;t++)n=d([2e3,t]),r.push(this.monthsShort(n,"")),o.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),o.sort(e),i.sort(e),t=0;t<12;t++)r[t]=te(r[t]),o[t]=te(o[t]);for(t=0;t<24;t++)i[t]=te(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ve(e){return ye(e)?366:365}function ye(e){return e%4==0&&e%100!=0||e%400==0}function ge(){return ye(this.year())}function be(e,t,n,r,o,i,a){var s=new Date(e,t,n,r,o,i,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function we(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function _e(e,t,n){var r=7+t-n;return-(7+we(e,0,r).getUTCDay()-t)%7+r-1}function ke(e,t,n,r,o){var i,a,s=(7+n-r)%7,u=_e(e,r,o),l=1+7*(t-1)+s+u;return l<=0?(i=e-1,a=ve(i)+l):l>ve(e)?(i=e+1,a=l-ve(e)):(i=e,a=l),{year:i,dayOfYear:a}}function Ee(e,t,n){var r,o,i=_e(e.year(),t,n),a=Math.floor((e.dayOfYear()-i-1)/7)+1;return a<1?(o=e.year()-1,r=a+Te(o,t,n)):a>Te(e.year(),t,n)?(r=a-Te(e.year(),t,n),o=e.year()+1):(o=e.year(),r=a),{week:r,year:o}}function Te(e,t,n){var r=_e(e,t,n),o=_e(e+1,t,n);return(ve(e)-r+o)/7}function Ce(e){return Ee(e,this._week.dow,this._week.doy).week}function Se(){return this._week.dow}function Oe(){return this._week.doy}function xe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Pe(e){var t=Ee(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function je(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ne(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Me(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone}function Ae(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ie(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function De(e,t,n){var r,o,i,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?(o=vo.call(this._weekdaysParse,a),-1!==o?o:null):"ddd"===t?(o=vo.call(this._shortWeekdaysParse,a),-1!==o?o:null):(o=vo.call(this._minWeekdaysParse,a),-1!==o?o:null):"dddd"===t?-1!==(o=vo.call(this._weekdaysParse,a))?o:-1!==(o=vo.call(this._shortWeekdaysParse,a))?o:(o=vo.call(this._minWeekdaysParse,a),-1!==o?o:null):"ddd"===t?-1!==(o=vo.call(this._shortWeekdaysParse,a))?o:-1!==(o=vo.call(this._weekdaysParse,a))?o:(o=vo.call(this._minWeekdaysParse,a),-1!==o?o:null):-1!==(o=vo.call(this._minWeekdaysParse,a))?o:-1!==(o=vo.call(this._weekdaysParse,a))?o:(o=vo.call(this._shortWeekdaysParse,a),-1!==o?o:null)}function Le(e,t,n){var r,o,i;if(this._weekdaysParseExact)return De.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Re(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=je(e,this.localeData()),this.add(e-t,"d")):t}function Ue(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Fe(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ne(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Oo),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function We(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=xo),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ve(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Po),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qe(){function e(e,t){return t.length-e.length}var t,n,r,o,i,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=d([2e3,1]).day(t),r=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),i=this.weekdays(n,""),a.push(r),s.push(o),u.push(i),l.push(r),l.push(o),l.push(i);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=te(s[t]),u[t]=te(u[t]),l[t]=te(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function He(){return this.hours()%12||12}function $e(){return this.hours()||24}function Ye(e,t){K(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ke(e,t){return t._meridiemParse}function ze(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ge(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Xe(e){return e?e.toLowerCase().replace("_","-"):e}function Je(e){for(var t,n,r,o,i=0;i<e.length;){for(o=Xe(e[i]).split("-"),t=o.length,n=Xe(e[i+1]),n=n?n.split("-"):null;t>0;){if(r=Qe(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&k(o,n,!0)>=t-1)break;t--}i++}return null}function Qe(t){var n=null;if(!Io[t]&&void 0!==e&&e&&e.exports)try{n=jo._abbr,function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),Ze(n)}catch(e){}return Io[t]}function Ze(e,t){var n;return e&&(n=a(t)?nt(e):et(e,t))&&(jo=n),jo._abbr}function et(e,t){if(null!==t){var n=Ao;if(t.abbr=e,null!=Io[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Io[e]._config;else if(null!=t.parentLocale){if(null==Io[t.parentLocale])return Do[t.parentLocale]||(Do[t.parentLocale]=[]),Do[t.parentLocale].push({name:e,config:t}),null;n=Io[t.parentLocale]._config}return Io[e]=new P(x(n,t)),Do[e]&&Do[e].forEach(function(e){et(e.name,e.config)}),Ze(e),Io[e]}return delete Io[e],null}function tt(e,t){if(null!=t){var n,r=Ao;null!=Io[e]&&(r=Io[e]._config),t=x(r,t),n=new P(t),n.parentLocale=Io[e],Io[e]=n,Ze(e)}else null!=Io[e]&&(null!=Io[e].parentLocale?Io[e]=Io[e].parentLocale:null!=Io[e]&&delete Io[e]);return Io[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return jo;if(!r(e)){if(t=Qe(e))return t;e=[e]}return Je(e)}function rt(){return xr(Io)}function ot(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[so]<0||n[so]>11?so:n[uo]<1||n[uo]>ie(n[ao],n[so])?uo:n[lo]<0||n[lo]>24||24===n[lo]&&(0!==n[co]||0!==n[fo]||0!==n[po])?lo:n[co]<0||n[co]>59?co:n[fo]<0||n[fo]>59?fo:n[po]<0||n[po]>999?po:-1,h(e)._overflowDayOfYear&&(t<ao||t>uo)&&(t=uo),h(e)._overflowWeeks&&-1===t&&(t=ho),h(e)._overflowWeekday&&-1===t&&(t=mo),h(e).overflow=t),e}function it(e){var t,n,r,o,i,a,s=e._i,u=Lo.exec(s)||Ro.exec(s);if(u){for(h(e).iso=!0,t=0,n=Fo.length;t<n;t++)if(Fo[t][1].exec(u[1])){o=Fo[t][0],r=!1!==Fo[t][2];break}if(null==o)return void(e._isValid=!1);if(u[3]){for(t=0,n=Bo.length;t<n;t++)if(Bo[t][1].exec(u[3])){i=(u[2]||" ")+Bo[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(u[4]){if(!Uo.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=o+(i||"")+(a||""),dt(e)}else e._isValid=!1}function at(e){var t,n,r,o,i,a,s,u,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},c="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=Vo.exec(t)){if(r=n[1]?"ddd"+(5===n[1].length?", ":" "):"",o="D MMM "+(n[2].length>10?"YYYY ":"YY "),i="HH:mm"+(n[4]?":ss":""),n[1]){var f=new Date(n[2]),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f.getDay()];if(n[1].substr(0,3)!==d)return h(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:0===u?s=" +0000":(u=c.indexOf(n[5][1].toUpperCase())-12,s=(u<0?" -":" +")+(""+u).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:s=l[n[5]];break;default:s=l[" GMT"]}n[5]=s,e._i=n.splice(1).join(""),a=" ZZ",e._f=r+o+i+a,dt(e),h(e).rfc2822=!0}else e._isValid=!1}function st(e){var n=Wo.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));it(e),!1===e._isValid&&(delete e._isValid,at(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function ut(e,t,n){return null!=e?e:null!=t?t:n}function lt(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ct(e){var t,n,r,o,i=[];if(!e._d){for(r=lt(e),e._w&&null==e._a[uo]&&null==e._a[so]&&ft(e),null!=e._dayOfYear&&(o=ut(e._a[ao],r[ao]),(e._dayOfYear>ve(o)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),n=we(o,0,e._dayOfYear),e._a[so]=n.getUTCMonth(),e._a[uo]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[lo]&&0===e._a[co]&&0===e._a[fo]&&0===e._a[po]&&(e._nextDay=!0,e._a[lo]=0),e._d=(e._useUTC?we:be).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[lo]=24)}}function ft(e){var t,n,r,o,i,a,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)i=1,a=4,n=ut(t.GG,e._a[ao],Ee(wt(),1,4).year),r=ut(t.W,1),((o=ut(t.E,1))<1||o>7)&&(u=!0);else{i=e._locale._week.dow,a=e._locale._week.doy;var l=Ee(wt(),i,a);n=ut(t.gg,e._a[ao],l.year),r=ut(t.w,l.week),null!=t.d?((o=t.d)<0||o>6)&&(u=!0):null!=t.e?(o=t.e+i,(t.e<0||t.e>6)&&(u=!0)):o=i}r<1||r>Te(n,i,a)?h(e)._overflowWeeks=!0:null!=u?h(e)._overflowWeekday=!0:(s=ke(n,r,o,i,a),e._a[ao]=s.year,e._dayOfYear=s.dayOfYear)}function dt(e){if(e._f===t.ISO_8601)return void it(e);if(e._f===t.RFC_2822)return void at(e);e._a=[],h(e).empty=!0;var n,r,o,i,a,s=""+e._i,u=s.length,l=0;for(o=J(e._f,e._locale).match(Rr)||[],n=0;n<o.length;n++)i=o[n],r=(s.match(Z(i,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&h(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),l+=r.length),Br[i]?(r?h(e).empty=!1:h(e).unusedTokens.push(i),oe(i,r,e)):e._strict&&!r&&h(e).unusedTokens.push(i);h(e).charsLeftOver=u-l,s.length>0&&h(e).unusedInput.push(s),e._a[lo]<=12&&!0===h(e).bigHour&&e._a[lo]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[lo]=pt(e._locale,e._a[lo],e._meridiem),ct(e),ot(e)}function pt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ht(e){var t,n,r,o,i;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)i=0,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],dt(t),m(t)&&(i+=h(t).charsLeftOver,i+=10*h(t).unusedTokens.length,h(t).score=i,(null==r||i<r)&&(r=i,n=t));f(e,n||t)}function mt(e){if(!e._d){var t=U(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ct(e)}}function vt(e){var t=new g(ot(yt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function yt(e){var t=e._i,n=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new g(ot(t)):(u(t)?e._d=t:r(n)?ht(e):n?dt(e):gt(e),m(e)||(e._d=null),e))}function gt(e){var n=e._i;a(n)?e._d=new Date(t.now()):u(n)?e._d=new Date(n.valueOf()):"string"==typeof n?st(e):r(n)?(e._a=l(n.slice(0),function(e){return parseInt(e,10)}),ct(e)):o(n)?mt(e):s(n)?e._d=new Date(n):t.createFromInputFallback(e)}function bt(e,t,n,a,s){var u={};return!0!==n&&!1!==n||(a=n,n=void 0),(o(e)&&i(e)||r(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=e,u._f=t,u._strict=a,vt(u)}function wt(e,t,n,r){return bt(e,t,n,r,!1)}function _t(e,t){var n,o;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return wt();for(n=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](n)||(n=t[o]);return n}function kt(){return _t("isBefore",[].slice.call(arguments,0))}function Et(){return _t("isAfter",[].slice.call(arguments,0))}function Tt(e){for(var t in e)if(-1===Yo.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Yo.length;++r)if(e[Yo[r]]){if(n)return!1;parseFloat(e[Yo[r]])!==_(e[Yo[r]])&&(n=!0)}return!0}function Ct(){return this._isValid}function St(){return $t(NaN)}function Ot(e){var t=U(e),n=t.year||0,r=t.quarter||0,o=t.month||0,i=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Tt(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function xt(e){return e instanceof Ot}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function jt(e,t){K(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+Y(~~(e/60),2)+t+Y(~~e%60,2)})}function Nt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],o=(r+"").match(Ko)||["-",0,0],i=60*o[1]+_(o[2]);return 0===i?0:"+"===o[0]?i:-i}function Mt(e,n){var r,o;return n._isUTC?(r=n.clone(),o=(b(e)||u(e)?e.valueOf():wt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+o),t.updateOffset(r,!1),r):wt(e).local()}function At(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function It(e,n,r){var o,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Nt(to,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(o=At(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),i!==e&&(!n||this._changeInProgress?Xt(this,$t(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:At(this)}function Dt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Lt(e){return this.utcOffset(0,e)}function Rt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(At(this),"m")),this}function Ut(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(eo,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ft(e){return!!this.isValid()&&(e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Bt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wt(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(y(e,this),e=yt(e),e._a){var t=e._isUTC?d(e._a):wt(e._a);this._isDSTShifted=this.isValid()&&k(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Vt(){return!!this.isValid()&&!this._isUTC}function qt(){return!!this.isValid()&&this._isUTC}function Ht(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function $t(e,t){var n,r,o,i=e,a=null;return xt(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(i={},t?i[t]=e:i.milliseconds=e):(a=zo.exec(e))?(n="-"===a[1]?-1:1,i={y:0,d:_(a[uo])*n,h:_(a[lo])*n,m:_(a[co])*n,s:_(a[fo])*n,ms:_(Pt(1e3*a[po]))*n}):(a=Go.exec(e))?(n="-"===a[1]?-1:1,i={y:Yt(a[2],n),M:Yt(a[3],n),w:Yt(a[4],n),d:Yt(a[5],n),h:Yt(a[6],n),m:Yt(a[7],n),s:Yt(a[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=zt(wt(i.from),wt(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),r=new Ot(i),xt(e)&&c(e,"_locale")&&(r._locale=e._locale),r}function Yt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Kt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(e,t){var n;return e.isValid()&&t.isValid()?(t=Mt(t,e),e.isBefore(t)?n=Kt(e,t):(n=Kt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Gt(e,t){return function(n,r){var o,i;return null===r||isNaN(+r)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=$t(n,r),Xt(this,o,e),this}}function Xt(e,n,r,o){var i=n._milliseconds,a=Pt(n._days),s=Pt(n._months);e.isValid()&&(o=null==o||o,i&&e._d.setTime(e._d.valueOf()+i*r),a&&q(e,"Date",V(e,"Date")+a*r),s&&ce(e,V(e,"Month")+s*r),o&&t.updateOffset(e,a||s))}function Jt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Qt(e,n){var r=e||wt(),o=Mt(r,this).startOf("day"),i=t.calendarFormat(this,o)||"sameElse",a=n&&(S(n[i])?n[i].call(this,r):n[i]);return this.format(a||this.localeData().calendar(i,this,wt(r)))}function Zt(){return new g(this)}function en(e,t){var n=b(e)?e:wt(e);return!(!this.isValid()||!n.isValid())&&(t=R(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function tn(e,t){var n=b(e)?e:wt(e);return!(!this.isValid()||!n.isValid())&&(t=R(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function nn(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function rn(e,t){var n,r=b(e)?e:wt(e);return!(!this.isValid()||!r.isValid())&&(t=R(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function on(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function an(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sn(e,t,n){var r,o,i,a;return this.isValid()?(r=Mt(e,this),r.isValid()?(o=6e4*(r.utcOffset()-this.utcOffset()),t=R(t),"year"===t||"month"===t||"quarter"===t?(a=un(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(i=this-r,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?a:w(a)):NaN):NaN}function un(e,t){var n,r,o=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(o,"months");return t-i<0?(n=e.clone().add(o-1,"months"),r=(t-i)/(i-n)):(n=e.clone().add(o+1,"months"),r=(t-i)/(n-i)),-(o+r)||0}function ln(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cn(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?X(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):S(Date.prototype.toISOString)?this.toDate().toISOString():X(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+o)}function dn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=X(this,e);return this.localeData().postformat(n)}function pn(e,t){return this.isValid()&&(b(e)&&e.isValid()||wt(e).isValid())?$t({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hn(e){return this.from(wt(),e)}function mn(e,t){return this.isValid()&&(b(e)&&e.isValid()||wt(e).isValid())?$t({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vn(e){return this.to(wt(),e)}function yn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function gn(){return this._locale}function bn(e){switch(e=R(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wn(e){return void 0===(e=R(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function _n(){return this._d.valueOf()-6e4*(this._offset||0)}function kn(){return Math.floor(this.valueOf()/1e3)}function En(){return new Date(this.valueOf())}function Tn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Cn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Sn(){return this.isValid()?this.toISOString():null}function On(){return m(this)}function xn(){return f({},h(this))}function Pn(){return h(this).overflow}function jn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Nn(e,t){K(0,[e,e.length],0,t)}function Mn(e){return Ln.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function An(e){return Ln.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function In(){return Te(this.year(),1,4)}function Dn(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function Ln(e,t,n,r,o){var i;return null==e?Ee(this,r,o).year:(i=Te(e,r,o),t>i&&(t=i),Rn.call(this,e,t,n,r,o))}function Rn(e,t,n,r,o){var i=ke(e,t,n,r,o),a=we(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Un(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Fn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Bn(e,t){t[po]=_(1e3*("0."+e))}function Wn(){return this._isUTC?"UTC":""}function Vn(){return this._isUTC?"Coordinated Universal Time":""}function qn(e){return wt(1e3*e)}function Hn(){return wt.apply(null,arguments).parseZone()}function $n(e){return e}function Yn(e,t,n,r){var o=nt(),i=d().set(r,t);return o[n](i,e)}function Kn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Yn(e,t,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=Yn(e,r,n,"month");return o}function zn(e,t,n,r){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var o=nt(),i=e?o._week.dow:0;if(null!=n)return Yn(t,(n+i)%7,r,"day");var a,u=[];for(a=0;a<7;a++)u[a]=Yn(t,(a+i)%7,r,"day");return u}function Gn(e,t){return Kn(e,t,"months")}function Xn(e,t){return Kn(e,t,"monthsShort")}function Jn(e,t,n){return zn(e,t,n,"weekdays")}function Qn(e,t,n){return zn(e,t,n,"weekdaysShort")}function Zn(e,t,n){return zn(e,t,n,"weekdaysMin")}function er(){var e=this._data;return this._milliseconds=ai(this._milliseconds),this._days=ai(this._days),this._months=ai(this._months),e.milliseconds=ai(e.milliseconds),e.seconds=ai(e.seconds),e.minutes=ai(e.minutes),e.hours=ai(e.hours),e.months=ai(e.months),e.years=ai(e.years),this}function tr(e,t,n,r){var o=$t(t,n);return e._milliseconds+=r*o._milliseconds,e._days+=r*o._days,e._months+=r*o._months,e._bubble()}function nr(e,t){return tr(this,e,t,1)}function rr(e,t){return tr(this,e,t,-1)}function or(e){return e<0?Math.floor(e):Math.ceil(e)}function ir(){var e,t,n,r,o,i=this._milliseconds,a=this._days,s=this._months,u=this._data;return i>=0&&a>=0&&s>=0||i<=0&&a<=0&&s<=0||(i+=864e5*or(sr(s)+a),a=0,s=0),u.milliseconds=i%1e3,e=w(i/1e3),u.seconds=e%60,t=w(e/60),u.minutes=t%60,n=w(t/60),u.hours=n%24,a+=w(n/24),o=w(ar(a)),s+=o,a-=or(sr(o)),r=w(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function ar(e){return 4800*e/146097}function sr(e){return 146097*e/4800}function ur(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=R(e))||"year"===e)return t=this._days+r/864e5,n=this._months+ar(t),"month"===e?n:n/12;switch(t=this._days+Math.round(sr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function lr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12):NaN}function cr(e){return function(){return this.as(e)}}function fr(e){return e=R(e),this.isValid()?this[e+"s"]():NaN}function dr(e){return function(){return this.isValid()?this._data[e]:NaN}}function pr(){return w(this.days()/7)}function hr(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function mr(e,t,n){var r=$t(e).abs(),o=ki(r.as("s")),i=ki(r.as("m")),a=ki(r.as("h")),s=ki(r.as("d")),u=ki(r.as("M")),l=ki(r.as("y")),c=o<=Ei.ss&&["s",o]||o<Ei.s&&["ss",o]||i<=1&&["m"]||i<Ei.m&&["mm",i]||a<=1&&["h"]||a<Ei.h&&["hh",a]||s<=1&&["d"]||s<Ei.d&&["dd",s]||u<=1&&["M"]||u<Ei.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,hr.apply(null,c)}function vr(e){return void 0===e?ki:"function"==typeof e&&(ki=e,!0)}function yr(e,t){return void 0!==Ei[e]&&(void 0===t?Ei[e]:(Ei[e]=t,"s"===e&&(Ei.ss=t-1),!0))}function gr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=mr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function br(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Ti(this._milliseconds)/1e3,o=Ti(this._days),i=Ti(this._months);e=w(r/60),t=w(e/60),r%=60,e%=60,n=w(i/12),i%=12;var a=n,s=i,u=o,l=t,c=e,f=r,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(u?u+"D":"")+(l||c||f?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(f?f+"S":""):"P0D"}var wr,_r;_r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var kr=_r,Er=t.momentProperties=[],Tr=!1,Cr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Sr;Sr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var Or,xr=Sr,Pr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},jr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Nr="Invalid date",Mr="%d",Ar=/\d{1,2}/,Ir={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Dr={},Lr={},Rr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ur=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fr={},Br={},Wr=/\d/,Vr=/\d\d/,qr=/\d{3}/,Hr=/\d{4}/,$r=/[+-]?\d{6}/,Yr=/\d\d?/,Kr=/\d\d\d\d?/,zr=/\d\d\d\d\d\d?/,Gr=/\d{1,3}/,Xr=/\d{1,4}/,Jr=/[+-]?\d{1,6}/,Qr=/\d+/,Zr=/[+-]?\d+/,eo=/Z|[+-]\d\d:?\d\d/gi,to=/Z|[+-]\d\d(?::?\d\d)?/gi,no=/[+-]?\d+(\.\d{1,3})?/,ro=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,oo={},io={},ao=0,so=1,uo=2,lo=3,co=4,fo=5,po=6,ho=7,mo=8;Or=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var vo=Or;K("M",["MM",2],"Mo",function(){return this.month()+1}),K("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),K("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),F("month",8),Q("M",Yr),Q("MM",Yr,Vr),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),ne(["M","MM"],function(e,t){t[so]=_(e)-1}),ne(["MMM","MMMM"],function(e,t,n,r){var o=n._locale.monthsParse(e,r,n._strict);null!=o?t[so]=o:h(n).invalidMonth=e});var yo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,go="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wo=ro,_o=ro;K("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),K(0,["YY",2],0,function(){return this.year()%100}),K(0,["YYYY",4],0,"year"),K(0,["YYYYY",5],0,"year"),K(0,["YYYYYY",6,!0],0,"year"),L("year","y"),F("year",1),Q("Y",Zr),Q("YY",Yr,Vr),Q("YYYY",Xr,Hr),Q("YYYYY",Jr,$r),Q("YYYYYY",Jr,$r),ne(["YYYYY","YYYYYY"],ao),ne("YYYY",function(e,n){n[ao]=2===e.length?t.parseTwoDigitYear(e):_(e)}),ne("YY",function(e,n){n[ao]=t.parseTwoDigitYear(e)}),ne("Y",function(e,t){t[ao]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var ko=W("FullYear",!0);K("w",["ww",2],"wo","week"),K("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),F("week",5),F("isoWeek",5),Q("w",Yr),Q("ww",Yr,Vr),Q("W",Yr),Q("WW",Yr,Vr),re(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=_(e)});var Eo={dow:0,doy:6};K("d",0,"do","day"),K("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),K("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),K("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),K("e",0,0,"weekday"),K("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),Q("d",Yr),Q("e",Yr),Q("E",Yr),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),re(["dd","ddd","dddd"],function(e,t,n,r){var o=n._locale.weekdaysParse(e,r,n._strict);null!=o?t.d=o:h(n).invalidWeekday=e}),re(["d","e","E"],function(e,t,n,r){t[r]=_(e)});var To="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Co="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),So="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Oo=ro,xo=ro,Po=ro;K("H",["HH",2],0,"hour"),K("h",["hh",2],0,He),K("k",["kk",2],0,$e),K("hmm",0,0,function(){return""+He.apply(this)+Y(this.minutes(),2)}),K("hmmss",0,0,function(){return""+He.apply(this)+Y(this.minutes(),2)+Y(this.seconds(),2)}),K("Hmm",0,0,function(){return""+this.hours()+Y(this.minutes(),2)}),K("Hmmss",0,0,function(){return""+this.hours()+Y(this.minutes(),2)+Y(this.seconds(),2)}),Ye("a",!0),Ye("A",!1),L("hour","h"),F("hour",13),Q("a",Ke),Q("A",Ke),Q("H",Yr),Q("h",Yr),Q("k",Yr),Q("HH",Yr,Vr),Q("hh",Yr,Vr),Q("kk",Yr,Vr),Q("hmm",Kr),Q("hmmss",zr),Q("Hmm",Kr),Q("Hmmss",zr),ne(["H","HH"],lo),ne(["k","kk"],function(e,t,n){var r=_(e);t[lo]=24===r?0:r}),ne(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ne(["h","hh"],function(e,t,n){t[lo]=_(e),h(n).bigHour=!0}),ne("hmm",function(e,t,n){var r=e.length-2;t[lo]=_(e.substr(0,r)),t[co]=_(e.substr(r)),h(n).bigHour=!0}),ne("hmmss",function(e,t,n){var r=e.length-4,o=e.length-2;t[lo]=_(e.substr(0,r)),t[co]=_(e.substr(r,2)),t[fo]=_(e.substr(o)),h(n).bigHour=!0}),ne("Hmm",function(e,t,n){var r=e.length-2;t[lo]=_(e.substr(0,r)),t[co]=_(e.substr(r))}),ne("Hmmss",function(e,t,n){var r=e.length-4,o=e.length-2;t[lo]=_(e.substr(0,r)),t[co]=_(e.substr(r,2)),t[fo]=_(e.substr(o))});var jo,No=/[ap]\.?m?\.?/i,Mo=W("Hours",!0),Ao={calendar:Pr,longDateFormat:jr,invalidDate:Nr,ordinal:Mr,dayOfMonthOrdinalParse:Ar,relativeTime:Ir,months:go,monthsShort:bo,week:Eo,weekdays:To,weekdaysMin:So,weekdaysShort:Co,meridiemParse:No},Io={},Do={},Lo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ro=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Uo=/Z|[+-]\d\d(?::?\d\d)?/,Fo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Bo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Wo=/^\/?Date\((\-?\d+)/i,Vo=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;t.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var qo=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),Ho=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}),$o=function(){return Date.now?Date.now():+new Date},Yo=["year","quarter","month","week","day","hour","minute","second","millisecond"];jt("Z",":"),jt("ZZ",""),Q("Z",to),Q("ZZ",to),ne(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nt(to,e)});var Ko=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var zo=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Go=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;$t.fn=Ot.prototype,$t.invalid=St;var Xo=Gt(1,"add"),Jo=Gt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Qo=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});K(0,["gg",2],0,function(){return this.weekYear()%100}),K(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Nn("gggg","weekYear"),Nn("ggggg","weekYear"),Nn("GGGG","isoWeekYear"),Nn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),Q("G",Zr),Q("g",Zr),Q("GG",Yr,Vr),Q("gg",Yr,Vr),Q("GGGG",Xr,Hr),Q("gggg",Xr,Hr),Q("GGGGG",Jr,$r),Q("ggggg",Jr,$r),re(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=_(e)}),re(["gg","GG"],function(e,n,r,o){n[o]=t.parseTwoDigitYear(e)}),K("Q",0,"Qo","quarter"),L("quarter","Q"),F("quarter",7),Q("Q",Wr),ne("Q",function(e,t){t[so]=3*(_(e)-1)}),K("D",["DD",2],"Do","date"),L("date","D"),F("date",9),Q("D",Yr),Q("DD",Yr,Vr),Q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ne(["D","DD"],uo),ne("Do",function(e,t){t[uo]=_(e.match(Yr)[0],10)});var Zo=W("Date",!0);K("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),F("dayOfYear",4),Q("DDD",Gr),Q("DDDD",qr),ne(["DDD","DDDD"],function(e,t,n){n._dayOfYear=_(e)}),K("m",["mm",2],0,"minute"),L("minute","m"),F("minute",14),Q("m",Yr),Q("mm",Yr,Vr),ne(["m","mm"],co);var ei=W("Minutes",!1);K("s",["ss",2],0,"second"),L("second","s"),F("second",15),Q("s",Yr),Q("ss",Yr,Vr),ne(["s","ss"],fo);var ti=W("Seconds",!1);K("S",0,0,function(){return~~(this.millisecond()/100)}),K(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),K(0,["SSS",3],0,"millisecond"),K(0,["SSSS",4],0,function(){return 10*this.millisecond()}),K(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),K(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),K(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),K(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),K(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),F("millisecond",16),Q("S",Gr,Wr),Q("SS",Gr,Vr),Q("SSS",Gr,qr);var ni;for(ni="SSSS";ni.length<=9;ni+="S")Q(ni,Qr);for(ni="S";ni.length<=9;ni+="S")ne(ni,Bn);var ri=W("Milliseconds",!1);K("z",0,0,"zoneAbbr"),K("zz",0,0,"zoneName");var oi=g.prototype;oi.add=Xo,oi.calendar=Qt,oi.clone=Zt,oi.diff=sn,oi.endOf=wn,oi.format=dn,oi.from=pn,oi.fromNow=hn,oi.to=mn,oi.toNow=vn,oi.get=H,oi.invalidAt=Pn,oi.isAfter=en,oi.isBefore=tn,oi.isBetween=nn,oi.isSame=rn,oi.isSameOrAfter=on,oi.isSameOrBefore=an,oi.isValid=On,oi.lang=Qo,oi.locale=yn,oi.localeData=gn,oi.max=Ho,oi.min=qo,oi.parsingFlags=xn,oi.set=$,oi.startOf=bn,oi.subtract=Jo,oi.toArray=Tn,oi.toObject=Cn,oi.toDate=En,oi.toISOString=cn,oi.inspect=fn,oi.toJSON=Sn,oi.toString=ln,oi.unix=kn,oi.valueOf=_n,oi.creationData=jn,oi.year=ko,oi.isLeapYear=ge,oi.weekYear=Mn,oi.isoWeekYear=An,oi.quarter=oi.quarters=Un,oi.month=fe,oi.daysInMonth=de,oi.week=oi.weeks=xe,oi.isoWeek=oi.isoWeeks=Pe,oi.weeksInYear=Dn,oi.isoWeeksInYear=In,oi.date=Zo,oi.day=oi.days=Re,oi.weekday=Ue,oi.isoWeekday=Fe,oi.dayOfYear=Fn,oi.hour=oi.hours=Mo,oi.minute=oi.minutes=ei,oi.second=oi.seconds=ti,oi.millisecond=oi.milliseconds=ri,oi.utcOffset=It,oi.utc=Lt,oi.local=Rt,oi.parseZone=Ut,oi.hasAlignedHourOffset=Ft,oi.isDST=Bt,oi.isLocal=Vt,oi.isUtcOffset=qt,oi.isUtc=Ht,oi.isUTC=Ht,oi.zoneAbbr=Wn,oi.zoneName=Vn,oi.dates=T("dates accessor is deprecated. Use date instead.",Zo),oi.months=T("months accessor is deprecated. Use month instead",fe),oi.years=T("years accessor is deprecated. Use year instead",ko),oi.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Dt),oi.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Wt);var ii=P.prototype;ii.calendar=j,ii.longDateFormat=N,ii.invalidDate=M,ii.ordinal=A,ii.preparse=$n,ii.postformat=$n,ii.relativeTime=I,ii.pastFuture=D,ii.set=O,ii.months=ae,ii.monthsShort=se,ii.monthsParse=le,ii.monthsRegex=he,ii.monthsShortRegex=pe,ii.week=Ce,ii.firstDayOfYear=Oe,ii.firstDayOfWeek=Se,ii.weekdays=Me,ii.weekdaysMin=Ie,ii.weekdaysShort=Ae,ii.weekdaysParse=Le,ii.weekdaysRegex=Be,ii.weekdaysShortRegex=We,ii.weekdaysMinRegex=Ve,ii.isPM=ze,ii.meridiem=Ge,Ze("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=T("moment.lang is deprecated. Use moment.locale instead.",Ze),t.langData=T("moment.langData is deprecated. Use moment.localeData instead.",nt);var ai=Math.abs,si=cr("ms"),ui=cr("s"),li=cr("m"),ci=cr("h"),fi=cr("d"),di=cr("w"),pi=cr("M"),hi=cr("y"),mi=dr("milliseconds"),vi=dr("seconds"),yi=dr("minutes"),gi=dr("hours"),bi=dr("days"),wi=dr("months"),_i=dr("years"),ki=Math.round,Ei={ss:44,s:45,m:45,h:22,d:26,M:11},Ti=Math.abs,Ci=Ot.prototype;return Ci.isValid=Ct,Ci.abs=er,Ci.add=nr,Ci.subtract=rr,Ci.as=ur,Ci.asMilliseconds=si,Ci.asSeconds=ui,Ci.asMinutes=li,Ci.asHours=ci,Ci.asDays=fi,Ci.asWeeks=di,Ci.asMonths=pi,Ci.asYears=hi,Ci.valueOf=lr,Ci._bubble=ir,Ci.get=fr,Ci.milliseconds=mi,Ci.seconds=vi,Ci.minutes=yi,Ci.hours=gi,Ci.days=bi,Ci.weeks=pr,Ci.months=wi,Ci.years=_i,Ci.humanize=gr,Ci.toISOString=br,Ci.toString=br,Ci.toJSON=br,Ci.locale=yn,Ci.localeData=gn,Ci.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",br),Ci.lang=Qo,K("X",0,0,"unix"),K("x",0,0,"valueOf"),Q("x",Zr),Q("X",no),ne("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ne("x",function(e,t,n){n._d=new Date(_(e))}),t.version="2.18.1",n(wt),t.fn=oi,t.min=kt,t.max=Et,t.now=$o,t.utc=d,t.unix=qn,t.months=Gn,t.isDate=u,t.locale=Ze,t.invalid=v,t.duration=$t,t.isMoment=b,t.weekdays=Jn,t.parseZone=Hn,t.localeData=nt,t.isDuration=xt,t.monthsShort=Xn,t.weekdaysMin=Zn,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=Qn,t.normalizeUnits=R,t.relativeTimeRounding=vr,t.relativeTimeThreshold=yr,t.calendarFormat=Jt,t.prototype=oi,t})}).call(t,n(44)(e))},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(298),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t){function n(e,t){return"string"!=typeof e&&(e=e._name),{type:"@@modal/PUSH_MODAL",payload:{name:e,params:t}}}function r(){return{type:"@@modal/POP_MODAL"}}function o(){return{type:"@@modal/CLEAN_MODALS"}}Object.defineProperty(t,"__esModule",{value:!0}),t.pushModal=n,t.popModal=r,t.cleanModals=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.repeat=function(e,t){return new Array(t+1).join(e)},o=t.pad=function(e,t){return r("0",t-e.toString().length)+e};t.formatTime=function(e){return o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3)},t.timer="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(339),i=n(297),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.default={ajaxGet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.ajaxGet.apply(null,t).then(function(e){if(e.code>0)throw new Error(e.message);return e}).catch(function(e){throw new Error(e)})},ajaxPost:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.ajaxPost.apply(null,t).then(function(e){if(e.code>0)throw new Error(e.message);return e}).catch(function(e){throw new Error(e)})}},e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"中国",value:"+86"},{name:"香港（中国）",value:"+852"},{name:"台湾（中国）",value:"+886"},{name:"澳门（中国）",value:"+853"},{name:"阿尔巴尼亚",value:"+355"},{name:"阿尔及利亚",value:"+213"},{name:"阿富汗",value:"+93"},{name:"阿根廷",value:"+54"},{name:"爱尔兰",value:"+353"},{name:"埃及",value:"+20"},{name:"埃塞俄比亚",value:"+251"},{name:"爱沙尼亚",value:"+372"},{name:"阿拉伯联合酋长国",value:"+971"},{name:"阿鲁巴",value:"+297"},{name:"阿曼",value:"+968"},{name:"安道尔",value:"+376"},{name:"安哥拉",value:"+244"},{name:"安圭拉",value:"+1264"},{name:"安提瓜和巴布达",value:"+1268"},{name:"澳大利亚",value:"+61"},{name:"奥地利",value:"+43"},{name:"阿塞拜疆",value:"+994"},{name:"巴巴多斯",value:"+1246"},{name:"巴布亚新几内亚",value:"+675"},{name:"巴哈马",value:"+1242"},{name:"白俄罗斯",value:"+375"},{name:"百慕大",value:"+1441"},{name:"巴基斯坦",value:"+92"},{name:"巴拉圭",value:"+595"},{name:"巴林",value:"+973"},{name:"巴拿马",value:"+507"},{name:"保加利亚",value:"+359"},{name:"巴西",value:"+55"},{name:"北马里亚纳群岛",value:"+1670"},{name:"贝宁",value:"+229"},{name:"比利时",value:"+32"},{name:"冰岛",value:"+354"},{name:"博兹瓦纳",value:"+267"},{name:"波多黎各",value:"+1"},{name:"波兰",value:"+48"},{name:"玻利维亚",value:"+591"},{name:"伯利兹",value:"+501"},{name:"波斯尼亚和黑塞哥维那",value:"+387"},{name:"不丹",value:"+975"},{name:"布基纳法索",value:"+226"},{name:"布隆迪",value:"+257"},{name:"朝鲜",value:"+850"},{name:"赤道几内亚",value:"+240"},{name:"丹麦",value:"+45"},{name:"德国",value:"+49"},{name:"东帝汶",value:"+670"},{name:"多哥",value:"+228"},{name:"多米尼加共和国",value:"+1809"},{name:"多米尼克",value:"+1767"},{name:"厄瓜多尔",value:"+593"},{name:"厄立特里亚",value:"+291"},{name:"俄罗斯",value:"+7"},{name:"法国",value:"+33"},{name:"法罗群岛",value:"+298"},{name:"梵蒂冈",value:"+379"},{name:"法属波利尼西亚",value:"+689"},{name:"法属圣马丁",value:"+1599"},{name:"斐济",value:"+679"},{name:"菲律宾",value:"+63"},{name:"芬兰",value:"+358"},{name:"佛得角",value:"+238"},{name:"福克兰群岛",value:"+500"},{name:"冈比亚",value:"+220"},{name:"刚果（布）",value:"+242"},{name:"刚果（金）",value:"+243"},{name:"格陵兰",value:"+299"},{name:"格林纳达",value:"+1473"},{name:"格鲁吉亚",value:"+995"},{name:"哥伦比亚",value:"+57"},{name:"哥斯达黎加",value:"+506"},{name:"关岛",value:"+1671"},{name:"古巴",value:"+53"},{name:"圭亚那",value:"+592"},{name:"海地",value:"+509"},{name:"韩国",value:"+82"},{name:"哈萨克斯坦",value:"+7"},{name:"黑山",value:"+382"},{name:"荷兰",value:"+31"},{name:"洪都拉斯",value:"+504"},{name:"加纳",value:"+233"},{name:"加拿大",value:"+1"},{name:"柬埔寨",value:"+855"},{name:"加蓬",value:"+241"},{name:"吉布提",value:"+253"},{name:"捷克共和国",value:"+420"},{name:"吉尔吉斯斯坦",value:"+996"},{name:"基里巴斯",value:"+686"},{name:"津巴布韦",value:"+263"},{name:"几内亚",value:"+224"},{name:"几内亚比绍",value:"+245"},{name:"开曼群岛",value:"+1345"},{name:"喀麦隆",value:"+237"},{name:"卡塔尔",value:"+974"},{name:"科科斯（基林）群岛",value:"+61"},{name:"克罗地亚",value:"+385"},{name:"科摩罗",value:"+269"},{name:"肯尼亚",value:"+254"},{name:"科特迪瓦",value:"+225"},{name:"科威特",value:"+965"},{name:"库克群岛",value:"+682"},{name:"库拉索",value:"+599"},{name:"莱索托",value:"+266"},{name:"老挝",value:"+856"},{name:"拉脱维亚",value:"+371"},{name:"黎巴嫩",value:"+961"},{name:"利比里亚",value:"+231"},{name:"利比亚",value:"+218"},{name:"列支敦士登",value:"+423"},{name:"立陶宛",value:"+370"},{name:"罗马尼亚",value:"+40"},{name:"卢森堡",value:"+352"},{name:"卢旺达",value:"+250"},{name:"马达加斯加",value:"+261"},{name:"马尔代夫",value:"+960"},{name:"马耳他",value:"+356"},{name:"马来西亚",value:"+60"},{name:"马拉维",value:"+265"},{name:"马里",value:"+223"},{name:"曼岛",value:"+44"},{name:"毛里求斯",value:"+230"},{name:"毛里塔尼亚",value:"+222"},{name:"马其顿",value:"+389"},{name:"马绍尔群岛",value:"+692"},{name:"马约特",value:"+262"},{name:"美国",value:"+1"},{name:"美属萨摩亚",value:"+1684"},{name:"美属维京群岛",value:"+1340"},{name:"蒙古",value:"+976"},{name:"孟加拉国",value:"+880"},{name:"蒙特塞拉特",value:"+1664"},{name:"缅甸",value:"+95"},{name:"密克罗尼西亚",value:"+691"},{name:"秘鲁",value:"+51"},{name:"摩尔多瓦",value:"+373"},{name:"摩洛哥",value:"+212"},{name:"摩纳哥",value:"+377"},{name:"莫桑比克",value:"+258"},{name:"墨西哥",value:"+52"},{name:"纳米比亚",value:"+264"},{name:"南非",value:"+27"},{name:"南极洲",value:"+672"},{name:"瑙鲁",value:"+674"},{name:"尼泊尔",value:"+977"},{name:"尼加拉瓜",value:"+505"},{name:"尼日尔",value:"+227"},{name:"尼日利亚",value:"+234"},{name:"纽埃",value:"+683"},{name:"挪威",value:"+47"},{name:"帕劳",value:"+680"},{name:"皮特凯恩群岛",value:"+870"},{name:"葡萄牙",value:"+351"},{name:"日本",value:"+81"},{name:"瑞典",value:"+46"},{name:"瑞士",value:"+41"},{name:"萨尔瓦多",value:"+503"},{name:"塞尔维亚",value:"+381"},{name:"塞拉利昂",value:"+232"},{name:"塞内加尔",value:"+221"},{name:"塞浦路斯",value:"+357"},{name:"塞舌尔",value:"+248"},{name:"萨摩亚",value:"+685"},{name:"沙特阿拉伯",value:"+966"},{name:"圣巴泰勒米",value:"+590"},{name:"圣诞岛",value:"+61"},{name:"圣多美和普林西比",value:"+239"},{name:"圣赫勒拿",value:"+290"},{name:"圣基茨和尼维斯",value:"+1869"},{name:"圣卢西亚",value:"+1758"},{name:"圣马力诺",value:"+378"},{name:"圣皮埃尔和密克隆群岛",value:"+508"},{name:"圣文森特和格林纳丁斯",value:"+1784"},{name:"斯里兰卡",value:"+94"},{name:"斯洛伐克",value:"+421"},{name:"斯洛文尼亚",value:"+386"},{name:"斯威士兰",value:"+268"},{name:"苏丹",value:"+249"},{name:"苏里南",value:"+597"},{name:"所罗门群岛",value:"+677"},{name:"索马里",value:"+252"},{name:"泰国",value:"+66"},{name:"塔吉克斯坦",value:"+992"},{name:"汤加",value:"+676"},{name:"坦桑尼亚",value:"+255"},{name:"特克斯和凯科斯群岛",value:"+1649"},{name:"特立尼达和多巴哥",value:"+1868"},{name:"土耳其",value:"+90"},{name:"土库曼斯坦",value:"+993"},{name:"突尼斯",value:"+216"},{name:"托克劳",value:"+690"},{name:"图瓦卢",value:"+688"},{name:"瓦利斯和富图纳",value:"+681"},{name:"瓦努阿图",value:"+678"},{name:"危地马拉",value:"+502"},{name:"委内瑞拉",value:"+58"},{name:"文莱",value:"+673"},{name:"乌干达",value:"+256"},{name:"乌克兰",value:"+380"},{name:"乌拉圭",value:"+598"},{name:"乌兹别克斯坦",value:"+998"},{name:"西班牙",value:"+34"},{name:"希腊",value:"+30"},{name:"新加坡",value:"+65"},{name:"新喀里多尼亚",value:"+687"},{name:"新西兰",value:"+64"},{name:"匈牙利",value:"+36"},{name:"叙利亚",value:"+963"},{name:"牙买加",value:"+1876"},{name:"亚美尼亚",value:"+374"},{name:"也门",value:"+967"},{name:"意大利",value:"+39"},{name:"伊拉克",value:"+964"},{name:"伊朗",value:"+98"},{name:"印度",value:"+91"},{name:"印度尼西亚",value:"+62"},{name:"英国",value:"+44"},{name:"英属维京群岛",value:"+1284"},{name:"以色列",value:"+972"},{name:"约旦",value:"+962"},{name:"越南",value:"+84"},{name:"赞比亚",value:"+260"},{name:"乍得",value:"+235"},{name:"直布罗陀",value:"+350"},{name:"智利",value:"+56"},{name:"中非共和国",value:"+236"}],e.exports=t.default},function(e,t,n){function r(e){return e?"-"===e[0]?Promise.resolve(!1):new window.Promise(function(t,n){var r=setTimeout(function(){n(new Error("Request timeout")),r=null},500);(0,i.ajaxGet)(o.NEW_SEQ.replace("{%guid%}",e)).then(t).catch(function(e){r&&(clearTimeout(r),r=null,n(e))})}).then(function(e){return void 0!==e.code?e.data:e}).catch(function(){return!1}):window.Promise.resolve()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(35),i=n(7);e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.createElement("style");e.id="ql-rule",document.head.appendChild(e),e.sheet.insertRule("\n    .gc-columnHeader-normal,\n    .gc-rowHeader-normal,\n    .gc-columnHeader-selected,\n    .gc-columnHeader-highlight,\n    .gc-rowHeader-selected,\n    .gc-rowHeader-highlight,\n    .gc-rowHeader-hover,\n    .gc-columnHeader-hover {\n      color: transparent\n    }\n  ",0),e.sheet.insertRule("\n    .sm-sheet-columnHeader-normal,\n    .sm-sheet-rowHeader-normal,\n    .sm-sheet-columnHeader-selected,\n    .sm-sheet-columnHeader-highlight,\n    .sm-sheet-rowHeader-selected,\n    .sm-sheet-rowHeader-highlight,\n    .sm-sheet-rowHeader-hover,\n    .sm-sheet-columnHeader-hover {\n      color: transparent\n    }\n  ",0)}var i=n(0),a=r(i),s=n(5),u=r(s),l=n(93),c=n(148),f=n(4),d=r(f),p=n(1),h=r(p),m=n(147),v=r(m),y=n(23),g=r(y),b=n(145),w=!1;e.exports=function(e,t,n){var r=document.createElement("div"),i=e.guid;return e.cacheDelta=new l.Delta,(0,b.loadSheet)().then(function(s){function f(e){var t=e.store;return t||(t=p()),t}w||(w=!0,o());var p=s.Store,m=s.CsStore,y=s.modelActions,b=s.msgActions,_=s.SheetContainer,k=s.ReadonlySheetContainer;r.setAttribute("class","qltable-wrapper");var E=f(e);h.default.assign(e,{store:E,handleFocus:function(){d.default.notify("quill:handleFocus",i)},clearSelection:function(){d.default.notify("quill:clearSelection",i)},receivedNewChange:function(e){E.dispatch(b.receivedNewChange(e.data))},destroy:function(){u.default.unmountComponentAtNode(r)}});var T=new l.Delta([t]).compose(e.cacheDelta);e.inited=!0,E.dispatch(y.loadedSpreadsheet(T)),E.dispatch(b.receivedInitSheet(T,1,i,!0)),m.destory(i),m.getInst({store:E,guid:i});var C=n?k:_;u.default.render(a.default.createElement(c.Provider,{store:E},a.default.createElement(C,{guid:i,disableWorker:!0,cooperation:v.default,Contact:g.default,isQltable:!0})),r)},"sheet"),r}},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(4),d=o(f),p=n(200),h=n(9),m=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=window.cow.currentFile.updated_at||new Date,s=(0,p.format)(o)+"更新",u=n.fileTypeName=(0,h.getFileTypeName)(window.cow.currentFile.type);return u||r("监测 cow.currentFile.type"+cow.currentFile.type,"status_bar.jsx",0,0,{}),"刚刚更新"===s&&(s=((0,h.isDoc)(window.cow.pageType),u+"将实时更新")),n.state={offline:!1,displayText:s,lastUpdateTime:o,timerId:-1},n.clickNum=0,n}return s(t,e),u(t,[{key:"componentWillMount",value:function(){this._triggerCleanData=this._triggerCleanData.bind(this)}},{key:"componentDidMount",value:function(){var e=this;d.default.attachOne("saveStatus:start",function(){return e._startSave()}),d.default.attachOne("saveStatus:success",function(){return e._saveSuccess()}),d.default.attachOne("saveStatus:error",function(){return e._saveError()}),d.default.attachOne("saveStatus:getUpdate",function(){return e._getUpdateFromServer()}),d.default.attachOne("saveStatus:offline",function(){return e._saveOffline()}),d.default.attachOne("saveStatus:offlineSuccess",function(){return e._saveOfflineSuccess()}),d.default.attachOne("saveStatus:uninit",function(){return e._saveUninit()}),d.default.attach("doc:goback",function(){return e._destroyTimerTick()}),d.default.attach("spreadsheet:exit",function(){return e._destroyTimerTick()}),this._tellClient(),this._createTimerTick()}},{key:"_startSave",value:function(){this._destroyTimerTick();var e="正在保存...";this.state.offline&&(e="正在离线保存..."),this.setState({displayText:e},this._tellClient)}},{key:"_saveSuccess",value:function(){this.setState({offline:!1,displayText:"所有更改都已保存在云端",lastUpdateTime:(new Date).toString()},this._tellClient),this._createTimerTick()}},{key:"_saveError",value:function(){this.setState({displayText:"保存失败"},this._tellClient)}},{key:"_saveOffline",value:function(){this.setState({offline:!0,displayText:"已离线保存"},this._tellClient)}},{key:"_saveOfflineSuccess",value:function(){this.setState({displayText:"离线保存成功"},this._tellClient)}},{key:"_saveUninit",value:function(){this.setState({displayText:"初始化中"},this._tellClient)}},{key:"_getUpdateFromServer",value:function(){this.setState({displayText:this.fileTypeName+"将实时更新",lastUpdateTime:(new Date).toString()},this._tellClient),this._destroyTimerTick(),this._createTimerTick()}},{key:"_createTimerTick",value:function(){var e=this,t=setInterval(function(){if(e.state.lastUpdateTime){var t=(0,p.format)(e.state.lastUpdateTime)+"更新";"刚刚更新"===t&&(t=this.fileTypeName+"将实时更新"),e.setState({displayText:t},e._tellClient)}},18e5);e.setState({timerId:t})}},{key:"_destroyTimerTick",value:function(){clearInterval(this.state.timerId)}},{key:"_tellClient",value:function(){if((0,h.isClient)()){var e=this.state.displayText;d.default.notify("updateSaveStatus",{message:e})}}},{key:"_triggerCleanData",value:function(){var e=(new Date).getTime();0===this.clickNum&&(this.start=e),0!==this.clickNum&&e-this.start>1500&&(this.start=e,this.clickNum=0),this.clickNum+=1,5===this.clickNum&&(this.clickNum=0,d.default.notify("statusBar:triggerCleanData"))}},{key:"render",value:function(){var e;return"保存失败"===this.state.displayText&&(e={color:"#ee7b70"}),c.default.createElement("span",{className:this.props.customClassName,style:e,id:"save-status",onClick:this._triggerCleanData},this.state.displayText)}}]),t}(l.Component);t.default=m,m.propTypes={customClassName:c.default.PropTypes.string},e.exports=t.default}).call(t,n(174))},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(516),i=n(523),a=n(277);e.exports=r},,function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var i=n(0),a=o(i),s=n(4),u=o(s),l=n(9),c=r(l),f=c.isClient();e.exports=a.default.createClass({displayName:"exports",propTypes:{customClass:a.default.PropTypes.string,placeholder:a.default.PropTypes.string,defaultValue:a.default.PropTypes.string,autoWidth:a.default.PropTypes.bool,tooltip:a.default.PropTypes.string},getInitialState:function(){return{inputWidth:this._getInputMinWidth(),value:this.props.defaultValue,inputValue:this.props.defaultValue,showTooltip:!1,focused:!1}},componentDidMount:function(){this._copyInputStyles(),this._updateInputWidth()},shouldComponentUpdate:function(e,t){return t!=this.state},componentDidUpdate:function(){this._updateInputWidth()},render:function(){var e=this.props,t={};this.state.inputWidth&&(t.width=this.state.inputWidth+"px");var n=this.state.showTooltip&&!this.state.focused?" active":"",r=e.readOnly;return a.default.createElement("div",{className:"span-input-wrap"},a.default.createElement("input",{className:e.customClass+" span-input",placeholder:e.placeholder||"输入",defaultValue:e.defaultValue||"石墨表格",readOnly:r,onChange:this._onChange,onBlur:this._onBlur,onFocus:r?null:this._onFocus,onKeyUp:this._onKeyUp,onKeyDown:this._onKeyDown,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,value:this.state.inputValue,style:t,maxLength:100,ref:"input"}),a.default.createElement("span",{ref:"input-pre",className:e.customClass+"-pre span-input-pre"},this.state.value),a.default.createElement("span",{className:"tooltip span-input-tooltip s-tooltip"+n},this.props.tooltip))},getValue:function(){return this.state.inputValue},setValue:function(e){this.setState({value:e,inputValue:e}),this._updateInputWidth()},_copyInputStyles:function(){if(this.isMounted()&&window.getComputedStyle){var e=window.getComputedStyle(this.refs.input),t=this.refs["input-pre"];t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing}},_updateInputWidth:function(){if(""===this.state.value&&this.props.placeholder)return void this.setState({value:this.props.placeholder});if(this.props.autoWidth&&this.isMounted()&&void 0!==this.refs["input-pre"].scrollWidth){var e=this.refs["input-pre"].scrollWidth+4,t=this._getInputMinWidth(),n=this._getInputMaxWidth();e<t?e=t:e>n&&(e=n),e!==this.state.inputWidth&&this.setState({inputWidth:e})}},_getInputMinWidth:function(){var e=parseInt(this.props.minWidth);return e=isNaN(e)?0:e},_getInputMaxWidth:function(){var e=parseInt(this.props.maxWidth);return e=isNaN(e)?9999999:e},_onChange:function(e){var t=this;this.setState({value:e.target.value,inputValue:e.target.value},function(){t.props.onChange&&t.props.onChange(),t._updateInputWidth()})},_onBlur:function(e){var t=this.props;""===this.state.inputValue&&t.placeholder?this.setState({inputValue:this.props.placeholder},function(){t.onBlur&&t.onBlur()}):t.onBlur&&t.onBlur(),this.setState({focused:!1}),f&&t.enableJsBridge&&u.default.notify("sheetTitleStatus",{status:"blur"})},_onFocus:function(e){"无标题"===e.target.value&&this.setState({inputValue:""});var t=this.props;this.setState({focused:!0},function(){t.onFocus&&t.onFocus()}),f&&this.props.enableJsBridge&&u.default.notify("sheetTitleStatus",{status:"focus"})},_onKeyUp:function(e){13==e.keyCode&&e.target.blur()},_onKeyDown:function(e){if((90===e.keyCode||89===e.keyCode)&&e.ctrlKey)return e.stopPropagation(),e.preventDefault(),!1},_onMouseOver:function(e){this.props.tooltip&&!this.state.showTooltip&&this.setState({showTooltip:!0})},_onMouseOut:function(e){this.props.tooltip&&this.state.showTooltip&&this.setState({showTooltip:!1})}})},function(e,t){function n(e,t,n){void 0!==window.ga&&window.ga("send","event",e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.track=n},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(33),f=n(1),d=n(24),p=n(155),h=r(p),m=n(291),v=r(m),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getGroupedUsers=n.getGroupedUsers.bind(n),n.showAddUsersPanel=n.showAddUsersPanel.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,storage:u.PropTypes.object,getSharedUsers:u.PropTypes.func,setPermission:u.PropTypes.func,onButtonClick:u.PropTypes.func,overflow:u.PropTypes.array}}},{key:"defaultProps",get:function(){return{onButtonClick:function(){},file:cow.currentFile}}}]),s(t,[{key:"componentDidMount",value:function(){this.props.getSharedUsers(this.props.file.guid)}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.filePermissions[n.guid],o=t.permissions[n.guid];return(0,f.map)(r,function(e){var n=t.users[e],r=o[e]||"editable";return(0,f.assign)({},n,{permission:r})})}},{key:"getGroupedUsers",value:function(){var e=this.getSharedUsers(),t=[],n=[],r=[],o=this.props.file?this.props.file.teamId:0;return(0,f.forEach)(e,function(e){"owner"===e.role?t.push(e):e.team_id&&e.team_id===o?n.push(e):r.push(e)}),[].concat(t).concat(r).concat(n)}},{key:"showAddUsersPanel",value:function(){var e=this.props.file,t=window.cow.currentUser,n=this.getSharedUsers().length;(0,h.default)(t,e,p.ACTION_TYPE_ADD_COLLAB,n)&&(e.permissions&&e.permissions.collaboratorManageable?this.props.onButtonClick("add"):t.teamId&&t.teamId===e.teamId?(0,d.showAlert)({title:"你是只读权限或只能评论的权限，不能添加协作者",type:"error"}):(0,d.showAlert)({title:"你是外部协作者，没有权限添加协作者，请联系文件所有者",type:"error"}))}},{key:"render",value:function(){var e=l.default.createElement(c.TabItem,{key:"3",title:"协作者 ("+this.getSharedUsers().length+")"},l.default.createElement(v.default,{data:this.getGroupedUsers(),sharedUserCount:this.getSharedUsers().length,file:this.props.file,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-shared-users")}}));return l.default.createElement("div",{className:"teamwork-shared-users"},l.default.createElement(c.Tab,{customClass:"sm-tab",disableSetWidth:!0},e),l.default.createElement("button",{className:"btn btn-ok",onClick:this.showAddUsersPanel},"添加协作者"))}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(11),s=r(a),u={size:o.PropTypes.number,width:o.PropTypes.number,children:o.PropTypes.string,className:o.PropTypes.string},l={size:0,width:0,children:"",className:""},c=function(e,t){return e.replace(/[^\x00-\xff]/gi,"aa").length<=t?e:e.substr(0,Math.ceil(t/2))+"..."},f=function(e){var t={},n=e.children,r=(0,s.default)("sm-label",e.className,{"text-overflow":e.width>0});return e.width>0&&(t.maxWidth=e.width),e.size>0&&(n=c(n,e.size)),i.default.createElement("span",{className:r,style:t},n)};f.propTypes=u,f.defaultProps=l,t.default=f,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(33),d=n(1),p=n(34),h=n(7),m=n(153),v=r(m),y=n(590),g=r(y),b=n(291),w=r(b),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={search:"",result:[]},n.fetchSearchResults=n.fetchSearchResults.bind(n),n.getSearchResults=n.getSearchResults.bind(n),n.getUserInfoByEmail=n.getUserInfoByEmail.bind(n),n.getRecentContacts=n.getRecentContacts.bind(n),n.getTeamMembers=n.getTeamMembers.bind(n),n.onSearchChange=n.onSearchChange.bind(n),n.getSharedUsers=n.getSharedUsers.bind(n),n.latestSearchRequestId=0,n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{file:l.PropTypes.object,storage:l.PropTypes.object,getTeamMembers:l.PropTypes.func,getRecentContacts:l.PropTypes.func,setPermission:l.PropTypes.func,getSharedUsers:l.PropTypes.func,showButton:l.PropTypes.bool,onButtonClick:l.PropTypes.func,overflow:l.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},file:cow.currentFile,maxShareCount:5}}}]),u(t,[{key:"componentDidMount",value:function(){this.props.getRecentContacts(),cow.currentUser.teamId&&this.props.getTeamMembers()}},{key:"componentWillReceiveProps",value:function(e){var t=this;setTimeout(function(){t.getSearchResults()},30)}},{key:"getRecentContacts",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.permissions[n.guid];return(0,d.map)(t.recentContacts,function(e){var n=t.users[e],o=r[e];return(0,d.assign)({},n,{permission:o})})}},{key:"getTeamMembers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.permissions[n.guid];return(0,d.map)(t.teamMembers,function(e){var n=t.users[e],o=r[e];return(0,d.assign)({},n,{permission:o})})}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.filePermissions[n.guid],o=t.permissions[n.guid];return(0,d.map)(r,function(e){var n=t.users[e],r=o[e];return(0,d.assign)({},n,{permission:r})})}},{key:"fetchSearchResults",value:function(e,t,n){var r=this.props.file.id;return(0,h.ajaxPost)("/smapi/search?type=recent_contact,team_member&page=0&pageSize=100",{keyword:t,teamId:n,fileId:r}).then(function(t){if(0===t.code){var n=t.data,r=n.recent_contact.results,o=n.team_member.results,i=n.collaborator&&n.collaborator.results,a=(0,d.unionBy)(r,o,i,"id").map(function(e){return null===e.permission?s({},e,{permission:void 0}):e});return{requestId:e,result:a}}})}},{key:"getSearchResults",value:function(){var e=this,t=Date.now();this.latestSearchRequestId=t,this.setState({result:[]});var n=this.state.search;if(n){var r=this.props.file;this.fetchSearchResults(t,n,r.teamId).then(function(t){var r=t.requestId,o=t.result;if(r===e.latestSearchRequestId&&(e.setState({result:o}),0===o.length&&p.emailReg.test(n))){var i={name:"",email:n,avatar:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif"};o.push(i),e.setState({result:o},function(){e.getUserInfoByEmail(n)})}})}}},{key:"getUserInfoByEmail",value:function(e){var t=this;v.default.searchByEmail(e,this.latestSearchRequestId).then(function(e){if(e.requestId===t.latestSearchRequestId){var n=t.state.result;1===n.length&&n[0].email===e.email&&(n[0].id=e.id,n[0].name=e.name,n[0].avatar=e.avatar),t.setState({result:n})}},function(e){if(e.requestId===t.latestSearchRequestId){var n=t.state.result;1===n.length&&(n[0].name="邮箱邀请",n[0].avatar="https://assets-cdn.shimo.im/assets/images/invited-f41924e412.png",t.setState({result:n}))}})}},{key:"onSearchChange",value:function(e){var t=this;this.setState({search:e.target.value},function(){t.getSearchResults()})}},{key:"renderMemberList",value:function(){var e=0,t=this.getRecentContacts(),n=this.getSharedUsers().length,r=[].concat(c.default.createElement(f.TabItem,{key:"1",title:"最近"},c.default.createElement(w.default,{sharedUserCount:n,file:this.props.file,data:t,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")}})));return cow.currentUser.teamId&&(r.push(c.default.createElement(f.TabItem,{key:"2",title:"企业成员"},c.default.createElement(w.default,{sharedUserCount:n,hasMore:!0,file:this.props.file,data:this.getTeamMembers(),getListData:this.props.getTeamMembers,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")}}))),0===t.length&&(e=1)),c.default.createElement(f.Tab,{customClass:"sm-tab",selectedIndex:e,disableSetWidth:!0},r)}},{key:"renderSearchResult",value:function(){var e=this.getSharedUsers().length;return c.default.createElement(w.default,{sharedUserCount:e,file:this.props.file,data:this.state.result,getSharedUsers:this.props.getSharedUsers,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")}})}},{key:"render",value:function(){var e=this.state.search.length>0;return c.default.createElement("div",{className:"teamwork-add-users"},c.default.createElement("div",{className:"flex"},c.default.createElement("div",{className:"sm-form-control search-box"},c.default.createElement("span",{className:"team-sprite team-icon-search"}),c.default.createElement("input",{type:"text",placeholder:"输入邮箱、搜索姓名，添加协作者",autoFocus:"autofocus",value:this.state.search,onChange:this.onSearchChange}))),!e&&this.renderMemberList(),e&&this.renderSearchResult(),c.default.createElement(g.default,{fileGuid:this.props.file.guid}),this.props.showButton&&c.default.createElement("div",{style:{textAlign:"right"}},c.default.createElement("button",{className:"btn btn-ok",onClick:this.props.onButtonClick},"确定")))}}]),t}(l.Component);t.default=_,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=n(33),d=n(47),p=r(d),h=n(24),m=n(291),v=r(m),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleUserListClick=n.handleUserListClick.bind(n),n.renderActionComponent=n.renderActionComponent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,storage:u.PropTypes.object,maxShareCount:u.PropTypes.number,getSharedUsers:u.PropTypes.func,getFile:u.PropTypes.func,patchFile:u.PropTypes.func,setPermission:u.PropTypes.func,showButton:u.PropTypes.bool,onButtonClick:u.PropTypes.func,cleanModals:u.PropTypes.func,pushModal:u.PropTypes.func,popModal:u.PropTypes.func,overflow:u.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},file:cow.currentFile}}}]),s(t,[{key:"handleUserListClick",value:function(e){var t=this,n=document.querySelector(".modal-root");n&&(n.style.display="none"),(0,p.default)({title:"移交所有者",description:"确定要将所有者角色转交给 "+e.name+"?",confirmFun:function(){n&&(n.style.display="block"),t.props.onButtonClick(),t.props.patchFile(t.props.file.guid,{userId:e.id}).then(function(){(0,h.showAlert)({title:"移交所有权成功"})})}})}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.filePermissions[n.guid],o=t.permissions[n.guid],i=[];return(0,c.map)(r,function(e){var n=t.users[e];if(n.status>=0){var r=o[e]||"editable";i.push((0,c.assign)({},n,{permission:r}))}}),i}},{key:"getGroupedUsers",value:function(e){var t=[],n=[],r=this.props.file;return(0,c.forEach)(e,function(e){e.team_id&&e.team_id===r.teamId?t.push(e):n.push(e)}),{teamMembers:t,otherMembers:n}}},{key:"renderActionComponent",value:function(e){var t=this;return this.props.file.userId===e.id?l.default.createElement("div",{className:"sm-dropdown-button no-overlay"},"所有者"):l.default.createElement("div",{className:"sm-dropdown-button no-overlay",onClick:function(){return t.handleUserListClick(e)}},"选择")}},{key:"render",value:function(){var e=this.getSharedUsers(),t="协作者 ("+e.length+")",n=this.props.file.teamId?this.getGroupedUsers(e).teamMembers:e;return l.default.createElement("div",{className:"teamwork-transfer-ownship"},l.default.createElement(f.Tab,{customClass:"sm-tab",disableSetWidth:!0},l.default.createElement(f.TabItem,{title:t},l.default.createElement(v.default,{data:n,file:this.props.file,overflow:this.props.overflow,renderActionComponent:this.renderActionComponent,getPopupContainer:function(){return document.querySelector(".teamwork-transfer-ownship")}}))),this.props.showButton&&l.default.createElement("button",{className:"btn btn-ok",onClick:this.props.onButtonClick},"返回"))}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(33),d=n(202),p=n(292),h=r(p),m=n(480),v=r(m),y=n(483),g=r(y),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTransferButtonClick=n.handleTransferButtonClick.bind(n),n.handleContentSwitch=n.handleContentSwitch.bind(n),n.renderBody=n.renderBody.bind(n),n.onClose=n.onClose.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{storage:l.PropTypes.object,file:l.PropTypes.object,getRecentContacts:l.PropTypes.func,getTeamMembers:l.PropTypes.func,setPermission:l.PropTypes.func,getSharedUsers:l.PropTypes.func,popModal:l.PropTypes.func,pushModal:l.PropTypes.func}}}]),u(t,[{key:"handleTransferButtonClick",value:function(){this.props.popModal(),this.props.pushModal(g.default,{file:this.props.file})}},{key:"handleContentSwitch",value:function(e){"transfer"===e&&this.handleTransferButtonClick()}},{key:"onClose",value:function(){this.props.popModal(),this.props.pushModal(h.default,{file:this.props.file})}},{key:"renderBody",value:function(){return c.default.createElement(v.default,s({},this.props,{onButtonClick:this.handleContentSwitch}))}},{key:"render",value:function(){var e=[];return e.push({customClass:"btn btn-ok",onTap:this.onClose,label:"确定"}),c.default.createElement(f.Dialog,{open:!0,hasMask:!1,customClass:"teamworker-sharelist-inner button-right",bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(l.Component);t.default=(0,d.register)("AddUserDialog",b),e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(33),d=n(202),p=n(481),h=r(p),m=n(292),v=r(m),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleButtonClick=n.handleButtonClick.bind(n),n.renderBody=n.renderBody.bind(n),n.onClose=n.onClose.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{file:l.PropTypes.object,storage:l.PropTypes.object,getSharedUsers:l.PropTypes.func,setPermission:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func}}}]),u(t,[{key:"handleButtonClick",value:function(){this.props.popModal(),this.props.pushModal(v.default,{file:this.props.file})}},{key:"onClose",value:function(){this.props.cleanModals()}},{key:"renderHeader",value:function(e){return c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},e),c.default.createElement("span",{className:"hicon icon-close dialog-close-btn",onClick:this.onClose}))}},{key:"renderBody",value:function(){return c.default.createElement(h.default,s({},this.props,{onButtonClick:this.handleButtonClick}))}},{key:"render",value:function(){var e=[];return e.push({customClass:"btn btn-ok",onTap:this.handleButtonClick,label:"返回"}),c.default.createElement(f.Dialog,{open:!0,hasMask:!1,ref:"target",title:"转让所有权",customClass:"teamworker-sharelist-inner",headTpl:this.renderHeader,bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(l.Component);t.default=(0,d.register)("TransferOwnshipDialog",y),e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(11),d=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleScroll=n.handleScroll.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{className:l.PropTypes.string,overflow:l.PropTypes.array,spinning:l.PropTypes.bool,onScroll:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{className:"",overflow:[0,0],spinning:!1,onScroll:function(){}}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;setTimeout(function(){return t.forceUpdate()},0)}},{key:"outterStyle",value:function(){return{marginLeft:-this.props.overflow[0],marginRight:-this.props.overflow[1],height:"100%",overflowY:"auto"}}},{key:"innerStyle",value:function(){var e=this.refs.outter,t=this.refs.inner,n=e?e.offsetWidth:0,r=e?t.offsetWidth:0;return{paddingLeft:this.props.overflow[0],paddingRight:this.props.overflow[1]-(n-r)}}},{key:"handleScroll",value:function(e){this.props.onScroll(e)}},{key:"renderChildren",value:function(){return c.default.createElement("div",{className:"scroll-view-outter",style:this.outterStyle(),onScroll:this.handleScroll,ref:"outter"},c.default.createElement("div",{className:"scroll-view-inner",style:this.innerStyle(),ref:"inner"},this.props.children))}},{key:"render",value:function(){var e=this.props.className.split(/\s/),t=d.default.apply(void 0,["scroll-view"].concat(o(e),[{spinner:this.props.spinning}]));return c.default.createElement("div",{className:t},!this.props.spinning&&this.renderChildren())}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){e.exports=n(566)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){switch(e){case-2:case"-2":case 0:case"0":case"document":case"doc":case"newdoc":return"doc";case-3:case"-3":case-1:case"-1":case"sheet":case"spreadsheet":return"sheet";case 1:case"1":case"folder":return"folder";default:console.error("unknown file type:",e)}};t.unifiedFileType=n},function(e,t,n){(function(r,o,i){function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(281);var p=n(0),h=a(p),m=n(5),v=a(m),y=n(213),g=a(y),b=n(463),w=a(b),_=n(214),k=a(_),E=n(645),T=a(E),C=n(282),S=a(C),O=n(647),x=a(O),P=n(47),j=a(P),N=n(24),M=n(13),A=n(153),I=a(A),D=n(4),L=a(D),R=n(26),U=n(16),F=a(U),B=n(571),W=n(9),V=n(7),q=n(145),H=n(283),$=n(154),Y=a($),K=function(e){function t(e){s(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=["comments"];return-2===cow.currentFile.type&&r.push("directory"),cow.currentFile.starred&&r.push("star"),n.state={selectedKeys:r,visible:!1,hasDesktopShortcut:cow.currentFile.hasDesktopShortcut,starred:cow.currentFile.starred},n.commentOpened=!0,n.fileInfo={},n._handleMenu=n._handleMenu.bind(n),n._enterMenuItem=n._enterMenuItem.bind(n),n._leaveMenuItem=n._leaveMenuItem.bind(n),n._handleClick=n._handleClick.bind(n),n.shortcutItem=n.shortcutItem.bind(n),n._filterUnsupportedCommentChar=n._filterUnsupportedCommentChar.bind(n),n}return l(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;L.default.attach("doc:history:hide",function(){e._deSelect("history")},{scope:this}),L.default.attach("history:hide",function(){e._deSelect("history")},{scope:this}),L.default.attach("doc:directory:hide",function(){e._deSelect("directory")},{scope:this}),L.default.attach("doc:authors:show",function(){e._select("authors"),e._toggleAuthors(!0)},{scope:this}),L.default.attach("doc:goback",this._closeSidebar,{scope:this}),F.default.bind("StarredFile",function(t){if(t.data.fileId===cow.currentFile.id){"create"===t.action?e._select("star"):e._deSelect("star")}}),L.default.attach("history:toggle",function(t){var n=window.cow.currentFile.type,r=e._isHistoryActive(n);r!==t&&(r?(e._deSelect("history"),e._toggleHistory(!1),e._toggleNewDocComments(!0)):(e._select("history"),e._toggleHistory(!0),e._toggleNewDocComments(!1),e._isLockSidebarActive()&&e._deSelect("locksheet")))},{scope:this}),L.default.attach("directory:toggle",function(){e._isDirectoryActive()?(e._toggleDirectory(!1),e._deSelect("directory")):(e._toggleDirectory(!0),e._select("directory"))},{scope:this}),L.default.attach("comments:toggle",function(t){t?e._select("comments"):e._deSelect("comments")},{scope:this}),L.default.attach("new:directory:toggle",function(t){t?e._select("directory"):e._deSelect("directory")},{scope:this}),L.default.attach("new:comments:toggle",function(t){t?e._select("comments"):e._deSelect("comments")},{scope:this}),L.default.attach("newdoc:history:show",function(){e._select("history")},{scope:this}),L.default.attach("newdoc:history:hide",function(){e._deSelect("history")},{scope:this}),L.default.attach("shortkey:toggle",function(t){t?e._select("shortkey"):e._deSelect("shortkey"),e.toggleShortkey(t)},{scope:this}),L.default.attach("doc:goback",function(){e.toggleShortkey(!1)}),L.default.attach("lock:sidebar:hide",function(){e._deSelect("locksheet")},{scope:this}),L.default.attach("revision:save",function(){e._saveRevision()},{scope:this})}},{key:"componentWillUnmount",value:function(){var e=this;L.default.detach("doc:history:hide",this),L.default.detach("history:hide",this),L.default.detach("doc:directory:hide",this),L.default.detach("doc:authors:show",this),L.default.detach("history:toggle",this),L.default.detach("directory:toggle",this),L.default.detach("new:directory:toggle",this),L.default.detach("shortkey:toggle",this),L.default.detach("lock:sidebar:hide",this),L.default.detach("newdoc:history:show",this),L.default.detach("newdoc:history:hide",this),L.default.detach("revision:save",this),setTimeout(function(){L.default.detach("doc:goback",e)},0)}},{key:"_showFileMover",value:function(e){(0,B.showFileMover)({sourceFile:e,onSuccess:function(){}})}},{key:"_select",value:function(e){this.setState(function(t){var n=t.selectedKeys;return-1===n.indexOf(e)?{selectedKeys:n.concat([e])}:t})}},{key:"_deSelect",value:function(e){this.setState(function(t){var n=t.selectedKeys;return-1!==n.indexOf(e)?{selectedKeys:r.without(n,e)}:t})}},{key:"_showExportDoc",value:function(){var e=document.createElement("div"),t=function(){return document.body.removeChild(e)};v.default.render(h.default.createElement(T.default,{file:window.cow.currentFile,close:t}),e),document.body.appendChild(e)}},{key:"_showExportSpreadsheet",value:function(){(0,M.isSafari)()?(0,N.showAlert)({title:"暂时不支持 Safari ，请换用最新版 Chrome "}):n.e(1).then(function(e){var t=n(798),r=n(491),o=r.getCurDoc();t.exportToFile(o,window.cow.currentFile.name+".xlsx")}.bind(null,n)).catch(n.oe)}},{key:"_showExportSheet",value:function(){var e=this;(0,q.loadSheet)().then(function(t){if(t.locksheet.isUserForbidInWorkbook())return(0,j.default)({title:"导出失败",description:"该表格包含锁定禁止查看区域，您无权限导出，请联系表格所有者。",abortClass:"hide"}),void Y.default.exportTrack(2,"xlsx",!1);var i=window.cow,a=i.currentFile,s=i.currentSheetGuid;(0,N.showAlert)({title:"正在导出，请耐心等待",type:"",autoHide:!1}),L.default.notify("btn:getExportJSON",function(t,i){var u=r.cloneDeep(t);n.e(2).then(function(t){function l(e,t,n){var r=-1===e.indexOf("png")?"image/jpeg":"image/png";return new Promise(function(o){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e=document.createElement("CANVAS"),i=e.getContext("2d");e.height=this.height,e.width=this.width,i.drawImage(this,0,0);var a=e.toDataURL(r,.8);o({dataURL:a,index:t,sheetName:n})},i.onerror=function(){o({})},i.src=e+"?imageslim",(i.complete||void 0===i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=e+"?imageslim")})}function c(){return new Promise(function(e,t){o.get("/api/comment/"+window.cow.currentFile.guid,function(t){e(t.data)})})}var d=n(799),p=n(800),h=new p.IO,m="sheet/"+s+"/"+a.name+".xlsx",v="sheet/"+s+"/"+encodeURIComponent(a.name)+".xlsx";u=d.exportToFile(u);var y=[],g=u.sheets;r.mapKeys(g,function(e,t){if("object"===(void 0===e?"undefined":f(e))&&!r.isEmpty(e.floatingObjects)){e.floatingObjects.forEach(function(e,n){/^picture/.test(e.name)&&y.push(l(e.src,n,t))})}});var b=void 0;for(var w in g)"object"===f(g[w])&&void 0!==g[w].comments&&void 0!==g[w].comments.commentList&&(b=g[w].comments.commentList);b?r.mapKeys(u.sheets,function(t,n){"object"===(void 0===t?"undefined":f(t))&&void 0!==t.comments&&void 0!==t.comments.sheetComments&&(t.comments.sheetComments.forEach(function(t){t.text="",b.forEach(function(n){t.guid===n.selectionGuid&&(n.content=e._filterUnsupportedCommentChar(n.content),n.User=n.User||{name:"路人"},t.text+=n.User.name+":\n"+n.content+"\n\n")})}),t.comments=t.comments.sheetComments)}):y.push(c()),Promise.all(y).then(function(t){var n=!1;t.forEach(function(t){Array.isArray(t)&&t.length>0&&void 0!==t[0].commentGuid?r.mapKeys(u.sheets,function(n,r){"object"===(void 0===n?"undefined":f(n))&&void 0!==n.comments&&n.comments.forEach(function(n){n.text="",t.forEach(function(t){if(n.guid===t.selectionGuid){console.log(t.content);var r=e._filterUnsupportedCommentChar(t.content);console.log(r),t.User=t.User||{name:"路人"},n.text+=t.User.name+":\n"+r+"\n\n"}})})}):Array.isArray(t)||(r.isEmpty(t)?n=!0:u.sheets[t.sheetName].floatingObjects[t.index].src=t.dataURL)}),h.save(u,function(e){var t={title:"导出",description:"检测到部分图片可能无法导出，确定导出吗",buttons:[{type:"link-button",buttonLabel:"确定",href:"",target:"_self",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]},r={buttonLabel:"确认",customClass:"btn-ok",closeAfterClick:!0},u={title:"出错啦",buttons:[r]};window.cow&&"local"===window.cow.uploader.server?o.ajax({url:"/api/upload/token",type:"POST",success:function(r){var i=r.data,s=new FormData;s.append("server","local"),s.append("Content-Type","multipart/form-data"),s.append("file",e,a.name+".xlsx"),o.ajax({url:window.cow.uploaderOrigin+"/upload2?accessToken="+i.accessToken,type:"POST",data:s,contentType:!1,processData:!1,success:function(e){var r=e.data,o=r.url||r.images;t.buttons[0].href=o,n?(0,j.default)(t):window.location=o},error:function(){(0,N.hideAlert)(),u.description="导出失败，请检查网络或稍后再试",(0,j.default)(u)}})}}):o.ajax({url:"/api/upload/oss_forms",type:"POST",data:{head:i,guid:s},success:function(r){var i=r.data,a=new FormData;a.append("OSSAccessKeyId",i.OSSAccessKeyId),a.append("policy",btoa(JSON.stringify(i.policy))),a.append("Signature",i.signature),a.append("key",m),a.append("Content-Type","multipart/form-data"),a.append("file",e),o.ajax({url:"https://shimo-exports.oss-cn-shanghai.aliyuncs.com",type:"POST",data:a,contentType:!1,processData:!1,success:function(){var e="https://shimo-exports.oss-cn-shanghai.aliyuncs.com/"+v;t.buttons[0].href=e,n?(0,j.default)(t):window.location=e,(0,N.hideAlert)(),Y.default.exportTrack(2,"xlsx",!0)},error:function(){(0,N.hideAlert)(),u.description="导出失败，请检查网络或稍后再试",(0,j.default)(u),Y.default.exportTrack(2,"xlsx",!1)}})}})},function(e){Y.default.exportTrack(2,"xlsx",!1),(0,N.showAlert)({title:"导出失败，请重试",type:e})})})}.bind(null,n)).catch(n.oe)})})}},{key:"_filterUnsupportedCommentChar",value:function(e){return e=e.replace(/&nbsp;/g,"&#160;"),e=e.replace(/&gt;/g,"&#62;"),e=e.replace(/&lt;/g,"&#60;"),e=e.replace(/&amp;/g,"&#38;"),e=e.replace(/&quot;/g,"&#34;"),e=e.replace(/&apos;/g,"&#39;"),e=e.replace(/&cent;/g,"&#162;"),e=e.replace(/&pound;/g,"&#163;"),e=e.replace(/&yen;/g,"&#165;"),e=e.replace(/&euro;/g,"&#8364;"),e=e.replace(/&sect;/g,"&#167;"),e=e.replace(/&copy;/g,"&#169;"),e=e.replace(/&reg;/g,"&#174;"),e=e.replace(/&trade;/g,"&#8482;"),e=e.replace(/&times;/g,"&#215;"),e=e.replace(/&divide;/g,"&#247;")}},{key:"_report",value:function(e){"doc"===e?(0,H.docStatistic)():"sheet"===e&&(0,H.sheetStatistic)();var t=document.createElement("div"),n=function(){return document.body.removeChild(t)};document.body.appendChild(t),v.default.render(h.default.createElement(S.default,{close:n}),t)}},{key:"_print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#editorcontainer",t=void 0,n=void 0,i=function(e){(e.contentDocument||e.contentWindow.document).documentElement.innerHTML=""},a=document.getElementById("printer"),s=function(e){return setTimeout(function(){return o(".operation-btn").removeClass("active"),o(".operation-dropdown").removeClass("active"),e.contentWindow.print(),i(a)},1e3)},u=o("<div />").append(o(e).clone()),l=u.find("#doc-title-input");l.removeAttr("placeholder"),l.removeAttr("class"),l.attr("value",u.find("#doc-title-input").val()),"#editorcontainer"===e?(u.find(".table-div").each(function(e){e=o(e);var t=e.find(".shadow-table").html();e.html(t)}),u.find("span.mention").each(function(e){try{var t=r.filter(e.parentElement.classList,function(e){if(e.startsWith("lineguid-"))return e}),n=o("."+t[0]+" span.mention").css("font-family").match(/^'(.+)-(.+)'$/)[2];e.innerHTML="@"+n}catch(t){e.innerHtml="@"}})):u.find(".ql-table").each(function(e,t){var n=o(t).find(".shadow-table").html();t.innerHTML=n}),o("link").each(function(e,r){r.href.match(/main-(.+)\.css$/)&&(t=r.href),r.href.match(/smdocs-(.+)\.css$/)&&(n=r.href)});var c=r.template(x.default)({body:u.html(),css:t,newDocCSS:n});window.localStorage&&window.localStorage.getItem("__cow_print_debug__")&&console.log(c),a.contentWindow.document.write(c),a.contentWindow.document.close(),s(a)}},{key:"_goback",value:function(){if(i.len>0)i.back();else{var e="";e=window.cow.authorized?cow.currentFile.parent&&cow.currentFile.parent.guid?"/folder/"+cow.currentFile.parent.guid:"/desktop":"/login",i(e)}}},{key:"_deleteFile",value:function(){var e=this,t=cow.currentFile,n={title:"删除",buttons:[]},r={buttonLabel:"确认删除",customClass:"btn-error",closeAfterClick:!0,onClick:function(){(0,R.updateFile)(t,{is_delete:1}).then(function(){location.href="/desktop"}).catch(function(e){I.default.isEnterpriseStandard(cow.currentUser)||I.default.isEnterpriseDingding(cow.currentUser)?(0,N.showAlert)({title:e.responseText||"删除失败",type:"error"}):(0,N.showAlert)({title:"删除失败",type:"error"})})}},o={buttonLabel:"退出共享",customClass:"btn-ok",closeAfterClick:!0,onClick:function(){(0,R.quiteShare)(t).then(function(){e._goback(),(0,N.showAlert)({title:"成功退出共享"})}).catch(function(){(0,N.showAlert)({title:"退出共享失败",type:"error"})})}},i={buttonLabel:"取消",customClass:"",closeAfterClick:!0},a={buttonLabel:"确认",customClass:"btn-ok",closeAfterClick:!0},s=cow.currentFile.typeName,u=t.permissions.manageable,l=t.permissions.exitable;u&&l?(n.buttons=[r,o,i],n.description="你可以删除"+s+"<br />也可以退出共享，但不删除"+s):u?(n.buttons=[r,i],n.description="确认删除"+s+"吗？<br />删除后，所有协作者都无法访问此"+s):l?(n.buttons=[o,i],n.description="你不是"+s+"的创建者<br />继续此操作会退出"+s+"共享<br />但不会删除"+s):(n.title="无法删除",n.buttons=[a],n.description="你没有权限删除或退出此"+s),(0,j.default)(n)}},{key:"_isHistoryActive",value:function(e){switch(e){case-3:return o("#sheet-view .s-sidebar").hasClass("show");case-2:return!o("#ql-view .doc-history").hasClass("hide");default:return!o("#doc-history").hasClass("hide")}}},{key:"_isLockSidebarActive",value:function(){return o("#sheet-view .lock-sidebar").hasClass("show")}},{key:"_isDirectoryActive",value:function(){return!o("#doc-directory").hasClass("hide")}},{key:"_isNewDocDirectoryActive",value:function(){return!o("#new-directory").hasClass("hide")}},{key:"_toggleComments",value:function(e){var t=this;e?(o("#pad-view").addClass("comment-show").removeClass("history-show"),this._toggleHistory(!1),this._toggleDirectory(!1)):(o("#pad-view").removeClass("comment-show"),setTimeout(function(){return t._deSelect("comments")},0))}},{key:"_toggleNewDocComments",value:function(e){-2===window.cow.currentFile.type&&(e?this.commentOpened?this._select("comments"):window.pad.quill.comment&&window.pad.quill.comment.showList():(window.pad.quill.comment&&window.pad.quill.comment.hideList(),this._deSelect("comments")))}},{key:"toggleShortkey",value:function(e){-2===window.cow.currentFile.type&&(e?o("#shortkey-panel").removeClass("hide"):o("#shortkey-panel").addClass("hide"))}},{key:"_toggleHistory",value:function(e){var t=window.cow.currentFile.type;if(-3===t)return L.default.notify("spreadsheet:history:"+(e?"show":"hide"));-2!==t?e?(this._toggleDirectory(!1),this._toggleComments(!1),o("#pad-view").addClass("history-show"),o("#doc-history").removeClass("hide"),L.default.notify("doc:history:show")):(o("#pad-view").removeClass("history-show"),o("#doc-history").addClass("hide"),setTimeout(function(){return L.default.notify("doc:history:hide")},0),this.commentOpened&&(this._select("comments"),o("#pad-view").addClass("comment-show").removeClass("history-show"))):L.default.notify("newhistory:toggle",e)}},{key:"_toggleDirectory",value:function(e){e?(this._toggleHistory(!1),this._toggleComments(!1),o("#innerdocbody").focus(),window.cow.directory.firstOpen=!0,o("#pad-view").addClass("history-show directory-show"),o("#doc-directory").removeClass("hide"),window.cow.directory.isOpened=!0):(o("#pad-view").removeClass("directory-show"),o("#doc-directory").addClass("hide"),window.cow.directory.isOpened=!1,setTimeout(function(){return L.default.notify("doc:directory:hide")},0),this.commentOpened&&(this._select("comments"),o("#pad-view").addClass("comment-show").removeClass("history-show")))}},{key:"_toggleAuthors",value:function(e){e?-2===cow.currentFile.type?o("#ql-papper .ql-editor").addClass("ql-show"):o("#pad-view").addClass("edit-mode"):-2===cow.currentFile.type?o("#ql-papper .ql-editor").removeClass("ql-show"):o("#pad-view").removeClass("edit-mode")}},{key:"openInfoDialog",value:function(){var e=this;window.cow.currentFile.guid!==this.fileInfo.guid?(0,V.ajaxGet)("/smapi/files/"+window.cow.currentFile.guid+"?creator=1").then(function(t){var n=t.data;e.fileInfo=n||{},e.showInfoModal()}):this.showInfoModal()}},{key:"showInfoModal",value:function(){var e=this.fileInfo,t=e.createdAt,n=e.views,r=e.creator,o=window.cow.currentFile,i=o.type,a=o.typeName,s=r.name,u=r.email,l=s+" ("+u+")",c="",f=void 0;if(0===i?f=document.getElementById("innerdocbody"):-2===i&&(f=document.getElementById("ql-container").querySelector(".ql-editor")),f){var d=f.innerText;c="<div>"+a+"总字数： "+this.filterTextCount(d)+" (不计标点)</div>"}var p={title:a+"信息",description:'\n        <div class="operations-info-dialog-creator">'+a+'创建者：\n          <span title="'+l+'">'+l+"</span>\n        </div>\n        <div>"+a+"创建时间： "+(0,w.default)(t).format("YYYY.MM.DD HH:mm")+" (GMT+08:00)</div>\n         "+c+"\n        <div>阅读次数： "+n+"次</div>\n      ",buttons:[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]};(0,j.default)(p)}},{key:"filterTextCount",value:function(e){var t=0,n=/^[A-Za-z0-9]+$/gi,o=/[A-Za-z0-9]+/gi,i=/↵|\s/,a=/[^a-zA-Z0-9\s\u4e00-\u9fa5]/g;return e=e.replace(/\b[a-zA-Z]+'[a-zA-Z]+\b/g,"0").replace(/\b\d+\.\d+\b/g,"0").replace(a," "),r.compact(e.split(i)).forEach(function(e){var r=e.trim(),i=r.match(n);if(Array.isArray(i))t+=i.length;else{var a=r.match(o);if(Array.isArray(a)){var s=r.split(o).join("");t+=s.length,t+=a.length}else t+=r.length}}),t}},{key:"_closeSidebar",value:function(){this._toggleDirectory(!1),this._toggleHistory(!1)}},{key:"_toggleStar",value:function(){cow.currentFile.starred?((0,R.unstarFile)(cow.currentFile.id),this.setState(c({},this.state,{starred:!1}))):((0,R.starFile)(cow.currentFile.id),this.setState(c({},this.state,{starred:!0})),Y.default.track(2,"0052"))}},{key:"_toggleShortcut",value:function(){var e=this;this.state.hasDesktopShortcut?(0,R.removeDesktopShortcut)(cow.currentFile.guid,cow.currentFile.id).then(function(t){0===t.code&&(e.setState(c({},e.state,{hasDesktopShortcut:!1})),(0,N.showAlert)({title:"成功移除快捷方式"}))}).catch(function(e){(0,N.showAlert)({title:e.message,type:"error"})}):(0,R.addDesktopShortcut)(cow.currentFile.guid,cow.currentFile.id).then(function(t){0===t.code&&(e.setState(c({},e.state,{hasDesktopShortcut:!0})),(0,N.showAlert)({title:"成功添加快捷方式"}))}).catch(function(e){(0,N.showAlert)({title:e.message,type:"error"})})}},{key:"_handleMenu",value:function(e){var t=e.key,n=e.selectedKeys,r=this.props.file;if(this.setState(c({},this.state,{visible:!this.state.visible})),"locksheet"!==t||(0,W.isEnterprise)(cow.currentUser)){if("history"===t||"locksheet"===t){var o="";o="history"===t?"locksheet":"history";var i=n.indexOf(o);i>=0&&n.splice(i,1)}this.setState(function(){return{selectedKeys:n}});var a=-1!==n.indexOf(t);if("star"===t)return void this._toggleStar();if("delete"===t)return void this._deleteFile();if("move"===t)return void this._showFileMover(r);if("shortcut"===t)return void this._toggleShortcut();if(0===cow.currentFile.type)switch(t){case"report":this._report("doc");break;case"export":this._showExportDoc();break;case"print":this._print();break;case"history":this._toggleHistory(a);break;case"directory":this._toggleDirectory(a);break;case"comments":this.commentOpened=a,this._toggleComments(a);break;case"authors":this._toggleAuthors(a);break;case"info":this.openInfoDialog()}else if(-1===cow.currentFile.type||-3===cow.currentFile.type){var s=-3===cow.currentFile.type;switch(t){case"report":this._report("sheet");break;case"history":L.default.notify("spreadsheet:history:show"),Y.default.track(2,"0049");break;case"locksheet":L.default.notify("spreadsheet:lock:toggle"),Y.default.track(2,"0053");break;case"export":s?this._showExportSheet():this._showExportSpreadsheet();break;case"print":L.default.notify("spreadsheet:print");break;case"shortkey":L.default.notify("spreadsheet:shortkey:toggle",a);break;case"info":this.openInfoDialog()}}else if(-2===cow.currentFile.type)switch(t){case"report":this._report("doc");break;case"print":this._print("#ql-papper");break;case"history":L.default.notify("history:toggle");break;case"saveRevision":this._saveRevision();break;case"directory":L.default.notify("new:directory:toggle",a);break;case"authors":this._toggleAuthors(a);break;case"comments":this.commentOpened=a,this._toggleNewDocComments(a),L.default.notify("history:toggle",!1);break;case"shortkey":L.default.notify("shortkey:toggle",a);break;case"export":this._showExportDoc();break;case"info":this.openInfoDialog()}}}},{key:"_saveRevision",value:function(){var e=window.cow.currentFile.guid;(0,V.ajaxPost)("/smapi/files/"+e+"/revisions",{label:this._formatTime()}).then(function(e){var t=e.code,n=e.message;400===t?(0,N.showAlert)({title:"已成功创建版本，无需重复创建"}):0===t?((0,N.showAlert)({title:"成功创建版本，可在「更多 」-「查看历史」-「 版本」中查看"}),L.default.notify("revision:changed",1)):(0,N.showAlert)({title:n||"版本保存失败，请检查网络或稍后再试",type:"error"})}).catch(function(){(0,N.showAlert)({title:"版本保存失败，请检查网络或稍后再试",type:"error"})})}},{key:"_formatTime",value:function(){var e=new Date,t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],n=e.getMinutes(),r=e.getHours();return n<10&&(n="0"+n),r<10&&(r="0"+r),e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+t[e.getDay()]+" "+r+":"+n}},{key:"_enterMenuItem",value:function(){(0,W.isEnterprise)(cow.currentUser)||o(".operations-tip").css("display","block")}},{key:"_leaveMenuItem",value:function(){o(".operations-tip").css("display","none")}},{key:"_handleClick",value:function(){this.setState(c({},this.state,{visible:!this.state.visible}))}},{key:"shortcutItem",value:function(){return h.default.createElement(y.Item,{key:"shortcut",className:"operations-noselect"},this.state.hasDesktopShortcut?"从快捷方式移除":"添加到快捷方式")}},{key:"render",value:function(){var e=window.cow||{},t=e.alphaFeatures,n=void 0===t?{}:t,r=!cow.currentFile.authorized&&cow.currentFile.permissions.editable,o=window.cow.currentFile,i=cow.currentFile,a=i.authorized,s=i.type,u=i.permissions,l=h.default.createElement("div",null);0===s?l=h.default.createElement(g.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this._handleMenu,onDeselect:this._handleMenu},n.lizard&&a&&this.shortcutItem(),cow.currentUser.id>0&&h.default.createElement(y.Item,{key:"star",className:this.state.starred?"":"operations-noselect"},this.state.starred?"已收藏":"收藏"),cow.currentUser.id>0&&h.default.createElement(y.Divider,null),h.default.createElement(y.Item,{key:"directory"},"查看目录"),h.default.createElement(y.Item,{key:"history"},"查看历史"),h.default.createElement(y.Item,{key:"comments"},"查看评论"),h.default.createElement(y.Item,{key:"authors"},"查看编写者"),h.default.createElement(y.Divider,null),(a||r)&&h.default.createElement(y.Item,{key:"info",className:"operations-noselect"},"文档信息"),(a||r)&&h.default.createElement(y.Divider,null),a&&h.default.createElement(y.Item,{key:"move",className:"operations-noselect"},"移动"),h.default.createElement(y.Item,{key:"export",className:"operations-noselect"},"导出"),h.default.createElement(y.Item,{key:"print",className:"operations-noselect"},"打印"),(u.manageable||o.role)&&h.default.createElement(y.Divider,null),(u.manageable||o.role)&&h.default.createElement(y.Item,{key:"delete",className:"operations-noselect operations-red"},"删除文档"),!(u.manageable||o.role)&&h.default.createElement(y.Divider,null),!(u.manageable||o.role)&&h.default.createElement(y.Item,{key:"report",className:"operations-noselect"},"举报文档")):-1===s||-3===s?l=h.default.createElement(g.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this._handleMenu,onDeselect:this._handleMenu},n.lizard&&a&&this.shortcutItem(),cow.currentUser.id>0&&h.default.createElement(y.Item,{key:"star",className:this.state.starred?"":"operations-noselect"},this.state.starred?"已收藏":"收藏"),cow.currentUser.id>0&&h.default.createElement(y.Divider,null),h.default.createElement(y.Item,{key:"history"},"查看历史"),h.default.createElement(y.Item,{key:"locksheet",className:(0,W.isEnterprise)(cow.currentUser)?"":"locksheet_disabled",style:{position:"relative"},onMouseEnter:this._enterMenuItem,onMouseLeave:this._leaveMenuItem},"查看锁定工作表",h.default.createElement("div",{className:"s-tooltip operations-tip",style:{top:"5px"}},"企业版功能")),h.default.createElement(y.Divider,null),h.default.createElement(y.Item,{key:"shortkey"},"快捷键"),h.default.createElement(y.Item,{key:"info",className:"operations-noselect"},"表格信息"),h.default.createElement(y.Divider,null),a&&h.default.createElement(y.Item,{key:"move",className:"operations-noselect"},"移动"),h.default.createElement(y.Item,{key:"export",className:"operations-noselect"},"导出"),h.default.createElement(y.Item,{key:"print",className:"operations-noselect"},"打印"),(u.manageable||o.role)&&h.default.createElement(y.Divider,null),(u.manageable||o.role)&&h.default.createElement(y.Item,{key:"delete",className:"operations-noselect operations-red"},"删除表格"),!(u.manageable||o.role)&&h.default.createElement(y.Divider,null),!(u.manageable||o.role)&&h.default.createElement(y.Item,{key:"report",className:"operations-noselect"},"举报表格")):-2===s&&(l=h.default.createElement(g.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this._handleMenu,onDeselect:this._handleMenu},n.lizard&&a&&this.shortcutItem(),h.default.createElement(y.Item,{key:"star",className:this.state.starred?"":"operations-noselect"},this.state.starred?"已收藏":"收藏"),h.default.createElement(y.Item,{key:"saveRevision",className:"operations-noselect"},"保存版本"),h.default.createElement(y.Divider,null),h.default.createElement(y.Item,{key:"directory"},"查看目录"),h.default.createElement(y.Item,{key:"history"},"查看历史"),h.default.createElement(y.Item,{key:"comments"},"查看评论"),h.default.createElement(y.Item,{key:"authors"},"查看编写者"),h.default.createElement(y.Divider,null),h.default.createElement(y.Item,{key:"shortkey"},"快捷键"),(a||r)&&h.default.createElement(y.Item,{key:"info",className:"operations-noselect"},"文档信息"),h.default.createElement(y.Divider,null),a&&h.default.createElement(y.Item,{key:"move",className:"operations-noselect"},"移动"),h.default.createElement(y.Item,{key:"export",className:"operations-noselect"},"导出"),h.default.createElement(y.Item,{key:"print",className:"operations-noselect"},"打印"),(u.manageable||o.role)&&h.default.createElement(y.Divider,null),(u.manageable||o.role)&&h.default.createElement(y.Item,{key:"delete",className:"operations-noselect operations-red"},"删除文档"),!(u.manageable||o.role)&&h.default.createElement(y.Divider,null),!(u.manageable||o.role)&&h.default.createElement(y.Item,{key:"report",className:"operations-noselect"},"举报文档")));var c={points:["tr","br"],overlay:{adjustX:1,adjustY:1},offset:[10,10],targetOffset:[0,0]};return h.default.createElement(k.default,{className:"operations "+(this.state.visible?"btn-active":"inactive"),type:"primary",overlay:l,align:c,onClick:this._handleClick,children:h.default.createElement(z,null)})}}]),t}(p.Component);t.default=K;var z=function(){return h.default.createElement("span",{className:"options-icon-wrap"})};K.propTypes={file:p.PropTypes.object},e.exports=t.default}).call(t,n(1),n(2),n(27))},function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}(0,function(){function app_js_bridge(){function e(e){r=e,_.isJSONString(r)&&(r=JSON.parse(r)),o&&o(r)}function t(){"object"==typeof window.SensorsData_APP_JS_Bridge&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&(r=SensorsData_APP_JS_Bridge.sensorsdata_call_app(),_.isJSONString(r)&&(r=JSON.parse(r)))}function n(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=document.createElement("iframe");e.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}var r=null,o=null;window.sensorsdata_app_js_bridge_call_js=function(t){e(t)},sd.getAppStatus=function(e){return n(),t(),e?void(null===r?o=e:e(r)):r}}try{var sd=window.sensorsDataAnalytic201505,has_declare;if(sd?(sd=window[sd],has_declare=!0):(sd={},has_declare=!1),"function"!=typeof sd&&"object"!=typeof sd||sd.has_load_sdk)return!1;sd._t=sd._t||1*new Date,sd.has_load_sdk=!0,"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],(o=str(r,u))&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u))&&a.push(quote(r)+(gap?": ":":")+o);return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var _=sd._={};sd.para_default={name:"sa",max_referrer_string_length:200,max_string_length:500,cross_subdomain:!0,show_log:!0,is_debug:!1,debug_mode:!1,debug_mode_upload:!1,session_time:0,use_client_time:!1,source_channel:[],vtrack_ignore:{},auto_init:!0,is_single_page:!1,is_trackLink:!0,source_type_config:{utm:null,search:null,social:null},callback_timeout:1e3,is_track_device_id:!1,use_app_track:!1},sd.initPara=function(e){sd.para=e||sd.para||{};var t;for(t in sd.para_default)void 0===sd.para[t]&&(sd.para[t]=sd.para_default[t]);if(!sd.para.heatmap_url&&sd.para.sdk_url&&(sd.para.heatmap_url=sd.para.sdk_url.replace(/[^\/]+\.js[^\/]*$/,"heatmap.min.js")),_.isObject(sd.para.heatmap)&&(sd.para.heatmap.clickmap=sd.para.heatmap.clickmap||"default",sd.para.heatmap.scroll_notice_map=sd.para.heatmap.scroll_notice_map||"default",sd.para.heatmap.scroll_delay_time=sd.para.heatmap.scroll_delay_time||4e3),"object"==typeof sd.para.server_url&&sd.para.server_url.length)for(t=0;t<sd.para.server_url.length;t++)/sa\.gif[^\/]*$/.test(sd.para.server_url[t])||(sd.para.server_url[t]=sd.para.server_url[t].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(sd.para.server_url)||(sd.para.server_url=sd.para.server_url.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));"string"==typeof sd.para.server_url&&(sd.para.debug_mode_url=sd.para.debug_mode_url||sd.para.server_url.replace("sa.gif","debug")),!0===sd.para.noCache?sd.para.noCache="?"+(new Date).getTime():sd.para.noCache=""};var ArrayProto=Array.prototype,FuncProto=Function.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,LIB_VERSION="1.9.6";sd.lib_version=LIB_VERSION;var error_msg=[],is_first_visitor=!1,just_test_distinctid=0,just_test_distinctid_2=0,just_test_distinctid_detail=0,just_test_distinctid_detail2=0,source_channel_standard="utm_source utm_medium utm_campaign utm_content utm_term",logger="object"==typeof logger?logger:{};logger.info=function(){if(!sd.para.show_log)return!1;if((!0===sd.para.show_log||"string"===sd.para.show_log)&&(arguments[0]=_.formatJsonString(arguments[0])),"object"==typeof console&&console.log)try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}},function(){var e=(FuncProto.bind,ArrayProto.forEach),t=ArrayProto.indexOf,n=Array.isArray,r={},o=_.each=function(t,n,o){if(null==t)return!1;if(e&&t.forEach===e)t.forEach(n,o);else if(t.length===+t.length){for(var i=0,a=t.length;a>i;i++)if(i in t&&n.call(o,t[i],i,t)===r)return!1}else for(var s in t)if(hasOwnProperty.call(t,s)&&n.call(o,t[s],s,t)===r)return!1};_.logger=logger,_.extend=function(e){return o(slice.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e},_.extend2Lev=function(e){return o(slice.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&(_.isObject(t[n])&&_.isObject(e[n])?_.extend(e[n],t[n]):e[n]=t[n])}),e},_.coverExtend=function(e){return o(slice.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&void 0===e[n]&&(e[n]=t[n])}),e},_.isArray=n||function(e){return"[object Array]"===toString.call(e)},_.isFunction=function(e){if(!e)return!1;try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},_.isArguments=function(e){return!(!e||!hasOwnProperty.call(e,"callee"))},_.toArray=function(e){return e?e.toArray?e.toArray():_.isArray(e)?slice.call(e):_.isArguments(e)?slice.call(e):_.values(e):[]},_.values=function(e){var t=[];return null==e?t:(o(e,function(e){t[t.length]=e}),t)},_.include=function(e,n){var i=!1;return null==e?i:t&&e.indexOf===t?-1!=e.indexOf(n):(o(e,function(e){return i||(i=e===n)?r:void 0}),i)}}(),_.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},_.trim=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},_.isObject=function(e){return"[object Object]"==toString.call(e)&&null!=e},_.isEmptyObject=function(e){if(_.isObject(e)){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}return!1},_.isUndefined=function(e){return void 0===e},_.isString=function(e){return"[object String]"==toString.call(e)},_.isDate=function(e){return"[object Date]"==toString.call(e)},_.isBoolean=function(e){return"[object Boolean]"==toString.call(e)},_.isNumber=function(e){return"[object Number]"==toString.call(e)&&/[\d\.]+/.test(String(e))},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},_.decodeURIComponent=function(e){var t="";try{t=decodeURIComponent(e)}catch(n){t=e}return t},_.encodeDates=function(e){return _.each(e,function(t,n){_.isDate(t)?e[n]=_.formatDate(t):_.isObject(t)&&(e[n]=_.encodeDates(t))}),e},_.now=Date.now||function(){return(new Date).getTime()},_.throttle=function(e,t,n){var r,o,i,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:_.now(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var l=_.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,o=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),s=l,i=e.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(u,c)),i}},_.hashCode=function(e){if("string"!=typeof e)return 0;var t=0,n=null;if(0==e.length)return t;for(var r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t&=t;return t},_.formatDate=function(e){function t(e){return 10>e?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())},_.searchObjDate=function(e){_.isObject(e)&&_.each(e,function(t,n){_.isObject(t)?_.searchObjDate(e[n]):_.isDate(t)&&(e[n]=_.formatDate(t))})},_.formatJsonString=function(e){try{return JSON.stringify(e,null,"  ")}catch(t){return JSON.stringify(e)}},_.formatString=function(e){return e.length>sd.para.max_string_length?(logger.info("字符串长度超过限制，已经做截取--"+e),e.slice(0,sd.para.max_string_length)):e},_.searchObjString=function(e){_.isObject(e)&&_.each(e,function(t,n){_.isObject(t)?_.searchObjString(e[n]):_.isString(t)&&(e[n]=_.formatString(t))})},_.unique=function(e){for(var t,n=[],r={},o=0;o<e.length;o++)(t=e[o])in r||(r[t]=!0,n.push(t));return n},_.strip_sa_properties=function(e){return _.isObject(e)?(_.each(e,function(t,n){if(_.isArray(t)){var r=[];_.each(t,function(e){_.isString(e)?r.push(e):logger.info("您的数据-",n,t,"的数组里的值必须是字符串,已经将其删除")}),0!==r.length?e[n]=r:(delete e[n],logger.info("已经删除空的数组"))}_.isString(t)||_.isNumber(t)||_.isDate(t)||_.isBoolean(t)||_.isArray(t)||(logger.info("您的数据-",n,t,"-格式不满足要求，我们已经将其删除"),delete e[n])}),e):e},_.strip_empty_properties=function(e){var t={};return _.each(e,function(e,n){null!=e&&(t[n]=e)}),t},_.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t,n,r,o="",i=0;for(t=n=0,i=e.length,r=0;i>r;r++){var a=e.charCodeAt(r),s=null;128>a?n++:s=a>127&&2048>a?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(n>t&&(o+=e.substring(t,n)),o+=s,t=n=r+1)}return n>t&&(o+=e.substring(t,e.length)),o},_.base64Encode=function(e){var t,n,r,o,i,a,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,f=0,d="",p=[];if(!e)return e;e=_.utf8Encode(e);do{t=e.charCodeAt(c++),n=e.charCodeAt(c++),r=e.charCodeAt(c++),u=t<<16|n<<8|r,o=u>>18&63,i=u>>12&63,a=u>>6&63,s=63&u,p[f++]=l.charAt(o)+l.charAt(i)+l.charAt(a)+l.charAt(s)}while(c<e.length);switch(d=p.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d},_.UUID=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},n=function(e){function t(e,t){var n,r=0;for(n=0;n<t.length;n++)r|=i[n]<<8*n;return e^r}var n,r,o=navigator.userAgent,i=[],a=0;for(n=0;n<o.length;n++)r=o.charCodeAt(n),i.unshift(255&r),i.length>=4&&(a=t(a,i),i=[]);return i.length>0&&(a=t(a,i)),a.toString(16)};return function(){var r=String(screen.height*screen.width);r=r&&/\d{5,}/.test(r)?r.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var o=e()+"-"+t()+"-"+n()+"-"+r+"-"+e();return o?(just_test_distinctid_2=1,o):(just_test_distinctid_2=2,(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15))}}(),_.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+t+"=([^&#]*)",r=new RegExp(n),o=r.exec(e);return null===o||o&&"string"!=typeof o[1]&&o[1].length?"":_.decodeURIComponent(o[1]).replace(/\+/g," ")},_.urlParse=function(e){var t=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=typeof e)return!1;var t=this._values.QueryString||"";for(var n in e)t=new RegExp(n+"[^&]+").test(t)?t.replace(new RegExp(n+"[^&]+"),n+"="+e[n]):"&"===t.slice(-1)?t+n+"="+e[n]:""===t?n+"="+e[n]:t+"&"+n+"="+e[n];this._values.QueryString=t},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:"",e+=this._values.Fragment?"#"+this._values.Fragment:""},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:""},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);if(!t)throw"DPURLParser::_parse -> Invalid URL";for(var n in this._fields)void 0!==t[this._fields[n]]&&(this._values[n]=t[this._fields[n]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname},new t(e)},_.draggable=function(e,t){function n(){var e=document;return null!=e.pageXOffset?{x:e.pageXOffset,y:e.pageYOffset}:{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}}function r(t){t=t||window.event;var r=n();e.style.left=t.clientX+r.x-c+"px",e.style.top=t.clientY+r.y-f+"px",t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function o(e){e||(e=window.event),document.removeEventListener?(document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",r)):document.detachEvent&&(document.detachEvent("onmouseup",o),document.detachEvent("onmousemove",r)),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}var i=n(),a=t.clientX+i.x,s=t.clientY+i.y,u=e.offsetLeft,l=e.offsetTop,c=a-u,f=s-l;document.addEventListener?(document.addEventListener("mousemove",r),document.addEventListener("mouseup",o)):document.attachEvent&&(document.attachEvent("onmousemove",r),document.attachEvent("onmouseup",o)),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,e.style.bottom="auto"},_.hasStandardBrowserEnviroment=function(){return window?document?navigator?screen?void 0:"screen":"navigator":"document":"window"},_.bindReady=function(e,t){t=t||window;var n=!1,r=!0,o=t.document,i=o.documentElement,a=o.addEventListener,s=a?"addEventListener":"attachEvent",u=a?"removeEventListener":"detachEvent",l=a?"":"on",c=function(r){("readystatechange"!=r.type||"complete"==o.readyState)&&(("load"==r.type?t:o)[u](l+r.type,c,!1),!n&&(n=!0)&&e.call(t,r.type||r))},f=function(){try{i.doScroll("left")}catch(e){return void setTimeout(f,50)}c("poll")};if("complete"==o.readyState)e.call(t,"lazy");else{if(!a&&i.doScroll){try{r=!t.frameElement}catch(e){}r&&f()}o[s](l+"DOMContentLoaded",c,!1),o[s](l+"readystatechange",c,!1),t[s](l+"load",c,!1)}},_.addEvent=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation,t._getPath=e._getPath),t}function t(t,n,r){return function(o){if(o=o||e(window.event)){o.target=o.srcElement;var i,a,s=!0;return"function"==typeof r&&(i=r(o)),a=n.call(t,o),(!1===i||!1===a)&&(s=!1),s}}}e._getPath=function(){var e=this,t=function(){try{var t=e.target,n=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,n.unshift(t);return n}catch(e){return[]}};return this.path||this.composedPath&&this.composedPath()||t()},e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(n,r,o){if(n&&n.addEventListener)n.addEventListener(r,function(t){t._getPath=e._getPath,o.call(this,t)},!1);else{var i="on"+r,a=n[i];n[i]=t(n,o,a)}}.apply(null,arguments)},_.addHashEvent=function(e){var t="pushState"in window.history?"popstate":"hashchange";_.addEvent(window,t,e)},_.cookie={get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return _.decodeURIComponent(o.substring(t.length,o.length))}return null},set:function(e,t,n,r,o){r=void 0===r?sd.para.cross_subdomain:r;var i="",a="",s="";if(n=null==n?73e3:n,r){var u=_.url("domain",location.href);i=u?"; domain=."+u:""}if(0!==n){var l=new Date;"s"===String(n).slice(-1)?l.setTime(l.getTime()+1e3*Number(String(n).slice(0,-1))):l.setTime(l.getTime()+24*n*60*60*1e3),a="; expires="+l.toGMTString()}o&&(s="; secure"),document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+i+s},remove:function(e,t){t=void 0===t?sd.para.cross_subdomain:t,_.cookie.set(e,"",-1,t)},getCookieName:function(e){var t="";return!1===sd.para.cross_subdomain?(t=_.url("sub",location.href),t="string"==typeof t&&""!==t?"sajssdk_2015_"+e+"_"+t:"sajssdk_2015_root_"+e):t="sajssdk_2015_cross_"+e,t},getNewUser:function(){return null!==this.get("sensorsdata_is_new_user")||null!==this.get(this.getCookieName("new_user"))}},_.getEleInfo=function(e){if(!e.target)return!1;var t=e.target,n=t.tagName.toLowerCase(),r={};r.$element_type=n,r.$element_name=t.getAttribute("name"),r.$element_id=t.getAttribute("id"),r.$element_class_name="string"==typeof t.className?t.className:null,r.$element_target_url=t.getAttribute("href");var o="";return t.textContent?o=_.trim(t.textContent):t.innerText&&(o=_.trim(t.innerText)),o&&(o=o.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),r.$element_content=o||"","input"===n&&("button"===t.type||"submit"===t.type?r.$element_content=t.value||"":sd.para.heatmap&&"function"==typeof sd.para.heatmap.collect_input&&sd.para.heatmap.collect_input(t)&&(r.$element_content=t.value||"")),r=_.strip_empty_properties(r),r.$url=location.href,r.$url_path=location.pathname,r.$title=document.title,r},_.localStorage={get:function(e){return window.localStorage.getItem(e)},parse:function(e){var t;try{t=JSON.parse(_.localStorage.get(e))||null}catch(e){}return t},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},isSupport:function(){var e=!0;try{var t="__sensorsdatasupport__",n="testIsSupportStorage";_.localStorage.set(t,n),_.localStorage.get(t)!==n&&(e=!1),_.localStorage.remove(t)}catch(t){e=!1}return e}},_.sessionStorage={isSupport:function(){var e=!0,t="__sensorsdatasupport__",n="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,n),sessionStorage.removeItem(t,n),e=!0):e=!1}catch(t){e=!1}return e}},_.xhr=function(e){if(e){var t=new XMLHttpRequest;return"withCredentials"in t?t:"undefined"!=typeof XDomainRequest?new XDomainRequest:t}if(XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},_.ajax=function(e){function t(e){try{return JSON.parse(e)}catch(e){return{}}}var n=_.xhr(e.cors);e.type||(e.type=e.data?"POST":"GET"),e=_.extend({success:function(){},error:function(){}},e),n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<300||304==n.status?e.success(t(n.responseText)):e.error(t(n.responseText),n.status),n.onreadystatechange=null,n.onload=null)},n.open(e.type,e.url,!0);try{if(n.withCredentials=!0,_.isObject(e.header))for(var r in e.header)n.setRequestHeader(r,e.header[r]);e.data&&(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?n.setRequestHeader("Content-type","application/json; charset=UTF-8"):n.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){}n.send(e.data||null)},_.loadScript=function(e){e=_.extend({success:function(){},error:function(){},appendCall:function(e){document.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&(t=document.createElement("link"),t.rel="stylesheet",t.href=e.url),"js"===e.type&&(t=document.createElement("script"),t.async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)},_.url=function(){function e(){return new RegExp(/(.*?)\.?([^\.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function t(e){return _.decodeURIComponent(e.replace(/\+/g," "))}function n(e,t){var n=e.charAt(0),r=t.split(n);return n===e?r:(e=parseInt(e.substring(1),10),r[0>e?r.length+e:e-1])}function r(e,n){for(var r=e.charAt(0),o=n.split("&"),i=[],a={},s=[],u=e.substring(1),l=0,c=o.length;c>l;l++)if(i=o[l].match(/(.*?)=(.*)/),i||(i=[o[l],o[l],""]),""!==i[1].replace(/\s/g,"")){if(i[2]=t(i[2]||""),u===i[1])return i[2];s=i[1].match(/(.*)\[([0-9]+)\]/),s?(a[s[1]]=a[s[1]]||[],a[s[1]][s[2]]=i[2]):a[i[1]]=i[2]}return r===e?a:a[u]}return function(t,o){var i,a={};if("tld?"===t)return e();if(o=o||window.location.toString(),!t)return o;if(t=t.toString(),i=o.match(/^mailto:([^\/].+)/))a.protocol="mailto",a.email=i[1];else{if((i=o.match(/(.*?)\/#\!(.*)/))&&(o=i[1]+i[2]),(i=o.match(/(.*?)#(.*)/))&&(a.hash=i[2],o=i[1]),a.hash&&t.match(/^#/))return r(t,a.hash);if((i=o.match(/(.*?)\?(.*)/))&&(a.query=i[2],o=i[1]),a.query&&t.match(/^\?/))return r(t,a.query);if((i=o.match(/(.*?)\:?\/\/(.*)/))&&(a.protocol=i[1].toLowerCase(),o=i[2]),(i=o.match(/(.*?)(\/.*)/))&&(a.path=i[2],o=i[1]),a.path=(a.path||"").replace(/^([^\/])/,"/$1").replace(/\/$/,""),t.match(/^[\-0-9]+$/)&&(t=t.replace(/^([^\/])/,"/$1")),t.match(/^\//))return n(t,a.path.substring(1));if(i=n("/-1",a.path.substring(1)),i&&(i=i.match(/(.*?)\.(.*)/))&&(a.file=i[0],a.filename=i[1],a.fileext=i[2]),(i=o.match(/(.*)\:([0-9]+)$/))&&(a.port=i[2],o=i[1]),(i=o.match(/(.*?)@(.*)/))&&(a.auth=i[1],o=i[2]),a.auth&&(i=a.auth.match(/(.*)\:(.*)/),a.user=i?i[1]:a.auth,a.pass=i?i[2]:void 0),a.hostname=o.toLowerCase(),"."===t.charAt(0))return n(t,a.hostname);e()&&(i=a.hostname.match(e()))&&(a.tld=i[3],a.domain=i[2]?i[2]+"."+i[3]:void 0,a.sub=i[1]||void 0),a.port=a.port||("https"===a.protocol?"443":"80"),a.protocol=a.protocol||("443"===a.port?"https":"http")}return t in a?a[t]:"{}"===t?a:""}}(),_.ry=function(e){return new _.ry.init(e)},_.ry.init=function(e){this.ele=e},_.ry.init.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&_.isUndefined(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument,n=t.documentElement;return{top:e.top+window.pageYOffset-n.clientTop,left:e.left+window.pageXOffset-n.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=document.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),_.ry(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var n=null;if("function"==typeof window.getMatchedCSSRules&&(n=getMatchedCSSRules(this.ele)),!n||!_.isArray(n))return null;for(var r=n.length-1;r>=0;r--){if(t=n[r].style.getPropertyValue(e))return t}},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(e){return this.sibling(this.ele,"previousSibling")},siblings:function(e){return this.siblings((this.ele.parentNode||{}).firstChild,this.ele)},children:function(e){return this.siblings(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return e=e&&11!==e.nodeType?e:null,_.ry(e)}},_.jssdkDebug=function(e,t){if(sd.para.is_debug)if(_.isString(e))sd.registerPage({_jssdk_debug_info:e});else{var n=store.getCookieName(),r=document.cookie.match(new RegExp(n+"[^;]+"));n=r&&r[0]?r[0]:"",e._jssdk_debug_info="("+n+")"+navigator.userAgent}},_.strToUnicode=function(e){if("string"!=typeof e)return logger.info("转换unicode错误",e),e;for(var t="",n=0;n<e.length;n++)t+="\\"+e.charCodeAt(n).toString(16);return t},_.querySelectorAll=function(e){if("string"!=typeof e)return logger.info("选择器错误",e),[];var t=e.split(" ");1===t.length?/^#\d+/.test(t[0])&&(e="#"+_.strToUnicode(t[0].slice(1))):/^#\d+/.test(t[0])&&(t[0]="#"+_.strToUnicode(t[0].slice(1)),e=t.join(" "));try{return document.querySelectorAll(e)}catch(t){return logger.info("错误",e),[]}},_.getReferrer=function(e){var e=e||document.referrer;return"string"!=typeof e?"取值异常_referrer异常_"+String(e):(0===e.indexOf("https://www.baidu.com/")&&(e=e.split("?")[0]),e=e.slice(0,sd.para.max_referrer_string_length),"string"==typeof e?e:"")},_.getKeywordFromReferrer=function(){var e={baidu:"wd",google:"q",bing:"q",yahoo:"p",sogou:"query",so:"q"};if(document&&"string"==typeof document.referrer){if(0===document.referrer.indexOf("http")){var t=_.url("domain",document.referrer),n=_.url("?",document.referrer);for(var r in e)if(0===t.indexOf(r)&&"object"==typeof n&&n[e[r]])return n[e[r]];return"未取到值"}return""===document.referrer?"未取到值_直接打开":"未取到值_非http的url"}return"取值异常_referrer异常_"+String(document.referrer)},_.getSourceFromReferrer=function(){function e(e,t){for(var n=0;n<e.length;n++)if(-1!==t.split("?")[0].indexOf(e[n]))return!0}var t=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],n=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],r=document.referrer||"",o=_.info.pageProp.url;if(o){var i=o.match(/(utm_source|utm_medium|utm_campaign|utm_content|utm_term)\=[^&]+/);return i&&i[0]?"付费广告流量":e(t,r)?"自然搜索流量":e(n,r)?"社交网站流量":""===r?"直接流量":"引荐流量"}return"获取url异常"},_.info={initPage:function(){var e=_.getReferrer(),t=e?_.url("hostname",e):e,n=e?_.url("domain",e):e,r=location.href,o=r?_.url("hostname",r):r,i=r?_.url("domain",r):r;e&&!n&&_.jssdkDebug("referrer_domain异常_"+e+"_"+n),i||_.jssdkDebug("url_domain异常_"+r+"_"+i),this.pageProp={referrer:e,referrer_host:t,referrer_domain:n,url:r,url_host:o,url_domain:i}},pageProp:{},campaignParams:function(){var e=source_channel_standard.split(" "),t="",n={};return _.isArray(sd.para.source_channel)&&sd.para.source_channel.length>0&&(e=e.concat(sd.para.source_channel),e=_.unique(e)),_.each(e,function(e){t=_.getQueryParam(location.href,e),t.length&&(n[e]=t)}),n},campaignParamsStandard:function(e,t){e=e||"",t=t||"";var n=_.info.campaignParams(),r={},o={};for(var i in n)-1!==(" "+source_channel_standard+" ").indexOf(" "+i+" ")?r[e+i]=n[i]:o[t+i]=n[i];return{$utms:r,otherUtms:o}},properties:function(){return{$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$lib:"js",$lib_version:String(LIB_VERSION)}},currentProps:{},register:function(e){_.extend(_.info.currentProps,e)}},sd.sendState={},sd.sendState._complete=0,sd.sendState._receive=0,sd.sendState.getSendCall=function(e,t){if(sd.is_heatmap_render_mode)return!1;e._nocache=(String(Math.random())+String(Math.random())+String(Math.random())).replace(/\./g,"").slice(0,15);var n=e;if(e=JSON.stringify(e),logger.info(n),!0===sd.para.use_app_track||"only"===sd.para.use_app_track)if("object"==typeof SensorsData_APP_JS_Bridge&&SensorsData_APP_JS_Bridge.sensorsdata_track)SensorsData_APP_JS_Bridge.sensorsdata_track(e),"function"==typeof t&&t();else if(/sa-sdk-ios/.test(navigator.userAgent)&&!window.MSStream){var r=document.createElement("iframe");r.setAttribute("src","sensorsanalytics://trackEvent?event="+encodeURIComponent(e)),document.documentElement.appendChild(r),r.parentNode.removeChild(r),r=null,"function"==typeof t&&t()}else!0===sd.para.use_app_track&&this.prepareServerUrl(e,t);else"mui"===sd.para.use_app_track?_.isObject(window.plus)&&window.plus.SDAnalytics&&window.plus.SDAnalytics.trackH5Event&&window.plus.SDAnalytics.trackH5Event(e):this.prepareServerUrl(e,t)},sd.sendState.getUrlPara=function(e,t){var n=_.base64Encode(t),r="crc="+_.hashCode(n);return-1!==e.indexOf("?")?e+"&data="+encodeURIComponent(n)+"&ext="+encodeURIComponent(r):e+"?data="+encodeURIComponent(n)+"&ext="+encodeURIComponent(r)},sd.sendState.prepareServerUrl=function(e,t){if(_.isArray(sd.para.server_url))for(var n=0;n<sd.para.server_url.length;n++)this.sendCall(this.getUrlPara(sd.para.server_url[n],e),t);else this.sendCall(this.getUrlPara(sd.para.server_url,e),t)},sd.sendState.stateInfo=function(e){this.callback=e.callback,this.hasCalled=!1,this.img=document.createElement("img"),this.server_url=e.server_url,this.sendState=e.sendState,this.start()},sd.sendState.stateInfo.prototype.start=function(){function e(){"object"!=typeof t||"function"!=typeof t.callback||t.hasCalled||(t.hasCalled=!0,t.callback())}var t=this;setTimeout(e,sd.para.callback_timeout),this.img.onload=function(n){this.onload=null,++t.sendState._complete,e()},this.img.onerror=function(t){this.onerror=null,e()},this.img.onabort=function(t){this.onabort=null,e()},this.img.src=this.server_url},sd.sendState.sendCall=function(e,t){++this._receive,this["_state"+this._receive]=new this.stateInfo({callback:t,server_url:e,sendState:this})};var saNewUser={checkIsAddSign:function(e){"track"===e.type&&(_.cookie.getNewUser()?e.properties.$is_first_day=!0:e.properties.$is_first_day=!1)},is_first_visit_time:!1,checkIsFirstTime:function(e){"track"===e.type&&"$pageview"===e.event&&(this.is_first_visit_time?(e.properties.$is_first_time=!0,this.is_first_visit_time=!1):e.properties.$is_first_time=!1)},setDeviceId:function(e){var t=null,n=_.cookie.get("sensorsdata2015jssdkcross"),r={};null!=n&&_.isJSONString(n)&&(r=JSON.parse(n),r.$device_id&&(t=r.$device_id)),t=t||e,!0===sd.para.cross_subdomain?store.set("$device_id",t):(r.$device_id=t,_.cookie.set("sensorsdata2015jssdkcross",JSON.stringify(r),null,!0)),sd.para.is_track_device_id&&(_.info.currentProps.$device_id=t)},storeInitCheck:function(){if(is_first_visitor){var e=new Date,t={h:23-e.getHours(),m:59-e.getMinutes(),s:59-e.getSeconds()};_.cookie.set(_.cookie.getCookieName("new_user"),"1",3600*t.h+60*t.m+t.s+"s"),this.is_first_visit_time=!0}else _.cookie.getNewUser()||(this.checkIsAddSign=function(e){"track"===e.type&&(e.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(e){"track"===e.type&&"$pageview"===e.event&&(e.properties.$is_first_time=!1)}},checkIsFirstLatest:function(){for(var e=_.info.pageProp.url_domain,t=_.info.pageProp.referrer_domain,n=["$utm_source","$utm_medium","$utm_campaign","$utm_content","$utm_term"],r=store.getProps(),o=0;o<n.length;o++)n[o]in r&&delete r[n[o]];store.setProps(r,!0),e!==t&&sd.register({$latest_traffic_source_type:_.getSourceFromReferrer(),$latest_referrer:_.info.pageProp.referrer,$latest_referrer_host:_.info.pageProp.referrer_host,$latest_search_keyword:_.getKeywordFromReferrer()});var i=_.info.campaignParamsStandard("$latest_","_latest_"),a=i.$utms,s=i.otherUtms;_.isEmptyObject(a)||sd.register(a),_.isEmptyObject(s)||sd.register(s)}},saEvent={};saEvent.checkOption={regChecks:{regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i},checkPropertiesKey:function(e){var t=this,n=!0;return _.each(e,function(e,r){t.regChecks.regName.test(r)||(n=!1)}),n},check:function(e,t){return"string"==typeof this[e]?this[this[e]](t):this[e](t)},str:function(e){return!!_.isString(e)||(logger.info("请检查参数格式,必须是字符串"),!0)},properties:function(e){return _.strip_sa_properties(e),!e||(_.isObject(e)?!!this.checkPropertiesKey(e)||(logger.info("properties里的key必须是由字符串数字_组成，且不能是系统保留字"),!0):(logger.info("properties可以没有，但有的话必须是对象"),!0))},propertiesMust:function(e){return _.strip_sa_properties(e),void 0===e||!_.isObject(e)||_.isEmptyObject(e)?(logger.info("properties必须是对象且有值"),!0):!!this.checkPropertiesKey(e)||(logger.info("properties里的key必须是由字符串数字_组成，且不能是系统保留字"),!0)},event:function(e){return!(!_.isString(e)||!this.regChecks.regName.test(e))||(logger.info("请检查参数格式,必须是字符串,且eventName必须是字符串_开头,且不能是系统保留字"),!0)},test_id:"str",group_id:"str",distinct_id:function(e){return!(!_.isString(e)||!/^.{1,255}$/.test(e))||(logger.info("distinct_id必须是不能为空，且小于255位的字符串"),!1)}},saEvent.check=function(e){var t=!0;for(var n in e)if(!this.checkOption.check(n,e[n]))return!1;return t},saEvent.send=function(e,t){var n={distinct_id:store.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(LIB_VERSION)},properties:{}};if(_.isObject(e)&&_.isObject(e.properties)&&!_.isEmptyObject(e.properties)&&e.properties.$lib_detail&&(n.lib.$lib_detail=e.properties.$lib_detail,delete e.properties.$lib_detail),"string"!=typeof store.getDistinctId()||""==typeof store.getDistinctId()){var r="";switch(store.getDistinctId()){case null:r="null";break;case void 0:r="undefined";break;case"":r="空";break;default:r=String(store.getDistinctId())}error_msg.push("distinct_id-"+just_test_distinctid+"-"+just_test_distinctid_2+"-"+r+"-"+just_test_distinctid_detail+"-"+just_test_distinctid_detail2)}_.extend(n,e),error_msg.length>0&&(n.jssdk_error=error_msg.join("--")),_.isObject(e.properties)&&!_.isEmptyObject(e.properties)&&_.extend(n.properties,e.properties),_.isObject(t)&&_.extend(n.lib,t),e.type&&"profile"===e.type.slice(0,7)||(n.properties=_.extend({},_.info.properties(),store.getProps(),store.getSessionProps(),_.info.currentProps,n.properties),_.isString(n.properties.$latest_referrer)||(n.properties.$latest_referrer="取值异常",_.jssdkDebug(n.properties,store.getProps())),_.isString(n.properties.$latest_referrer_host)||(n.properties.$latest_referrer_host="取值异常"),_.isString(n.properties.$latest_search_keyword)||(n.properties.$latest_search_keyword="取值异常"),_.isString(n.properties.$latest_traffic_source_type)||(n.properties.$latest_traffic_source_type="取值异常")),n.properties.$time&&_.isDate(n.properties.$time)?(n.time=1*n.properties.$time,delete n.properties.$time):sd.para.use_client_time&&(n.time=1*new Date),_.searchObjDate(n),_.searchObjString(n),saNewUser.checkIsAddSign(n),saNewUser.checkIsFirstTime(n),!0===sd.para.debug_mode?(logger.info(n),this.debugPath(JSON.stringify(n),t)):sd.sendState.getSendCall(n,t)},saEvent.debugPath=function(e,t){var n=e,r="";r=-1!==sd.para.debug_mode_url.indexOf("?")?sd.para.debug_mode_url+"&data="+encodeURIComponent(_.base64Encode(e)):sd.para.debug_mode_url+"?data="+encodeURIComponent(_.base64Encode(e)),_.ajax({url:r,type:"GET",cors:!0,header:{"Dry-Run":String(sd.para.debug_mode_upload)},success:function(e){!0===_.isEmptyObject(e)?alert("debug数据发送成功"+n):alert("debug失败 错误原因"+JSON.stringify(e))}})};var store=sd.store={_sessionState:{},_state:{},getProps:function(){return this._state.props||{}},getSessionProps:function(){return this._sessionState},getDistinctId:function(){return this._state.distinct_id},getFirstId:function(){return this._state.first_id},toState:function(e){var t=null;if(null!=e&&_.isJSONString(e))if(t=JSON.parse(e),this._state=_.extend(t),t.distinct_id){if("object"==typeof t.props){for(var n in t.props)"string"==typeof t.props[n]&&(t.props[n]=t.props[n].slice(0,sd.para.max_referrer_string_length));this.save()}}else this.set("distinct_id",_.UUID()),error_msg.push("toStateParseDistinctError");else this.set("distinct_id",_.UUID()),error_msg.push("toStateParseError")},initSessionState:function(){var e=_.cookie.get("sensorsdata2015session"),t=null;null!==e&&"object"==typeof(t=JSON.parse(e))&&(this._sessionState=t||{})},setOnce:function(e,t){e in this._state||this.set(e,t)},set:function(e,t){this._state=this._state||{},this._state[e]=t,this.save()},change:function(e,t){this._state[e]=t},setSessionProps:function(e){var t=this._sessionState;_.extend(t,e),this.sessionSave(t)},setSessionPropsOnce:function(e){var t=this._sessionState;_.coverExtend(t,e),this.sessionSave(t)},setProps:function(e,t){var n=this._state.props||{};t?this.set("props",e):(_.extend(n,e),this.set("props",n))},removeProps:function(e){if(!_.isArray(e))return!1;for(var t=this._state.props||{},n=0;n<e.length;n++)e[n]in t&&delete t[n];this.set("props",t)},setPropsOnce:function(e){var t=this._state.props||{};_.coverExtend(t,e),this.set("props",t)},clearAllProps:function(){this._sessionState={};for(var e in this._state.props)1!==e.indexOf("latest_")&&delete this._state.props[e];this.sessionSave({}),this.save()},sessionSave:function(e){this._sessionState=e,_.cookie.set("sensorsdata2015session",JSON.stringify(this._sessionState),0)},save:function(){_.cookie.set(this.getCookieName(),JSON.stringify(this._state),73e3,sd.para.cross_subdomain)},getCookieName:function(){var e="";return!1===sd.para.cross_subdomain?(e=_.url("sub",location.href),e="string"==typeof e&&""!==e?"sa_jssdk_2015_"+e:"sa_jssdk_2015_root"):e="sensorsdata2015jssdkcross",e},init:function(){navigator.cookieEnabled||(error_msg.push("cookieNotEnable"),_.localStorage.isSupport||error_msg.push("localStorageNotEnable")),this.initSessionState();var e=_.UUID(),t=_.cookie.get(this.getCookieName());null===t?(is_first_visitor=!0,just_test_distinctid=1,this.set("distinct_id",e)):(just_test_distinctid=2,just_test_distinctid_detail=JSON.stringify(t),just_test_distinctid_detail2=JSON.stringify(document.cookie.match(/2015[^;]+/g)),_.isJSONString(t)&&JSON.parse(t).distinct_id||(is_first_visitor=!0),this.toState(t)),saNewUser.setDeviceId(e),saNewUser.storeInitCheck(),saNewUser.checkIsFirstLatest()}},commonWays={isReady:function(e){e()},getUtm:function(){return _.info.campaignParams()},getStayTime:function(){return(new Date-sd._t)/1e3},setInitReferrer:function(){var e=_.getReferrer();sd.setOnceProfile({_init_referrer:e,_init_referrer_host:_.info.pageProp.referrer_host})},setSessionReferrer:function(){var e=_.getReferrer();store.setSessionPropsOnce({_session_referrer:e,_session_referrer_host:_.info.pageProp.referrer_host})},setDefaultAttr:function(){_.info.register({_current_url:location.href,_referrer:_.getReferrer(),_referring_host:_.info.pageProp.referrer_host})},trackHeatMap:function(e){if("object"==typeof e&&e.tagName){var t=e.tagName.toLowerCase(),n=e.parentNode.tagName.toLowerCase();"button"!==t&&"a"!==t&&"a"!==n&&"button"!==n&&"input"!==t&&"textarea"!==t&&heatmap.start(null,e,t)}},autoTrackSinglePage:function(e,t){function n(){var e=_.info.campaignParams(),t={};for(var n in e)-1!==(" "+source_channel_standard+" ").indexOf(" "+n+" ")?t["$"+n]=e[n]:t[n]=e[n];return t}function r(){sd.track("$pageview",_.extend({$referrer:o,$referrer_host:_.url("hostname",o)||"",$url:location.href,$url_path:location.pathname,$title:document.title},e,n()),t),o=location.href}var o=_.info.pageProp.url;r(),this.autoTrackSinglePage=r},autoTrackWithoutProfile:function(e,t){this.autoTrack(_.extend(e,{not_set_profile:!0}),t)},autoTrack:function(e,t){e=_.isObject(e)?e:{};var n=_.info.campaignParams(),r={};for(var o in n)-1!==(" "+source_channel_standard+" ").indexOf(" "+o+" ")?r["$"+o]=n[o]:r[o]=n[o];is_first_visitor&&!e.not_set_profile&&sd.setOnceProfile(_.extend({$first_visit_time:new Date,$first_referrer:_.getReferrer(),$first_browser_language:navigator.language||"取值异常",$first_browser_charset:document.charset||"取值异常",$first_referrer_host:_.info.pageProp.referrer_host,$first_traffic_source_type:_.getSourceFromReferrer(),$first_search_keyword:_.getKeywordFromReferrer()},r)),e.not_set_profile&&delete e.not_set_profile;var i=location.href;sd.para.is_single_page&&_.addHashEvent(function(){var n=_.getReferrer(i);sd.track("$pageview",_.extend({$referrer:n,$referrer_host:_.url("hostname",n)||"",$url:location.href,$url_path:location.pathname,$title:document.title},r,e),t),i=location.href}),sd.track("$pageview",_.extend({$referrer:_.getReferrer(),$referrer_host:_.info.pageProp.referrer_host,$url:location.href,$url_path:location.pathname,$title:document.title},r,e),t)}};sd.quick=function(){var e=slice.call(arguments),t=e[0],n=e.slice(1);return"string"==typeof t&&commonWays[t]?commonWays[t].apply(commonWays,n):void("function"==typeof t?t.apply(sd,n):logger.info("quick方法中没有这个功能"+e[0]))},sd.track=function(e,t,n){saEvent.check({event:e,properties:t})&&saEvent.send({type:"track",event:e,properties:t},n)},_.trackLink=function(e,t,n){function r(e){function r(){i||(i=!0,location.href=o.href)}e.stopPropagation(),e.preventDefault();var i=!1;setTimeout(r,1e3),sd.track(t,n,r)}e=e||{};var o=null;return e.ele&&(o=e.ele),e.event&&(o=e.target?e.target:e.event.target),n=n||{},!(!o||"object"!=typeof o)&&(!o.href||/^javascript/.test(o.href)||o.target||o.download||o.onclick?(sd.track(t,n),!1):(e.event&&r(e.event),void(e.ele&&_.addEvent(e.ele,"click",function(e){r(e)}))))},sd.trackLink=function(e,t,n){"object"==typeof e&&e.tagName?_.trackLink({ele:e},t,n):"object"==typeof e&&e.target&&e.event&&_.trackLink(e,t,n)},sd.trackLinks=function(e,t,n){return n=n||{},!(!e||"object"!=typeof e)&&(!(!e.href||/^javascript/.test(e.href)||e.target)&&void _.addEvent(e,"click",function(r){function o(){i||(i=!0,location.href=e.href)}r.preventDefault();var i=!1;setTimeout(o,1e3),sd.track(t,n,o)}))},sd.setProfile=function(e,t){saEvent.check({propertiesMust:e})&&saEvent.send({type:"profile_set",properties:e},t)},sd.setOnceProfile=function(e,t){saEvent.check({propertiesMust:e})&&saEvent.send({type:"profile_set_once",properties:e},t)},sd.appendProfile=function(e,t){saEvent.check({propertiesMust:e})&&(_.each(e,function(t,n){_.isString(t)?e[n]=[t]:_.isArray(t)||(delete e[n],logger.info("appendProfile属性的值必须是字符串或者数组"))}),_.isEmptyObject(e)||saEvent.send({type:"profile_append",properties:e},t))},sd.incrementProfile=function(e,t){function n(e){for(var t in e)if(!/-*\d+/.test(String(e[t])))return!1;return!0}var r=e;_.isString(e)&&(e={},e[r]=1),saEvent.check({propertiesMust:e})&&(n(e)?saEvent.send({type:"profile_increment",properties:e},t):logger.info("profile_increment的值只能是数字"))},sd.deleteProfile=function(e){saEvent.send({type:"profile_delete"},e),store.set("distinct_id",_.UUID())},sd.unsetProfile=function(e,t){var n=e,r={};_.isString(e)&&(e=[],e.push(n)),_.isArray(e)?(_.each(e,function(e){_.isString(e)?r[e]=!0:logger.info("profile_unset给的数组里面的值必须时string,已经过滤掉",e)}),saEvent.send({type:"profile_unset",properties:r},t)):logger.info("profile_unset的参数是数组")},sd.identify=function(e,t){"number"==typeof e&&(e=String(e));var n=store.getFirstId();void 0===e?n?store.set("first_id",_.UUID()):store.set("distinct_id",_.UUID()):saEvent.check({distinct_id:e})?!0===t?n?store.set("first_id",e):store.set("distinct_id",e):n?store.change("first_id",e):store.change("distinct_id",e):logger.info("identify的参数必须是字符串")},sd.trackSignup=function(e,t,n,r){saEvent.check({distinct_id:e,event:t,properties:n})&&(saEvent.send({original_id:store.getFirstId()||store.getDistinctId(),distinct_id:e,type:"track_signup",event:t,properties:n},r),store.set("distinct_id",e))},sd.trackAbtest=function(e,t){},sd.registerPage=function(e){saEvent.check({properties:e})?_.extend(_.info.currentProps,e):logger.info("register输入的参数有误")},sd.clearAllRegister=function(){store.clearAllProps()},sd.register=function(e){saEvent.check({properties:e})?store.setProps(e):logger.info("register输入的参数有误")},sd.registerOnce=function(e){saEvent.check({properties:e})?store.setPropsOnce(e):logger.info("registerOnce输入的参数有误")},sd.registerSession=function(e){saEvent.check({properties:e})?store.setSessionProps(e):logger.info("registerSession输入的参数有误")},sd.registerSessionOnce=function(e){saEvent.check({properties:e})?store.setSessionPropsOnce(e):logger.info("registerSessionOnce输入的参数有误")},sd.login=function(e){if("number"==typeof e&&(e=String(e)),saEvent.check({distinct_id:e})){var t=store.getFirstId(),n=store.getDistinctId();e!==n&&(t?sd.trackSignup(e,"$SignUp"):(store.set("first_id",n),sd.trackSignup(e,"$SignUp")))}else logger.info("login的参数必须是字符串")},sd.logout=function(e){var t=store.getFirstId();t?(store.set("first_id",""),!0===e?store.set("distinct_id",_.UUID()):store.set("distinct_id",t)):logger.info("没有first_id，logout失败")};var heatmap={getDomIndex:function(e){var t=[].indexOf;if(!e.parentNode)return-1;var n=e.parentNode.children;if(!n)return-1;var r=n.length;if(t)return t.call(n,e);for(var o=0;r>o;++o)if(e==n[o])return o;return-1},selector:function(e){var t=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.id?"#"+e.id:e.tagName.toLowerCase()+(~t?":nth-child("+(t+1)+")":"")},getDomSelector:function(e,t){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var n=e.nodeName.toLowerCase();return e&&"body"!==n&&1==e.nodeType?(t.unshift(this.selector(e)),e.id?t.join(" > "):this.getDomSelector(e.parentNode,t)):(t.unshift("body"),t.join(" > "))},na:function(){var e=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(e)?0:e,10)},i:function(){var e=0;try{e=o.documentElement.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},W:function(e){var t=parseInt(+e.clientX+ +this.na(),10),e=parseInt(+e.clientY+ +this.i(),10);return{x:isNaN(t)?0:t,y:isNaN(e)?0:e}},start:function(e,t,n){if(sd.para.heatmap&&sd.para.heatmap.collect_element&&!sd.para.heatmap.collect_element(t))return!1;var r=this.getDomSelector(t),o=_.getEleInfo({target:t});if(o.$element_selector=r||"",sd.para.heatmap&&sd.para.heatmap.custom_property){var i=sd.para.heatmap.custom_property(t);_.isObject(i)&&(o=_.extend(o,i))}"a"===n&&sd.para.heatmap&&!0===sd.para.heatmap.isTrackLink?_.trackLink({event:e,target:t},"$WebClick",o):sd.track("$WebClick",o)},hasElement:function(e){var t=e._getPath();if(_.isArray(t)&&t.length>0)for(var n=0;n<t.length;n++)if(t[n]&&t[n].tagName&&"a"===t[n].tagName.toLowerCase())return t[n];return!1},initScrollmap:function(){if(!_.isObject(sd.para.heatmap)||"default"!==sd.para.heatmap.scroll_notice_map)return!1;var e=function(e){var t={};return t.timeout=e.timeout||1e3,t.func=e.func,t.hasInit=!1,t.inter=null,t.main=function(e){this.func(e),this.inter=null},t.go=function(e){var n={};this.inter||(n.$viewport_position=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,n.$viewport_position=Math.round(n.$viewport_position)||0,n.$viewport_height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,n.$viewport_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,e?t.main(n):this.inter=setTimeout(function(){t.main(n)},this.timeout))},t},t=e({timeout:1e3,func:function(e){var t=new Date,n=t-this.current_time;n>sd.para.heatmap.scroll_delay_time&&(e.$url=location.href,e.$title=document.title,e.$url_path=location.pathname,e.event_duration=parseInt(n),sd.track("$WebStay",e)),this.current_time=t}});t.current_time=new Date,_.addEvent(window,"scroll",function(){t.go()}),_.addEvent(window,"unload",function(){t.go("notime")})},initHeatmap:function(){var e=this;return!(!_.isObject(sd.para.heatmap)||"default"!==sd.para.heatmap.clickmap)&&(!(_.isFunction(sd.para.heatmap.collect_url)&&!sd.para.heatmap.collect_url())&&("all"===sd.para.heatmap.collect_elements?sd.para.heatmap.collect_elements="all":sd.para.heatmap.collect_elements="interact",void("all"===sd.para.heatmap.collect_elements?_.addEvent(document,"click",function(t){var n=t||window.event;if(!n)return!1;var r=n.target||n.srcElement;if("object"!=typeof r)return!1;if("string"!=typeof r.tagName)return!1;var o=r.tagName.toLowerCase();if("body"===o.toLowerCase()||"html"===o.toLowerCase())return!1;if(!r||!r.parentNode||!r.parentNode.children)return!1;var i=r.parentNode.tagName.toLowerCase();"a"===i||"button"===i?e.start(n,r.parentNode,r.parentNode.tagName.toLowerCase()):e.start(n,r,o)}):_.addEvent(document,"click",function(t){var n=t||window.event;if(!n)return!1;var r=n.target||n.srcElement;if("object"!=typeof r)return!1;if("string"!=typeof r.tagName)return!1;var o=r.tagName.toLowerCase();if("body"===o.toLowerCase()||"html"===o.toLowerCase())return!1;if(!r||!r.parentNode||!r.parentNode.children)return!1;if(parent_ele=r.parentNode,"a"===o||"button"===o||"input"===o||"textarea"===o)e.start(n,r,o);else if("button"===parent_ele.tagName.toLowerCase()||"a"===parent_ele.tagName.toLowerCase())e.start(n,parent_ele,r.parentNode.tagName.toLowerCase());else if("area"===o&&"map"===parent_ele.tagName.toLowerCase()&&_.ry(parent_ele).prev().tagName&&"img"===_.ry(parent_ele).prev().tagName.toLowerCase())e.start(n,_.ry(parent_ele).prev(),_.ry(parent_ele).prev().tagName.toLowerCase());else{var i=e.hasElement(t);i&&e.start(n,i,i.tagName.toLowerCase())}}))))},prepare:function(e){function t(e,t,n){sd.para.heatmap_url?_.loadScript({success:function(){setTimeout(function(){"undefined"!=typeof sa_jssdk_heatmap_render&&sa_jssdk_heatmap_render(sd,e,t,n)},0)},error:function(){},type:"js",url:sd.para.heatmap_url}):logger.info("没有指定heatmap_url的路径")}var n=location.search.match(/sa-request-id=([^&#]+)/),r=location.search.match(/sa-request-type=([^&#]+)/),o=location.search.match(/sa-request-url=([^&#]+)/);n&&n[0]&&n[1]?(sd.is_heatmap_render_mode=!0,_.sessionStorage.isSupport()&&(o&&o[0]&&o[1]&&sessionStorage.setItem("sensors_heatmap_url",decodeURIComponent(o[1])),sessionStorage.setItem("sensors_heatmap_id",n[1]),r&&r[0]&&r[1]?"1"===r[1]||"2"===r[1]||"3"===r[1]?(r=r[1],sessionStorage.setItem("sensors_heatmap_type",r)):r=null:r=null!==sessionStorage.getItem("sensors_heatmap_type")?sessionStorage.getItem("sensors_heatmap_type"):null),t(n[1],r)):_.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("sensors_heatmap_id")?(sd.is_heatmap_render_mode=!0,t(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),location.href)):(e(),_.isObject(sd.para.heatmap)&&(this.initHeatmap(),this.initScrollmap()))}};return sd.init=function(e){(!e&&has_declare||e&&!has_declare)&&(sd.initPara(e),sd._init())},sd._init=function(){heatmap.prepare(function(){app_js_bridge(),_.info.initPage(),store.init(),sd._q&&_.isArray(sd._q)&&sd._q.length>0&&_.each(sd._q,function(e){sd[e[0]].apply(sd,slice.call(e[1]))})})},sd.init(),sd}catch(e){if("object"==typeof console&&console.log)try{console.log(e)}catch(e){}}})},,function(e,t,n){(function(r,o,i){function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=window.cow.favicons,n=q.faviconNode,r=t.default;if(n.length>0)switch(e=e||window.cow.pageType){case"home":r=t.default;break;case"folder":r=t.folder;break;case"doc":case"newdoc":r=t.doc;break;case"spreadsheet":case"sheet":r=t.sheet}if(n.attr("href")!==r){if(i.msie)return;n.attr("href",r)}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=a(u),c=n(5),f=a(c),d=n(4),p=a(d),h=n(23),m=a(h),v=n(208),y=a(v),g=n(147),b=a(g),w=n(173),_=n(675),k=a(_),E=n(676),T=a(E),C=n(677),S=a(C),O=n(563),x=a(O),P=n(555),j=a(P),N=n(562),M=a(N);n(679);var A=n(667),I=a(A),D=n(511),L=a(D),R=n(471),U=a(R),F=n(565),B=a(F),W=n(154),V=a(W),q={headerWrap:r("#header-wrap"),listViewWrap:r("#list-view-wrap"),docViewWrap:r("#doc-view"),padViewWrap:r("#pad-view"),qlViewWrap:r("#ql-view"),spreadsheetViewWrap:r("#spreadsheet-view"),sheetViewWrap:r("#sheet-view"),feedback:r(".meiqia-feedback"),galleryBox:r("#gallery-box"),faviconNode:r("#favicon-link"),headNode:r("head"),bodyNode:r("body")},H=!1,$=!1,Y=null,K={checkNewVersion:function(e,t){window.cow._needReload&&(window.location.href=e.path),t()},checkNewSeq:function(e,t){window.cow.usingNewSeq=!1;var n=(0,B.default)(e.pathname);if(window.electronSdk)return t();(0,U.default)(n).then(function(e){window.cow.usingNewSeq=e,t()})},setPageType:function(e,t){var n=e.path,r=/^\/(desktop|recent|favorites)/,o=/^\/folder\/*/,i=/^\/doc\/\/*/,a=/^\/spreadsheet\/*/,s=/^\/sheet\/*/,u=/^\/docs\/\/*/,l=!0,c="";switch(r.test(n)?c="home":o.test(n)?c="folder":i.test(n)?c="doc":a.test(n)?c="spreadsheet":s.test(n)?c="sheet":u.test(n)?c="newdoc":l=!1,window.ga&&window.ga("send","event","visit",c,e.path),e.path){case"/recent":window.cow.listType="recent";break;case"/favorites":window.cow.listType="favorites";break;default:window.cow.listType="list"}l&&(window.cow.pageType=c),e.init?V.default.autoTrack():(window._czc&&window._czc.push(["_trackPageview",e.path]),window.ga&&window.ga("send","pageview",e.path),V.default.autoTrackSinglePage()),t()},syncOfflineData:function(e,t){(0,I.default)(),"sheet"!==window.cow.pageType&&(0,L.default)(),t()},renderHeader:function(){q.headerWrap.length>0&&(r(".header-avatar-wrap").children().remove(),Y?Y.update({type:cow.pageType,currentFile:cow.currentFile}):Y=f.default.render(l.default.createElement(M.default,{type:cow.pageType,currentUser:cow.currentUser,currentFile:cow.currentFile}),document.getElementById("header-wrap"))),s()},hideLast:function(){K.renderHeader(),"doc"===window.cow.lastType?G.hide("doc"):"spreadsheet"===window.cow.lastType?X.hide():"sheet"===window.cow.lastType?J.hide():"newdoc"===window.cow.lastType?G.hide("newdoc"):window.cow.lastType&&z.hide(),window.cow.loading=!1},exit:function(e,t){y.default.start(),window.cow.lastType=window.cow.pageType,window.cow.loading=!0,"sheet"===window.cow.pageType&&p.default.notify("spreadsheet:exit"),t()}},z={show:function(){K.hideLast(),q.listViewWrap.removeClass("hide"),q.spreadsheetViewWrap.addClass("hide"),q.sheetViewWrap.addClass("hide"),q.padViewWrap.add(q.qlViewWrap).addClass("hide"),q.bodyNode.addClass("list"),r(".list-container").scrollTop(0),r("div.import").show()},render:function(e){var t=window.cow,n=t.welcomeFile,r=t.currentUser;if(""!==n){var o=r.accountType.indexOf("personal")>=0;location.search.indexOf("from=register")>0&&!o&&(location.href="/doc/"+n)}var i=e.params.guid||"",a=!0;e.init&&(m.default.load(),a=!1),(0,k.default)({guid:i,isAjaxForce:a})},hide:function(){}},G={show:function(e){K.hideLast(),q.listViewWrap.addClass("hide"),q.spreadsheetViewWrap.addClass("hide"),q.sheetViewWrap.addClass("hide"),q.feedback.removeClass("hide"),q.bodyNode.removeClass("list"),"newdoc"===e?(q.headerWrap.addClass("ql-doc"),q.padViewWrap.addClass("hide"),q.qlViewWrap.removeClass("hide")):(q.padViewWrap.removeClass("hide"),q.qlViewWrap.addClass("hide"))},init:function(e){var t=e.params.guid;m.default.load(t),window.cow.currentUser.id<0&&o.stop(),window.cow.directory={firstOpen:!1,isOpened:!1,isRunTimer:null},window.cow.doceditor={},/^\/docs\/\/*/.test(e.path)?($=!1,(0,S.default)(t,!0,{Route:te})):(H=!1,(0,T.default)(t,!0))},hide:function(e){r("#pad-view-inner").removeClass("readonly commentable"),r(".image-resize-bar").removeClass("active"),q.docViewWrap.scrollTop(0),r("#doc-title-input").blur(),r("#doc-container").css("opacity",0),q.padViewWrap.add(q.qlViewWrap).removeClass("selection-unfold edit-mode"),r(".sidebar-body").removeClass("start-s-comment s-comment"),r("#doc-directory").children("ul").html('<li class="dir-not-found">添加标题后会在这里自动生成目录。</li>'),r("#display-selection .display-item").removeClass("pressed"),q.galleryBox.removeClass("modal"),r("#tempImageResizeStyle").remove(),r("#tempAttachmentStyle").remove(),(0,w.clearDropdown)(),"doc"===e?(p.default.notify("pad:dispose"),p.default.detach("caret:change")):"newdoc"===e&&(q.headerWrap.removeClass("ql-doc"),p.default.notify("newpad:dispose")),p.default.notify("doc:goback")}},X={show:function(){K.hideLast(),q.listViewWrap.addClass("hide"),q.padViewWrap.add(q.padViewWrap).addClass("hide"),q.feedback.addClass("hide"),q.sheetViewWrap.addClass("hide"),q.spreadsheetViewWrap.removeClass("hide"),q.bodyNode.removeClass("list").addClass("spreadsheet"),b.default.reset(cow.currentFile.guid),p.default.notify("spreadsheet:enter")},init:function(e){var t=e.params.guid,n=e.params.sheetId;m.default.load(t),(0,x.default)(t,n,{isReadonly:!1})},hide:function(){q.spreadsheetViewWrap.removeClass("ready"),q.bodyNode.removeClass("spreadsheet"),q.feedback.removeClass("hide"),p.default.notify("handsontable:destroy"),window.cow.tempCurrentFile&&(window.cow.tempCurrentFile.content=null),window._collabClient&&window._collabClient.stop(),p.default.notify("spreadsheet:exit"),p.default.detach("handsontable:inited"),f.default.unmountComponentAtNode(document.getElementById("spreadsheet-view"))}},J={show:function(){K.hideLast(),q.listViewWrap.addClass("hide"),q.padViewWrap.add(q.padViewWrap).addClass("hide"),q.feedback.addClass("hide"),q.spreadsheetViewWrap.addClass("hide"),q.sheetViewWrap.removeClass("hide"),q.bodyNode.removeClass("list").addClass("spreadsheet"),b.default.reset(cow.currentFile.guid),p.default.notify("spreadsheet:enter")},init:function(e){var t=e.params.guid,n=e.params.sheetId;m.default.load(t),(0,j.default)(t,n,{isReadonly:!1})},hide:function(){q.sheetViewWrap.removeClass("ready"),q.bodyNode.removeClass("spreadsheet"),q.feedback.removeClass("hide"),window.cow.tempCurrentFile&&(window.cow.tempCurrentFile.content=null),f.default.unmountComponentAtNode(document.getElementById("sheet-view"))}},Q=function(e){if("doc"===e&&!H||"newdoc"===e&&!$){var t=o.current.replace("/docs?/",""),n=history.state.isAjaxForce||!1;m.default.load(t),window.cow.currentUser.id<0&&o.stop(),"doc"===e?(0,T.default)(t,n):(0,S.default)(t,n,{Route:te})}},Z=function(e,t){"doc"===e?H=t:$=t};p.default.attach("socket:reconnected",function(){var e="",t=o.current;"doc"===window.cow.pageType?(e=/^\/doc\/*/,e.test(t)&&Q("doc")):"newdoc"===window.cow.pageType&&(e=/^\/docs\/*/,e.test(t)&&Q("newdoc"))});var ee=function(e,t){Y=f.default.render(l.default.createElement(M.default,{type:cow.pageType,currentUser:cow.currentUser,currentFile:cow.currentFile}),document.getElementById("header-wrap")),t()},te={common:K,list:z,doc:G,spreadsheet:X,sheet:J,setDocInit:Z,preloadHeader:ee};t.default=te,e.exports=t.default}).call(t,n(2),n(27),n(177))},,,,,,function(e,t,n){"use strict";function r(){var e=window.Intercom,t={alignment:"left"};return new Promise(function(n){if("function"==typeof e)e("reattach_activator"),e("update",t),n();else{var r=document.createElement("script");r.type="text/javascript",r.src="https://widget.intercom.io/widget/"+m,document.head.appendChild(r),r.onload=function(){n()}}})}function o(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(v[t]=e[t]);return v}function i(){var e=0;return new Promise(function(t,n){var r=setInterval(function(){window.Intercom?(clearInterval(r),t(window.Intercom)):++e>100&&(clearInterval(r),n(new Error("Intercom load faild!")))},500)})}function a(e){r().then(function(){window.Intercom("boot",v),window.Intercom("onShow",function(){o(e),window.Intercom("update",v)})})}function s(e){i().then(function(t){t("update",e)})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(e),i().then(function(t){var n=o(e);window.Intercom("boot",n)})}function l(){i().then(function(e){e("hide")})}function c(){i().then(function(e){e("show")})}function f(){i().then(function(e){e("shutdown")})}function d(){i().then(function(e){e("showMessages")})}function p(){i().then(function(e){e("showNewMessage")})}function h(e,t){i().then(function(n){n("on"+e.toLowerCase().replace(/( |^)[a-z]/g,function(e){return e.toUpperCase()}),t)})}Object.defineProperty(t,"__esModule",{value:!0});var m="o2orsbzq",v={app_id:m,horizontal_padding:0,vertical_padding:40};t.init=a,t.update=s,t.boot=u,t.hide=l,t.show=c,t.shutdown=f,t.showMessages=d,t.showNewMessage=p,t.on=h},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=null,i={userInfo:{avatar:"face",name:"uname",realName:"realname",mobile:"tel",email:"email"},customFiled:{userType:"customField11",userRole:"customField12",isOfficial:"customField13",registerAt:"customField14",enterprise:"customField15"}},a=function(){function e(t){var r=this;n(this,e),this.options=t,this.insertSobotScript(),this.checkScriptLoaded().then(function(){window.zhiManager=o=window.getzhiSDKInstance(),o.on("load",function(){r.initSobot()})})}return r(e,[{key:"checkScriptLoaded",value:function(){return new Promise(function(e,t){window.getzhiSDKInstance&&e();var n=0,r=setInterval(function(){window.getzhiSDKInstance&&(clearInterval(r),e()),n>100&&(clearInterval(r),t(new Error("load sobot failed"))),n++},200)})}},{key:"getDataArgs",value:function(){var e=this.options.dataArgs,t=i.userInfo,n=i.customFiled,r="";for(var o in t){var a=t[o];a&&e.hasOwnProperty(o)&&(r&&(r+="&"),r+=a+"="+e[o])}var s={};for(var u in n){var l=n[u];l&&e.hasOwnProperty(u)&&(s[l]=e[u])}return"manual=true&customBtn=true&powered=false&moduleType="+("number"==typeof this.options.moduleType?this.options.moduleType:3)+"&partnerId="+(e.userId||"")+"&"+r+"&customerFields="+JSON.stringify(s)}},{key:"insertSobotScript",value:function(){var e=document.createElement("script");e.src="https://www.sobot.com/chat/frame/js/entrance.js?sysNum=99f41a92d15542b7a884c7e355359961",e.id="zhichiScript",e.className=this.options.trigger,e.setAttribute("data-args",this.getDataArgs()),document.head.appendChild(e)}},{key:"initSobot",value:function(){this.bindSobotHook(),this.initSobotSetting(),this.initSobotBtn()}},{key:"initSobotBtn",value:function(){o.initBtnDOM()}},{key:"initSobotSetting",value:function(){}},{key:"bindSobotHook",value:function(){var e=this;o.on("core.framestatuschange",function(t){"collapse"===t?e.options.onVisibleChange&&e.options.onVisibleChange(!1):"expand"===t&&e.options.onVisibleChange&&e.options.onVisibleChange(!0)}),o.on("unread.count",function(t){e.options.onOfflineMessageChange&&e.options.onOfflineMessageChange(t)}),o.on("receivemessage",function(t){e.options.onUnreadChange&&e.options.onUnreadChange(t)}),o.on("frame.onload",function(){e.options.onFrameLoaded&&e.options.onFrameLoaded()})}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(33),d=n(67),p=o(d),h=n(47),m=o(h),v=n(470),y=o(v),g=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={codeTime:0,prefixIndex:0},e._getVerifyCode=e._getVerifyCode.bind(e),e._selectedPrefixTpl=e._selectedPrefixTpl.bind(e),e._changePhonePrefix=e._changePhonePrefix.bind(e),e}return s(t,e),u(t,[{key:"_onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"_onBlur",value:function(e){this.props.onInput(e,this.props.type)}},{key:"_onKeyDown",value:function(e){13===e.keyCode&&this.props.onSubmit()}},{key:"_onInput",value:function(e){this.props.onInput(e,this.props.type)}},{key:"_getVerifyCode",value:function(){!this.state.codeTime&&this.props.telephone&&this._checkTelephone()&&this._getValidationCode()}},{key:"_checkTelephone",value:function(){var e=this.props.telephone;return"+86"!==this.props.prefix||e.match(/^[0-9\-+]{11}$/)}},{key:"_changeCodeTime",value:function(){var e=this,t=60,n=function(){e.setState({codeTime:t}),t--};clearInterval(this.interval),n(),this.interval=setInterval(function(){e.state.codeTime?n.call(e):clearInterval(e.interval)},1e3)}},{key:"_getValidationCode",value:function(e){var t=this,n=this.props.prefix,r=this.props.telephone,o={};o=this.props.isVoice?{mobile:"+86"+r,type:"voice"}:{mobile:n+r},r&&p.default.post("/smapi/action/send_verification_code",o,function(e){if(t._changeCodeTime(),t.props.isVoice){var n={title:"发送成功",description:"已向手机号 "+t.props.telephone+" 发送语音验证码，请注意接听来电（可能会被标记为骚扰电话）。",buttons:[{type:"button",buttonLabel:"确定",customClass:"submit-btn dark",closeAfterClick:!0}]};(0,m.default)(n)}},function(e){429===e.code?t._getCaptcha():t.props.showError()},function(t){e&&(t.setRequestHeader("X-Geetest-Challenge",e.geetest_challenge),t.setRequestHeader("X-Geetest-Validate",e.geetest_validate),t.setRequestHeader("X-Geetest-Seccode",e.geetest_seccode))})}},{key:"_getCaptcha",value:function(){var e=this;p.default.post("/smapi/captchas",{},function(t){e._showTelephoneGeetest(t.data.challenge)},function(){e.props.showError("获取验证码失败，请重试")})}},{key:"_showTelephoneGeetest",value:function(e){var t=this;this.telephoneGeetest=new window.Geetest({gt:"d04a3db478746251a44120fae8b6237c",challenge:e,product:"popup",https:!0}).appendTo(r(".geetest-container")).onReady(function(){setTimeout(function(){t.telephoneGeetest.show()},0)}).onSuccess(function(){t._getValidationCode(t.telephoneGeetest.getValidate())}).onError(function(){})}},{key:"_changePhonePrefix",value:function(e,t,n){this.props.isVoice||(this.setState({prefixIndex:t}),this.props.dispatchState({prefix:n.value}))}},{key:"_phonePrefixTpl",value:function(e,t,n){return c.default.createElement("div",{className:"phone-prefix-item"},t.name+" "+t.value,n&&c.default.createElement("span",{className:"phone-prefix-item-check"}))}},{key:"_selectedPrefixTpl",value:function(e,t){var n="";return n=document.body.clientWidth>370&&(this.props.isVoice||"+86"===t.value)?"中国 +86":t.value,c.default.createElement("div",{className:"phone-prefix-info"},n)}},{key:"_showGeetest",value:function(){var e=this;this.geetest||(this.geetest=new window.Geetest({gt:"d04a3db478746251a44120fae8b6237c",challenge:this.props.challenge,product:"popup",https:!0}).appendTo(r(".captcha"),!0).bindOn(r(".captcha")).onReady(function(){e.setState({captcha_ready:!0})}).onSuccess(function(){e.props.dispatchState({captchaValue:"已经验证通过"}),e.props.dispatchState({geetestData:e.geetest.getValidate()})}).onError(function(){e.geetestValidateData={},alert("验证失败,请重试")}))}},{key:"render",value:function(){var e=this,t=this.props.type,n={user_name:{className:"name-input",placeholder:"昵称",type:"text",maxLength:20},corp_name:{className:"corp-name-input",placeholder:"企业名称",type:"text",maxLength:20},email:{className:"email-input",placeholder:"邮箱",type:"text"},password:{className:"password-input",placeholder:"密码",type:"password"},captcha:{className:"captcha-input",placeholder:"验证码",type:"text"},telephone:{className:"telephone-input",placeholder:"手机号码",type:"text",maxLength:"11"}},r=n[t],o={className:this.state.className||r.className,name:t,placeholder:this.props.placeholder||r.placeholder,type:r.type,defaultValue:this.props.defaultValue,maxLength:r.maxLength,onFocus:this._onFocus.bind(this),onKeyDown:this._onKeyDown.bind(this),onInput:this._onInput.bind(this),onBlur:this._onBlur.bind(this)};if("email"===t&&this.props.email&&(o.value=this.props.email),"password"===t)return c.default.createElement("div",{className:"input-box password"},!1===this.props.autofill&&c.default.createElement("input",{type:"password",name:"password",style:{display:"none"}}),c.default.createElement("input",o),c.default.createElement("a",{id:"forget-password",href:"/findpwd"},"忘记密码"));if("captcha"===t){if("geetest"===this.props.captchaType)return o.disabled="true",this.props.captchaValue&&(o.value=this.props.captchaValue),setTimeout(function(){e._showGeetest()},0),c.default.createElement("div",{className:"input-box captcha-container"},c.default.createElement("div",{className:"inline"},c.default.createElement("input",o),c.default.createElement("div",{className:"captcha btn dark",disabled:!!this.state.captcha_ready},"获取验证码")));var i="";i=this.props.isVoice?"获取语音验证码":"获取短信验证码";var a="";return!this.state.codeTime&&this.props.telephone&&this._checkTelephone()||(a="disabled"),this.state.codeTime&&(i="重新获取("+this.state.codeTime+")"),c.default.createElement("div",{className:"input-box captcha-container"},c.default.createElement("div",{className:"inline"},c.default.createElement("input",o),c.default.createElement("div",{className:"captcha btn dark "+a,onClick:this._getVerifyCode},i)))}if("telephone"===t){var s=void 0,u=void 0;return this.props.isVoice?(s=[{name:"中国",value:"+86"}],u=s[0],o["data-prefix"]=u.value):(s=y.default,u=s[this.state.prefixIndex],o["data-prefix"]=u.value),c.default.createElement("div",{className:"input-box"},c.default.createElement(f.DropdownMenu,{menuItems:s,displayKey:"display",valKey:"value",wrapClassName:"phone-prefix-wrap",itemTpl:this._phonePrefixTpl,selectedTpl:this._selectedPrefixTpl,selectedIndex:this.state.prefixIndex,onMenuChange:this._changePhonePrefix}),c.default.createElement("input",o))}return c.default.createElement("div",{className:"input-box"},c.default.createElement("input",o))}}]),t}(l.Component);t.default=g,g.propTypes={onFocus:l.PropTypes.func,onInput:l.PropTypes.func,onSubmit:l.PropTypes.func,showError:l.PropTypes.func,dispatchState:l.PropTypes.func,type:l.PropTypes.string,telephone:l.PropTypes.string,email:l.PropTypes.string,prefix:l.PropTypes.string,captchaType:l.PropTypes.string,captchaValue:l.PropTypes.string,placeholder:l.PropTypes.string,defaultValue:l.PropTypes.string,isVoice:l.PropTypes.bool,autofill:l.PropTypes.bool,challenge:l.PropTypes.any},e.exports=t.default}).call(t,n(2))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=null,r=function(){for(var r=0;r<t.length;r++){var o=t[r];if(o.condition===e)return"function"==typeof o.result?o.result():o.result}return"function"==typeof n?n():n||null},o=function(e){return n=e,{done:r}};return{when:function e(n,i){return t.push({condition:n,result:i}),{when:e,others:o,done:r}},others:o,done:r}},e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.getAmount=function(e){return Number((e/100).toFixed(2)).toString()},t.allowNumber=function(e){return Number(e.replace(/[^0-9]/g,""))}},function(e,t,n){"use strict";function r(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){return"function"==typeof r?r(t,n):e(r)}}}e.exports=r},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)<0&&(n[r]=e[r]);return n}var i=n(1),a=r(i);e.exports=function(){return function(e){return function(t){var n=t.promise,r=t.types,i=o(t,["promise","types"]);if(!n)return e(t);var s=r[0],u=r[1],l=r[2];return e({type:"@@REQUEST/START"}),e(a.default.assign({},i,{type:s})),n.then(function(t){return e({type:"@@REQUEST/SUCCESS"}),e(a.default.assign({},i,{type:u,result:t})),t},function(t){return e({type:"@@REQUEST/FAILED",payload:{err:t}}),e(a.default.assign({},i,{type:l,error:t})),t})}}}},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t,n){var r=n(518),o=n(150),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(100),o=n(519),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||o;e.exports=c}).call(t,n(44)(e))},function(e,t,n){var r=n(520),o=n(521),i=n(522),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},,,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(11),d=r(f),p=n(498),h=r(p),m=n(1),v=r(m),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isVoice:!1},n.onSwitchCaptcha=v.default.throttle(n.onSwitchCaptcha.bind(n),500,{trailing:!1}),n.onSubmit=v.default.throttle(n.onSubmit.bind(n),500,{trailing:!1}),n}return a(t,e),u(t,[{key:"onSwitchCaptcha",value:function(){this.setState({isVoice:!this.state.isVoice})}},{key:"onSubmit",value:function(e){this.props.onSubmit(e)}},{key:"checkSubmit",value:function(){var e=this.props,t=e.telephone,n=e.captcha;return t&&n}},{key:"render",value:function(){var e=this,t="",n=[{type:"telephone"},{type:"captcha"}];this.props.error&&(t=" active");var r=n.map(function(t,n){return c.default.createElement(h.default,s({},t,{isVoice:e.state.isVoice},e.props,{key:n}))}),o="";o=this.state.isVoice?"不方便接电话？切换回短信验证码":"收不到验证短信？试试语音验证码";var i=this.props.error;return c.default.createElement("div",null,r,c.default.createElement("div",{className:"error-block"+t},i),c.default.createElement("a",{href:"javascript:void(0)",onClick:this.onSubmit,onTouchStart:this.onSubmit,className:(0,d.default)("finish- submit-btn btn dark",{disabled:!this.checkSubmit()}),id:"bd-register-submit"},"提交"),c.default.createElement("div",{className:"captcha-switch",onClick:this.onSwitchCaptcha,onTouchStart:this.onSwitchCaptcha},o),c.default.createElement("div",{className:"geetest-container"}))}}]),t}(l.Component);t.default=y,y.propTypes={onSubmit:l.PropTypes.func.isRequired,telephone:l.PropTypes.string,captcha:l.PropTypes.string,error:l.PropTypes.string},y.defaultProps={telephone:"",captcha:"",error:""},e.exports=t.default},function(e,t,n){var r=n(145);e.exports=function(){(0,r.loadSheetOffline)().then(function(e){(0,e.syncOfflineData)()})}},function(e,t,n){function r(e){return!(!a(e)||i(e))&&(o(e)?h:l).test(s(e))}var o=n(462),i=n(513),a=n(79),s=n(503),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,d=c.toString,p=f.hasOwnProperty,h=RegExp("^"+d.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return!!i&&i in e}var o=n(514),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(100),o=r["__core-js_shared__"];e.exports=o},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t){var n=a(e),r=!n&&i(e),c=!n&&!r&&s(e),d=!n&&!r&&!c&&l(e),p=n||r||c||d,h=p?o(e.length,String):[],m=h.length;for(var v in e)!t&&!f.call(e,v)||p&&("length"==v||c&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||u(v,m))||h.push(v);return h}var o=n(517),i=n(504),a=n(286),s=n(505),u=n(299),l=n(506),c=Object.prototype,f=c.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){return i(e)&&o(e)==a}var o=n(149),i=n(150),a="[object Arguments]";e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){return a(e)&&i(e.length)&&!!s[o(e)]}var o=n(149),i=n(334),a=n(150),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var r=n(276),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(44)(e))},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(464),i=n(524),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(525),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},,,,,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return f(e,t)};var o=n(201),i=n(501),a=r(i),s=n(532),u=(r(s),n(502)),l=r(u),c=[a.default,l.default],f=o.applyMiddleware.apply(void 0,c)(o.createStore);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i({},l.default,e),n=t.logger,r=t.transformer,o=t.stateTransformer,u=t.errorTransformer,c=t.predicate,f=t.logErrors,d=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(r&&console.error("Option 'transformer' is deprecated, use 'stateTransformer' instead!"),e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n\n\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\n\nconst logger = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var p=[];return function(e){var n=e.getState;return function(e){return function(r){if("function"==typeof c&&!c(n,r))return e(r);var l={};p.push(l),l.started=s.timer.now(),l.startedTime=new Date,l.prevState=o(n()),l.action=r;var h=void 0;if(f)try{h=e(r)}catch(e){l.error=u(e)}else h=e(r);l.took=s.timer.now()-l.started,l.nextState=o(n());var m=t.diff&&"function"==typeof d?d(n,r):t.diff;if((0,a.printBuffer)(p,i({},t,{diff:m})),p.length=0,l.error)throw l.error;return h}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.defaults=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(533),s=n(467),u=n(536),l=r(u),c=o();t.defaults=l.default,t.logger=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){switch(void 0===e?"undefined":u(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,o(n)):e[r];case"function":return e(t);default:return e}}function a(e){var t=e.timestamp,n=e.duration;return function(e,r,o){var i=["action"];return i.push("%c"+String(e.type)),t&&i.push("%c@ "+r),n&&i.push("%c(in "+o.toFixed(2)+" ms)"),i.join(" ")}}function s(e,t){var n=t.logger,r=t.actionTransformer,o=t.titleFormatter,s=void 0===o?a(t):o,u=t.collapsed,c=t.colors,d=t.level,p=t.diff;e.forEach(function(o,a){var h=o.started,m=o.startedTime,v=o.action,y=o.prevState,g=o.error,b=o.took,w=o.nextState,_=e[a+1];_&&(w=_.prevState,b=_.started-h);var k=r(v),E="function"==typeof u?u(function(){return w},v,o):u,T=(0,l.formatTime)(m),C=c.title?"color: "+c.title(k)+";":"",S=["color: gray; font-weight: lighter;"];S.push(C),t.timestamp&&S.push("color: gray; font-weight: lighter;"),t.duration&&S.push("color: gray; font-weight: lighter;");var O=s(k,T,b);try{E?c.title?n.groupCollapsed.apply(n,["%c "+O].concat(S)):n.groupCollapsed(O):c.title?n.group.apply(n,["%c "+O].concat(S)):n.group(O)}catch(e){n.log(O)}var x=i(d,k,[y],"prevState"),P=i(d,k,[k],"action"),j=i(d,k,[g,y],"error"),N=i(d,k,[w],"nextState");x&&(c.prevState?n[x]("%c prev state","color: "+c.prevState(y)+"; font-weight: bold",y):n[x]("prev state",y)),P&&(c.action?n[P]("%c action    ","color: "+c.action(k)+"; font-weight: bold",k):n[P]("action    ",k)),g&&j&&(c.error?n[j]("%c error     ","color: "+c.error(g,y)+"; font-weight: bold;",g):n[j]("error     ",g)),N&&(c.nextState?n[N]("%c next state","color: "+c.nextState(w)+"; font-weight: bold",w):n[N]("next state",w)),p&&(0,f.default)(y,w,n,E);try{n.groupEnd()}catch(e){n.log("—— log end ——")}})}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.printBuffer=s;var l=n(467),c=n(534),f=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return"color: "+c[e].color+"; font-weight: bold"}function a(e){var t=e.kind,n=e.path,r=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"→",o];case"N":return[n.join("."),o];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+i+"]",a];default:return[]}}function s(e,t,n,r){var s=(0,l.default)(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}s?s.forEach(function(e){var t=e.kind,r=a(e);n.log.apply(n,["%c "+c[t].text,i(t)].concat(o(r)))}):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var u=n(535),l=r(u),c={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}};e.exports=t.default},function(e,t,n){(function(n){var r,o;!function(n,i){"use strict";r=[],void 0!==(o=function(){return i()}.apply(t,r))&&(e.exports=o)}(0,function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,n){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":void 0!==e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(t,n,r,f,d,p,h){d=d||[];var m=d.slice(0);if(void 0!==p){if(f){if("function"==typeof f&&f(m,p))return;if("object"==typeof f){if(f.prefilter&&f.prefilter(m,p))return;if(f.normalize){var v=f.normalize(m,p,t,n);v&&(t=v[0],n=v[1])}}}m.push(p)}"regexp"===l(t)&&"regexp"===l(n)&&(t=t.toString(),n=n.toString());var y=typeof t,g=typeof n;if("undefined"===y)"undefined"!==g&&r(new i(m,n));else if("undefined"===g)r(new a(m,t));else if(l(t)!==l(n))r(new o(m,t,n));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(n)&&t-n!=0)r(new o(m,t,n));else if("object"===y&&null!==t&&null!==n){if(h=h||[],h.indexOf(t)<0){if(h.push(t),Array.isArray(t)){var b;t.length;for(b=0;b<t.length;b++)b>=n.length?r(new s(m,b,new a(e,t[b]))):c(t[b],n[b],r,f,m,b,h);for(;b<n.length;)r(new s(m,b,new i(e,n[b++])))}else{var w=Object.keys(t),_=Object.keys(n);w.forEach(function(o,i){var a=_.indexOf(o);a>=0?(c(t[o],n[o],r,f,m,o,h),_=u(_,a)):c(t[o],e,r,f,m,o,h)}),_.forEach(function(t){c(e,n[t],r,f,m,t,h)})}h.length=h.length-1}}else t!==n&&("number"===y&&isNaN(t)&&isNaN(n)||r(new o(m,t,n)))}function f(t,n,r,o){return o=o||[],c(t,n,function(e){e&&o.push(e)},r),o.length?o:e}function d(e,t,n){if(n.path&&n.path.length){var r,o=e[t],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":d(o[n.path[r]],n.index,n.item);break;case"D":delete o[n.path[r]];break;case"E":case"N":o[n.path[r]]=n.rhs}}else switch(n.kind){case"A":d(e[t],n.index,n.item);break;case"D":e=u(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function p(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,o=-1,i=n.path?n.path.length-1:0;++o<i;)void 0===r[n.path[o]]&&(r[n.path[o]]="number"==typeof n.path[o]?[]:{}),r=r[n.path[o]];switch(n.kind){case"A":d(n.path?r[n.path[o]]:r,n.index,n.item);break;case"D":delete r[n.path[o]];break;case"E":case"N":r[n.path[o]]=n.rhs}}}function h(e,t,n){if(n.path&&n.path.length){var r,o=e[t],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":h(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=u(e,t)}return e}function m(e,t,n){if(e&&t&&n&&n.kind){var r,o,i=e;for(o=n.path.length-1,r=0;r<o;r++)void 0===i[n.path[r]]&&(i[n.path[r]]={}),i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}}function v(e,t,n){if(e&&t){c(e,t,function(r){n&&!n(e,t,r)||p(e,t,r)})}}var y,g,b=[];return y="object"==typeof n&&n?n:"undefined"!=typeof window?window:{},g=y.DeepDiff,g&&b.push(function(){void 0!==g&&y.DeepDiff===f&&(y.DeepDiff=g,g=e)}),t(o,r),t(i,r),t(a,r),t(s,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return void 0!==g},enumerable:!0},noConflict:{value:function(){return b&&(b.forEach(function(e){e()}),b=null),f},enumerable:!0}}),f})}).call(t,n(25))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},e.exports=t.default},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var l=t[s],c=r?r(n[l],e[l],l,n,e):void 0;void 0===c&&(c=e[l]),a?i(n,l,c):o(n,l,c)}return n}var o=n(468),i=n(339);e.exports=r},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}var o=n(539),i=n(546);e.exports=r},function(e,t,n){function r(e,t){return a(i(e,t,o),e+"")}var o=n(336),i=n(540),a=n(542);e.exports=r},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=i(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(u),o(e,this,l)}}var o=n(541),i=Math.max;e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(543),o=n(545),i=o(r);e.exports=i},function(e,t,n){var r=n(544),o=n(465),i=n(336),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=i(),s=o-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(297),i=n(277),a=n(299),s=n(79);e.exports=r},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return t._name=e,h[e]=t,t}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.register=s;var c=n(0),f=r(c),d=n(441),p=r(d),h={},m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleCloseClick=n.handleCloseClick.bind(n),n}return a(t,e),l(t,null,[{key:"propTypes",get:function(){return{popModal:c.PropTypes.func.isRequired,cleanModals:c.PropTypes.func.isRequired,modals:c.PropTypes.arrayOf(c.PropTypes.shape({name:c.PropTypes.string,params:c.PropTypes.object})).isRequired}}}]),l(t,[{key:"handleCloseClick",value:function(e){var t=e.target.dataset.modal;"clean"===t?this.props.cleanModals():"pop"===t&&this.props.popModal()}},{key:"renderModalComponent",value:function(){if(0!==this.props.modals.length){var e=this.props.modals[0],t=e.name,n=e.params,r=h[t],o=(0,p.default)({},this.props,n);return f.default.createElement("div",{className:"shimo-modal-overlay","data-modal":"clean"},f.default.createElement(r,u({},o,{params:n})))}}},{key:"render",value:function(){return f.default.createElement("div",{className:"modal-root",onClick:this.handleCloseClick},this.renderModalComponent())}}]),t}(c.Component);t.default=m},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.calcModalPosition()}},{key:"componentWillReceiveProps",value:function(){var e=this;setTimeout(function(){return e.calcModalPosition()},50)}},{key:"calcModalPosition",value:function(){var e=this.refs.modal;if(e){var t=e.offsetWidth,n=e.offsetHeight;e.style.marginLeft=-t/2+"px",e.style.marginTop=-n/2+"px"}}},{key:"render",value:function(){var e=this.props,t=c.default.Children.toArray(e.children),n=s(t,2),r=n[0],o=n[1];return c.default.createElement("div",{className:"shimo-modal",style:e.style,ref:"modal"},c.default.createElement("div",{className:"shimo-modal-header"},c.default.createElement("span",null,e.title),c.default.createElement("span",{className:"dialog-close-icon","data-modal":"clean"})),c.default.createElement("div",{className:"shimo-modal-content",style:e.contentStyle},r),o&&c.default.createElement("div",{className:"shimo-modal-footer"},o))}}],[{key:"propTypes",get:function(){return{title:l.PropTypes.string.isRequired,style:l.PropTypes.object,contentStyle:l.PropTypes.object}}}]),t}(l.Component);t.default=f,e.exports=t.default},function(e,t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"@@modal/PUSH_MODAL":return[].concat(e,t.payload);case"@@modal/POP_MODAL":return[].concat(e.slice(0,-1));case"@@modal/CLEAN_MODALS":return[];default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(551),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=n(11),d=r(f),p=n(552),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLoadMore=n.handleLoadMore.bind(n),n.state={data:n.props.initData,hasMore:n.props.hasMore},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{className:u.PropTypes.string,children:u.PropTypes.node,renderItem:u.PropTypes.func,initData:u.PropTypes.array,data:u.PropTypes.array,getListData:u.PropTypes.func,getScrollContainer:u.PropTypes.func,loadingState:u.PropTypes.node,noMoreState:u.PropTypes.node,throttle:u.PropTypes.number,threshold:u.PropTypes.number,useWindow:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{initData:[],renderItem:c.noop,getListData:void 0}}}]),s(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.data&&this.setState({data:e.data})}},{key:"patchData",value:function(e,t){var n=[];this.state.data.forEach(function(r){if(r.id===e){if(void 0===t)return;r=(0,c.assign)(r,t)}n.push(r)}),this.setState({data:n})}},{key:"handleLoadMore",value:function(e){var t=this;return this.props.getListData(e,!0).then(function(e){(400===e.code||e.error&&400===e.error.code)&&t.setState({hasMore:!1})})}},{key:"renderItems",value:function(){return this.state.data.map(this.props.renderItem)}},{key:"render",value:function(){var e=(0,d.default)("member-list",this.props.className);return l.default.createElement("div",{className:e},l.default.createElement(h.default,{useWindow:this.props.useWindow,hasMore:this.state.hasMore,loadMore:this.handleLoadMore,getScrollContainer:this.props.getScrollContainer,loadingState:this.props.loadingState,noMoreState:this.props.noMoreState,throttle:this.props.throttle,threshold:this.props.throttle},this.props.children||this.renderItems()))}}]),t}(u.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(553);var o=n(554),i=r(o);t.default=i.default,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c={LOADING:1,LOADED:2},f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.eventHandler=n.eventHandler.bind(n),n.state={loadState:void 0},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{useWindow:u.PropTypes.bool,hasMore:u.PropTypes.bool,loadMore:u.PropTypes.func,loadingState:u.PropTypes.node,noMoreState:u.PropTypes.node,throttle:u.PropTypes.number,threshold:u.PropTypes.number}}},{key:"defaultProps",get:function(){return{useWindow:!1,hasMore:!1,loadMore:function(){return new Promise(function(e){return setTimeout(e,3e3)})},loadingState:"正在加载下一页...",noMoreState:"已经是最后一页了.",throttle:300,threshold:20,pageStart:1}}}]),s(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachListener()}},{key:"componentDidUpdate",value:function(){this.attachListener()}},{key:"componentWillUnmount",value:function(){this.detachListener()}},{key:"attachListener",value:function(){if(this.props.hasMore){(this.props.useWindow?document.querySelector(".content-wrap"):this.refs.waterfall).addEventListener("scroll",this.eventHandler,!1),this.props.initialLoad&&this.eventHandler()}}},{key:"detachListener",value:function(){(this.props.useWindow?document.querySelector(".content-wrap"):this.refs.waterfall).removeEventListener("scroll",this.eventHandler)}},{key:"eventHandler",value:function(e){var t=this,n=e.target;n.firstChild.offsetHeight-n.offsetHeight-n.scrollTop<this.props.threshold&&(this.detachListener(),this.setState({loadState:c.LOADING}),this.props.loadMore(this.pageLoaded+=1).then(function(){t.setState({loadState:c.LOADED})}))}},{key:"renderLoadMore",value:function(){var e=null;return this.props.hasMore?this.state.loadState===c.LOADING&&(e=l.default.createElement("div",{className:"loadMore"},this.props.loadingState)):this.state.loadState===c.LOADED&&(e=l.default.createElement("div",{className:"loadMore"},this.props.noMoreState)),e}},{key:"render",value:function(){return l.default.createElement("div",{className:"waterfall",ref:"waterfall"},l.default.createElement("div",{className:"waterfall-inner"},this.props.children),this.renderLoadMore())}}]),t}(u.Component);t.default=f,e.exports=t.default},function(e,t,n){(function(r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){var i=n(673),a=n(147),s=n(23),u=n(210);return i(r.extend({guid:e,sheetId:t,cooperation:a,Contact:s,Mention:u},o))},e.exports=t.default}).call(t,n(1))},,,,,,,function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(11),d=o(f),p=n(603),h=o(p),m=n(604),v=o(m),y=n(612),g=o(y),b=n(613),w=o(b),_=n(615),k=o(_),E=n(619),T=o(E),C=n(632),S=o(C),O=n(579),x=o(O),P=n(634),j=o(P),N=n(652),M=o(N),A=n(26),I=n(248),D=o(I),L=n(653),R=o(L),U=n(487),F=o(U),B=n(13),W=n(660),V=o(W),q=n(661),H=o(q),$=n(662),Y=o($),K=n(663),z=o(K);n(666);var G=["spreadsheet","sheet","doc","newdoc"],X=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDingtalkPc=(0,B.isDingtalkPc)(),n.state={currentUser:r.assign({},e.currentUser),currentFile:e.currentFile,type:e.type},n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{currentUser:l.PropTypes.object.isRequired,currentFile:l.PropTypes.object,type:l.PropTypes.string}}}]),u(t,[{key:"componentDidMount",value:function(){(0,g.default)(),(0,x.default)(),(0,H.default)()}},{key:"update",value:function(e){this.setState(e)}},{key:"renderLeftHeader",value:function(){var e=this.state.type;if(G.indexOf(e)>-1){var t=[c.default.createElement(T.default,{key:"file_info",currentFile:this.state.currentFile,currentUser:this.state.currentUser})];return this.isDingtalkPc&&t.push(c.default.createElement(R.default,{mode:"file",key:"dingtalk_external_entry"})),t}var n=this.state.currentUser.team,r=[],o=void 0;return n&&n.resources&&(o=c.default.createElement("img",{className:"header-logo-img",src:n.resources.desktopLogo})),r.push(c.default.createElement("a",{key:"shimo-logo",className:"header-logo "+(o?"":"logo-22"),href:"/desktop"},o)),this.isDingtalkPc&&r.push(c.default.createElement(R.default,{key:"dingtalk-entry"})),r}},{key:"renderRightHeader",value:function(){var e=this.state,t=e.type,n=e.currentUser,r=e.currentFile,o=(0,d.default)({"header-item-wrap":!0,"fix-header-item-wrap":window.cow.currentUser.id<0}),i=[];return G.indexOf(t)>-1?(i=[c.default.createElement(S.default,{key:0}),c.default.createElement("div",{key:1,className:o},c.default.createElement(h.default,{currentUser:n}))],this.state.currentUser.id<0?i.push(c.default.createElement(D.default,{key:"star_file",currentFile:r,currentUser:n}),c.default.createElement(F.default,{key:"operations",file:r})):i.push(c.default.createElement(j.default,{key:"action_btns",file:r})),(0,A.checkIsExampleFile)()&&i.push(c.default.createElement(M.default,{key:"doc_guide_tip"}))):(i.push(c.default.createElement("div",{key:0,className:"header-item-wrap"},c.default.createElement(w.default,{currentUser:n}))),-1===["profile"].indexOf(t)&&i.push(c.default.createElement("div",{key:1,className:"header-item-wrap"},c.default.createElement(k.default,null))),window.cow&&"profile"===window.cow.pageType&&window.cow.alphaFeatures&&window.cow.alphaFeatures.lizard?i.push(c.default.createElement("div",{key:2,className:"header-item-wrap"},c.default.createElement(v.default,{onlyUnread:!0,trigger:"hover"}))):i.push(c.default.createElement("div",{key:2,className:"header-item-wrap"},c.default.createElement(v.default,{onlyUnread:!0}))),i.push(c.default.createElement("div",{key:3,className:"header-item-wrap"},c.default.createElement(h.default,{currentUser:n})))),i}},{key:"render",value:function(){var e=this.state.type,t=(0,d.default)({header:!0,"file-header":G.indexOf(e)>-1,"old-sheet-header":"spreadsheet"===e}),n=window.cow||{views:{}},r=n.views.feedback,o=-1===["sheet","spreadsheet"].indexOf(e)&&r?"":"hide",i=null;return window.cow&&window.cow.alphaFeatures&&!window.cow.alphaFeatures.intercom&&(i=c.default.createElement(V.default,null,c.default.createElement(Y.default,{name:"meiqia"}),c.default.createElement(z.default,{name:"userGuide"}))),c.default.createElement("div",{id:"header",className:t},c.default.createElement("div",{className:o},i),c.default.createElement("div",{className:"h-container"},c.default.createElement("div",{className:"header-left-box list-header"},this.renderLeftHeader()),c.default.createElement("div",{className:"header-right-box"},this.renderRightHeader())))}}]),t}(l.Component);t.default=X,e.exports=t.default}).call(t,n(1))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){n.e(3).then(function(o){(function(o){var i=n(813).SpreadsheetContainer;n(791)(o.extend({SpreadsheetContainer:i,guid:e,sheetId:t},r))}).call(this,n(1))}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&l.isObject(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return l.isString(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}var u=n(654),l=n(655);t.parse=o,t.resolve=a,t.resolveObject=s,t.format=i,t.Url=r;var c=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(h),v=["%","/","?",";","#"].concat(m),y=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n(656);r.prototype.parse=function(e,t,n){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),e=i.join(o);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var f=d.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=c.exec(s);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===s.substr(0,2);!T||p&&_[p]||(s=s.substr(2),this.slashes=!0)}if(!_[p]&&(T||p&&!k[p])){for(var C=-1,S=0;S<y.length;S++){var O=s.indexOf(y[S]);-1!==O&&(-1===C||O<C)&&(C=O)}var x,P;P=-1===C?s.lastIndexOf("@"):s.lastIndexOf("@",C),-1!==P&&(x=s.slice(0,P),s=s.slice(P+1),this.auth=decodeURIComponent(x)),C=-1;for(var S=0;S<v.length;S++){var O=s.indexOf(v[S]);-1!==O&&(-1===C||O<C)&&(C=O)}-1===C&&(C=s.length),this.host=s.slice(0,C),s=s.slice(C),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var N=this.hostname.split(/\./),S=0,M=N.length;S<M;S++){var A=N[S];if(A&&!A.match(g)){for(var I="",D=0,L=A.length;D<L;D++)A.charCodeAt(D)>127?I+="x":I+=A[D];if(!I.match(g)){var R=N.slice(0,S),U=N.slice(S+1),F=A.match(b);F&&(R.push(F[1]),U.unshift(F[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+B,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[h])for(var S=0,M=m.length;S<M;S++){var V=m[S];if(-1!==s.indexOf(V)){var q=encodeURIComponent(V);q===V&&(q=escape(V)),s=s.split(V).join(q)}}var H=s.indexOf("#");-1!==H&&(this.hash=s.substr(H),s=s.slice(0,H));var $=s.indexOf("?");if(-1!==$?(this.search=s.substr($),this.query=s.substr($+1),t&&(this.query=E.parse(this.query)),s=s.slice(0,$)):t&&(this.search="",this.query={}),s&&(this.pathname=s),k[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",Y=this.search||"";this.path=B+Y}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(i=E.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(l.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!k[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var p=f[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||_[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||y||n.host&&e.pathname,w=b,E=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],T=n.protocol&&!k[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===E[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(T){n.hostname=n.host=E.shift();var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=e.search,n.query=e.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=E.slice(-1)[0],O=(n.host||e.host||E.length>1)&&("."===S||".."===S)||""===S,x=0,P=E.length;P>=0;P--)S=E[P],"."===S?E.splice(P,1):".."===S?(E.splice(P,1),x++):x&&(E.splice(P,1),x--);if(!b&&!w)for(;x--;x)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),O&&"/"!==E.join("/").substr(-1)&&E.push("");var j=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(T){n.hostname=n.host=j?"":E.length?E.shift():"";var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return b=b||n.host&&E.length,b&&!j&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(n,r){function o(e){for(var t in a)if(r.startsWith(e,t)){var n={};return a[t].match(e,n),n.guid}return""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n.Route,a={"/folder/":new i("/folder/:guid"),"/m/folder/":new i("/m/folder/:guid"),"/doc/":new i("/doc/:guid"),"/m/doc/":new i("/m/doc/:guid"),"/team/":new i("/team/:guid/files"),"/spreadsheet/":new i("/spreadsheet/:guid/:sheetId?"),"/m/spreadsheet/":new i("/m/spreadsheet/:guid/:sheetId?"),"/rn/spreadsheet/":new i("/rn/spreadsheet/:guid/:sheetId?"),"/sheet/":new i("/sheet/:guid/:sheetId?"),"/m/sheet/":new i("/m/sheet/:guid/:sheetId?"),"/rn/sheet/":new i("/rn/sheet/:guid/:sheetId?"),"/docs/":new i("/docs/:guid"),"/m/docs":new i("/m/docs/:guid")};e.exports=t.default}).call(t,n(27),n(1))},function(e,t){e.exports=React.addons.CSSTransitionGroup},,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){c.hasOwnProperty(e)||l.default.bind(e,f(e)),c[e]=t}function i(e){c[e]=null}function a(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText.trim()}function s(e){return e.replace(/(<a\s+)/g,"@$1")}Object.defineProperty(t,"__esModule",{value:!0}),t.subscribePush=o,t.unsubscribePush=i,t.washHTML=a,t.markMentionText=s;var u=n(16),l=r(u),c={},f=function(e){return function(t){return c[e]&&c[e].call(null,t)}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(581);var o=n(582),i=r(o),a=n(292),s=r(a),u=n(482),l=r(u),c={AddUserDialog:l.default,SharedUsersDialog:s.default,Popover:i.default};t.default=c,e.exports=t.default},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(t){p&&i();var n=e(d);n.length&&(p=(0,l.render)(u.default.createElement(f.default,a({},t,{onClose:i})),n[0]))}function i(){var t=e(d);t.length&&(0,l.unmountComponentAtNode)(t[0]),p=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.showFileMover=o,t.removeFileMover=i;var s=n(0),u=r(s),l=n(5),c=n(591),f=r(c),d="#file-mover",p=null}).call(t,n(2))},,,function(e,t){function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=e.scrollTop,o=1e3/60,i=n/1e3*o,a=parseInt(e.getAttribute("data-scrollTimer"),10);!function n(){!isNaN(a)&&a>-1&&(clearTimeout(a),a=-1),r<t?(r+=i,e.scrollTop=r,r<t&&(a=setTimeout(n,o))):(r-=i,e.scrollTop=r,r>t&&(a=setTimeout(n,o))),e.setAttribute("data-scrollTimer",a)}()}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.currentTarget;return n.scrollTop>n.scrollHeight-n.clientHeight-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default={isScrollAtEnd:r,scrollWithAnimation:n},e.exports=t.default},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};return(0,k.forEach)(t,function(e){n[e.id]={permission:e.permission,role:e.role}}),{type:"UPDATE_PERMISSIONS",payload:r({},e,n)}}function i(e,t,n){return{type:"PATCH_PERMISSIONS",payload:{fileGuid:e,userId:t,permission:{role:n}}}}function a(e,t){return function(n){return 0!=+t.code?n((0,C.error)("GET_SHARED_USERS",t)):Promise.all([n(d(t.data)),n(o(e,t.data)),n(s(e,t.data))])}}function s(e,t){return{type:"PATCH_SHARED_USERS",payload:r({},e,(0,k.map)(t,"id"))}}function u(e){return function(t){return t({type:"GET_SHARED_USERS"}),(0,E.ajaxGet)("/smapi/files/"+e+"/collaborators").then(function(n){return t(a(e,n))},function(e){return t((0,C.error)("GET_SHARED_USERS",e))})}}function l(){var e="GET_RECENT_CONTACTS";return function(t){return t({type:e}),(0,E.ajaxGet)("/smapi/users/mine/recent_contacts").then(function(e){return t(c(e))},function(n){return t((0,C.error)(e,n))})}}function c(e){return function(t){return 0!=+e.code?t((0,C.error)("GET_RECENT_CONTACTS",e)):Promise.all([t(d(e.data)),t(f(e.data))])}}function f(e){return{type:"PATCH_RECENT_CONTACTS",payload:(0,k.map)(e,"id")}}function d(e){var t=(0,k.map)(e,"id");return{type:"PATCH_USERS",payload:(0,k.zipObject)(t,e)}}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"editor",r=arguments[3],o="SET_PERMISSION";return function(i){switch(n){case"remove":return(0,E.ajaxDelete)("/smapi/files/"+e+"/collaborators/"+t).then(function(n){return 0===n.code&&cow.currentFile.collaboratorCount&&cow.currentFile.collaboratorCount--,t!==cow.currentUser.id?i(h(n,e)):(i((0,T.cleanModals)()),{error:0})},function(e){return i((0,C.error)(o,e))});case"add":return(0,E.ajaxPost)("/smapi/files/"+e+"/collaborators",{userId:t,role:"editor"}).then(function(t){return 0===t.code&&cow.currentFile.collaboratorCount&&cow.currentFile.collaboratorCount++,i(h(t,e,void 0,void 0,r))},function(e){return i((0,C.error)(o,e))});default:return(0,E.ajaxPatch)("/smapi/files/"+e+"/collaborators/"+t,{role:n}).then(function(r){return i(h(r,e,t,n))},function(e){return i((0,C.error)(o,e))})}}}function h(e,t,n,r,o){return function(a){return 0!=+e.code?a((0,C.error)("SET_PERMISSION",e,o)):r?r?a(i(t,n,e.data.role)):void 0:a(u(t))}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return(0,E.ajaxGet)("/smapi/teams/mine/members?pagination=true&perPage=20&page="+e).then(function(r){return n(v(e,r,t))},function(e){return n((0,C.error)("GET_TEAM_MEMBERS",e))})}}function v(e,t,n){return function(r){return 0!=+t.code?r((0,C.error)("GET_TEAM_MEMBERS",t,n)):Promise.all([r(d(t.data)),r(y(e,t.data))])}}function y(e,t){return{type:"UPDATE_TEAM_MEMBER",payload:{page:e,teamMembers:(0,k.map)(t,"id")}}}function g(e){return function(t){return(0,E.ajaxGet)("/smapi/files/"+e).then(function(e){return t(b(e))},function(e){return t((0,C.error)("GET_FILE",e))})}}function b(e){return function(t){return t(0!=+e.code?(0,C.error)("GET_FILE",e):w(e.data))}}function w(e){return{type:"PATCH_FILES",payload:r({},e.guid,e)}}function _(e,t){var n="UPDATE_FILE";return function(r,o){var i=o(),a=i.storage,s=a.files[e],l=function(o){return 0!==o.code?r((0,C.error)(n,o)):Promise.all([r(w((0,k.assign)({},s,t))),r(u(e))])};return(0,E.ajaxPatch)("/smapi/files/"+e,t).then(function(e){return l(e)},function(e){return r((0,C.error)(n,e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedUsers=u,t.getRecentContacts=l,t.getRecentContactsSuccess=c,t.updateRecentContacts=f,t.updateUserStorage=d,t.setPermission=p,t.setPermissionSuccess=h,t.getTeamMembers=m,t.getTeamMembersSuccess=v,t.getFile=g,t.getFileSuccess=b,t.updateFileStorage=w,t.patchFile=_;var k=n(1),E=n(7),T=n(466),C=n(580)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_USERS":return(0,f.default)({},e,t.payload);default:return e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_FILES":return(0,f.default)({},e,t.payload);default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"UPDATE_PERMISSIONS":return(0,f.default)({},e,t.payload);case"PATCH_PERMISSIONS":var n=t.payload,r=n.fileGuid,o=n.userId,i=n.permission;return e[r][o]=i,(0,f.default)({},e);default:return e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_SHARED_USERS":return(0,f.default)({},e,t.payload);default:return e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"PATCH_RECENT_CONTACTS":return t.payload;default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"UPDATE_TEAM_MEMBER":var n=t.payload,r=n.teamMembers;return 1===n.page?r:[].concat(e).concat(r);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(441),f=r(c),d=n(201);t.default=(0,d.combineReducers)({users:o,files:i,permissions:a,filePermissions:s,recentContacts:u,teamMembers:l}),e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.body.appendChild(document.createElement("div")),n=function(){return t.parentNode.removeChild(t)},r=e||{};r.cleanup=n,s.default.render(i.default.createElement(l.default,r),t)};var o=n(0),i=r(o),a=n(5),s=r(a),u=n(599),l=r(u);e.exports=t.default},function(e,t){},function(e,t,n){(function(e,r){function o(e){return e&&e.__esModule?e:{default:e}}function i(){if("enterprise_expired"===E.accountType){var e=new Date,t=new Date(e.getFullYear(),0,0),n=e-t,r=864e5,o=Math.floor(n/r);if(o>(l.default.get("lastSeen")||0)){var i="";i=["creator","admin"].indexOf(E.team_role)?'<div>石墨文档企业版已到期。目前无法新建／导入文档、添加企业成员，但已有文档仍可以正常编辑与共享。</div><br><div>您可以购买或续费企业版服务，也可以删除企业退回到个人版（不会影响任何文档和共享关系）。</div><br><div>致电 400-006-0506 获取购买与折扣信息，或前往 <a href="/enterprise/billing" target="_blank" style="color: #4A90E2; text-decoration: underline;">企业管理</a> 页面。</div>':"<div>石墨文档企业版已到期。目前无法新建／导入文档、添加企业成员，但已有文档仍可以正常编辑与共享。</div><br><div>请尽快提醒管理员购买或续费企业版服务，或者删除企业退回到个人版（不会影响任何文档和共享关系）。</div><br><div>致电 400-006-0506 获取购买与折扣信息。</div>";var a={title:"试用到期提醒",description:i,buttons:[{type:"button",buttonLabel:"知道了",customClass:"btn btn-ok",closeAfterClick:!0}]};return(0,m.default)(a),l.default.set("lastSeen",o,{expires:7}),!0}return!1}}function a(){y.default.needToGuide()&&k&&k.survey&&(k.survey=null,(0,m.default)({customClass:"paid-survey-modal",buttons:[],title:"",description:'<span id="survey-letter"></span><span id="survey-computer"></span><div>石墨文档 @ 你：</div><br><div>感谢您参与本次用户调研，我们已将「石墨文档高级版」<b>2 个月免费</b> 使用机会冲入您的账户。如未收到，请联系我们的客服人员。</div><div>我们还要偷偷告诉您：「石墨文档企业版」即将上线，如您的团队有需求，请联系邮箱<a href="mailto:wangxi@shimo.im">wangxi@shimo.im</a> , 我们同样会奉上 <b>专属折扣</b>。</div>'}))}function s(){b.default.bind("File",function(t){var n=t.data;k.readonly&&e("#doc-title-input").html((0,f.default)(n.name));var o=k.currentFile&&k.currentFile.id;n.id===o&&n.is_delete>=1&&r("/desktop")}),b.default.bind("Contact",function(e){p.default.isArray(e.data)||(e.data=[e.data]),e.data.forEach(function(e){_.default.push(e)})}),b.default.bind("Unsubscribe",function(e){var t=e.data;"desktop"===t.channel&&(k.desktopNotification=t.is_delete)})}Object.defineProperty(t,"__esModule",{value:!0}),t.checkEnterpriseExpired=i,t.targetedPaidUsersSurvey=a,t.hookSocket=s;var u=n(111),l=o(u),c=n(101),f=o(c),d=n(1),p=o(d),h=n(47),m=o(h),v=n(285),y=o(v),g=n(16),b=o(g),w=n(23),_=o(w),k=window.cow,E=k.currentUser;t.default=function(){s()}}).call(t,n(2),n(27))},function(e,t,n){function r(e,t,n){return n||(0,o.showAlert)({title:t.message||"暂时无法连接到服务器",type:"error"}),{type:e+"_FAILED",error:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=r;var o=n(24)},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(148),s=n(583),u=r(s),l=n(584),c=function(){return i.default.createElement(a.Provider,{store:u.default},i.default.createElement(l.TeamworkPopoverContainer,null))};t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(201),i=n(202),a=n(531),s=r(a),u=n(576),l=r(u),c={storage:{}},f=(0,o.combineReducers)({modals:i.reducer,storage:l.default});t.default=(0,s.default)(f,c),e.exports=t.default},function(e,t,n){(function(e){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TeamworkPopoverContainer=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=o(c),d=n(148),p=n(201),h=n(26),m=o(h),v=n(4),y=o(v),g=n(178),b=o(g),w=n(575),_=r(w),k=n(478),E=o(k),T=n(480),C=o(T),S=n(481),O=o(S),x=function(t){function n(e){i(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={active:!1},t.handleVisibleChange=t.handleVisibleChange.bind(t),t.handleContentSwitch=t.handleContentSwitch.bind(t),t.handleTriggerClick=t.handleTriggerClick.bind(t),t.setUnVisible=t.setUnVisible.bind(t),t.state={visible:!1,content:"show"},t.popstateHandler=function(){return t.setState({visible:!1})},t}return s(n,t),l(n,null,[{key:"propTypes",get:function(){return{fileGuid:c.PropTypes.string,storage:c.PropTypes.object,maxShareCount:c.PropTypes.number,getSharedUsers:c.PropTypes.func,setPermission:c.PropTypes.func,cleanModals:c.PropTypes.func,pushModal:c.PropTypes.func,popModal:c.PropTypes.func,dispatch:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{fileGuid:cow.currentFile.guid}}}]),l(n,[{key:"componentDidMount",value:function(){e(window).on("popstate",this.setUnVisible)}},{key:"componentWillUnmount",value:function(){e(window).off("popstate",this.setUnVisible)}},{key:"setUnVisible",value:function(){this.setState({visible:!1})}},{key:"handleVisibleChange",value:function(e){!1===e?(m.default.checkIsWelcomeFile()&&y.default.notify("guideTip:visible",{tag:"teamwork",value:!1}),this.setState({visible:e,content:"show"})):this.setState({visible:e})}},{key:"handleContentSwitch",value:function(e){var t=this;setTimeout(function(){t.setState({content:e})},100)}},{key:"handleTriggerClick",value:function(){this.setState({active:!this.state.active}),m.default.checkIsWelcomeFile()&&y.default.notify("guideTip:visible",{tag:"teamwork",value:!1})}},{key:"renderContent",value:function(){var e=this,t=void 0;if(!this.state.visible)return t;var n=(0,p.bindActionCreators)(_,this.props.dispatch);switch(this.state.content){case"show":t=f.default.createElement(E.default,u({},this.props,n,{onButtonClick:this.handleContentSwitch,file:this.file,overflow:[0,25]}));break;case"add":t=f.default.createElement(C.default,u({},this.props,n,{showButton:!0,onButtonClick:function(){return e.handleContentSwitch("show")},file:this.file,overflow:[0,25]}));break;case"transfer":t=f.default.createElement(O.default,u({},this.props,n,{showButton:!0,onButtonClick:function(){return e.handleContentSwitch("show")},fileGuid:this.file,overflow:[0,25]}))}return t}},{key:"render",value:function(){var e={points:["tr","br"],offset:[0,2]};return f.default.createElement(b.default,{align:e,overlayClassName:"teamwork-popover",visible:this.state.visible,onVisibleChange:this.handleVisibleChange,content:this.renderContent()},f.default.createElement("div",{className:"teamwork-popover-trigger new-normal-header-btn",onClick:this.handleTriggerClick},"协作"))}},{key:"file",get:function(){var e=this.props.storage,t=e.files[cow.currentFile.guid];return t&&(t.teamId=t.teamId||0),t}}]),n}(c.Component);t.default=x;var P=function(e){return e},j=(0,d.connect)(P)(x);t.TeamworkPopoverContainer=j}).call(t,n(2))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e<10?"0"+e:e}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=new Date,a=+i/1e3,s=new Date(e),u=+new Date(e)/1e3;if(t){var l=a-u;if(l<60)return"刚刚";if(l<3600)return parseInt(l/60,10)+"分钟前"}var c=new Date(i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" 00:00:00"),f=new Date(e),d=864e5,p=c-f+d,h=o(s.getHours())+":"+o(s.getMinutes());if(p>0&&p<=d)return n?"今天":"今天 "+h;if(p>d&&p<=2*d)return n?"昨天":"昨天 "+h;var m=r,v=""+(s.getMonth()+1)+m+s.getDate()+" "+h;return n&&(v=""+(s.getMonth()+1)+m+s.getDate()),s.getFullYear()!==i.getFullYear()&&(v=""+s.getFullYear()+m+v),v}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=r(a),u=n(479),l=r(u),c=function(e){var t=i(e.children,e.hasOwnProperty("within1Hour")&&e.within1Hour,e.hasOwnProperty("onlyDate")&&e.onlyDate,e.dateSymbol),n=e.before,r=e.after;return s.default.createElement(l.default,null,n+t+r)};c.propTypes={children:a.PropTypes.string,within1Hour:a.PropTypes.bool,onlyDate:a.PropTypes.bool,dateSymbol:a.PropTypes.string,before:a.PropTypes.string,after:a.PropTypes.string},c.defaultProps={within1Hour:!1,onlyDate:!1,dateSymbol:"/",before:"",after:""},t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(587),p=r(d),h=n(589),m={empty:"添加",editor:"可以编辑",commentator:"只能评论",reader:"只能阅读"},v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleActionClick=n.handleActionClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{userId:u.PropTypes.number,email:u.PropTypes.string,permission:u.PropTypes.shape({permission:u.PropTypes.string,isCreator:u.PropTypes.bool,isOutsider:u.PropTypes.bool,fromParent:u.PropTypes.bool}),file:u.PropTypes.object,handleActionClick:u.PropTypes.func,getPopupContainer:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{permission:{permission:"empty"},file:{teamId:void 0},ownDropdown:!1,getPopupContainer:function(){return document.body}}}}]),s(t,[{key:"handleActionClick",value:function(e){var t=e.key,n=e.event;switch(t){case"commentator":case"reader":if(!cow.currentUser.teamId)return;default:var r={id:this.props.userId,email:this.props.email};if(n){var o=n.target;o.getAttribute("data-disabled")||(o.setAttribute("data-disabled","true"),this.props.handleActionClick(r,t),setTimeout(function(){o.parentNode&&o.removeAttribute("data-disabled")},5e3))}else this.props.handleActionClick(r,t)}}},{key:"renderTransferOverlay",value:function(){return l.default.createElement(p.default,{className:"roles-menu",onClick:this.handleActionClick},l.default.createElement(p.default.Item,{key:"transfer"},l.default.createElement("span",null,"转让所有权")))}},{key:"renderPermissionOverlay",value:function(){var e=this.props.file,t=e||cow.currentFile,n=t.permissions,r=n.editable,o=n.fileAuthSetable,i={editable:r,commentable:o,readonly:o},a=(0,f.default)("roles-menu",{personal:!cow.currentUser.teamId});return l.default.createElement(p.default,{className:a,onClick:this.handleActionClick},l.default.createElement(p.default.Item,{className:"item-editable",key:"editor"},l.default.createElement("span",null,"可以编辑"),l.default.createElement("span",null,"可以编辑、评论、分享文件")),l.default.createElement(p.default.Item,{className:"item-commentable",key:"commentator",disabled:!i.commentable},l.default.createElement("span",null,"只能评论"),l.default.createElement("span",null,"只能评论、不能编辑、分享文件"),i.commentable?null:l.default.createElement("div",{className:"tooltip s-tooltip left"},"企业版功能")),l.default.createElement(p.default.Item,{className:"item-readonly",key:"reader",disabled:!i.readonly},l.default.createElement("span",null,"只能阅读"),l.default.createElement("span",null,"不能编辑、评论、分享文件"),i.readonly?null:l.default.createElement("div",{className:"tooltip s-tooltip left"},"企业版功能")),l.default.createElement(p.default.Divider,null),l.default.createElement(p.default.Item,{className:"danger",key:"remove"},"移除"))}},{key:"render",value:function(){var e=this,t=void 0,n=this.props,r=n.permission,o=n.getPopupContainer;if("owner"===r.role){var i=this.props.userId===cow.currentUser.id,a=cow.currentUser.teamId===this.props.file.teamId&&("admin"===cow.currentUser.teamRole||"creator"===cow.currentUser.teamRole);t=i||a?l.default.createElement(h.Button,{mask:!0,getPopupContainer:o,overlay:this.renderTransferOverlay()},"所有者"):l.default.createElement("div",{className:"sm-dropdown-button no-overlay ownship"},"所有者")}else t="empty"===r.permission?l.default.createElement("div",{className:"sm-dropdown-button no-overlay",onClick:function(t){return e.handleActionClick({key:"add",event:t})}},m[r.permission]):l.default.createElement(h.Button,{mask:!0,getPopupContainer:o,overlay:this.renderPermissionOverlay()},m[r.role]);return t}}]),t}(u.Component);t.default=v,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(588),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(213),p=r(d),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={openKeys:[]},n.handleClick=n.handleClick.bind(n),n.handleOpenChange=n.handleOpenChange.bind(n),n}return a(t,e),l(t,null,[{key:"propTypes",get:function(){return{mode:c.PropTypes.oneOf(["vertical","horizontal","inline"]),selectedKeys:c.PropTypes.arrayOf(c.PropTypes.string),defaultSelectedKeys:c.PropTypes.arrayOf(c.PropTypes.string),openKeys:c.PropTypes.arrayOf(c.PropTypes.string),defaultOpenKeys:c.PropTypes.arrayOf(c.PropTypes.string),onClick:c.PropTypes.func,className:c.PropTypes.string,prefixCls:c.PropTypes.string,onOpenChange:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-menu",onClick:s,onOpenChange:s,className:""}}}]),l(t,[{key:"componentWillReceiveProps",value:function(e){"inline"===this.props.mode&&"inline"!==e.mode&&(this.switchModeFromInline=!0),"openKeys"in e&&this.setOpenKeys(e.openKeys)}},{key:"handleClick",value:function(e){this.setOpenKeys([]),this.props.onClick(e)}},{key:"handleOpenChange",value:function(e){this.setOpenKeys(e),this.props.onOpenChange(e)}},{key:"setOpenKeys",value:function(e){"openKeys"in this.props||this.setState({openKeys:e})}},{key:"render",value:function(){var e={};return"inline"!==this.props.mode&&(e={openKeys:this.state.openKeys,onClick:this.handleClick,onOpenChange:this.handleOpenChange}),f.default.createElement(p.default,u({},this.props,e))}}]),t}(c.Component);t.default=h,h.Divider=d.Divider,h.Item=d.Item,h.SubMenu=d.SubMenu,h.ItemGroup=d.ItemGroup,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(280),i=r(o),a=n(214),s=r(a);i.default.Button=s.default,t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(13),f=n(7),d=n(9),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={inviteUrl:null},n.isDingtalkPc=(0,c.isDingtalkPc)(),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{fileGuid:u.PropTypes.string,fileType:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{fileGuid:cow.currentFile.guid,fileType:cow.pageType}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this;(0,f.ajaxGet)("/api/file/"+this.props.fileGuid+"/invite_link").then(function(t){e.setState({inviteUrl:(0,d.getQrImageUrl)(114,t.data.link)})})}},{key:"render",value:function(){return l.default.createElement("div",{className:"wechat-invite"},this.isDingtalkPc?null:l.default.createElement("span",{className:"btn"},"添加微信好友"),l.default.createElement("div",{className:"invite-link-popup"},l.default.createElement("p",null,"微信扫一扫"),l.default.createElement("img",{src:this.state.inviteUrl}),l.default.createElement("p",null,"把链接发送给好友",l.default.createElement("br",null),"邀请好友加入")))}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(49),d=o(f),p=n(592),h=o(p),m=n(594),v=o(m),y=n(595),g=o(y),b=n(596),w=o(b),_=n(26),k=n(155),E=o(k),T=n(597),C=o(T),S=n(47),O=o(S),x=n(24);n(598);var P=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loaderVisible:!1,currentDirectory:{},selectedDirectory:{},visible:!0,isMoved:!1},n.onNavigatorBack=n.onNavigatorBack.bind(n),n.onDirectoryClick=n.onDirectoryClick.bind(n),n.startMove=n.startMove.bind(n),n.socketHooker=n.socketHooker.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{sourceFile:l.PropTypes.object,onSuccess:l.PropTypes.func,onClose:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{onSuccess:function(){},onFail:function(){},onCancel:function(){},onClose:function(){}}}}]),u(t,[{key:"componentDidMount",value:function(){var e=this;(0,C.default)(this.socketHooker),this.mounted=!0,this.redirectDirectoryByChild(this.props.sourceFile).then(function(t){e.directoryOfSourceFile=t},function(){e.directoryOfSourceFile=null})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.directoryOfSourceFile=null}},{key:"socketHooker",value:function(e){var t=this;if(this.mounted&&!this.state.isMoved){var n=e.guid,o=this.state.currentDirectory,i=this.props.sourceFile;["removePermission","delete"].indexOf(e.type)>-1?e.guid&&e.guid===i.guid?((0,x.showAlert)({title:"文件已被删除，移动失败",type:"error"}),this.props.onClose()):r.remove(o.children,{guid:n})?this.setState({currentDirectory:o}):o.guid===n&&this.redirectDesktop():["add","getPermission","update"].indexOf(e.type)>-1&&(0,_.getDirectoryInfo)(e.file).then(function(n){var o=n.file,i=n.crumbInfo,a=o,s=r.get(i,"includedFileGuid",""),u=r.get(i,"crumbList",[]),l=e.file;if(s&&u.length){var c=t.state.currentDirectory;a.guid===c.guid?"update"===e.type?c.children=c.children.map(function(e){return e.guid===l.guid?l:e}):1===l.type?c.children.unshift(l):c.children.push(l):c.guid===l.guid&&(l.children=c.children,c=l),c.children=[].concat(c.children),t.mounted&&t.setState({currentDirectory:c})}})}}},{key:"redirectDirectoryByChild",value:function(e){var t=this;return new Promise(function(n,r){e||r(new Error("not child file found")),t.setState({loaderVisible:!0},function(){(0,_.getDirectoryInfo)(e).then(function(e){var r=e.file;r.children&&(r.children=t.topAlignDirectory(r.children)),t.setState({currentDirectory:r,loaderVisible:!1},function(){n(r)})},function(e){(0,x.showAlert)({title:e.message,type:"error"}),t.redirectDesktop(),r(e)})})})}},{key:"redirectDirectory",value:function(e){var t=this;return new Promise(function(n,r){t.state.loaderVisible||(e&&e.children?(t.setState({currentDirectory:e}),n(e)):t.setState({loaderVisible:!0},function(){(0,_.getFile)(e.guid).then(function(e){e.children&&(e.children=t.topAlignDirectory(e.children)),t.setState({currentDirectory:e,loaderVisible:!1},function(){return n(e)})},function(e){(0,x.showAlert)(e.message),t.redirectDesktop(),r(e)})}))})}},{key:"redirectDesktop",value:function(){var e=this;this.setState({loaderVisible:!1},function(){e.redirectDirectory({guid:""})})}},{key:"topAlignDirectory",value:function(e){return r.sortBy(e,[function(e){return 1!==e.type}])}},{key:"onNavigatorBack",value:function(){var e=this.state,t=e.currentDirectory;e.loaderVisible||this.redirectDirectoryByChild(t)}},{key:"onDirectoryClick",value:function(e){this.redirectDirectory(e)}},{key:"confirmPreMove",value:function(e){var t=this,n=this.props.sourceFile,o=this.state.currentDirectory,i=this.directoryOfSourceFile,a=n.shortcut_id?"shortcut":"file",s=n.guid,u=o.guid;if(o.children.some(function(e){return e.guid===n.guid}))return(0,x.showAlert)({title:"移动成功"}),void this.props.onClose();this.setState({loaderVisible:!0}),(0,_.moveToFolder)(s,u,a,"info").then(function(n){if(0===n.code&&n.data&&"dialog"===n.data.type){var a=n.data.data,s=a.addUserCount,u=a.removeUserCount;if(s||u){var l={confirmFun:function(){e()},abortFun:function(){t.setState({visible:!0})}};s&&!u?r.assign(l,{title:"分享文件？",description:"移动后文件将与所有共享文件夹「"+o.name+"」的协作者共享。"}):!s&&u?r.assign(l,{title:"部分协作者可能失去访问权限？",description:"您正在将文档移出共享文件夹「"+i.name+"」，部分协作者将无权限访问该文档。"}):s&&u&&r.assign(l,{title:"部分协作者可能失去访问权限？",description:"移动后文件将与所有共享文件夹「"+o.name+"」的协作者共享。<br />您正在将文档移出共享文件夹「"+i.name+"」，部分协作者将无权限访问该文档。"}),t.setState({visible:!1,loaderVisible:!1},function(){(0,O.default)(l)})}}else 0===n.code&&n.data&&n.data.success?((0,x.showAlert)({title:"移动成功"}),t.props.onClose(),t.props.onSuccess()):t.setState({visible:!0,loaderVisible:!1})},function(e){e&&e.message&&t.setState({visible:!1},function(){(0,O.default)({title:"移动失败",description:e.message,buttons:[{buttonLabel:"确定",customClass:"btn btn-ok",onClick:function(){return t.setState({visible:!0,loaderVisible:!1})},closeAfterClick:!0}]})})})}},{key:"startMove",value:function(){var e=this,t=this.props,n=t.sourceFile,r=t.onSuccess,o=this.state,i=o.currentDirectory,a=o.loaderVisible,s=window.cow.currentUser,u=void 0===s?{}:s;(0,E.default)(u,i,k.ACTION_TYPE_CREATE_OR_MOVE_IN_OR_COPY)&&(a||this.confirmPreMove(function(){var t=n.shortcut_id?"shortcut":"file",o=n.guid,a=i.guid;e.setState({loaderVisible:!0,isMoved:!0},function(){(0,_.moveToFolder)(o,a,t,"action").then(function(t){0===t.code&&((0,x.showAlert)({title:"移动成功"}),e.props.onClose(),r())},function(){(0,x.showAlert)({title:"移动失败"}),e.setState({loaderVisible:!1,isMoved:!1})})})}))}},{key:"render",value:function(){var e=this.state,t=e.loaderVisible,n=e.currentDirectory,r=e.visible,o=this.props,i=o.onClose,a=o.sourceFile,s=n.children||[];return c.default.createElement(d.default,{onClose:i,open:r,customClass:"file-mover-dialog"},c.default.createElement(v.default,{visible:t}),c.default.createElement(g.default,{disable:!n.id,title:n.name,onClose:this.props.onClose,onBack:this.onNavigatorBack}),c.default.createElement(h.default,{onItemClick:this.onDirectoryClick,sourceFileId:a.id,isLoading:t,files:s}),c.default.createElement(w.default,{targetFolder:n,onAction:this.startMove}))}}]),t}(l.Component);t.default=P,e.exports=t.default}).call(t,n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(593),f=r(c),d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onItemClick=e.onItemClick.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{sourceFileId:u.PropTypes.number,files:u.PropTypes.array,onItemClick:u.PropTypes.func,isLoading:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{files:[],onItemClick:function(){}}}}]),s(t,[{key:"onItemClick",value:function(e){this.props.onItemClick(e)}},{key:"renderItems",value:function(){var e=this.props,t=e.files,n=e.sourceFileId,r=e.isLoading,o=this.onItemClick,i=[];return t.sort(function(e,t){return 1!==e.type||1!==t.type?0:e.starred&&!t.starred?-1:!e.starred&&t.starred?1:0}).forEach(function(e){var t=e.id===n&&1===e.type;i.push(l.default.createElement(f.default,{key:e.id,file:e,isSourceFile:t,onClick:o}))}),i.length?i:r?null:l.default.createElement("div",{className:"list-empty"},l.default.createElement("div",{className:"list-empty-icon"}),l.default.createElement("div",{className:"list-empty-text"},"没有文件"))}},{key:"render",value:function(){return l.default.createElement("ul",{className:"file-mover-list"},this.renderItems())}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(11),d=r(f),p=n(212),h=r(p),m=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.file,o=e.isSourceFile;return n.state={tipVisible:!1,disable:1!==r.type||r.permissions&&!r.permissions.editable||o},n.timerId=-1,n.onClick=n.onClick.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseOut=n.onMouseOut.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{isSourceFile:l.PropTypes.bool,file:l.PropTypes.object,onClick:l.PropTypes.func}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.file,n=e.isSourceFile,r=1!==t.type||t.permissions&&!t.permissions.editable||n;r!==this.state.disable&&this.setState({disable:r})}},{key:"componentWillUnmount",value:function(){this.clearTimerId()}},{key:"clearTimerId",value:function(){this.timerId>-1&&(clearTimeout(this.timerId),this.timerId=-1)}},{key:"onClick",value:function(){var e=this.props.file;!this.state.disable&&this.props.onClick(e)}},{key:"onMouseEnter",value:function(){var e=this,t=this.state.tipVisible;this.clearTimerId(),t||(this.timerId=setTimeout(function(){e.setState({tipVisible:!0})},1e3))}},{key:"onMouseOut",value:function(){this.clearTimerId(),this.state.tipVisible&&this.setState({tipVisible:!1})}},{key:"renderTitle",value:function(){var e=this.props,t=e.file,n=e.isSourceFile,r="";if(1!==t.type&&(r="这不是文件夹，不能移动到这里"),t.permissions&&!t.permissions.editable&&(r="只能阅读的文件夹"),n&&(r="正在被移动的文件夹"),r){var o={pointerEvents:"none"};return c.default.createElement(h.default,{title:r,align:{offset:[0,-12]},arrowPointAtCenter:!0,placement:"bottom",visible:this.state.tipVisible,offsetTop:-20},c.default.createElement("span",{className:"file-name-text",style:o},t.name))}return c.default.createElement("span",{className:"file-name-text"},t.name)}},{key:"render",value:function(){var e,t=this.props.file,n=this.state.disable,r=t.parent_id,i=t.share_count,a=t.type,s=1===a?"folder":-1===a?"spreadsheet":"doc",u=(0,d.default)({"file-list-item":!0,disable:n}),l=0===r&&i>0||r>0&&i>0,f=(0,d.default)((e={"file-icon":!0,"file-sprite":!0},o(e,"file-"+s+"-icon",!0),o(e,"file-shared",l),e)),p={pointerEvents:"none"};return c.default.createElement("li",{key:t.id,"data-id":t.id,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseOut:this.onMouseOut,className:u},c.default.createElement("i",{className:f,style:p}),this.renderTitle(),t.starred&&c.default.createElement("i",{className:"file-tag-icon file-star-icon active",style:p}),1!==t.type&&l&&c.default.createElement("i",{className:"file-tag-icon file-shared-icon",style:p}),1===t.type&&c.default.createElement("i",{className:"enter-folder-icon",style:p}))}}]),t}(l.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return this.props.visible?l.default.createElement("div",{className:"file-list-loader"},l.default.createElement("div",{className:"spinner"})):null}}],[{key:"propTypes",get:function(){return{visible:u.PropTypes.bool}}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGobackClick=e.onGobackClick.bind(e),e.onCloseClick=e.onCloseClick.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{title:u.PropTypes.string,onBack:u.PropTypes.func,onClose:u.PropTypes.func,disable:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{title:"我的桌面",onBack:function(){},onClose:function(){},disable:!1}}}]),s(t,[{key:"onGobackClick",value:function(){var e=this.props,t=e.onBack;!e.disable&&t()}},{key:"onCloseClick",value:function(){(0,this.props.onClose)()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.disable;return l.default.createElement("div",{className:"file-mover-navigator"},l.default.createElement("a",{href:"javascript:void(0)",className:n?"disable":"",style:{display:"inline-block"},onClick:this.onGobackClick},l.default.createElement("i",{className:"navigator-back"}),l.default.createElement("span",{className:"navigator-title"},t)),l.default.createElement("a",{href:"javascript:void(0)",onClick:this.onCloseClick,className:"file-mover-close"},l.default.createElement("i",{className:"dialog-close-icon"})))}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onClick=e.onClick.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{targetFolder:u.PropTypes.object,onAction:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onAction:function(){}}}}]),s(t,[{key:"onClick",value:function(){(0,this.props.onAction)()}},{key:"render",value:function(){var e=this.props.targetFolder;return l.default.createElement("div",{className:"file-mover-action"},l.default.createElement("button",{onClick:this.onClick,className:"sm-btn sm-btn-primary file-mover-btn"},"移动到 "+(e.name||"我的桌面")))}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||function(){},i.default.bind("File",function(t){"update"===t.db_event?e(+t.data.is_delete>0?{type:"delete",guid:t.data.guid}:{type:"update",file:t.data}):"create"===t.db_event&&e({type:"add",file:t.data})}),i.default.bind("Permission",function(t){"destroy"===t.db_event?e({type:"removePermission",guid:t.data.guid}):"create"===t.db_event&&e({type:"getPermission",file:t.data.file})})};var o=n(16),i=r(o);e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(8),f=r(c);n(600);var d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={disabled:"disabled"},n.confirm=n.confirm.bind(n),n.abort=n.abort.bind(n),n.cleanup=n.cleanup.bind(n),n.onInputChange=n.onInputChange.bind(n),n.onInputKeyPress=n.onInputKeyPress.bind(n),n.handleWrapClick=n.handleWrapClick.bind(n),n}return a(t,e),s(t,null,[{key:"PropTypes",get:function(){return{customClass:l.default.PropTypes.string,title:l.default.PropTypes.string,placeholderLable:l.default.PropTypes.string,confirmLabel:l.default.PropTypes.string,abortLabel:l.default.PropTypes.string,confirmClass:l.default.PropTypes.string,abortClass:l.default.PropTypes.string,confirmFun:l.default.PropTypes.func,abortFun:l.default.PropTypes.func}}},{key:"defaultProps",get:function(){return{customClass:"",title:"",placeholderLable:"",confirmLabel:"确定",abortLabel:"取消",confirmClass:"",abortClass:"",confirmFun:function(){},abortFun:function(){}}}}]),s(t,[{key:"renderDialogBody",value:function(){return l.default.createElement("div",{className:"prompt-dialog-content"},l.default.createElement("input",{placeholder:this.props.placeholderLable,ref:"input",className:"sm-form-control",onChange:this.onInputChange,onKeyPress:this.onInputKeyPress,autoFocus:!0}))}},{key:"renderFooter",value:function(){return l.default.createElement("div",{className:"prompt-dialog-footer"},l.default.createElement("button",{role:"confirm",type:"button",className:"btn btn-ok "+this.props.confirmClass+this.state.disabled,ref:"confirm",onClick:this.confirm,disabled:this.state.disabled},this.props.confirmLabel),l.default.createElement("button",{role:"abort",type:"button",className:"btn "+this.props.abortClass,onClick:this.abort},this.props.abortLabel))}},{key:"confirm",value:function(){this.props.confirmFun(),this.cleanup()}},{key:"abort",value:function(){this.props.abortFun(),this.cleanup()}},{key:"cleanup",value:function(){this.props.cleanup&&this.props.cleanup()}},{key:"onInputChange",value:function(){var e=this.refs.input,t=e.value.trim();this.setState({disabled:t?"":"disabled"})}},{key:"onInputKeyPress",value:function(e){e.charCode===f.default.keyCodes.ENTER&&(this.props.confirmFun(),this.cleanup())}},{key:"handleWrapClick",value:function(e){e.target.className.indexOf("prompt-wrap")>-1&&this.abort()}},{key:"render",value:function(){return l.default.createElement("div",{className:"prompt-wrap",onClick:this.handleWrapClick},l.default.createElement("div",{className:"prompt-dialog "+this.props.customClass},l.default.createElement("div",{className:"prompt-dialog-header"},l.default.createElement("span",null,this.props.title),l.default.createElement("span",{className:"hicon icon-close prompt-close",onClick:this.abort})),this.renderDialogBody(),this.renderFooter()))}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"bubble-wrap"},l.default.createElement("div",{className:"bubble-outter"}),l.default.createElement("div",{className:"bubble-inner"}))}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t){},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(t,n){var r=e(t)[0],o=n.currentUser;r&&(0,u.render)(s.default.createElement(c.default,{currentUser:o}),r)}function i(t){var n=e(t)[0];n&&(0,u.unmountComponentAtNode)(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.mount=o,t.unmount=i;var a=n(0),s=r(a),u=n(5),l=n(247),c=r(l);t.default=c.default}).call(t,n(2))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.querySelector(e);t&&(0,u.render)(s.default.createElement(c.default,{onlyUnread:!0}),t)}function i(e){var t=document.querySelector(e);t&&(0,u.unmountComponentAtNode)(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.mount=o,t.unmount=i,n(605);var a=n(0),s=r(a),u=n(5),l=n(606),c=r(l);t.default=c.default},function(e,t){},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(178),d=o(f),p=n(7),h=n(477),m=n(607),v=o(m),y=n(290),g=o(y),b=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleVisibleChange=n.handleVisibleChange.bind(n),n.hideGuideTip=n.hideGuideTip.bind(n),n.state={visible:!1,unpeaked:0,guideTipVisible:!1},n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{trigger:l.PropTypes.string}}}]),u(t,[{key:"componentDidMount",value:function(){var e=this;this.getMessageCount(),this.interval=setInterval(function(){return e.getMessageCount()},6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"showGuideTip",value:function(){location.href.match(/from=tutorial/)&&this.setState({guideTipVisible:!0,positionNodeElement:document.getElementsByClassName("message-popover-trigger")[0]})}},{key:"hideGuideTip",value:function(){location.href.match(/from=tutorial/)&&this.setState({guideTipVisible:!1},function(){return r("/desktop")})}},{key:"getMessageCount",value:function(){var e=this;(0,p.ajaxGet)("/smapi/notifications/unpeeked_count").then(function(t){e.setState({unpeaked:t.data||0})})}},{key:"handleVisibleChange",value:function(e){!0===e&&(0,h.track)("click","message","popup"),this.setState({visible:e,unpeaked:0})}},{key:"renderContent",value:function(){return c.default.createElement(v.default,null)}},{key:"renderBadge",value:function(){var e=this.state.unpeaked>99?"99+":this.state.unpeaked;return c.default.createElement("span",{className:"badge"},c.default.createElement("em",null,e))}},{key:"render",value:function(){return c.default.createElement(d.default,{arrowPointAtCenter:!0,destroyTooltipOnHide:!0,align:{offset:[60,3]},overlayClassName:"message-popover",visible:this.state.visible,onVisibleChange:this.handleVisibleChange,trigger:this.props.trigger,content:this.renderContent()},c.default.createElement("div",{className:"message-popover-trigger",onClick:this.hideGuideTip},c.default.createElement("div",{className:"icon icon-message"},this.state.unpeaked>0&&this.renderBadge()),c.default.createElement(g.default,{text:"来自 石墨文档 的新消息",placement:"bottomRight",colorName:"blue",hasBubble:!1,offsetLeft:10,offsetTop:20,visible:this.state.guideTipVisible,positionNodeElement:this.state.positionNodeElement})))}}]),t}(l.Component);t.default=b,e.exports=t.default}).call(t,n(27))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(7),p=n(608),h=n(477),m=n(610),v=r(m),y=function(e,t){var n="/smapi/notifications?action=peek&status="+e;return t&&(n+="&lt="+t),(0,d.ajaxGet)(n).then(function(e){return e.data})},g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFilterClick=n.handleFilterClick.bind(n),n.handleReadAllClick=n.handleReadAllClick.bind(n),n.handleLoadMore=n.handleLoadMore.bind(n),n.readMessage=n.readMessage.bind(n),n.joinTeam=n.joinTeam.bind(n),n.state={loaded:!1,unread:0,filter:"all",hasMore:!0,messages:[]},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.getMessages(),this.getMessageCount()}},{key:"handleFilterClick",value:function(e){var t=this;if((0,h.track)("click","message",e.target.className),"span"===e.target.tagName.toLowerCase()){var n=e.target.className;this.setState({filter:n,loaded:!1,messages:[]},function(){t.getMessages()})}}},{key:"handleReadAllClick",value:function(){var e=this;(0,h.track)("click","message","read_all"),(0,d.ajaxPost)("/smapi/notifications/action/read_all",{}).then(function(){var t=e.state.messages.map(function(e){return e.status="read",e});e.setState({unread:0,messages:t})})}},{key:"handleLoadMore",value:function(){var e=this,t=this.state.messages,n=t[t.length-1].id;return y(this.state.filter,n).then(function(n){var r=t;n.length>0&&(r=[].concat(r,n)),e.setState({hasMore:n.length>=20,messages:r})})}},{key:"getMessages",value:function(){var e=this;return y(this.state.filter).then(function(t){e.setState({messages:t,loaded:!0})})}},{key:"getMessageCount",value:function(){var e=this;return(0,d.ajaxGet)("/smapi/notifications/unread_count").then(function(t){e.setState({unread:t.data||0})})}},{key:"readMessage",value:function(e){var t=this;return(0,d.ajaxPatch)("/smapi/notifications/"+e+"?status=read").then(function(){var e=t.state.unread-1;e<=0&&(e=0),t.setState({unread:e})})}},{key:"joinTeam",value:function(e){return(0,d.ajaxPost)("/smapi/users/me/action/join_team_by_invitation",{teamId:e})}},{key:"renderMessageItems",value:function(){var e=this,t="all"===this.state.filter?"没有通知":"没有未读通知",n=this.state.messages;return 0===n.length?l.default.createElement("div",{className:"empty"},t):n.map(function(t){var n=(0,v.default)(t.notification.type);return l.default.createElement(n,{key:t.id,message:t,joinTeam:e.joinTeam,readMessage:e.readMessage})})}},{key:"render",value:function(){var e=(0,f.default)("filter",this.state.filter);return l.default.createElement("div",{className:"message-box"},l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:e,onClick:this.handleFilterClick},l.default.createElement("span",{className:"all"},"全部通知"),l.default.createElement("span",{className:"unread"},"未读 ("+this.state.unread+")")),l.default.createElement("div",{className:"btn btn-link",onClick:this.handleReadAllClick},"标记全部已读")),l.default.createElement(p.InfiniteScroll,{noMoreText:"没有更多通知了",key:this.state.filter,spinning:!this.state.loaded,hasMore:this.state.hasMore,loadMore:this.handleLoadMore},this.renderMessageItems()))}}]),t}(u.Component);t.default=g,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(484),i=r(o),a=n(609),s=r(a);i.default.InfiniteScroll=s.default,t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(11),d=r(f),p=n(484),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleScroll=n.handleScroll.bind(n),n.state={scrolledToEnd:!1},n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{className:l.PropTypes.string,loadMore:l.PropTypes.func,hasMore:l.PropTypes.bool,spinning:l.PropTypes.bool,defaultText:l.PropTypes.node,noMoreText:l.PropTypes.node}}},{key:"defaultProps",get:function(){return{className:"",loadMore:function(){},hasMore:!0,spinning:!1,defaultText:"正在加载下一页...",noMoreText:"已经是最后一页了."}}}]),u(t,[{key:"handleScroll",value:function(e){var t=e.target;t.scrollTop+t.offsetHeight===t.firstChild.offsetHeight&&this.handleLoadMore()}},{key:"handleLoadMore",value:function(){this.state.scrolledToEnd||this.setState({scrolledToEnd:!0}),this.props.loadMore()}},{key:"renderLoadMore",value:function(){var e=this.props,t=e.hasMore,n=e.defaultText,r=e.noMoreText;return c.default.createElement("div",{className:"load-more"},t?n:r)}},{key:"render",value:function(){var e=(0,d.default)("infinite-scroll",this.props.className);return c.default.createElement(h.default,s({},this.props,{className:e,spinning:this.props.spinning,onScroll:this.handleScroll}),this.props.children,this.state.scrolledToEnd&&this.renderLoadMore())}}]),t}(l.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText.trim()}function a(e){return e.replace(/(<a\s+)/g,"@$1")}function s(e,t){var n=(0,d.get)(e,t);return n||("name"===t?"未知用户":"avatar"===t?v.HOST+"static/unmd5/default-avatar-moke.png":"team.name"===t?"未知团队":void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.Member=t.Invitation=t.System=t.Team=t.Mention=t.Destroy=t.Teamwork=t.Comment=t.Default=void 0,t.washHTML=i,t.markMentionText=a,t.default=function(e){var t=g.default.TYPES[e];return b[t]||b.default};var u=n(0),l=o(u),c=n(11),f=o(c),d=n(1),p=n(205),h=o(p),m=n(35),v=r(m),y=n(611),g=o(y),b={};t.Default=b.default=function(e){return l.default.createElement("noscript",null)},t.Comment=b.comment=function(e){var t=e.message.notification,n=t.user,r=t.file;return l.default.createElement(g.default,e,l.default.createElement("img",{className:"message-icon",src:s(n,"avatar")}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,"评论了"),l.default.createElement(h.default,{className:"file-name",size:20},r.name)),l.default.createElement(h.default,{className:"message-content",size:78},i(a(t.msg))))},t.Teamwork=b.teamwork=function(e){var t=e.message.notification,n=t.user,r=t.file,o=(0,f.default)("message-icon",r.type);return l.default.createElement(g.default,e,l.default.createElement("div",{className:o}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,t.msg)),l.default.createElement(h.default,{className:"message-content",size:36},r&&r.name))},t.Destroy=b.destroy=function(e){var t=e.message.notification,n=t.user,r=t.file,o=(0,f.default)("message-icon",r.type);return l.default.createElement(g.default,e,l.default.createElement("div",{className:o}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,t.msg)),l.default.createElement(h.default,{className:"message-content",size:36},r&&r.name))},t.Mention=b.mention=function(e){var t=e.message.notification,n=t.user,r=t.file;return l.default.createElement(g.default,e,l.default.createElement("img",{className:"message-icon",src:s(n,"avatar")}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,t.msg)),l.default.createElement(h.default,{className:"message-content",size:36},r.name))},t.Team=b.team=function(e){var t=e.message.notification,n=t.user,r=(0,f.default)("message-icon","team");return l.default.createElement(g.default,e,l.default.createElement("div",{className:r}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,t.msg)))},t.System=b.system=function(e){var t=e.message.notification,n=(0,f.default)("message-icon","system");return l.default.createElement(g.default,e,l.default.createElement("div",{className:n}),l.default.createElement("div",{className:"message-title"},l.default.createElement("span",null,t.msg),t.link&&l.default.createElement("span",{className:"link"},"了解更多")))},t.Invitation=b.invitation=function(e){var t=e.message.notification,n=t.user,r=(0,f.default)("message-icon","team");return l.default.createElement(g.default,e,l.default.createElement("div",{className:r}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,t.msg),l.default.createElement(h.default,{className:"team-name"},s(n,"team.name"))))},t.Member=b.member=function(e){var t=e.message.notification,n=t.user;return l.default.createElement(g.default,e,l.default.createElement("img",{className:"message-icon",src:s(n,"avatar")}),l.default.createElement("div",{className:"message-title"},l.default.createElement(h.default,{size:8},s(n,"name")),l.default.createElement("span",null,t.msg)))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(205),p=n(24),h=n(156),m=r(h),v={0:"comment",1:"mention",2:"teamwork",3:"team",4:"invitation",5:"member",6:"destroy",20:"system"},y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.state={status:e.message.status},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{message:u.PropTypes.object,readMessage:u.PropTypes.func,joinTeam:u.PropTypes.func,children:u.PropTypes.node}}}]),s(t,[{key:"componentWillReceiveProps",value:function(e){"read"===e.message.status&&this.setState({status:"read"})}},{key:"handleClick",value:function(e){var t=this.props.message,n=t.notification;"read"!==t.status&&this.readMessage(this.props.message.id);var r=n.link,o=n.file,i=o&&o.type,a=r;r&&i&&("document"===i?a="/doc"+a:"newdoc"===i?a="/docs"+a:"spreadsheet"!==i&&"sheet"!==i||(a="/"+(i+a))),r&&"mark-read"!==e.target.className&&m.default.openLink(a)}},{key:"readMessage",value:function(e){var t=this,n=this.state.status;this.setState({status:"read"}),this.props.readMessage(e).catch(function(e){t.setState({status:n})})}},{key:"renderExtra",value:function(){var e=this,t=this.props.message.notification.user.team.id,n=cow.currentUser.teamId===t,r=n?"已加入":"加入",o=(0,f.default)("btn",{"btn-ok":!n,"btn-disabled":n}),i=function(r){return r.preventDefault(),n?r.stopPropagation():cow.currentUser.teamId?(0,p.showAlert)({title:"请先退出当前企业",type:"error"}):e.props.joinTeam(t).then(function(e){if(e.code)return(0,p.showAlert)({title:e.message,type:"error"});location.href="/enterprise"})};return l.default.createElement("button",{className:o,onClick:i},r)}},{key:"render",value:function(){var e=this.props.message.notification,t=(0,f.default)("message-item","type-"+v[e.type],{read:"read"===this.state.status,unread:"read"!==this.state.status});return l.default.createElement("div",{className:t,onClick:this.handleClick},this.props.children,l.default.createElement("div",{className:"message-meta"},20===e.type&&l.default.createElement("span",{className:"offcial"},"系统通知・"),l.default.createElement(d.Timeago,null,e.createdAt)),l.default.createElement("div",{className:"message-extra"},4===e.type&&this.renderExtra()),l.default.createElement("div",{className:"mark-read"}))}}]),t}(u.Component);t.default=y,y.TYPES=v,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.data,n=e.desktopNotification,r=window.cow,o=r.desktopNotification,a=r.currentUser,s=r.pageType,u=r.currentFile;o&&n&&t.notification.user&&t.notification.user.id!==a.id&&("doc"===s||"newdoc"===s)&&u.id===t.notification.file_id&&i(t.notification.file.name,t.notification.user.name+" "+(0,l.washHTML)((0,l.markMentionText)(t.notification.msg)),{icon:t.notification.user.avatar})}function i(e,t,n,r){var o=window,i=o.Notification;if(void 0===i)return!1;var s=function(){var o=new i(e,a({body:t},n));o.onclick=r,setTimeout(function(){return o.close()},6e3)};"granted"===i.permission?s():i.requestPermission(function(e){return"granted"===e&&s()})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){u.default.bind("Notification_v2",o)};var s=n(16),u=r(s),l=n(569);e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),c=n(0),f=o(c),d=n(111),p=o(d),h=n(463),m=o(h),v=n(285),y=o(v),g=n(34),b=n(204),w=o(b),_=n(4),k=o(_),E=n(203),T=o(E);n(614);var C=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={withCookie:!1,sDate:null,eDate:null,visible:!1,text:"",link:"",recordTag:"",customize:null,openNewTab:!0},n.onCloseClick=n.onCloseClick.bind(n),n.onLinkClick=n.onLinkClick.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{currentUser:c.PropTypes.object}}}]),u(t,[{key:"componentDidMount",value:function(){this.initStatus()}},{key:"onLinkClick",value:function(e){(0,w.default)("7","0001")}},{key:"onCloseClick",value:function(){this.setState({visible:!1});var e=this.state,t=e.recordTag,n=e.withCookie,r=e.sDate,o=e.eDate;if(t)if("special"===t&&["renewal","expiration"].indexOf(y.default.accountTypeStatus)>-1)y.default.removeMembershipTip();else if(n){if(p.default.get(t))return;if(o){var i=r?Date.parse(r):Date.now(),a=Date.parse(o),s=Math.ceil((a-i)/864e5);p.default.set(t,!0,{expires:s})}else p.default.set(t,!0)}else y.default.removeTipAjax(t)}},{key:"filterNotification",value:function(e){var t=this;return g.notifications.length?r.maxBy(g.notifications.filter(function(n){if(!n.enable)return!1;var r=n.recordTag;if(n.withCookie&&p.default.get(r))return!1;if(n.startDate||n.endDate){var o=new Date(n.startDate),i=new Date(n.endDate),a=new Date;if(a<o||a>i)return!1}if(r&&e&&e[r])return!1;if(n.targetUser){var s=n.targetUser,u=t.props.currentUser,l=u.accountType;if(void 0!==s.personal){if(!s.personal&&["personal_free","personal_premium"].indexOf(l)>-1)return!1;if(s.personal&&-1===["personal_free","personal_premium"].indexOf(l))return!1}if(void 0!==s.isEnterprise&&s.isEnterprise&&["personal_free","personal_premium"].indexOf(l)>-1)return!1;if(void 0!==s.isEnterpriseOfficial){if(s.isEnterpriseOfficial&&(-1===u.accountType.indexOf("enterprise")||!u.isOfficial))return!1;if(!s.isEnterpriseOfficial&&u.accountType.indexOf("enterprise")>-1&&u.isOfficial)return!1}}return!0}),"order"):null}},{key:"initStatus",value:function(){var e=this,t=this.props.currentUser;"enterprise_dingtalk"!==t.accountType&&y.default.needToGuide()&&y.default.checkIsReady().then(function(n){var r=e.filterNotification(n);if(r)return void e.setState({withCookie:r.withCookie,sDate:r.startDate,eDate:r.endDate,text:r.text,recordTag:r.recordTag,link:r.targetLink,openNewTab:r.openNewTab,visible:!0,customize:r.customize});y.default.getMembershipInfo().then(function(){var r=t.accountType,o=(0,m.default)(new Date(t.createdAt)),i=(0,m.default)("2017-12-1","YYYY-MM-DD"),a=(0,m.default)("2017-12-26","YYYY-MM-DD"),s=(0,m.default)("2017-12-28","YYYY-MM-DD"),u=(0,m.default)();if(o.isBefore(i)&&u.isBetween(a,s))return void e.setState({text:"关于近期服务不稳定的公告说明",link:"https://shimo.im/docs/BPvcUMfMw3guOFCK",visible:!0,openNewTab:!0,recordTag:"notice_about_unstable"});if(t.accountTypeExpiredAt){var l=new Date(t.accountTypeExpiredAt),c=new Date;if(l<c)y.default.shouldNotifyExpiration&&(y.default.accountTypeStatus="expiration","enterprise_expired"!==r&&e.setState({text:"石墨个人高级版已到期，点此升级",link:"/payment",visible:!0,openNewTab:!0,recordTag:"special"}));else{var f=Math.ceil((l-c)/864e5);f<=7&&y.default.shouldNotifyRenewal&&(y.default.accountTypeStatus="renewal","personal_premium"===t.accountType?e.setState({text:"石墨个人高级版剩余"+f+"天，点此续费",link:"/payment",visible:!0,openNewTab:!0,recordTag:"special"}):"enterprise_standard"===t.accountType&&k.default.notify("enterprise-payment:renewal",l))}}else n.upgrade_pro?e.setState({visible:!1}):"personal_free"!==t.accountType?(e.setState({visible:!1}),y.default.removeTipAjax("upgrade_pro")):e.setState({text:"升级石墨账号",link:"/payment",visible:!0,openNewTab:!0,recordTag:"upgrade_pro"})})})}},{key:"customizedOnClick",value:function(e){var t=this;if("invite-friends"===e){var n=this.props.currentUser,r="invite-friends-modal-container";this.infModalContainer=document.getElementById(r),this.infModalContainer||(this.infModalContainer=document.createElement("div"),this.infModalContainer.id=r,document.body.appendChild(this.infModalContainer)),(0,l.render)(f.default.createElement(T.default,{onClose:function(){return(0,l.unmountComponentAtNode)(t.infModalContainer)},currentUser:n}),this.infModalContainer)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.text,o=t.link,i=t.openNewTab,a=t.customize;return n?((0,w.default)("7","0002"),a?f.default.createElement("div",{className:"header-notification-wrap"},f.default.createElement("span",{className:"header-notification-link",onClick:function(){return e.customizedOnClick(a)}},r),f.default.createElement("span",{className:"team-sprite header-item-icon header-notification-close",onClick:this.onCloseClick})):f.default.createElement("div",{className:"header-notification-wrap"},f.default.createElement("a",{className:"header-notification-link",href:o,onClick:this.onLinkClick,target:i?"_blank":"",dangerouslySetInnerHTML:{__html:r}}),f.default.createElement("span",{className:"team-sprite header-item-icon header-notification-close",onClick:this.onCloseClick}))):null}}]),t}(c.Component);t.default=C,e.exports=t.default}).call(t,n(1))},function(e,t){},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(485),p=i(d),h=n(26),m=i(h),v=n(34),y=n(180),g=i(y),b=n(616),w=i(b);n(618);var _=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=t.initState,n.handleSearchEntryClick=n.handleSearchEntryClick.bind(n),n.handleSearchInputKeydown=n.handleSearchInputKeydown.bind(n),n.handleSearchInputKeyup=r.debounce(n.handleSearchInputKeyup.bind(n),300),n.handleResultItemHovered=n.handleResultItemHovered.bind(n),n.handleResultItemClick=n.handleResultItemClick.bind(n),n.handleSearchInputChange=n.handleSearchInputChange.bind(n),n.handleScrollEnd=n.handleScrollEnd.bind(n),n.handleClearClick=n.handleClearClick.bind(n),n.componentClick=n.componentClick.bind(n),n.search=n.search.bind(n),n}return u(t,e),l(t,null,[{key:"initState",get:function(){return{active:!1,results:[],page:0,keyword:"",lastKeyword:"",pageCount:0,selectedIndex:-1,count:0,dropdownVisible:!1}}}]),l(t,[{key:"componentClick",value:function(){this.clearAndReset()}},{key:"clearAndReset",value:function(e){this.setState(t.initState,function(){"function"==typeof e&&e()})}},{key:"handleSearchEntryClick",value:function(){var e=this;this.setState({active:!0},function(){setTimeout(function(){e.refs.searchInput.focus()},200)})}},{key:"handleSearchInputChange",value:function(e){this.setState({keyword:e.target.value})}},{key:"scrollToFixedPosition",value:function(e,t){var n=document.getElementsByClassName("search-result-item")[t];if(n){var r=n.getBoundingClientRect();if(e&&r.top<=100||!e&&r.top>=390){var o=document.getElementsByClassName("search-result-list")[0];o&&o&&(o.scrollTop=o.scrollTop+200*(e?-1:1))}}}},{key:"handleSearchInputKeydown",value:function(e){var t=e.keyCode,n=this.state,r=n.results,i=n.selectedIndex;if(t===v.KEY_CODES.UP)i>0&&this.setState({selectedIndex:this.state.selectedIndex-1}),this.scrollToFixedPosition(!0,this.state.selectedIndex);else if(t===v.KEY_CODES.DOWN)i<r.length-1&&this.setState({selectedIndex:i+1}),this.scrollToFixedPosition(!1,this.state.selectedIndex);else if(t===v.KEY_CODES.ENTER){var a=r[i];if(a){var s=a.source,u=s.type,l=s.guid,c="document"===u?"doc":"newdoc"===u?"docs":u,f="/"+c+"/"+l;this.clearAndReset(function(){o(f)})}}[v.KEY_CODES.UP,v.KEY_CODES.DOWN,v.KEY_CODES.ENTER].indexOf(t)>-1&&(e.preventDefault(),e.stopPropagation())}},{key:"handleSearchInputKeyup",value:function(e){var t=this;if(!([v.KEY_CODES.UP,v.KEY_CODES.DOWN,v.KEY_CODES.ENTER].indexOf(e.keyCode)>-1)){var n=e.target.value.trim();n&&n!==this.state.lastKeyword?this.setState({lastKeyword:n,isLoading:!0,dropdownVisible:!0,page:0,count:0,pageCount:0},function(){t.search(n)}):n||n===this.state.lastKeyword||this.setState({lastKeyword:"",isLoading:!1,dropdownVisible:!1})}}},{key:"handleResultItemHovered",value:function(e){this.state.selectedIndex!==e&&this.setState({selectedIndex:e})}},{key:"handleResultItemClick",value:function(){this.clearAndReset()}},{key:"handleClearClick",value:function(){var e=this;this.setState(r.assign({},t.initState,{active:!0}),function(){e.refs.searchInput.focus()})}},{key:"search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;m.default.searchFile(e,n,r).then(function(e){var n=e.page,r=e.pageCount,o=e.count,i=e.results;n>0&&(i=t.state.results.concat(i)),t.setState({page:n,results:i,pageCount:r,count:o,isLoading:!1})},function(){t.setState({results:[]})})}},{key:"searchNextPage",value:function(){var e=this,t=this.state,n=t.keyword,r=t.page,o=t.pageCount;!t.isLoading&&r+1<o&&this.setState({isLoading:!0},function(){setTimeout(function(){e.search(n,r+1)},1e3)})}},{key:"handleScrollEnd",value:function(){this.searchNextPage()}},{key:"renderEntryWithAnimation",value:function(){var e={verticalAlign:"middle"},t=this.state.active?[f.default.createElement("div",{key:0,className:"search-input-wrap"},f.default.createElement("span",{className:"search-input-icon"}),f.default.createElement("input",{ref:"searchInput",type:"text",placeholder:"输入文件名、文件内容搜索",className:"form-control header-search-input",value:this.state.keyword,onChange:this.handleSearchInputChange,onKeyDown:this.handleSearchInputKeydown,onKeyUp:this.handleSearchInputKeyup}),this.state.keyword?f.default.createElement("a",{className:"search-clear-icon",onClick:this.handleClearClick,href:"javascript:void(0);"}):null)]:[f.default.createElement("a",{key:1,className:"file-search-entry",onClick:this.handleSearchEntryClick,href:"javascript:void(0);"},f.default.createElement("span",{style:e,className:"header-search-icon"}),f.default.createElement("span",{style:e},"搜索"))];return f.default.createElement(p.default,{transitionName:"file-search",transitionAppearTimeout:100,transitionEnterTimeout:120,transitionLeaveTimeout:100,transitionAppear:!0},t)}},{key:"render",value:function(){var e=this.state.selectedIndex;return f.default.createElement("div",{className:"header-search-wrap"},this.renderEntryWithAnimation(),f.default.createElement(w.default,{selectedIndex:e,onScrollEnd:this.handleScrollEnd,isLoading:this.state.isLoading,visible:this.state.dropdownVisible,onItemHovered:this.handleResultItemHovered,onItemClick:this.handleResultItemClick,results:this.state.results}))}}]),t}(c.Component);t.default=(0,g.default)(_),e.exports=t.default}).call(t,n(1),n(27))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(617),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScroll=n.onScroll.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{results:u.PropTypes.array,visible:u.PropTypes.bool,isLoading:u.PropTypes.bool,selectedIndex:u.PropTypes.number,onItemHovered:u.PropTypes.func,onItemClick:u.PropTypes.func,onScrollEnd:u.PropTypes.func}}}]),s(t,[{key:"onScroll",value:function(e){var t=this.props,n=t.isLoading,r=t.onScrollEnd,o=this.refs.resultList,i=o.scrollHeight-o.scrollTop-o.clientHeight;!n&&i<=0&&"function"==typeof r&&r(),e.stopPropagation(),e.preventDefault()}},{key:"renderResultItems",value:function(){var e=this.props,t=e.results,n=e.selectedIndex,r=e.onItemHovered,o=e.onItemClick;return t.map(function(e,t){var i=n===t;return l.default.createElement(f.default,{isSelected:i,onMouseOver:r,onClick:o,key:t,index:t,data:e})})}},{key:"render",value:function(){var e=this.props,t=e.results,n=e.visible,r=e.isLoading;return n?!r&&t&&0===t.length?l.default.createElement("div",{className:"search-result-wrap"},l.default.createElement("div",{className:"search-no-result"},l.default.createElement("span",null,"无搜索结果"))):l.default.createElement("div",{className:"search-result-wrap"},l.default.createElement("ul",{className:"scrollable search-result-list",ref:"resultList",onScroll:this.onScroll,style:{maxHeight:"437px"}},this.renderResultItems(),r?l.default.createElement("div",{className:"search-loading"},l.default.createElement("div",{className:"spinner"})):null)):null}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(101),p=r(d),h=n(205),m=n(156),v=r(m),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseOver=n.onMouseOver.bind(n),n.onClick=n.onClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{data:u.PropTypes.object,onMouseOver:u.PropTypes.func,index:u.PropTypes.number,isSelected:u.PropTypes.bool,onClick:u.PropTypes.func}}}]),s(t,[{key:"onMouseOver",value:function(){var e=this.props.onMouseOver;"function"==typeof e&&e(this.props.index)}},{key:"onClick",value:function(){var e=this.props,t=e.data,n=e.onClick,r=t.source,o=r.type,i=r.guid,a="document"===o?"doc":"newdoc"===o?"docs":o,s="/"+a+"/"+i;"function"==typeof n&&n(),v.default.openLink(s+("folder"!==o&&cow.inviteCode?"?r="+cow.inviteCode:""))}},{key:"getName",value:function(){var e=this.props.data.source.name,t=this.props.data.highlight.name,n="";return t&&t[0]?n=t[0]:e&&e[0]&&(n=e[0]),(0,p.default)(n)}},{key:"getInnerContent",value:function(){var e=this.props.data,t=e.source.type,n=e.highlight.content,r="";"sheet"===t||"spreadsheet"===t?r="<i>表格</i>":"document"!==t&&"newdoc"!==t||(r=n&&n[0]?n[0]:"<i>空</i>");try{r=(0,p.default)(decodeURI(r))}catch(e){r=(0,p.default)(r)}return r}},{key:"render",value:function(){var e=this.props,t=e.isSelected,n=e.data,r=n.source,o=r.updated_at,i=r.starred,a=r.type,s=o,u=a;"document"===a||"newdoc"===a?u="doc":"sheet"===a&&(u="spreadsheet");var c=this.getName(),d=(0,f.default)({"search-result-item":!0,active:t,folder:"folder"===a,file:"folder"!==a});if(!c)return null;var p=this.getInnerContent();return l.default.createElement("li",{className:d,onClick:this.onClick,onMouseOver:this.onMouseOver},l.default.createElement("div",{className:"search-result-info"},l.default.createElement("span",{className:"search-list-icon "+u}),l.default.createElement("span",{className:"search-result-title",dangerouslySetInnerHTML:{__html:c}}),l.default.createElement("span",{className:"search-result-time"},l.default.createElement(h.Timeago,null,s)),i?l.default.createElement("span",{className:"search-star-icon"}):null),"folder"!==a?l.default.createElement("div",{className:"search-result-content"},l.default.createElement("span",{className:"search-result-content-text",dangerouslySetInnerHTML:{__html:p}})):null)}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t){},function(e,t,n){(function(r,o,i){function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=a(f),p=n(11),h=a(p),m=n(24),v=n(9),y=n(26),g=n(476),b=a(g),w=n(473),_=a(w),k=n(620),E=a(k),T=n(621),C=a(T),S=n(16),O=a(S),x=n(4),P=a(x),j=n(290),N=a(j),M=n(629),A=a(M),I=function(e){function t(e){s(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tableTitle:e.currentFile.name,userId:e.currentUser.id,shareStatus:(0,v.getShareMode)(),guideTipVisible:!1,starred:e.currentFile.starred},n.handleGuideTipVisibleChange=n.handleGuideTipVisibleChange.bind(n),n.onStarBtnClick=n.onStarBtnClick.bind(n),n}return l(t,e),c(t,null,[{key:"propTypes",get:function(){return{currentFile:f.PropTypes.object,currentUser:f.PropTypes.object}}}]),c(t,[{key:"componentDidMount",value:function(){this.isUnmount=!1,this._init()}},{key:"componentWillReceiveProps",value:function(e){e.currentFile.name!==this.props.currentFile.name&&P.default.notify("file:updateTitle",e.currentFile.name)}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0,P.default.detach("guideTip:visible:desktop",this.handleGuideTipVisibleChange)}},{key:"handleGuideTipVisibleChange",value:function(e){var t=r.assign({},this.state);t.guideTipVisible=e,!this.state.guideTipVisible&&e&&(t.positionNodeElement=document.getElementsByClassName("header-back-up")[0]),this.setState(t)}},{key:"_onTitleChange",value:function(){}},{key:"_onTitleBlur",value:function(){var e=this.refs.tableName.getValue();e!==this.state.tableTitle&&(0,y.updateTitle)(e)}},{key:"_init",value:function(){var e=this;this._initPush(),(0,y.checkIsWelcomeFile)()&&(0,y.starFile)(window.cow.currentFile.id).then(function(){e.setState({starred:!0})})}},{key:"_initPush",value:function(){var e=this;O.default.bind("StarredFile",function(t){if(!e.isUnmount){var n=e.props.currentFile;if(t.data.fileId===n.id){var r="create"===t.action;n.starred=r,e.setState({starred:r})}}}),O.default.bind("File",function(t){if(!e.isUnmount){var n=e.props,r=n.currentFile,o=n.currentUser;if(!(["spreadsheet","sheet","doc","newdoc"].indexOf(window.cow.pageType)<0)&&"update"===t.db_event&&+t.data.id==+r.id)if(0==+t.data.is_delete){var i=t.data.name;P.default.notify("file:updateTitle",i)}else 1==+t.data.is_delete&&+t.data.deleted_by!=+o.id&&e._backParent()}}),P.default.detach("file:updateTitle",this._updateTitle),P.default.attach("file:updateTitle",this._updateTitle,{scope:this}),P.default.detach("guideTip:visible:desktop",this.handleGuideTipVisibleChange),P.default.attach("guideTip:visible:desktop",this.handleGuideTipVisibleChange)}},{key:"onStarBtnClick",value:function(){var e=this,t=this.props.currentFile.id;this.state.starred?(0,y.unstarFile)(t).then(function(){e.setState({starred:!1})},function(e){(0,m.showAlert)({title:e.message,type:"error"})}):(0,y.starFile)(t).then(function(){e.setState({starred:!0})},function(e){(0,m.showAlert)({title:e.message,type:"error"})})}},{key:"_updateTitle",value:function(e){this.setState({tableTitle:e}),this.props.currentFile.name=e,this.refs.tableName&&(document.title=e,this.refs.tableName.setValue(e))}},{key:"_backParent",value:function(){function e(){return window.cow.authorized&&u.parent&&u.parent.guid?"/folder/"+u.parent.guid:a}if(this._isBackFromSheet()){var t=window.cow||{},n=t.alphaFeatures,r=void 0===n?{}:n,a=r.lizard?"/dashboard":"/desktop",s=(0,y.checkIsWelcomeFile)();if(s&&this.setState({guideTipVisible:!1}),s&&window.cow.authorized&&window.cow.currentUser&&!window.cow.currentUser.lastVisit)return void(window.location.href=a+"?from=tutorial");var u=this.props.currentFile;if("referrer"in document&&-1===document.referrer.indexOf(location.host))return o(e());history.length>1?(history.back(),2===history.length&&i.safari&&setTimeout(function(){location.href=e()},50)):o(e())}}},{key:"_isBackFromSheet",value:function(){var e=!0;return"sheet"===window.cow.pageType&&(window.cow.isEmptyQueue()||(e=!1,(0,m.showAlert)({title:"当前表格正在保存中，为防止数据丢失，请勿离开。",type:"error"}))),e}},{key:"renderStatusBar",value:function(){var e=this.props.currentFile,t=e.type,n=e.role,r=e.permissions,o=this.state.userId;return-1!==t&&-3!==t||n||r.editable?o>0?d.default.createElement(_.default,{customClassName:"s-header-time"}):0===t||-2===t?d.default.createElement(_.default,{customClassName:"s-header-time"}):-1===t||-3===t?d.default.createElement(_.default,{customClassName:"writeable-sheet-status-bar s-header-time"}):void 0:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentFile,r=t.currentUser,o=[0,-1,-2,-3],i=n.type,a=window.cow||{},s=a.alphaFeatures,u=void 0===s?{}:s,l=!!u.lizard;if(o.indexOf(i)>-1){var c=(0,h.default)({"header-star-btn":!0,"s-header-star-btn":!0,"old-header-star-btn":!0,active:this.state.starred}),f=(0,h.default)({"team-icon-sheet":-1===i||-3===i,"team-icon-doc":0===i||-2===i}),p=(0,h.default)({"old-file-crumb-wrap":!0}),m=(0,h.default)({"header-back-up":l,"old-header-back-btn":!l}),v=d.default.createElement("a",{className:c,onClick:this.onStarBtnClick},d.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"}),d.default.createElement("span",{className:"s-tooltip"},this.state.starred?"取消标星":"标星")),y=d.default.createElement("a",{className:m,onClick:function(t){return e._backParent(t)}},d.default.createElement("span",{className:"header-back-icon"})),g=d.default.createElement("span",{className:"left-sheet-img team-sprite "+f});if(this.state.userId>0)return d.default.createElement("div",{className:"s-header"},!l&&y,d.default.createElement("div",{className:"header-op-wrapper"},l&&y,l&&d.default.createElement(C.default,{currentFile:n,currentUser:r})),d.default.createElement("span",{className:"header-crumb-arrow little-icon-sprite"}),!l&&g,l&&d.default.createElement(A.default,{currentFile:n,currentUser:r}),d.default.createElement("span",{className:"s-header-text",style:{margin:"0 0 0 20px"}},d.default.createElement(b.default,{customClass:"title-input",defaultValue:this.state.tableTitle?this.state.tableTitle:"无标题",placeholder:"无标题",maxWidth:"240px",autoWidth:!0,onBlur:function(t){return e._onTitleBlur(t)},onChange:function(t){return e._onTitleChange(t)},tooltip:"重命名",ref:"tableName"})),this.props.currentFile.authorized&&!l?d.default.createElement(E.default,{guid:this.props.currentFile.guid,className:p}):null,!l&&v,d.default.createElement(N.default,{text:"返回桌面",placement:"right",offsetLeft:12,offsetTop:12,visible:this.state.guideTipVisible,positionNodeElement:this.state.positionNodeElement}),this.renderStatusBar());var w=n.team,_=void 0;if(w&&w.resources&&(_=d.default.createElement("img",{className:"header-logo-img",src:w.resources.desktopLogo})),0===i||-2===i)return d.default.createElement("div",{className:"s-header"},d.default.createElement("a",{href:"/",className:"home-link doc-logo "+(_?"":"logo-22")},_),this.renderStatusBar());if(-1===i||-3===i)return d.default.createElement("div",{className:"s-header"},d.default.createElement("div",{className:"s-home-link-wrap"},d.default.createElement("a",{className:"s-home-link "+(_?"custom-logo":""),href:"/"},_)),d.default.createElement("span",{className:"sheet-img-not-loggin left-sheet-img team-sprite team-icon-sheet"}),d.default.createElement("div",{className:"s-title"},window.cow.tempCurrentFile.name),this.renderStatusBar())}return d.default.createElement("a",{className:"header-logo logo-22",href:"/desktop"})}}]),t}(f.Component);t.default=I,e.exports=t.default}).call(t,n(1),n(27),n(177))},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(90),p=n(26),h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!0,ancestors:[],active:!1},n._onCrumbListClick=n._onCrumbListClick.bind(n),n._toggleDropdown=n._toggleDropdown.bind(n),n}return u(t,e),l(t,[{key:"componentDidMount",value:function(){this._getAncestors(),this.handleOtherClick=this._otherClick.bind(this),r("html").on("click",this.handleOtherClick)}},{key:"componentWillUnmount",value:function(){r("html").off("click",this.handleOtherClick)}},{key:"_otherClick",value:function(e){void 0!==this.state.active&&this.state.active&&(e.target.className.match(/crumb-dropdown-btn/)||this.setState({active:!1}))}},{key:"_renderCrumbList",value:function(e){var t=this,n=[];if(this.state.isLoading)return f.default.createElement("div",{className:"crumb-loading"},f.default.createElement("img",{className:"crumb-loading-img",src:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif"}));var r=[22,20,18,16];return e.forEach(function(e,o){var i=o>3?3:o,a=(0,d.cutLength)(e.name,r[i]),s=a===e.name?"":e.name;n.push(f.default.createElement("li",{key:o,className:"crumb-list-item",title:s,"data-href":e.link,"data-type":e.type,onClick:t._onCrumbListClick},f.default.createElement("a",{className:"crumb-list-link crumb-list-indent"+i,href:"javascript:void(0);"},f.default.createElement("span",{className:"little-icon-sprite crumb-list-icon crumb-"+e.type+"-icon"}),f.default.createElement("span",{className:"crumb-item-name"},a))))}),n}},{key:"_onCrumbListClick",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-href");n&&o(n)}},{key:"_toggleDropdown",value:function(){this.setState({active:!this.state.active})}},{key:"_getAncestors",value:function(){var e=this,t=this.props.guid;this.setState({isLoading:!0}),(0,p.getAncestors)(t).then(function(t){e.setState({isLoading:!1,ancestors:t})})}},{key:"render",value:function(){var e=this.state.ancestors||[],t=this.state.active?"active":"",n=this.props.className;return f.default.createElement("div",{className:"crumb-wrap "+n},f.default.createElement("a",{className:"crumb-dropdown-btn little-icon-sprite",onClick:this._toggleDropdown}),f.default.createElement("ul",{className:"crumb-dropdown-wrap "+t},this._renderCrumbList(e)))}}]),t}(c.Component);t.default=h,h.propTypes={guid:c.PropTypes.string,className:c.PropTypes.string},e.exports=t.default}).call(t,n(2),n(27))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(178),f=r(c),d=n(622),p=r(d);n(628);var h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n.onToggleVisibility=n.onToggleVisibility.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;window.showQuickAccessMenu=function(){return e.setState({visible:!0})}}},{key:"componentWillUnmount",value:function(){window.showQuickAccessMenu=void 0}},{key:"onToggleVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.visible;this.setState({visible:e})}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.currentFile;return l.default.createElement(f.default,{overlayClassName:"quick-access-menu",visible:this.state.visible,placement:"bottomLeft",onVisibleChange:this.onToggleVisibility,content:l.default.createElement(p.default,{currentUser:t,currentFile:n,visible:this.state.visible,onHide:this.onToggleVisibility}),align:{offset:[-38,2]}},l.default.createElement("div",{className:"quick-access-point"},l.default.createElement(m,null)))}}]),t}(l.default.Component);h.propTypes={currentUser:u.PropTypes.object,currentFile:u.PropTypes.object},h.defaultProps={currentUser:window.cow.currentUser,currentFile:window.cow.currentFile};var m=function(){return l.default.createElement("span",{className:"qa-point crumb-dropdown-btn little-icon-sprite"})};t.default=h,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(293),d=r(f),p=n(623),h=r(p),m=n(626),v=r(m),y=n(627),g=r(y),b=n(486),w=l.PropTypes.object,_=l.PropTypes.string,k=l.PropTypes.array,E=l.PropTypes.bool,T=l.PropTypes.func,C=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.initialState={search:-1,link:-1},r.state=r.initialState,r.ancestors=void 0,r.shortcuts=void 0,r.resetSelect=r.resetSelect.bind(r),r.onSelect=r.onSelect.bind(r),r.onHover=r.onHover.bind(r),r.onEnter=r.onEnter.bind(r),r.onSearchExtended=r.onSearchExtended.bind(r),r.hoveredItem=r.hoveredItem.bind(r),r.onAncestorsLoaded=r.onAncestorsLoaded.bind(r),r.onShortcutsLoaded=r.onShortcutsLoaded.bind(r),r.triggerPotentialScroll=r.triggerPotentialScroll.bind(r),r.bindMyRefPlease=r.bindMyRefPlease.bind(r),r}return s(t,e),u(t,[{key:"resetSelect",value:function(){this.setState(this.initialState)}},{key:"onSelect",value:function(e){var t=void 0,n=void 0,r=this.props.searchResult;if(r)t=r.length,n=this.state.search+e;else{var i=this.ancestors,a=void 0===i?[]:i,s=this.shortcuts,u=void 0===s?[]:s;t=a.length+u.length,n=this.state.link+e}n<-1||n>t||this.setState(o({},r?"search":"link",n))}},{key:"onHover",value:function(e,t){var n=this.ancestors,r=void 0===n?[]:n;switch(t){case"ancestor":this.setState({link:e});break;case"shortcut":this.setState({link:r.length+e});break;case"search":this.setState({search:e})}}},{key:"hoveredItem",value:function(){var e=this.state,t=e.search,n=e.link,r=this.props.searchResult,o=void 0===r?[]:r,i=this.ancestors,a=void 0===i?[]:i,s=this.shortcuts,u=void 0===s?[]:s;if(o&&t>-1&&t<o.length){var l=(o[t]||{}).source||{};return{type:"search",idx:t,guid:l.guid,fileType:(0,b.unifiedFileType)(l.type)}}if(n>-1&&n<a.length+u.length){if(n>=a.length){var c=n-a.length,f=u[c];return{type:"shortcut",idx:c,guid:f.guid,fileType:(0,b.unifiedFileType)(f.type)}}var d=a.length-n;if(2===d)return{type:"link",idx:0,path:"/desktop"};if(1===d)return{type:"link",idx:1,path:"/dashboard"};var p=a[n];return{type:"ancestor",idx:n,guid:p.guid,fileType:(0,b.unifiedFileType)(p.type)}}return{type:null}}},{key:"onEnter",value:function(){var e=this.hoveredItem(),t=void 0;t="link"===e.type?e.path:"/"+e.fileType+"/"+e.guid,window.open(t)}},{key:"onAncestorsLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.ancestors=e.concat([{name:"我的桌面",url:"/desktop"},{name:"工作台",url:"/dashboard"}])}},{key:"onShortcutsLoaded",value:function(e){this.shortcuts=e}},{key:"onSearchExtended",value:function(){var e=this.props.onSearch;(void 0===e?function(){}:e).apply(void 0,arguments),(arguments.length<=1?void 0:arguments[1])?this.setState({link:-1}):this.resetSelect()}},{key:"triggerPotentialScroll",value:function(e){if(this.rectWrapper){var t=this.rectWrapper.getBoundingClientRect();e.top-t.top<30&&(this.rectWrapper.scrollTop-=50),t.bottom-e.bottom<30&&(this.rectWrapper.scrollTop+=50)}}},{key:"bindMyRefPlease",value:function(e){this.rectWrapper=e}},{key:"render",value:function(){var e=this.props,t=e.currentFile,n=e.loadingState,r=e.searchResult,o=e.visible,i=e.onHide,a=void 0===i?function(){}:i;return c.default.createElement("div",{className:"qa-content"},o?c.default.createElement(h.default,{loadingState:n,onSelect:this.onSelect,onEnter:this.onEnter,onHide:a,onSearch:this.onSearchExtended,searchResult:r,visible:o,onHover:this.onHover,hoveredItem:this.hoveredItem()}):null,c.default.createElement("div",{ref:this.bindMyRefPlease,className:"qa-scroll qa-row-wrapper",style:{display:n===f.LOADING_STATE.INITIAL?"inherit":"none"}},c.default.createElement("div",{className:"qa-title"},"返回到"),c.default.createElement(v.default,{key:"ancestors",currentFile:t,onAncestorsLoaded:this.onAncestorsLoaded,onHover:this.onHover,triggerPotentialScroll:this.triggerPotentialScroll,hoveredItem:this.hoveredItem()}),c.default.createElement("div",{className:"qa-title"},"快捷方式"),c.default.createElement(g.default,{key:"shortcut",onShortcutsLoaded:this.onShortcutsLoaded,onHover:this.onHover,triggerPotentialScroll:this.triggerPotentialScroll,hoveredItem:this.hoveredItem()})))}}]),t}(c.default.Component);C.propTypes={currentFile:w,loadingState:_,searchResult:k,visible:E,onSearch:T,onHide:T},C.defaultProps={currentFile:window.cow.currentFile},t.default=(0,d.default)()(C),e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(34),f=n(293),d=n(624),p=r(d),h=u.PropTypes.array,m=u.PropTypes.func,v=u.PropTypes.object,y=u.PropTypes.string,g=u.PropTypes.bool,b=c.KEY_CODES||{},w=b.UP,_=void 0===w?38:w,k=b.DOWN,E=void 0===k?40:k,T=b.ENTER,C=void 0===T?13:T,S=b.TAB,O=void 0===S?9:S,x=b.ESCAPE,P=void 0===x?27:x,j=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={text:"",selectedIndex:void 0},n.onChange=n.onChange.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onLoadMore=n.onLoadMore.bind(n),n.onPressingUpKey=n.onPressingUpKey.bind(n),n.onPressingDownKey=n.onPressingDownKey.bind(n),n.onPressingEnterKey=n.onPressingEnterKey.bind(n),n.onPressingTabKey=n.onPressingTabKey.bind(n),n.onPressingEscapeKey=n.onPressingEscapeKey.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.input&&this.input.focus()}},{key:"componentWillReceiveProps",value:function(e){this.props.visible&&!e.visible&&this.reset()}},{key:"reset",value:function(){this.setState({text:"",selectedIndex:void 0})}},{key:"onChange",value:function(e){this.setState({text:e}),(0,this.props.onSearch)(e)}},{key:"onKeyUp",value:function(e){}},{key:"onKeyDown",value:function(e){var t=e.keyCode;if([_,E,C,O,P].indexOf(t)>-1)switch(e.preventDefault&&e.preventDefault(),e.stopPropogation&&e.stopPropogation(),t){case _:this.onPressingUpKey(e);break;case E:this.onPressingDownKey(e);break;case C:this.onPressingEnterKey(e);break;case O:this.onPressingTabKey(e);break;case P:this.onPressingEscapeKey(e)}}},{key:"onPressingUpKey",value:function(){this.props.onSelect&&this.props.onSelect(-1)}},{key:"onPressingDownKey",value:function(){this.props.onSelect&&this.props.onSelect(1)}},{key:"onPressingEnterKey",value:function(e){this.props.onEnter&&this.props.onEnter(e.ctrlKey)}},{key:"onPressingTabKey",value:function(){}},{key:"onPressingEscapeKey",value:function(){this.props.onHide&&this.props.onHide(!1)}},{key:"onLoadMore",value:function(){var e=this.props,t=e.onSearch,n=e.paging,r=void 0===n?{}:n,o=e.loadingState,i=this.state.text,a=o===f.LOADING_STATE.LOADING,s=r.page,u=r.pageCount;!a&&s+1<u&&t(i,s+1)}},{key:"onChangeHighlight",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchResult,r=void 0===n?[]:n,o=t.loadingState,i=t.onHover,a=void 0===i?function(){}:i,s=t.hoveredItem,u=this.state.selectedIndex;return l.default.createElement("div",{className:"qa-search"},l.default.createElement("div",{className:"qa-search-bar-wrapper"},l.default.createElement("div",{className:"qa-search-bar"},l.default.createElement("div",{className:"qa-search-icon"}),l.default.createElement("input",{ref:function(t){e.input=t},onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,value:this.state.text,onChange:function(t){return e.onChange(t.target.value)},placeholder:"搜索文件..."}))),l.default.createElement(p.default,{loadingState:o,searchResult:r,selectedIndex:u,onSearch:this.onLoadMore,onHover:a,hoveredItem:s}))}}]),t}(l.default.Component);j.propTypes={searchResult:h,onSearch:m,onSelect:m,onEnter:m,onHide:m,onHover:m,hoveredItem:v,loadingState:y,paging:v,visible:g},j.defaultProps={searchResult:null,onSearch:function(){}},t.default=j,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(625),f=r(c),d=n(293),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={searchResult:[]},n.onScroll=n.onScroll.bind(n),n.renderNoResultWeirdly=n.renderNoResultWeirdly.bind(n),n.renderLoadingWeirdly=n.renderLoadingWeirdly.bind(n),n.triggerPotentialScroll=n.triggerPotentialScroll.bind(n),n}return a(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){e.searchResult||e.loadingState!==d.LOADING_STATE.INITIAL||this.setState({searchResult:[]}),(!this.state.searchResult.length||e.searchResult&&e.searchResult.length)&&this.setState({searchResult:e.searchResult||[]})}},{key:"onScroll",value:function(e){var t=this.props,n=t.loadingState,r=t.onSearch,o=n===d.LOADING_STATE.LOADING,i=this.refs.resultList,a=i.scrollHeight-i.scrollTop-i.clientHeight;!o&&a<=0&&r(),e.stopPropagation(),e.preventDefault()}},{key:"triggerPotentialScroll",value:function(e){if(this.refs.resultList){var t=this.refs.resultList.getBoundingClientRect();e.top-t.top<50&&(this.refs.resultList.scrollTop-=80),t.bottom-e.bottom<50&&(this.refs.resultList.scrollTop+=80)}}},{key:"renderNoResultWeirdly",value:function(){if(this.state.searchResult&&(!this.props.searchResult||!this.props.searchResult.length)&&this.props.loadingState!==d.LOADING_STATE.LOADING)return l.default.createElement(h,null)}},{key:"renderLoadingWeirdly",value:function(){var e=this.props.loadingState,t=this.state.searchResult;return e!==d.LOADING_STATE.LOADING||t&&t.length?null:l.default.createElement(m,null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.loadingState,r=t.onHover,o=void 0===r?function(){}:r,i=t.hoveredItem,a=void 0===i?{}:i,s=this.state.searchResult;return s&&s.length||n!==d.LOADING_STATE.INITIAL?l.default.createElement("ul",{ref:"resultList",className:"qa-scroll qa-search-result",onScroll:this.onScroll},this.renderNoResultWeirdly(),this.renderLoadingWeirdly(),s.map(function(t,n){var r=t.source,i=void 0===r?{}:r;return l.default.createElement(f.default,{key:i.guid,result:t,onHover:o,idx:n,triggerPotentialScroll:e.triggerPotentialScroll,isHighlight:"search"===a.type&&a.guid===i.guid})}),n===d.LOADING_STATE.LOADING&&s&&s.length>0&&l.default.createElement("div",{className:"qa-list-loading spinner"})):null}}]),t}(l.default.Component);p.propTypes={searchResult:u.PropTypes.array,loadingState:u.PropTypes.string,onSearch:u.PropTypes.func,onHover:u.PropTypes.func,hoveredItem:u.PropTypes.object};var h=function(){return l.default.createElement("div",{className:"qa-search-none"},l.default.createElement("div",{className:"qa-vertical-center"},l.default.createElement("div",{className:"qa-none-icon"}),l.default.createElement("br",null),"没有搜索结果"))},m=function(){return l.default.createElement("div",{className:"qa-search-none qa-search-loading spinner"})};t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(101),f=r(c),d=function(e){switch(e){case-2:case"-2":case 0:case"0":case"document":case"doc":case"newdoc":return"doc";case-3:case"-3":case-1:case"-1":case"sheet":case"spreadsheet":return"sheet";case 1:case"1":case"folder":return"folder";default:console.error("unknown file type:",e)}return""},p=function(e,t){var n=d(t.type),r="";return"sheet"===n&&(r="<i>表格</i>"),"doc"===n&&(r=e&&e[0]||"<i>空</i>"),r},h=function(e){try{return(0,f.default)(decodeURI(e))}catch(t){return(0,f.default)(e)}},m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isHighlight,r=t.triggerPotentialScroll,o=void 0===r?function(){}:r;!e.isHighlight&&n&&this.nodeRef&&o(this.nodeRef.getBoundingClientRect())}},{key:"render",value:function(){var e=this,t=this.props,n=t.result,r=void 0===n?{}:n,o=t.idx,i=t.onHover,a=void 0===i?function(){}:i,s=t.isHighlight,u=r.highlight,c=void 0===u?{}:u,f=r.source,m=void 0===f?{}:f;return l.default.createElement("li",{ref:function(t){e.nodeRef=t},className:"qa-search-result-item "+(s?"qa-highlight":""),onMouseOver:function(){return a(o,"search")}},l.default.createElement("a",{className:"qa-search-result-link",href:"/"+d(m.type)+"/"+m.guid,target:"_blank"},l.default.createElement("div",{className:"qa-file-icon-wrapper"},l.default.createElement("div",{className:"qa-file-icon qa-"+d(m.type)+"-icon"})),l.default.createElement("div",{className:"qa-search-desc"},l.default.createElement("div",{className:"qa-search-result-title-wrap"},l.default.createElement("div",{className:"qa-search-result-item-title",dangerouslySetInnerHTML:{__html:h(c.name[0])}}),m.starred?l.default.createElement("div",{className:"team-sprite qa-star-icon"}):null),l.default.createElement("div",{className:"qa-search-result-item-content",dangerouslySetInnerHTML:{__html:h(p(c.content,m))}}))))}}]),t}(l.default.Component);m.propTypes={result:u.PropTypes.object,idx:u.PropTypes.number,onHover:u.PropTypes.func,triggerPotentialScroll:u.PropTypes.func,isHighlight:u.PropTypes.bool},t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(26),f=u.PropTypes.node,d=u.PropTypes.string,p=u.PropTypes.bool,h=u.PropTypes.number,m=u.PropTypes.func,v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={ancestors:[]},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentFile.guid;(0,c.getAncestors)(t).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.filter(function(e){return e.guid}).reverse();e.setState({ancestors:n},function(){return e.props.onAncestorsLoaded(n)})})}},{key:"render",value:function(){var e=this.state.ancestors,t=this.props,n=t.hoveredItem,r=void 0===n?{}:n,o=t.onHover,i=void 0===o?function(){}:o,a=t.triggerPotentialScroll;return l.default.createElement("div",{className:"qa-ancestor"},e.map(function(e,t){return l.default.createElement(y,{key:e.guid,icon:l.default.createElement("div",{className:"qa-file-icon qa-folder-icon"}),text:e.name,href:e.url,onHover:i,triggerPotentialScroll:a,idx:t,highlight:"ancestor"===r.type&&r.idx===t})}).concat([l.default.createElement(y,{key:"desktop",icon:l.default.createElement("div",{className:"qa-file-icon qa-desktop-icon"}),text:"我的桌面",href:"/desktop",onHover:i,triggerPotentialScroll:a,idx:e.length,highlight:"link"===r.type&&0===r.idx}),l.default.createElement(y,{key:"dashboard",icon:l.default.createElement("div",{className:"qa-file-icon qa-dashboard-icon"}),text:"工作台",href:"/dashboard",onHover:i,triggerPotentialScroll:a,idx:e.length+1,highlight:"link"===r.type&&1===r.idx})]))}}]),t}(l.default.Component);v.propTypes={currentFile:u.PropTypes.object,onAncestorsLoaded:u.PropTypes.func,onHover:u.PropTypes.func,triggerPotentialScroll:m,hoveredItem:u.PropTypes.object},v.defaultProps={currentFile:window.cow.currentFile};var y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.highlight,r=t.triggerPotentialScroll,o=void 0===r?function(){}:r;!e.highlight&&n&&this.nodeRef&&o(this.nodeRef.getBoundingClientRect())}},{key:"render",value:function(){var e=this,t=this.props,n=t.icon,r=t.text,o=t.href,i=t.highlight,a=t.idx,s=t.onHover,u=void 0===s?function(){}:s;return l.default.createElement("div",{ref:function(t){e.nodeRef=t},className:"qa-ancestor-item-wrap "+(i?"qa-highlight":""),onMouseEnter:function(){return u(a,"ancestor")}},l.default.createElement("a",{className:"qa-ancestor-item",href:o},l.default.createElement("div",{className:"qa-ancestor-icon-wrapper"},n),l.default.createElement("div",{className:"qa-ancestor-name"},r)),l.default.createElement("a",{className:"qa-new-icon qa-open-link-new",href:o,target:"_blank"}))}}]),t}(l.default.Component);y.propTypes={icon:f,text:d,href:d,highlight:p,idx:h,onHover:m,triggerPotentialScroll:m},t.default=v,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(7),f=n(486),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={list:[],status:"initial"},n.initial=!0,n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.props.user;this.setState({status:"loading"}),(0,c.ajaxGet)("/smapi/desktop_shortcuts").then(function(e){if(0!==e.code)throw Error("server responded with none zero value");return e.data||{}}).then(function(t){var n=(t.rows||[]).map(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).file}).filter(function(e){return e});e.setState({list:n,status:"loaded"},e.props.onShortcutsLoaded(n))}).catch(function(){e.setState({list:[],status:"error"},e.props.onShortcutsLoaded([]))})}},{key:"render",value:function(){var e=this.props,t=e.hoveredItem,n=e.onHover,r=void 0===n?function(){}:n,o=e.triggerPotentialScroll;return"loaded"!==this.state.status||this.state.list&&this.state.list.length?l.default.createElement("div",{className:"qa-shortcut"},this.state.list.map(function(e,n){return l.default.createElement(p,{key:e.guid,file:e,onHover:r,triggerPotentialScroll:o,idx:n,highlight:"shortcut"===t.type&&t.idx===n})})):l.default.createElement(h,null)}}]),t}(l.default.Component);d.propTypes={user:u.PropTypes.object,onShortcutsLoaded:u.PropTypes.func,onHover:u.PropTypes.func,triggerPotentialScroll:u.PropTypes.func,hoveredItem:u.PropTypes.object},d.defaultProps={user:window.cow?window.cow.currentUser:{}};var p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.highlight,r=t.triggerPotentialScroll,o=void 0===r?function(){}:r;!e.highlight&&n&&this.nodeRef&&o(this.nodeRef.getBoundingClientRect())}},{key:"render",value:function(){var e=this,t=this.props,n=t.file,r=t.highlight,o=t.idx,i=t.onHover,a=void 0===i?function(){}:i;return n?l.default.createElement("div",{ref:function(t){e.nodeRef=t},className:"qa-shortcut-item "+(r?"qa-highlight":""),onMouseEnter:function(){return a(o,"shortcut")}},l.default.createElement("a",{className:"qa-new-icon qa-open-link-new",href:"/"+(0,f.unifiedFileType)(n.type)+"/"+n.guid,target:"_blank"}),l.default.createElement("a",{className:"qa-shortcut-item-long",href:"/"+(0,f.unifiedFileType)(n.type)+"/"+n.guid},l.default.createElement("div",{className:"qa-file-icon qa-"+(0,f.unifiedFileType)(n.type)+"-icon"}),l.default.createElement("div",{className:"qa-file-name"},n.name))):null}}]),t}(l.default.Component);p.propTypes={file:u.PropTypes.object,highlight:u.PropTypes.bool,onHover:u.PropTypes.func,triggerPotentialScroll:u.PropTypes.func,idx:u.PropTypes.number};var h=function(){return l.default.createElement("div",{className:"shortcuts-empty"},"设置为快捷方式的文件会出现在这里，方便您快速访问")};t.default=d,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(630),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(33),f=n(4),d=r(f),p=n(26),h=r(p),m=n(8),v=r(m),y=n(577),g=r(y),b=n(285),w=r(b),_=n(155),k=r(_);n(631),n(578);var E={folder:1,doc:0,spreadsheet:-1,sheet:-3,newdoc:-2},T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=window.cow||{},a=r.alphaFeatures,s=void 0===a?{}:a,u={menuItems:[{display:"文档",value:s.quill_alpha?"newdoc":"doc",label:"文档"},{display:"表格",value:"sheet",label:"表格"},{display:"文件夹",value:"folder",label:"文件夹"}],active:!1};return n.state=u,n._menuItemClick=n._menuItemClick.bind(n),n._creatFile=n._creatFile.bind(n),n._selectedTpl=n._selectedTpl.bind(n),n}return a(t,e),s(t,[{key:"_showFloderConfirm",value:function(){var e=this;(0,g.default)({title:"新建文件夹",placeholderLable:"请输入文件夹的名称",confirmLabel:"新建",confirmFun:function(){var t=document.querySelector(".sm-form-control").value.trim(),n={color:"blue",name:t||"新建文件夹",type:1,parent_id:"0"};e._creatFile(n)}})}},{key:"_menuItemClick",value:function(e,t,n){var r=this.props||window.cow,o=r.currentFile,i=void 0===o?{}:o,a=r.currentUser,s=void 0===a?{}:a,u=n.value;if((0,k.default)(s,i,_.ACTION_TYPE_CREATE_OR_MOVE_IN_OR_COPY))if("sheet"===u&&d.default.notify("addNewSheet:forGuide"),"folder"===u)this._showFloderConfirm();else{var l={color:"blue",name:"无标题",type:E[u],parent_id:"0"};this._creatFile(l,u)}}},{key:"_creatFile",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.props.currentFile),n=void 0===t?{}:t,r={guid:n.parent_id||""},o=window.open("","_blank");h.default.createFile(e).then(function(e){var t=+e.type;if(e.authorized=!0,1!==t){window.cow.currentListByGuid[e.guid]=e,e.parent=r;var n=void 0;if(0===t?n="doc":-1===t?n="spreadsheet":-3===t?n="sheet":-2===t&&(n="docs"),-3===t){var i=cow.inviteCode&&"r="+cow.inviteCode;w.default.checkIsReady().then(function(t){w.default.removeTipAjax("new_sheet_guide");var r=t.new_sheet_guide?i?"?"+i:"":"?from=new-sheet-guide"+(i?"&"+i:""),a="/"+n+"/"+e.guid+r;o&&(o.location=a)})}else{var a="/"+n+"/"+e.guid+(cow.inviteCode?"?r="+cow.inviteCode:"");o&&(o.location=a)}}else{var s="/folder/"+e.guid;o&&(o.location=s)}},function(e){e.message?v.default.alert({title:e.message,type:"error"}):v.default.alert({title:"服务器暂时繁忙，请稍后再试",type:"error"})})}},{key:"_selectedTpl",value:function(){return l.default.createElement("div",{className:"header-add-btn new-normal-header-btn active"},l.default.createElement("span",{className:"add-file-icon"}))}},{key:"_menuItemTpl",value:function(e,t,n,r,o){var i=t[r],a=t[o];return l.default.createElement("div",{"data-val":a,key:e,className:"menu-item-container"},l.default.createElement("span",{className:"dropdown-item-icon add-item-"+a}),l.default.createElement("span",{className:"add-item-text"},i))}},{key:"render",value:function(){var e=this.state.menuItems,t=void 0===e?{}:e;return l.default.createElement("div",{className:"dropdown-menu-wrap"},l.default.createElement(c.DropdownMenu,{menuItems:t,displayKey:"display",valKey:"value",wrapClassName:"add-entry-wrap file-add-entry-wrap",forceTap:!0,itemTpl:this._menuItemTpl,selectedTpl:this._selectedTpl,onMenuChange:this._menuItemClick}))}}]),t}(l.default.Component);T.propTypes={currentFile:u.PropTypes.object},t.default=T,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(485),f=r(c),d=n(11),p=r(d),h=n(33);n(633);var m=n(4),v=r(m),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={cooperators:[]},n._selectedTpl=n._selectedTpl.bind(n),n._menuItemTpl=n._menuItemTpl.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;v.default.detach("cooperation:updateAvatar"),v.default.attach("cooperation:updateAvatar",function(t){e.setState({cooperators:[].concat(t)})})}},{key:"componentWillUnmount",value:function(){v.default.detach("cooperation:updateAvatar")}},{key:"_selectedTpl",value:function(){var e=this.state.cooperators.slice(7).length;return l.default.createElement("div",{className:"cooperator-num-wrapper"},l.default.createElement("span",{className:"cooperator-num"},"+",e))}},{key:"_menuItemTpl",value:function(e,t,n,r,o){return l.default.createElement("div",{"data-val":t[o],key:e,className:"more-cooperators-wrapper"},l.default.createElement("div",{className:"avatar-wrap"},l.default.createElement("img",{src:t.avatar,alt:t.name})),l.default.createElement("span",{className:"header-avatar-color",style:{backgroundColor:t.color}}),l.default.createElement("span",{className:"tooltip header-avatar-tooltip s-tooltip"},t.name))}},{key:"renderMoreAvatars",value:function(){var e=this.state.cooperators,t=e.slice(7);if(0===t.length)return null;var n=(0,p.default)({"cooperator-drop":!0,"show-cooperator-drop":!0});return l.default.createElement("div",{className:n},l.default.createElement(h.DropdownMenu,{menuItems:t,selectedTpl:this._selectedTpl,itemTpl:this._menuItemTpl,valKey:"value",displayKey:"display"}))}},{key:"renderNewAvatars",value:function(){var e=this.state.cooperators,t=[];return e.forEach(function(e,n){var r={zIndex:110-n-1,right:n<7?28*(n+1)+"px":"224px"},o=(0,p.default)({"header-avatar":!0,"show-more-avatar":n>=7});t.push(l.default.createElement("div",{key:e.id,className:o,style:r},l.default.createElement("div",{className:"avatar-wrap"},l.default.createElement("img",{src:e.avatar,alt:e.name})),l.default.createElement("span",{className:"header-avatar-color",style:{backgroundColor:e.color}}),l.default.createElement("span",{className:"tooltip header-avatar-tooltip s-tooltip"},e.name)))}),t}},{key:"renderOldAvatars",value:function(){var e=this.state.cooperators,t=[];return e.forEach(function(e,n){var r={zIndex:110-n-1,right:28*(n+1)+"px"};t.push(l.default.createElement("div",{key:e.id,className:"header-avatar",style:r},l.default.createElement("div",{className:"avatar-wrap"},l.default.createElement("img",{src:e.avatar,alt:e.name})),l.default.createElement("span",{className:"header-avatar-color",style:{backgroundColor:e.color}}),l.default.createElement("span",{className:"tooltip header-avatar-tooltip s-tooltip"},e.name)))}),t}},{key:"render",value:function(){var e=window.cow||{},t=e.alphaFeatures,n=void 0===t?{}:t,r=!!n.lizard,o=(0,p.default)({"left-star-header-avatar-wrap":!r&&cow.currentUser.id>0,"right-star-header-avatar-wrap":cow.currentUser.id<0&&!r,"header-avatar-wrap":!0,"header-avatar-wrap-anonymous":window.cow.currentUser.id<0,"header-avatar-wrap-unauthorized":!window.cow.authorized&&window.cow.currentUser.id>0});return l.default.createElement("div",{className:o},l.default.createElement(f.default,{transitionName:"header-avatar",transitionAppearTimeout:100,transitionEnterTimeout:1e3,transitionLeaveTimeout:300,transitionAppear:!0},!r&&this.renderOldAvatars(),r&&this.renderNewAvatars(),r&&this.renderMoreAvatars()))}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(635),f=r(c),d=n(570),p=r(d),h=n(487),m=r(h),v=n(648),y=r(v),g=n(650),b=r(g),w=window.cow,_=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.file,t=[0,-2,-3].indexOf(w.currentFile.type)>-1,n=t?l.default.createElement(y.default,null):null,r=window.cow||{},o=r.alphaFeatures,i=void 0===o?{}:o,a=!!i.lizard,s=w.authorized?l.default.createElement("div",{className:"list-share-box"},l.default.createElement(p.default.Popover,null)):null,u=w.authorized?l.default.createElement(f.default,null):null;return l.default.createElement("div",{className:"s-menu-btn-wrap"},a&&l.default.createElement(b.default,{currentFile:e}),n,s,u,l.default.createElement(m.default,{file:e}))}}],[{key:"propTypes",get:function(){return{file:u.PropTypes.object}}}]),t}(u.Component);t.default=_,_.propTypes={file:u.PropTypes.object},e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(180),d=o(f),p=n(24),h=n(16),m=o(h),v=n(7),y=n(4),g=o(y),b=n(26),w=o(b),_=n(9),k=n(35),E=n(636),T=o(E),C=n(643),S=o(C),O=n(295),x=o(O),P=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1,isEnableShare:!1,readOnly:!1,isEnterprise:!1,isPasswordProtected:!1,password:(0,x.default)("cow","currentFile","password")?cow.currentFile.password:null,mobileVerifyResolve:null,mobileVerifyReject:null,mobileVerifyOpen:!1},n.changeShareState=n.changeShareState.bind(n),n.changePassword=n.changePassword.bind(n),n.onToggleBtn=n.onToggleBtn.bind(n),n.componentClick=n.componentClick.bind(n),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.init(),g.default.attach("doc:init",this.init,{scope:this})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,g.default.detach("doc:init",this.init)}},{key:"componentClick",value:function(){this.setState({open:!1})}},{key:"onToggleBtn",value:function(){w.default.checkIsWelcomeFile()&&g.default.notify("guideTip:visible",{tag:"share",value:!1}),this.setState({open:!this.state.open})}},{key:"changeShareStatusAjax",value:function(e,t){var n="";(0,_.isSheet)(cow.pageType)?n=cow.currentSheetGuid:(0,_.isDoc)(cow.pageType)&&(n=cow.currentDocGuid),(0,v.ajaxPatch)(k.SET_EXTERNAL_LINK.replace("{%guid%}",n),e).then(function(e){if("function"==typeof t)if(0===e.code)t(!0),(0,_.setShareMode)(e.data.shareMode),(0,_.setPasswordProtected)(e.data.passwordProtected,e.data.password),(0,p.showAlert)({title:"设置成功"});else{t(!1);var n=e.message||e.error,r={type:"error",title:n};(0,p.showAlert)(r)}},function(){(0,p.showAlert)({type:"error",title:"网络异常，设置失败"}),"function"==typeof t&&t(!1)})}},{key:"changePasswordAjax",value:function(e){var t="";(0,_.isSheet)(cow.pageType)?t=cow.currentSheetGuid:(0,_.isDoc)(cow.pageType)&&(t=cow.currentDocGuid),(0,v.ajaxPatch)(k.SET_EXTERNAL_LINK.replace("{%guid%}",t),{resetPassword:1}).then(function(t){if(0===t.code)"function"==typeof e&&e(!0,t.data.password),(0,_.setPasswordProtected)(!0,t.data.password),(0,p.showAlert)({title:"设置成功"});else{"function"==typeof e&&e(!1);var n={type:"error",title:t.error};t.error.length>=20&&(n.title="设置失败",n.content=t.error),(0,p.showAlert)(n)}},function(){(0,p.showAlert)({type:"error",title:"网络异常，设置失败"}),"function"==typeof e&&e(!1)}).catch(function(){(0,p.showAlert)({type:"error",title:"设置失败"}),"function"==typeof e&&e(!1)})}},{key:"updateShareState",value:function(e,t){var n={isEnableShare:!1,readOnly:!1,isEnterprise:!1,isPasswordProtected:!1};"private"===e?n.isEnableShare=!1:"readonly"===e?(n.isEnableShare=!0,n.readOnly=!0):"editable"===e?n.isEnableShare=!0:"enterprise_editable"===e?(n.isEnableShare=!0,n.isEnterprise=!0):"enterprise_readonly"===e&&(n.isEnableShare=!0,n.readOnly=!0,n.isEnterprise=!0),n.isPasswordProtected=t,n.password=(0,x.default)("cow","currentFile","password")?cow.currentFile.password:null,this.setState(n)}},{key:"changeShareState",value:function(e,t,n){var r=this,o=(0,_.getShareMode)(),i=this.state.isPasswordProtected,a=o!==e,s=i!==t;if(a||s){var u={};s&&(u.passwordProtected=t?1:0),a&&(u.shareMode=e);new Promise(function(n,o){r.callMobileVerify(e,t,n,o)}).then(function(){r.changeShareStatusAjax(u,function(o){o?(r.updateShareState(e,t),"function"==typeof n&&n(null)):"function"==typeof n&&n(!0)}),r.state.mobileVerifyOpen&&r.setState({mobileVerifyOpen:!1})}).catch(function(){r.state.mobileVerifyOpen&&r.setState({mobileVerifyOpen:!1})})}}},{key:"callMobileVerify",value:function(e,t,n,r){-1===["readonly","editable"].indexOf(e)||window.cow.currentUser.mobile?n():this.setState({mobileVerifyResolve:n,mobileVerifyReject:r,mobileVerifyOpen:!0})}},{key:"changePassword",value:function(e){var t=this;this.changePasswordAjax(function(n,r){n?(t.setState({password:r}),"function"==typeof e&&e(null)):"function"==typeof e&&e(!0)})}},{key:"init",value:function(){this.initShareStatus(),this.setState({shareList:[]})}},{key:"initShareStatus",value:function(){this.updateShareState((0,_.getShareMode)(),(0,_.getPasswordProtected)()),this.initPush()}},{key:"initPush",value:function(){var e=this;m.default.bind("File",function(t){if(e.mounted&&r.get(window,"cow.currentFile.guid")===t.data.guid){var n=t.data.shareMode;(0,_.setShareMode)(n),(0,_.setPasswordProtected)(t.data.passwordProtected,t.data.password),e.updateShareState(n,t.data.passwordProtected)}})}},{key:"renderMobileVerificationDialog",value:function(){var e=this.state,t=e.mobileVerifyResolve,n=e.mobileVerifyReject,r=e.mobileVerifyOpen;return c.default.createElement(S.default,{handleResolve:t,handleReject:n,open:r})}},{key:"render",value:function(){var e=this.state.open?"":"hide",t=this.state,n=t.isEnableShare,r=t.readOnly,o=t.isEnterprise,i=t.isPasswordProtected,a=t.password;return c.default.createElement("div",{className:"share-btn-wrap"},c.default.createElement("div",{className:"sm-share-btn file-header-share-btn new-normal-header-btn "+(this.state.open?"active":""),onTouchTap:this.onToggleBtn},"分享"),c.default.createElement("div",{className:"sheet-share-dropdown with-trangle "+e},c.default.createElement(T.default,{isEnableShare:n,readOnly:r,isEnterprise:o,isPasswordProtected:i,password:a,onShareStateChange:this.changeShareState,onPasswordChange:this.changePassword})),this.renderMobileVerificationDialog())}}]),t}(l.Component);t.default=(0,d.default)(P),e.exports=t.default}).call(t,n(1))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(637);var l=n(0),c=o(l),f=n(638),d=o(f),p=n(640),h=o(p),m=n(294),v=o(m),y=n(295),g=o(y),b=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.isEnableShare,n=e.readOnly,o=e.isEnterprise,i=e.isPasswordProtected,a=e.password,s=e.onShareStateChange,u=e.onPasswordChange,l=(0,g.default)("cow","currentUser","accountType")&&!!cow.currentUser.accountType.match(/^personal_/),f=r.get(window,["cow","currentFile","permissions"])||{},p=void 0;return p=t?o?i?"public-enterprise-password":"public-enterprise":l?"public-personal":i?"public-password":"public":l?"private-personal":"private",c.default.createElement("div",{className:"scw"},(0,v.default)(p).when("private",function(){return c.default.createElement(d.default,{permissions:f,onStateChange:s})}).when("private-personal",function(){return c.default.createElement(d.default,{permissions:f,personal:l,onStateChange:s})}).when("public",function(){return c.default.createElement(h.default,{readOnly:n,onStateChange:s})}).when("public-password",function(){return c.default.createElement(h.default,{isPasswordProtected:!0,password:a,readOnly:n,onStateChange:s,onPasswordChange:u})}).when("public-enterprise",function(){return c.default.createElement(h.default,{enterprise:!0,readOnly:n,onStateChange:s})}).when("public-enterprise-password",function(){return c.default.createElement(h.default,{enterprise:!0,isPasswordProtected:!0,password:a,readOnly:n,onStateChange:s,onPasswordChange:u})}).when("public-personal",function(){return c.default.createElement(h.default,{personal:!0,readOnly:n,onStateChange:s,isPasswordProtected:i,password:a})}).done())}}]),t}(l.Component);b.defaultProps={isEnableShare:!1,readOnly:!1,isEnterprise:!1,isPasswordProtected:!1,password:null},b.propTypes={isEnableShare:l.PropTypes.bool,readOnly:l.PropTypes.bool,isEnterprise:l.PropTypes.bool,isPasswordProtected:l.PropTypes.bool,password:c.default.PropTypes.oneOfType([c.default.PropTypes.string,null]),onShareStateChange:l.PropTypes.func,onPasswordChange:l.PropTypes.func},t.default=b,e.exports=t.default}).call(t,n(1))},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u);n(639);var c=n(294),f=r(c),d=n(295),p=r(d),h="shimo-share-new-feature-has-presented",m=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isPersonalNotPresented:!window.localStorage.getItem(h)},e.onModeClick=e.onModeClick.bind(e),e}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(){window.localStorage.getItem(h)||window.localStorage.setItem(h,"1")}},{key:"onModeClick",value:function(e,t){var n=this;return function(r){r.preventDefault();var o=r.target;o.getAttribute("data-disabled")||(o.setAttribute("data-disabled","true"),"function"==typeof n.props.onStateChange&&n.props.onStateChange(e,t),setTimeout(function(){o.parentNode&&o.removeAttribute("data-disabled")},5e3))}}},{key:"nothing",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props,t=e.personal,n=e.permissions,r=this.state.isPersonalNotPresented,o=(0,p.default)("cow","currentFile","shareMode")&&cow.currentFile.shareMode.match(/editable/)?"editable":"readonly",i=n.passwordShareable,a=void 0!==i&&i;return l.default.createElement("div",{className:"private-content"},l.default.createElement("a",{className:"option",href:"#",onClick:this.onModeClick(o,!1)},l.default.createElement("div",{className:"icon public"},l.default.createElement("div",{className:"glyph glyph-public"})),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"公开链接分享"),l.default.createElement("div",{className:"descr"},"有链接的人可以访问"))),l.default.createElement("a",{className:a?"option":"option disabled",href:"#",onClick:a?this.onModeClick(o,!0):this.nothing},l.default.createElement("div",{className:"icon password"},l.default.createElement("div",{className:"glyph glyph-password"}),(0,f.default)(!t&&r).when(!0,function(){return l.default.createElement("div",{className:"flag feature-new"},"新功能")}).done(),(0,f.default)(!a).when(!0,function(){return l.default.createElement("div",{className:"flag feature-enterprise"},"企业版功能")}).done()),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"密码链接分享"),l.default.createElement("div",{className:"descr"},"有密码和链接的人可以访问"))),l.default.createElement("a",{className:t?"option disabled":"option",href:"#",onClick:t?this.nothing:this.onModeClick("enterprise_"+o,!1)},l.default.createElement("div",{className:"icon enterprise"},l.default.createElement("div",{className:"glyph glyph-enterprise"}),(0,f.default)(t).when(!0,function(){return l.default.createElement("div",{className:"flag feature-enterprise"},"企业版功能")}).done()),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以访问"))),l.default.createElement("a",{className:!a||t?"option disabled":"option",href:"#",onClick:!a||t?this.nothing:this.onModeClick("enterprise_"+o,!0)},l.default.createElement("div",{className:"icon enterprise-password"},l.default.createElement("div",{className:"glyph glyph-enterprise-password"}),(0,f.default)(!a||t).when(!0,function(){return l.default.createElement("div",{className:"flag feature-enterprise"},"企业版功能")}).done()),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部加密共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以通过密码访问"))),l.default.createElement("hr",{className:"separator"}),l.default.createElement("a",{className:"option",href:"#",onClick:this.onModeClick("private",!1)},l.default.createElement("div",{className:"icon private"},l.default.createElement("div",{className:"glyph glyph-private"})),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"私有文档"),l.default.createElement("div",{className:"descr"},"只有协作者可以访问"),l.default.createElement("div",{className:"glyph glyph-checker"}))))}}]),t}(u.Component);m.defaultProps={personal:!1,permissions:{}},m.propTypes={personal:l.default.PropTypes.bool,permissions:l.default.PropTypes.object,onStateChange:l.default.PropTypes.func},t.default=m,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(211),f=r(c);n(641);var d=n(294),p=r(d),h=n(642),m=r(h),v=n(24),y=n(90),g=n(9),b=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isPriorityListVisible:!1},e.onReadonlyVisibleChange=e.onReadonlyVisibleChange.bind(e),e.onModeChange=e.onModeChange.bind(e),e.onPasswordProtectedChange=e.onPasswordProtectedChange.bind(e),e.onEnterpriseChange=e.onEnterpriseChange.bind(e),e.onPasswordChange=e.onPasswordChange.bind(e),e}return a(t,e),s(t,[{key:"componentDidMount",value:function(){document.documentElement.addEventListener("click",this.onReadonlyVisibleChange),this.initCopy()}},{key:"componentDidUpdate",value:function(){this.initCopy()}},{key:"componentWillUnmount",value:function(){document.documentElement.removeEventListener("click",this.onReadonlyVisibleChange)}},{key:"initCopy",value:function(){var e=new f.default(this.refs.copy);e.on("success",function(){(0,v.showAlert)({title:"复制成功！"})}),e.on("error",function(){f.default.isSupported()?(0,v.showAlert)({title:"复制失败！",type:"error"}):(0,v.showAlert)({title:"您的浏览器不支持此功能，请手动复制，或使用最新的 chrome 浏览器。",type:"error"})})}},{key:"onReadonlyVisibleChange",value:function(e){var t=this;setTimeout(function(){e.target===t.refs["priority-content"]?t.setState({isPriorityListVisible:!t.state.isPriorityListVisible}):t.setState({isPriorityListVisible:!1})},0)}},{key:"onModeChange",value:function(e,t){var n=this;return function(r){r.preventDefault();var o=n.props.onStateChange;"function"==typeof o&&o(e,t)}}},{key:"onPasswordProtectedChange",value:function(e){var t=this;return function(n){var r=t.props.onStateChange;"function"==typeof r&&r(e,n)}}},{key:"onPasswordChange",value:function(e){e.preventDefault();var t=this.props.onPasswordChange;"function"==typeof t&&t()}},{key:"onEnterpriseChange",value:function(e){var t=this;return function(n,r){var o=function(e){return"enterprise_"+e.replace("enterprise_","")},i=function(e){return e.replace("enterprise_","")};"function"==typeof t.props.onStateChange&&t.props.onStateChange(n?o(e):i(e),t.props.isPasswordProtected,r)}}},{key:"generateMode",value:function(e,t){return e?t?"enterprise_readonly":"enterprise_editable":t?"readonly":"editable"}},{key:"render",value:function(){var e=this.state.isPriorityListVisible,t=this.props,n=t.isPasswordProtected,r=t.enterprise,o=t.personal,i=t.readOnly,a=t.password,s=this.generateMode(r,i);return l.default.createElement("div",{className:"public-content"},l.default.createElement("div",{className:"content-header"},function(){return n&&r?l.default.createElement("div",{className:"icon enterprise-password"},l.default.createElement("div",{className:"glyph glyph-enterprise-password"})):n?l.default.createElement("div",{className:"icon password"},l.default.createElement("div",{className:"glyph glyph-password"})):r?l.default.createElement("div",{className:"icon enterprise"},l.default.createElement("div",{className:"glyph glyph-enterprise"})):l.default.createElement("div",{className:"icon public"},l.default.createElement("div",{className:"glyph glyph-public"}))}(),function(){return n&&r?l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部加密共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以通过密码访问")):n?l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"密码链接分享"),l.default.createElement("div",{className:"descr"},"有密码和链接的人可以访问")):r?l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以访问")):l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"公开链接分享"),l.default.createElement("div",{className:"descr"},"有链接的人可以访问"))}(),l.default.createElement("div",{className:"priority"},l.default.createElement("div",{className:"priority-content",ref:"priority-content"},i?"只能阅读":"可以编辑"),e?l.default.createElement("div",{className:"priority-list"},l.default.createElement("a",{href:"#",className:"priority-item",onClick:this.onModeChange(r?"enterprise_editable":"editable",n)},l.default.createElement("div",{className:"priority-title"},"可以编辑"),l.default.createElement("div",{className:"priority-descr"},"可以编辑、评论、分享文件")),l.default.createElement("a",{href:"#",className:"priority-item",onClick:this.onModeChange(r?"enterprise_readonly":"readonly",n)},l.default.createElement("div",{className:"priority-title"},"只能阅读"),l.default.createElement("div",{className:"priority-descr"},"不能编辑、评论、分享文件")),l.default.createElement("div",{className:"priority-separator"}),l.default.createElement("a",{href:"#",id:"priority-cancel-item",className:"priority-cancel-item",onClick:this.onModeChange("private",!1)},l.default.createElement("div",{className:"priority-title"},"取消共享"))):null)),l.default.createElement("div",{className:"copy-section"},l.default.createElement("div",{className:"copy-url"},l.default.createElement("input",{type:"text",readOnly:!0,className:"copy-input",value:location.href+"/ 「"+(0,y.cutName)(cow.currentFile.name,30)+"」"+(a?"访问密码 "+a:"")})),l.default.createElement("span",{className:"copy-button",ref:"copy","data-clipboard-action":"copy","data-clipboard-target":".copy-input"},"复制链接")),l.default.createElement("div",{className:"qrcode-section"},l.default.createElement("div",{className:"qrcode",style:{backgroundImage:"url("+(0,g.getQrImageUrl)(101,location.href)+")",backgroundPosition:"0 0",backgroundSize:"101px 101px"}}),l.default.createElement("div",{className:"qrcode-text"},"扫一扫",l.default.createElement("br",null),"分享给朋友")),l.default.createElement("div",{className:"options-section"},l.default.createElement("div",{className:"checkbox-wrapper"},l.default.createElement(m.default,{disabled:o&&!n,checked:n,onChange:this.onPasswordProtectedChange(s)},(0,p.default)(o).when(!0,"需要密码才能访问（企业版功能）").when(!1,"需要密码才能访问").done())),l.default.createElement("div",{className:"checkbox-wrapper",style:{marginTop:10}},l.default.createElement(m.default,{disabled:o,checked:r,onChange:this.onEnterpriseChange(s)},(0,p.default)(o).when(!0,"仅企业内部共享（企业版功能）").when(!1,"仅企业内部共享").done())),n?l.default.createElement("div",{className:"password-section"},l.default.createElement("input",{type:"text",className:"password",value:a,readOnly:!0}),o?null:l.default.createElement("a",{href:"#",className:"change-password",onClick:this.onPasswordChange},"更换密码")):null,o&&!n?l.default.createElement("a",{href:"/company/register?from=share",target:"_blank",className:"try-enterprise-edition"},"免费试用企业版"):null))}}]),t}(u.Component);b.defaultProps={isPasswordProtected:!1,password:null,enterprise:!1,personal:!1,readOnly:!0},b.propTypes={isPasswordProtected:l.default.PropTypes.bool,password:l.default.PropTypes.oneOfType([l.default.PropTypes.string,null]),enterprise:l.default.PropTypes.bool,personal:l.default.PropTypes.bool,readOnly:l.default.PropTypes.bool,onStateChange:l.default.PropTypes.func,onPasswordChange:l.default.PropTypes.func},t.default=b,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return a(t,e),s(t,[{key:"onChange",value:function(){this.props.disabled||"function"==typeof this.props.onChange&&this.props.onChange(!this.props.checked)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.checked,r=e.children;return l.default.createElement("div",{className:"checkbox"+(t?" disabled":"")+(n&&!t?" checked":""),onClick:this.onChange},l.default.createElement("div",{className:"checker"},l.default.createElement("div",{className:"glyph glyph-checkbox-checker"})),r)}}]),t}(u.Component);c.defaultProps={disabled:!1,checked:!1},c.propTypes={disabled:l.default.PropTypes.bool,checked:l.default.PropTypes.bool,onChange:l.default.PropTypes.func},t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(510),p=r(d),h=n(49),m=r(h),v=n(67),y=r(v);n(644);var g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:"",telephone:"",captcha:"",prefix:"+86"},n.onSubmit=n.onSubmit.bind(n),n.onClose=n.onClose.bind(n),n.onInput=n.onInput.bind(n),n.onFocus=n.onFocus.bind(n),n.dispatchState=n.dispatchState.bind(n),n.renderBody=n.renderBody.bind(n),n}return s(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){!e.open&&this.props.open&&this.setState({error:"",telephone:"",captcha:"",prefix:"+86"})}},{key:"onSubmit",value:function(){var e=this,t=this.state,n=t.telephone,r=t.captcha,o=t.prefix;n&&r&&!n.match(/[^\d]/)&&y.default.patch("/smapi/users/me",{mobile:o+n,mobileVerifyCode:r},function(t){window.cow.currentUser.mobile=n,e.props.handleResolve()},function(t){e.setState({error:t.message||t.error})})}},{key:"onClose",value:function(){this.props.handleReject()}},{key:"onInput",value:function(e,t){this.setState(o({},t,e.target.value))}},{key:"onFocus",value:function(){this.setState({error:""})}},{key:"dispatchState",value:function(e){this.setState(e)}},{key:"renderBody",value:function(){return f.default.createElement("div",{className:"action-box company-account"},f.default.createElement("div",{className:"descript-text"},"应国家法律要求，使用公开链接分享等功能需要验证手机号"),f.default.createElement(p.default,u({onSubmit:this.onSubmit,onInput:this.onInput,onFocus:this.onFocus,dispatchState:this.dispatchState},this.state)))}},{key:"render",value:function(){var e=this.props.open;return f.default.createElement(m.default,{customClass:"mobile-verification-dialog",title:"手机号验证",open:e,onClose:this.onClose,bodyTpl:this.renderBody,hasCloseButton:!0,enableCloseClickMask:!0})}}]),t}(c.Component);t.default=g,g.propTypes={open:c.PropTypes.bool.isRequired,handleResolve:c.PropTypes.func.isRequired,handleReject:c.PropTypes.func.isRequired},e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(646),d=r(f),p=n(24),h=n(7),m=n(154),v=o(m),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.doExport=n.doExport.bind(n),n.doExportPdf=n.doExport.bind(n,"pdf"),n.doExportDocx=n.doExport.bind(n,"docx"),n.doExportJpg=n.doExport.bind(n,"jpg"),n.close=n.close.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{file:l.PropTypes.object,close:l.PropTypes.func}}}]),u(t,[{key:"close",value:function(e){"export-dialog show"===e.target.className&&this.props.close()}},{key:"doExport",value:function(e){var t={type:e,file:this.props.file.guid,returnJson:1,name:this.props.file.name.replace("#","_")};window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var n=function(n){var r=encodeURIComponent(decodeURIComponent(t.name+"."+e)),o=document.createElement("a");if(o.href=n,o.download=r,!d.detectIE)return d.simulate(o,"click");window.location=o};(0,p.showAlert)({title:"正在导出，请稍候…"});var r=void 0;switch(+this.props.file.type){case 0:r=5;break;case-2:r=4}(0,h.ajaxGet)(location.origin+"/smapi/files/"+t.file+"/export",t).then(function(t){if(0!==t.code)throw v.default.exportTrack(r,e,!1),new Error(t.message);n(t.data.redirectUrl),v.default.exportTrack(r,e,!0)}).catch(function(){(0,p.showAlert)({title:"导出失败，请尝试导出其他格式或稍后再试",type:"error"}),v.default.exportTrack(r,e,!1)}),this.props.close()}},{key:"render",value:function(){return c.default.createElement("div",{className:"export-dialog show",onClick:this.close},c.default.createElement("div",{className:"export-box"},c.default.createElement("div",{className:"export-header"},c.default.createElement("span",{className:"title"},"导出"),c.default.createElement("span",{className:"icon-close hicon",onClick:this.props.close})),c.default.createElement("div",{className:"export-content"},c.default.createElement("div",{className:"export-pdf"},c.default.createElement("span",{className:"export-sprite pdf",onClick:this.doExportPdf}),c.default.createElement("span",{className:"text"},"PDF")),c.default.createElement("div",{className:"export-word"},c.default.createElement("span",{className:"export-sprite docx",onClick:this.doExportDocx}),c.default.createElement("span",{className:"text"},"Word")),c.default.createElement("div",{className:"export-jpg"},c.default.createElement("span",{className:"export-sprite jpg",onClick:this.doExportJpg}),c.default.createElement("span",{className:"text"},"JPG")),c.default.createElement("div",{className:"error-msg"}))))}}]),t}(l.Component);t.default=y,e.exports=t.default},function(e,t){function n(e,t){var n=a(i,arguments[2]||{}),r=void 0,s=null;for(var u in o)if(o[u].test(t)){s=u;break}if(!s)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");if(document.createEvent)r=document.createEvent(s),"HTMLEvents"===s?r.initEvent(t,n.bubbles,n.cancelable):r.initMouseEvent(t,n.bubbles,n.cancelable,document.defaultView,n.button,n.pointerX,n.pointerY,n.pointerX,n.pointerY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,e),e.dispatchEvent(r);else{n.clientX=n.pointerX,n.clientY=n.pointerY;var l=document.createEventObject();r=a(l,n),e.fireEvent("on"+t,r)}return e}function r(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}Object.defineProperty(t,"__esModule",{value:!0}),t.simulate=n,t.detectIE=r;var o={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},i={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},a=function(e,t){for(var n in t)e[n]=t[n];return e}},function(e,t){e.exports="<html>\n<head>\n  <link rel='stylesheet' type='text/css' href='<%= css %>'>\n  <% if (newDocCSS) { %>\n  <link rel='stylesheet' type='text/css' href='<%= newDocCSS %>'>\n  <% } %>\n  <style>\n    @media print {\n      body {\n        -webkit-print-color-adjust: exact;\n      }\n    }\n\n    #buddle-comment-btn {\n      display: none !important;\n    }\n\n    table,\n    tr,\n    td {\n      border: 1px solid #CCCCCC;\n    }\n\n    table {\n      border-collapse: collapse;\n      margin-bottom: 20px;\n    }\n\n    td {\n      min-width: 50px;\n      padding: 0 4px 0 4px;\n      height: 22px;\n    }\n\n    .comment-buddle {\n      display: none;\n    }\n\n    #mention-pop {\n      display: none;\n    }\n\n    iframe {\n      display: none;\n    }\n\n    .shadow-table {\n      opacity: 1 !important;\n      height: 100% !important;\n    }\n  </style>\n</head>\n\n<body>\n  <div class=\"print\">\n    <%= body %>\n  </div>\n</body>\n\n</html>"},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(26),p=r(d),h=n(4),m=r(h);n(649);var v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:!1},n._showHistory=n._showHistory.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;m.default.attach("history:toggle",function(t){void 0!==t&&!1===t&&e.setState({active:t})},{scope:this}),m.default.attach("history:hide",function(){e.setState({active:!1})}),m.default.attach("history:show",function(t){e.setState({active:!0})}),m.default.attach("doc:history:show",function(t){e.setState({active:!0})}),m.default.attach("doc:history:hide",function(){e.setState({active:!1})}),m.default.attach("newdoc:history:show",function(){e.setState({active:!0})}),m.default.attach("newdoc:history:hide",function(){e.setState({active:!1})})}},{key:"componentWillUnmount",value:function(){m.default.detach("history:toggle",this),m.default.detach("history:hide",this),m.default.detach("history:show",this),m.default.detach("doc:history:show",this),m.default.detach("doc:history:hide",this),m.default.detach("newdoc:history:hide",this),m.default.detach("newdoc:history:show",this)}},{key:"_showHistory",value:function(){this.setState({active:!this.state.active}),m.default.notify("history:toggle"),p.default.checkIsWelcomeFile()&&m.default.notify("guideTip:visible",{tag:"history",value:!1})}},{key:"render",value:function(){var e=(0,f.default)({"history-icon-wrap":!0,"new-normal-header-btn":!0,active:this.state.active});return l.default.createElement("div",{className:e,onClick:this._showHistory},l.default.createElement("span",{className:"history-icon"}),l.default.createElement("span",{className:"s-tooltip"},this.state.active?"收起历史":"查看历史"))}}]),t}(u.Component);t.default=v,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(651),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(16),p=r(d),h=n(26),m=n(24),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={starred:e.currentFile.starred},n.onStarBtnClick=n.onStarBtnClick.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.isUnmount=!1,this._init()}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0}},{key:"_init",value:function(){this._initPush()}},{key:"_initPush",value:function(){var e=this;p.default.bind("StarredFile",function(t){if(!e.isUnmount){var n=e.props.currentFile;if(t.data.fileId===n.id){var r="create"===t.action;n.starred=r,e.setState({starred:r})}}})}},{key:"onStarBtnClick",value:function(){var e=this,t=this.props.currentFile.id;this.state.starred?(0,h.unstarFile)(t).then(function(){e.setState({starred:!1})},function(e){(0,m.showAlert)({title:e.message,type:"error"})}):(0,h.starFile)(t).then(function(){e.setState({starred:!0})},function(e){(0,m.showAlert)({title:e.message,type:"error"})})}},{key:"render",value:function(){var e=(0,f.default)({"header-star-btn":!0,"s-header-star-btn":!0,"new-normal-header-btn":!0,active:this.state.starred});return l.default.createElement("div",{style:{display:"inline-block"}},l.default.createElement("div",{className:e,onClick:this.onStarBtnClick},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"}),l.default.createElement("span",{className:"s-tooltip"},this.state.starred?"取消收藏":"收藏")))}}]),t}(u.Component);v.propTypes={currentFile:u.PropTypes.object},t.default=v,e.exports=t.default},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(290),p=i(d),h=n(26),m=[{fileName:"示例 - 待办事项",targetElementSelector:'.editbar-list-item[data-key="checklist"]',offsetTop:3,offsetLeft:-7,needExpand:!1,expandElementSelector:"",text:"点这里，添加任务列表",autoHide:!1,hideTriggerElementSelectror:'.editbar-list-item[data-key="checklist"]'},{fileName:"示例 - 会议记录",targetElementSelector:"#upload-attachment",offsetTop:-7,offsetLeft:0,needExpand:!0,expandElementSelector:"#doc-insert",text:"点这里，插入附件",autoHide:!0,hideTriggerElementSelectror:""}],v=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={guideTipVisible:!1,text:"",positionNodeElement:null},e.hideGuideTip=e.hideGuideTip.bind(e),e.handlePadReady=e.handlePadReady.bind(e),e}return u(t,e),l(t,[{key:"componentDidMount",value:function(){r(window).off("pad_ready",this.handlePadReady),r(window).on("pad_ready",this.handlePadReady)}},{key:"componentWillUpdate",value:function(e,t){var n=this.state;n.hideTriggerElementSelectror&&!t.hideTriggerElementSelectror?this.bindTriggerEvent(t):!n.hideTriggerElementSelectror&&t.hideTriggerElementSelectror?this.unbindTriggerEvent(n):n.hideTriggerElementSelectror!==t.hideTriggerElementSelectror&&(this.unbindTriggerEvent(n),this.bindTriggerEvent(t))}},{key:"componentWillUnmount",value:function(){r(window).off("pad_ready",this.handlePadReady),this.unbindTriggerEvent(this.state)}},{key:"bindTriggerEvent",value:function(e){if(e||(e=this.state),e.hideTriggerElementSelectror){var t=r(e.hideTriggerElementSelectror);t.length&&r(t).on("click",this.hideGuideTip)}}},{key:"unbindTriggerEvent",value:function(e){if(e||(e=this.state),e.hideTriggerElementSelectror){var t=r(e.hideTriggerElementSelectror);t.length&&r(t).off("click",this.hideGuideTip)}}},{key:"getGuideConfig",value:function(){return(0,h.checkIsExampleFile)()&&m.length?o.find(m,{fileName:window.cow.currentFile.name}):null}},{key:"handlePadReady",value:function(){var e=this;setTimeout(function(){var t=e.getGuideConfig();if(t){if(t.needExpand&&t.expandElementSelector){var n=r(t.expandElementSelector);n.length&&n[0].click()}if(t.targetElementSelector){var i=r(t.targetElementSelector);i.length&&e.setState({guideTipVisible:!0,positionNodeElement:i[0],text:t.text,hideTriggerElementSelectror:t.hideTriggerElementSelectror,autoHide:!!t.autoHide,offsetTop:o.isNumber(t.offsetTop)?t.offsetTop:0,offsetLeft:o.isNumber(t.offsetLeft)?t.offsetLeft:0},function(){e.bindTriggerEvent(e.state)})}}},2e3)}},{key:"hideGuideTip",value:function(){this.setState({guideTipVisible:!1})}},{key:"render",value:function(){var e=this.state,t=e.offsetLeft,n=e.offsetTop,r=e.autoHide,o=e.guideTipVisible,i=e.positionNodeElement,a=e.text;return f.default.createElement(p.default,{text:a,placement:"left",autoHide:r,offsetLeft:t,offsetTop:n,visible:o,onNeedHide:this.hideGuideTip,positionNodeElement:i})}}]),t}(c.Component);t.default=v,e.exports=t.default}).call(t,n(2),n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(564),f=r(c),d=n(7);n(659);var p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.openLink=e.openLink.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{mode:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{mode:"list"}}}]),s(t,[{key:"clearUrlParam",value:function(e){var t=f.default.parse(e,!0);return delete t.search,delete t.query,f.default.format(t)}},{key:"openLink",value:function(){if(DingTalkPC&&DingTalkPC.checkIsReady){var e=this.clearUrlParam(window.location.href);DingTalkPC.checkIsReady(function(){DingTalkPC.runtime.permission.requestAuthCode({corpId:cow.signInfo.corpId,onSuccess:function(t){var n=t.code;DingTalkPC.biz.util.openLink({url:e+"?dingtalkcode="+n+"&corpid="+cow.signInfo.corpId})},onFail:function(e){console.error("requestAuthCode3",e),(0,d.ajaxPost)("/api/log/jserror",{msg:"dingtalk_requestAuthCode_3",url:window.location.href,error_code:e.errorCode,error_message:JSON.stringify(e)})}})})}}},{key:"render",value:function(){var e=this.props.mode;return l.default.createElement("a",{onClick:this.openLink,className:"dt-external-entry dt-mode-"+e},l.default.createElement("div",{className:"dt-external-tag"},"在浏览器中打开"))}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t,n){(function(e,r){var o;!function(i){function a(e){throw new RangeError(M[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(N,"."),r+s(e.split("."),t).join(".")}function l(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?I(e/C):e>>1,e+=I(e/t);e>A*E>>1;r+=_)e=I(e/A);return I(r+(A+1)*e/(e+T))}function h(e){var t,n,r,o,i,s,u,l,d,h,m=[],v=e.length,y=0,g=O,b=S;for(n=e.lastIndexOf(x),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=y,s=1,u=_;o>=v&&a("invalid-input"),l=f(e.charCodeAt(o++)),(l>=_||l>I((w-y)/s))&&a("overflow"),y+=l*s,d=u<=b?k:u>=b+E?E:u-b,!(l<d);u+=_)h=_-d,s>I(w/h)&&a("overflow"),s*=h;t=m.length+1,b=p(y-i,t,0==i),I(y/t)>w-g&&a("overflow"),g+=I(y/t),y%=t,m.splice(y++,0,g)}return c(m)}function m(e){var t,n,r,o,i,s,u,c,f,h,m,v,y,g,b,T=[];for(e=l(e),v=e.length,t=O,n=0,i=S,s=0;s<v;++s)(m=e[s])<128&&T.push(D(m));for(r=o=T.length,o&&T.push(x);r<v;){for(u=w,s=0;s<v;++s)(m=e[s])>=t&&m<u&&(u=m);for(y=r+1,u-t>I((w-n)/y)&&a("overflow"),n+=(u-t)*y,t=u,s=0;s<v;++s)if(m=e[s],m<t&&++n>w&&a("overflow"),m==t){for(c=n,f=_;h=f<=i?k:f>=i+E?E:f-i,!(c<h);f+=_)b=c-h,g=_-h,T.push(D(d(h+b%g,0))),c=I(b/g);T.push(D(d(c,0))),i=p(n,y,r==o),n=0,++r}++n,++t}return T.join("")}function v(e){return u(e,function(e){return P.test(e)?h(e.slice(4).toLowerCase()):e})}function y(e){return u(e,function(e){return j.test(e)?"xn--"+m(e):e})}var g=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);g.global!==g&&g.window!==g&&g.self;var b,w=2147483647,_=36,k=1,E=26,T=38,C=700,S=72,O=128,x="-",P=/^xn--/,j=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=_-k,I=Math.floor,D=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:l,encode:c},decode:h,encode:m,toASCII:y,toUnicode:v},void 0!==(o=function(){return b}.call(t,n,t,e))&&(e.exports=o)}()}).call(t,n(44)(e),n(25))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(657),t.encode=t.stringify=n(658)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,d,p,h,m=e[c].replace(s,"%20"),v=m.indexOf(n);v>=0?(f=m.substr(0,v),d=m.substr(v+1)):(f=m,d=""),p=decodeURIComponent(f),h=decodeURIComponent(d),r(a,p)?o(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(o(a))+n;return i(e[a])?r(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.reactive=n.reactive.bind(n),n.state={active:!0,activedChild:null},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){}}]),s(t,[{key:"handleClick",value:function(e){this.setState({active:!1,activedChild:e})}},{key:"reactive",value:function(){this.setState({active:!0,activedChild:null})}},{key:"render",value:function(){var e=this,t=l.default.Children.map(this.props.children,function(t){var n=t.props.name;return l.default.cloneElement(t,{key:n,actived:e.state.activedChild===n,onBtnClick:e.handleClick.bind(e,n),onClose:e.reactive})}),n=(0,f.default)("fixed-box",{active:this.state.active});return l.default.createElement("div",{className:n},t)}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(496),i=function(){if(!cow.currentUser||cow.currentUser.id<0)return{};var e=window.cow.currentUser,t=new Date(e.created_at),n="",o=e.accountType;"personal_free"===o?n="基础免费":"personal_premium"===o?n="个人高级":"enterprise_dingding"===o?n="钉钉":"enterprise_standard"===o&&(n="企业");var i={};return e.team&&(i.enterpriseId=e.team.enterpriseId,i.enterprise=e.team&&e.team.name||"",i.userRole=e.teamRole),(0,r.assign)({avatar:e.avatar,name:e.name,realName:e.name,isOfficial:e.isOfficial?"是":"否",registerAt:t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),userType:n,email:e.email||"",mobile:e.mobile||"",userId:e.id},i)},a=function(){(0,r.get)(window,"cow.alphaFeatures.intercom",!1)&&(0,o.init)(i())};t.default=a,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=n(497),d=r(f),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={unreadCount:0},n.onVisibleChange=n.onVisibleChange.bind(n),n.onUnreadChange=n.onUnreadChange.bind(n),n.onOfflineMessageChange=n.onOfflineMessageChange.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,onBtnClick:u.PropTypes.func}}}]),s(t,[{key:"componentDidMount",value:function(){new d.default({trigger:"meiqia-btn",moduleType:this.getModuleType(),onVisibleChange:this.onVisibleChange,onUnreadChange:this.onUnreadChange,onOfflineMessageChange:this.onOfflineMessageChange,dataArgs:this.getUserInfo()})}},{key:"getUserInfo",value:function(){if(!cow.currentUser||cow.currentUser.id<0)return{};var e=window.cow.currentUser,t=new Date(e.created_at),n="",r=e.accountType;"personal_free"===r?n="基础免费":"personal_premium"===r?n="个人高级":"enterprise_dingding"===r?n="钉钉":"enterprise_standard"===r&&(n="企业");var o={};return e.team&&(o.enterpriseId=e.team.enterpriseId,o.enterprise=e.team&&e.team.name||"",o.userRole=e.teamRole),(0,c.assign)({avatar:e.avatar,name:e.name,realName:e.name,isOfficial:e.isOfficial?"是":"否",registerAt:t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),userType:n,email:e.email||"",mobile:e.mobile||"",userId:e.id},o)}},{key:"getModuleType",value:function(){var e=3;return cow.currentUser&&cow.currentUser.id>0&&cow.currentUser.isOfficial&&(e=4),e}},{key:"onVisibleChange",value:function(e){e?(this.props.onBtnClick(),this.state.unreadCount>0&&this.setState({unreadCount:0})):this.props.onClose()}},{key:"onUnreadChange",value:function(e){this.setState({unreadCount:e.data.length})}},{key:"onOfflineMessageChange",value:function(e){this.setState({unreadCount:e})}},{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement("div",{className:"fixed-button meiqia-btn"},"反馈"),l.default.createElement("div",{className:"meiqia-unread-msg"},l.default.createElement("span",{className:"meiqia-msg-count "+(0===this.state.unreadCount?"hide":"")},this.state.unreadCount),l.default.createElement("div",{className:"meiqia-msg-content hide"})))}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),f=r(c),d=n(33),p=n(296),h=r(p),m=n(664),v=r(m),y=n(665),g=r(y),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=(0,p.getDefaultData)();return n.state={selectedGroup:r.groupTag,selectedItem:r.item.tag},n.tabDidChange=n.tabDidChange.bind(n),n.tabWillChange=n.tabWillChange.bind(n),n.handleListClick=n.handleListClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{actived:u.PropTypes.bool,onBtnClick:u.PropTypes.func,onClose:u.PropTypes.func}}}]),s(t,[{key:"handleListClick",value:function(e,t){this.setState({selectedGroup:e,selectedItem:t})}},{key:"tabDidChange",value:function(){}},{key:"tabWillChange",value:function(e,t){var n=h.default[t];this.setState({selectedGroup:n.tag,selectedItem:n.items[0].tag})}},{key:"renderTabs",value:function(){return h.default.map(function(e){return l.default.createElement(d.TabItem,{key:e.tag,title:e.label})})}},{key:"render",value:function(){var e=this.state,t=e.selectedGroup,n=e.selectedItem,r=(0,p.getGroupIndex)(t),o=(0,f.default)("user-guide",{active:this.props.actived});return l.default.createElement("div",null,l.default.createElement("div",{className:"fixed-button",onClick:this.props.onBtnClick},"帮助"),l.default.createElement("div",{className:o},l.default.createElement("span",{className:"hicon icon-close",onClick:this.props.onClose}),l.default.createElement(d.Tab,{customClass:"sm-nav-tabs user-guide-nav-tabs large",disableSetWidth:!0,selectedIndex:r,tabWillChange:this.tabWillChange},this.renderTabs()),l.default.createElement("div",{className:"guide-content-wrapper"},l.default.createElement(v.default,{selectedGroup:t,selectedItem:n,onSelect:this.handleListClick}),l.default.createElement(g.default,{selectedGroup:t,selectedItem:n}))))}}]),t}(u.Component);t.default=b,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(11),d=o(f),p=n(574),h=n(296),m=o(h),v=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollTimer=-1,n.state={selectedItem:"assignTask",showFadeMask:!0},n.onScroll=r.debounce(n.onScroll.bind(n),100),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{groupData:l.PropTypes.array,selectedGroup:l.PropTypes.string,selectedItem:l.PropTypes.string,onSelect:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{selectedGroup:"",onSelect:function(){}}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.selectedGroup&&e.selectedGroup!==this.props.selectedGroup&&this.setState({selectedItem:(0,h.isIncludeGroup)(e.selectedItem,e.selectedGroup)?e.selectedItem:(0,h.getFirstTagInGroup)(e.selectedGroup)},function(){t.adjustScrollPosition()})}},{key:"adjustScrollPosition",value:function(){var e=this.state.selectedItem,t=this.props.selectedGroup,n=this.refs.listWrap,r=this.refs[t+"_"+e];if(n&&r){var o=n.getBoundingClientRect(),i=r.getBoundingClientRect(),a=i.bottom-o.bottom,s=o.top-i.top;a>=0?(0,p.scrollWithAnimation)(n,n.scrollTop+a+.67*o.height):s>=0&&(0,p.scrollWithAnimation)(n,n.scrollTop-s)}}},{key:"onClick",value:function(e,t){this.setState({selectedItem:t}),this.props.onSelect(e,t)}},{key:"onScroll",value:function(e){var t=e.target;t.scrollHeight-(t.scrollTop+t.clientHeight)<=10?this.state.showFadeMask&&this.setState({showFadeMask:!1}):this.state.showFadeMask||this.setState({showFadeMask:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedItem,r=t.showFadeMask,o=m.default.map(function(t){var r=t.items.map(function(r){var o=(0,d.default)({active:r.tag===n,"guide-list-item":!0});return c.default.createElement("li",{className:o,ref:t.tag+"_"+r.tag,key:r.tag,onClick:e.onClick.bind(e,t.tag,r.tag)},r.label)});return c.default.createElement("li",{className:"guide-group",ref:"group_"+t.tag,key:t.tag,"data-tag":t.tag},c.default.createElement("label",{className:"group-label"},t.label),c.default.createElement("ul",{className:"guide-group-list"},r))}),i=(0,d.default)({"guide-list-wrapper":!0,"scroll-bottom":!r});return c.default.createElement("div",{className:i},c.default.createElement("ul",{ref:"listWrap",onScroll:this.onScroll,className:"guide-list"},o))}}]),t}(l.Component);t.default=v,e.exports=t.default}).call(t,n(1))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(296),d=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isLoaded:!1},e.onImageLoaded=e.onImageLoaded.bind(e),e.onImageClick=e.onImageClick.bind(e),e}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{selectedItem:l.PropTypes.string,selectedGroup:l.PropTypes.string}}}]),u(t,[{key:"onImageLoaded",value:function(){this.setState({isLoaded:!0})}},{key:"onImageClick",value:function(e){var t=e.target.src;t&&window.open(t)}},{key:"renderLoader",value:function(){return this.state.isLoaded?null:c.default.createElement("div",{className:"spinner"})}},{key:"render",value:function(){var e=this.props,t=e.selectedItem,n=e.selectedGroup,o=(0,f.getItemData)(n,t),i={};return this.state.isLoaded||r.assign(i,{opacity:.3,pointerEvents:"none"}),c.default.createElement("div",{className:"guide-content"},c.default.createElement("p",{className:"guide-desc",dangerouslySetInnerHTML:{__html:o.desc}}),c.default.createElement("img",{style:i,className:"guide-img",onLoad:this.onImageLoaded,onClick:this.onImageClick,src:o.img}),this.renderLoader())}}]),t}(l.Component);t.default=d,e.exports=t.default}).call(t,n(1))},function(e,t){},function(e,t,n){(function(e,r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e){if("string"!=typeof e.changeset)return e.changeset instanceof h.default.Delta&&e.changeset.ops.length>0;try{return e.changeset=h.default.unpack(e.changeset),e.changeset.ops.length>0}catch(e){return!1}}return!1}function a(){function t(t,o){var s=e.pick(t,["guid","rev","changeset","apool","clientId","committingCS","userCS","docType"]),u=s.changeset,l=s.rev,f=s.apool,p=s.docType,m=s.guid,v=s.committingCS,y=s.userCS,b=s.clientId,_=void 0,k=void 0,E=void 0,T=void 0;if(v||y)if((v&&!v.apool||y&&!y.apool)&&(p="newdoc"),"doc"===p)v&&(E=(new g.default).fromJsonable(n(v.apool))),y&&(T=y&&(new g.default).fromJsonable(n(y.apool))),v&&y?(u=d.default.moveOpsToNewPool(v.changeset,E,T),u=d.default.compose(u,y.changeset,T),l=v.rev,f=T):v?(u=v.changeset,l=v.rev,f=E):(u=y.changeset,l=y.rev,f=T);else if("newdoc"===p){var C=i(v),S=i(y);if(C&&S)u=h.default.pack(v.changeset.compose(y.changeset)),l=v.rev;else if(C)u=h.default.pack(v.changeset),l=v.rev;else{if(!S)return a.remove(m,b),void o(!0);u=h.default.pack(y.changeset),l=y.rev}}if(!l||!u||"[]"===u)return a.remove(m,b),void o(!0);f=JSON.stringify(f),_=P.SYNC_OFFLINE.replace("{%guid%}",m),k={guid:m,rev:l,changeset:u,apool:f,clientId:b};var O=void 0;switch(p){case"doc":O=5;break;case"newdoc":O=4}c.default.post(_,k,function(){console.log("offline sync success"),o(!0),N.default.syncStatusTrack(O,"离线同步",!0)},function(e){if(e&&0===e.status);else try{var t="";if("doc"===p)t=d.default.unpack(u).charBank.trim();else if("newdoc"===p){var n=h.default.unpack(u);n.length&&n.ops.forEach(function(e){"insert"===e.action&&"string"==typeof e.data?t+=e.data:"retain"===e.action&&(t+="\n")})}if(0===t.length)return void o(!0);var i='为防止内容丢失，请复制以下未同步的内容：<br /><span style="color:black;font-size: 13px;">'+t+"</span><br /><br /> 如需帮助请联系客服。";w.default.show({okCallback:function(){window.location.href="/"+("doc"===p?"doc":"docs")+"/"+m},modal:!0,okText:"确认",headText:"同步出错",bodyText:i}),r.post("/api/log/sockets",{guid:m,sockets:JSON.stringify(u)}),o(!1)}catch(e){o(!1)}finally{N.default.syncStatusTrack(O,"离线同步",!1)}})}function n(e){return"object"!==(void 0===e?"undefined":u(e))&&e?JSON.parse(e):e}s();var o=e.get(window,"cow.currentUser.id");if(!(o<1)){var a=void 0;try{a=new S.default({userId:o})}catch(e){return void T.default.alert({type:"error",title:"您的浏览器不支持离线编辑"})}var l=e.get(window,"cow.tempCurrentFile.guid");x.default.initialize({userId:o,currentFileGuid:l,store:a,syncFn:t}).sync()}}function s(){M||(M=!0,v.default.attach("statusBar:triggerCleanData",function(){if("doc"!==window.cow.pageType)return!1;(0,k.default)({title:"删除离线数据",description:"删除离线数据无法恢复，请确认已手动复制内容到本地，以免数据丢失。",confirmFun:function(){try{window.localStorage.removeItem("shimo-offline-data")}catch(e){console.log("remove error"),console.dir(e)}T.default.alert({title:"删除成功"})}})}))}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.checkCS=i,t.default=a;var l=n(67),c=o(l),f=n(69),d=o(f),p=n(93),h=o(p),m=n(4),v=o(m),y=n(179),g=o(y),b=n(172),w=o(b),_=n(47),k=o(_),E=n(8),T=o(E),C=n(284),S=o(C),O=n(687),x=o(O),P=n(35),j=n(154),N=o(j),M=!1}).call(t,n(1),n(2))},,,,,,function(e,t,n){(function(t,r){e.exports=function(e){var o=n(0),i=n(5),a=n(148),s=a.Provider,u=n(13),l=n(208),c=n(9),f=n(24).showAlert,d=n(16),p=n(247),h=n(248),m=n(476),v=n(473),y=n(246),g=n(490),b=n(678),w=b.initSheetTest,_=n(145),k=_.loadSheet,E=c.isRNClientWithToken();return k().then(function(n){var a=n.Store,b=n.CsStore,_=n.initSocket,k=n.modelActions,T=n.msgActions,C=n.initCollabClient,S=n.tableUtils,O=n.MobileSpreadsheetHeader,x=n.SheetContainer,P=n.ReadonlySheetContainer,j=n.testApi,N=e.isReadonly,M=e.isDingTalk,A=e.cooperation,I=e.Contact,D=e.Mention,L=e.guid,R=e.sheetId;R=e.sheetId||S.getSavedSheetId(e.guid);var U=u.isMobile(),F=a(),B=void 0;return _(F),N?(x=P,L=window.cow.currentSheetGuid=window.cow.tempCurrentFile.guid,t.stop()):(window.cow.currentSheetGuid=L,w(j)),S.setCurrentSheetId(R),B=F.dispatch(k.getSpreadsheet(L)).then(function(e){return F.dispatch(T.receivedInitSheet(e.tableData,e.head,e.guid)),e}),B.then(function(e){l.inc(),window.cow.authorized=e.authorized||e.role,!0===window.cow.usingNewSeq&&C(F,T),window.cow.currentFile=e,document.title=e.name,U||N||g.sheet.show(),b.getInst({store:F,guid:L}),M&&!u.isDingtalkPcSidebar()&&i.render(o.createElement(v,null),document.getElementById("dingtalk-status-wrapper")),!E&&(!N&&U||u.isDingtalkPcSidebar())&&i.render(o.createElement(s,{store:F},o.createElement(O,{isDingTalk:M,guid:L,HeaderMenu:p,StarFile:h,FileTitle:m,StatusBar:v,wechat:y})),document.getElementById("sheet-header"));var t=location.search.indexOf("disableWorker")>-1;i.render(o.createElement(s,{store:F},o.createElement(x,{guid:L,disableWorker:t,cooperation:A,Contact:I,Mention:D,HeaderMenu:p,StarFile:h})),document.getElementById("sheet-view")),setTimeout(function(){if(l.done(),r("#sheet-view").addClass("ready"),r("#pad-loading").addClass("hide"),window.cow.authorized&&u.isMobile()&&!u.isDingtalk()){var e=c.getShareMode();r(".share-link").removeClass().addClass("share-link share-"+e)}},100),d.getConnectSocket().then(function(){F.dispatch(T.sendClientStatus("ready"))})}).catch(function(e){console.dir(e),setTimeout(function(){l.done(),f({title:e?e.message:"加载出错"})},0)})})}}).call(t,n(27),n(2))},function(e,t,n){var r;!function(o,i,a){function s(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return _[e.which]?_[e.which]:k[e.which]?k[e.which]:String.fromCharCode(e.which).toLowerCase()}function l(e,t){return e.sort().join(",")===t.sort().join(",")}function c(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function f(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function d(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function h(){if(!w){w={};for(var e in _)e>95&&e<112||_.hasOwnProperty(e)&&(w[_[e]]=e)}return w}function m(e,t,n){return n||(n=h()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function y(e,t){var n,r,o,i=[];for(n=v(e),o=0;o<n.length;++o)r=n[o],T[r]&&(r=T[r]),t&&"keypress"!=t&&E[r]&&(r=E[r],i.push("shift")),p(r)&&i.push(r);return t=m(r,i,t),{key:r,modifiers:i,action:t}}function g(e,t){return null!==e&&e!==i&&(e===t||g(e.parentNode,t))}function b(e){function t(e){e=e||{};var t,n=!1;for(t in w)e[t]?n=!0:w[t]=0;n||(E=!1)}function n(e,t,n,r,o,i){var a,s,u=[],c=n.type;if(!v._callbacks[e])return[];for("keyup"==c&&p(e)&&(t=[e]),a=0;a<v._callbacks[e].length;++a)if(s=v._callbacks[e][a],(r||!s.seq||w[s.seq]==s.level)&&c==s.action&&("keypress"==c&&!n.metaKey&&!n.ctrlKey||l(t,s.modifiers))){var f=!r&&s.combo==o,d=r&&s.seq==r&&s.level==i;(f||d)&&v._callbacks[e].splice(a,1),u.push(s)}return u}function r(e,t,n,r){v.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(f(t),d(t))}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=u(e);if(t)return"keyup"==e.type&&_===t?void(_=!1):void v.handleKey(t,c(e),e)}function a(){clearTimeout(g),g=setTimeout(t,1e3)}function h(e,n,o,i){function s(t){return function(){E=t,++w[e],a()}}function l(n){r(o,n,e),"keyup"!==i&&(_=u(n)),setTimeout(t,10)}w[e]=0;for(var c=0;c<n.length;++c){var f=c+1===n.length,d=f?l:s(i||y(n[c+1]).action);m(n[c],d,i,e,c)}}function m(e,t,r,o,i){v._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var a,s=e.split(" ");if(s.length>1)return void h(e,s,t,r);a=y(e,r),v._callbacks[a.key]=v._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},o,e,i),v._callbacks[a.key][o?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e})}var v=this;if(e=e||i,!(v instanceof b))return new b(e);v.target=e,v._callbacks={},v._directMap={};var g,w={},_=!1,k=!1,E=!1;v._handleKey=function(e,o,i){var a,s=n(e,o,i),u={},l=0,c=!1;for(a=0;a<s.length;++a)s[a].seq&&(l=Math.max(l,s[a].level));for(a=0;a<s.length;++a)if(s[a].seq){if(s[a].level!=l)continue;c=!0,u[s[a].seq]=1,r(s[a].callback,i,s[a].combo,s[a].seq)}else c||r(s[a].callback,i,s[a].combo);var f="keypress"==i.type&&k;i.type!=E||p(e)||f||t(u),k=c&&"keydown"==i.type},v._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},s(e,"keypress",o),s(e,"keydown",o),s(e,"keyup",o)}if(o){for(var w,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},T={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},C=1;C<20;++C)_[111+C]="f"+C;for(C=0;C<=9;++C)_[C+96]=C.toString();b.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},b.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},b.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!g(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(_[t]=e[t]);w=null},b.init=function(){var e=b(i);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),o.Mousetrap=b,void 0!==e&&e.exports&&(e.exports=b),(r=function(){return b}.call(t,n,t,e))!==a&&(e.exports=r)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(490),i=r(o);t.default=function(e){var t=e.guid,r=e.isAjaxForce;n.e(4).then(function(){var e=n(810).ListContainer,o=n(811);i.default.list.show(),o({guid:t,ListContainer:e,isAjaxForce:r})}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){n.e(0).then(function(){(0,n(812).initDoc)(e,t)}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,r.loadDoc)().then(function(r){r.initDoc(e,t,n)})};var r=n(338);e.exports=t.default},function(e,t,n){function r(e){window.location.search.indexOf("debug=true")>-1&&n.e(5).then(function(){var t=n(814);n(4).attach("spread:inited",function(n,r){window.sheetTest=new t(r,e)})}.bind(null,n)).catch(n.oe)}function o(){delete window.sheetTest}Object.defineProperty(t,"__esModule",{value:!0}),t.initSheetTest=r,t.destorySheetTest=o},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(8),c=o(l),f=n(674),d=o(f),p=n(680),h=o(p),m=n(4),v=o(m),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"init",value:function(){return this.$editor=r("#innerdocbody"),this.$pad=r("#pad-view"),this.initConfig(),this.initBinding()}},{key:"initConfig",value:function(){this.metaKey=c.default.isMac()?"command":"ctrl",this.baseConfig="shift+"+this.metaKey+"+",this.docConfig={up:"handleFontUp",down:"handleFontDown",p:"handleComment",k:"handleTitle",u:'li[data-key="insertorderedlist"]',i:'li[data-key="insertunorderedlist"]',y:'li[data-key="checklist"]',l:"handleHistory",o:"handleDirectory",x:"handleAddShare"},this.listConfig={},this.commonConfig={e:"handleNewHome","/":{noShift:!0,value:"handleQuickAccessMenu"}},this.inDoc="k u i y up down"}},{key:"initBinding",value:function(){var e=this,t=void 0,n=this;for(var o in this.docConfig)t=this.docConfig[o],function(){var e=o,i=t;d.default.bind(n.baseConfig+e,function(t){if(0===n.$pad.length&&(n.$pad=r("#pad-view")),0===n.$editor.length&&(n.$editor=r("#innerdocbody")),t.preventDefault?t.preventDefault():t.returnValue=!1,!n.$pad.hasClass("hide")&&(!n.inDoc.match(new RegExp("\\b"+e+"\\b"))||n.$editor.is(":focus"))&&("p"!==e||n.$editor.is(":focus")||r(".selection-comment-input").is(":focus")))return"function"==typeof n[i]?n[i]():r(i).click(),!1})}();for(o in this.listConfig)t=this.listConfig[o],function(){var e=o,n=t;d.default.bind(e,function(e){var t=window.cow.pageType;if("home"===t||"folder"===t){if(r(n).click(),e.preventDefault)return e.preventDefault();e.returnValue=!1}})}();return function(){var r=[];for(o in e.commonConfig)t=e.commonConfig[o],r.push(function(){var e=o,r=void 0,i=void 0;return t.noShift?(r=t.value,i=n.metaKey+"+"+e):(r=t,i=""+n.baseConfig+e),d.default.bind(i,function(e){if(n[r](),e.preventDefault)return e.preventDefault();e.returnValue=!1})}());return r}()}},{key:"handleFontUp",value:function(){return this.handleFontChange("up")}},{key:"handleFontDown",value:function(){return this.handleFontChange("down")}},{key:"handleComment",value:function(){var e=r("#select-comment"),t=r(".close-temp"),n=r(".temp-list");return"none"===window.getComputedStyle(n[0]).getPropertyValue("display")?e.click():t.click()}},{key:"handleFontChange",value:function(e){if(window.getSelection().toString().length){var t={9:1,10:2,11:3,12:4,14:5,18:6,24:7,30:8,36:9},n=r(".size-txt").text();if(n){var o=t[n];return"up"===e?o++:o--,o=Math.min(Math.max(o,1),9),r("#size-list [data-value='"+o+"']").trigger("click",[!0])}}}},{key:"handleTitle",value:function(){var e={"普通":-1,"小标题":1,"中标题":2,"大标题":3},t=r(".type-txt").text(),n=e[t];return 3===n?n=-1:-1===n?n=1:n++,r(".font-type-item [data-value='"+n+"']").trigger("click",[!0])}},{key:"handleHistory",value:function(){return v.default.notify("history:toggle")}},{key:"handleDirectory",value:function(){return v.default.notify("directory:toggle")}},{key:"handleAddShare",value:function(){var e=r("#teamworker-setting"),t=r(".teamworker-inner"),n=r(".teamworker-close");return!e.hasClass("hide")&&t.hasClass("share-menu")?n.click():new h.default("#teamworker-setting")}},{key:"handleNewHome",value:function(){return window.open("http:///shimo.im/desktop")}},{key:"handleQuickAccessMenu",value:function(){window.showQuickAccessMenu&&window.showQuickAccessMenu()}}]),t}(c.default.DomModule);t.default=new y("body"),e.exports=t.default}).call(t,n(2))},function(e,t,n){(function(r,o,i){var a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;a=[n(8),n(686),n(682),n(683),n(684),n(685),n(681),n(23),n(94),n(172),n(173),n(146)],void 0!==(s=function(e,t,n,a,s,l,c,f,d,p,h,m){return function(v){function y(){return y.__super__.constructor.apply(this,arguments)}return u(y,v),y.prototype.inited=!1,y.prototype.init=function(t,n){var i;!1!==window.cow.authorized&&(i=this,this.cow=window.cow,this.defaultAvatar="https://assets-cdn.shimo.im/assets/images/invited-f41924e412.png",this.option=this.option=r.extend({file:window.cow.currentFile,isTeamCreator:this.isTeamCreator},n),this.teamId=this.option.teamId,this.isTeamCreator=this.option.isTeamCreator,this.readOnly=this.option.readOnly=this.option.readOnly||!1,this.isMobile=e.isMobile,this.maxTeamworkerCount=m.initLimition().teamworkerCount,this.modal=void 0===this.option.modal||this.option.modal,this.teamId?(this.memberList=[],this.membersObj={}):this.file=this.option.file,this.option.shareList?this.renderShareList():this.renderTeamworker(),this.sharedUserlist={current:[],grand:[]},this.show(),this.$view.click(function(e){if(o(e.target).is(i.$view)&&i.modal)return i.hide()}))},y.prototype.renderTeamworker=function(){return this.$view.html(r.template(t)(this.option)),this.$shareMenu=this.$view.find(".share-menu"),this.$emailInput=this.$shareMenu.find(".teamworker-input"),this.$searchList=this.$shareMenu.find(".search-user-list"),this.$userList=this.$shareMenu.find(".teamworker-user-list"),this.$delBtn=this.$view.find(".teamworker-input-clear"),this.$listItem=this.$view.closest(".ob-li"),this.$notFound=this.$view.find(".user-not-found"),this.$teamworkerRight=o(".teamworker-content-right"),this.$teamworkerShadow=o(".teamworker-list-shadow"),this.$inviteBtn=o(".invite-users"),this.$inviteLinkPopup=this.$view.find(".invite-link-popup"),this.$inviteLinkBtn=this.$view.find("a.btn.invite-link"),this.$inviteLinkQr=this.$inviteLinkPopup.find("img"),this.showShareMenu(),this.waitingInvited=[]},y.prototype.renderShareList=function(){return this.$view.html(r.template(n)(this.option)),this.$userList=this.$view.find(".teamworker-content"),this.$shareNumber=this.$view.find(".teamworker-number"),this.$teamworkerShadow=o(".sharelist-content-shadow"),this.showShareList()},y.prototype.showShareList=function(){return this.teamId?this.getTeamMembers("",!0):this.getUserList("",!0)},y.prototype.renderTeamworkerInner=function(){return this.$userList.find("ul").html(""),this.renderRecentlyContacts()},y.prototype.renderRecentlyContacts=function(){var t;return t=this,e.get("/api/share/recent_contact",{},function(e){var n,o,i;return t.recentContacts=i=e.data,t.teamId?r.forEach(i,function(e){t.membersObj[e.id]?e.shareClass="is-shared":e.shareClass=""}):r.forEach(i,function(e){window.cow.shareObj[e.id]?e.shareClass="is-shared":e.shareClass=""}),o={userList:i.filter(function(e){return e.status>-1}),title:"最近"},this.recentlyObject=o,n=r.template(c)({contactsList:[o]}),t.$userList.find("ul").prepend(n)})},y.prototype.renderContacts=function(){var e,t,n,o,i,a;return a=this,t=f.contacts,i={},r.forIn(t,function(e,t){var n;if(-1!==e.status)return n=e.name_pinyin.substr(0,1),a.teamId?a.membersObj[e.id]?e.shareClass="is-shared":e.shareClass="":window.cow.shareObj[e.id]?e.shareClass="is-shared":e.shareClass="",n.match(/[a-zA-Z]/)||(n="#"),i[n]?i[n].userList.push(e):i[n]={title:n.toUpperCase(),userList:[e]}}),o=r.values(i),o.sort(function(e,t){return e.title>t.title?1:-1}),o[0]&&"#"===o[0].title&&(n=o.shift(),o.push(n)),e=r.template(c)({contactsList:o}),this.$userList.find("ul").append(e)},y.prototype.renderSearchList=function(){var e,t;return t=this,this.$searchList.find("ul").html(""),r.forEach(this.searchUsers,function(e){var n,o;o=!1,r.each(t.waitingInvited,function(t){if(o=e.id?e.id===t.id:e.email===t.email)return o}),n=t.teamId?t.membersObj:window.cow.shareObj,n[e.id]?e.shareClass="is-shared":e.shareClass=o?"is-checked":""}),e={userList:this.searchUsers,title:""},l=r.template(c)({contactsList:[e]}),this.$searchList.find("ul").append(l)},y.prototype.renderInvitedUser=function(){var e,t,n;return n="待添加成员"+(this.waitingInvited.length?"("+this.waitingInvited.length+")":""),e={userList:this.waitingInvited,title:n,titleClass:"invite-title"},t=r.template(c)({contactsList:[e]}),this.$teamworkerRight.find("ul").html(t),this.waitingInvited.length?this.$inviteBtn.removeClass("disable"):this.$inviteBtn.addClass("disable")},y.prototype.changeListShadow=function(){return this.$userList.find("ul").height()>this.$userList.height()?this.$teamworkerShadow.show():this.$teamworkerShadow.hide()},y.prototype.eventMap={"click .dropdown-btn":"dropClick","click .dropdown":"stopPropagation","click .search-list li":"shareClick","click .user-input .input-group-addon":"handlerUserInput","click .share-ob ":"showShareMenu","click .share-ob":"onlineStatusWatch","mouseover .search-list li":"searchHover","click .icon-close:first":"close","click .add-share":"openAddShare","keyup .teamworker-input":"emailInputKeyup","keydown .teamworker-input":"emailInputKeydown","click .teamworker-input-clear":"clearInput","click .invite-users":"inviteUsers","click .cancel-invite":"closeInvite","click .share-user-remove":"cancelShare","click .share-menu-content .share-user-li":"pickUser","click .invite-link":"inviteLinks","click *":"hideInviteLinkPopup","click .team-role-item":"roleItemClick"},y.prototype.domEvents={dropClick:function(e,t){var n,r,i,a,s,u,l,c,f,d;r=o(t),u=r.hasClass("active"),h.clearDropdown(),this.$view.find(".is-dropup").removeClass("is-dropup"),this.$view.find(".has-drop").removeClass("has-drop"),a=this.$view.find(".user-list>.share-user-li"),u||(i=o(t).closest(".user-li"),f=this.$view.find(".sharelist-content").scrollTop(),s=i.find(".role-dropdown-wrap").height()+20+10,d=a.index(i),l=36*(d+1)-f,c=this.$view.find(".sharelist-content").height()-l,i.addClass("has-drop"),n=r.addClass("active").next(".dropdown").addClass("active"),c<s&&n.addClass("is-dropup")),e.stopPropagation()},stopPropagation:function(e,t){return e.stopPropagation(),e.preventDefault(),!1},closeInvite:function(){return"sharelist"===this.option.pre?this.renderShareList():(o(".teamworker-close").click(),this.isTeamCreator?this.gotoCurrentTeam():void 0)},inviteUsers:function(){if(!this.$inviteBtn.hasClass("disable"))return this.$inviteBtn.addClass("disable").text("请求中..."),this.invite()},pickUser:function(e,t){var n,i,a,s,u,l,c,d,p,h,m,v,y,g;if(d=o.Deferred(),d.then(function(e){return function(t){if(t)return e.waitingInvited.push(t)}}(this)),d.then(function(e){return function(){return e.renderInvitedUser()}}(this)),n=o(t),i=n.find(".operation-icon"),!i.hasClass("is-shared"))return h=i.hasClass("is-checked"),m=i.hasClass("is-remove"),g=n.attr("data-user-id"),p=n.attr("data-user-email"),g?(a=this.$view.find(".teamworker-user-li[data-user-id="+g+"] .operation-icon"),s="id",u=g):(a=this.$view.find(".teamworker-user-li[data-user-email='"+p+"'] .operation-icon"),s="email",u=p),this.waitingInvited=r.remove(this.waitingInvited,function(e){return e[s]+""!=u+""}),h||m?(a.removeClass("is-checked"),d.resolve()):(a.addClass("is-checked"),g?(y=f.contacts[g],y?(y.shareClass="is-remove",c=o.extend(!0,{},y),d.resolve(c)):(v=n.find(".share-user-name").text(),l=n.find(".share-user-avatar img").attr("src"),c={name:v,email:p,id:g,avatar:l,shareClass:"is-remove"},d.resolve(c))):(c={name:"邮件邀请",email:p,avatar:this.defaultAvatar,shareClass:"is-remove"},cooperation.getUserInfo(p).done(function(e){return function(e){return 0===e.code&&(c.name=e.data.name,c.avatar=e.data.avatar),d.resolve(c)}}())))},openAddShare:function(){return Infinity!==this.maxTeamworkerCount&&cow.shareList.length>=this.maxTeamworkerCount&&!this.isTeamCreator?void this.showOutCountWarning():this.readOnly?o(".teamworker-close").click():(this.renderTeamworker(),this.option.pre="sharelist")},cancelShare:function(t){var n,r,i,a,s,u,l;return a=this,l=o(t.target).parents(".user-li"),u=+l.attr("data-user-id"),r=l.hasClass("verified"),u===window.cow.currentUser.id?n="确认要删除对你自己的共享吗？<br />删除后你将无权限访问该文件":(s=f.get(u),i=r?s.email:s.name,n='确认要删除对<span class="blue">'+i+"</span>的共享吗？<br />删除后该成员将无权限访问该文件"),a.tempHide(),p.show({okCallback:function(){return a.tempShow(),a.showCancelInviteStatus(l),e.post("/api/share/delete",{guid:a.file.guid,user_id:u},function(){return u===window.cow.currentUser.id?(a.hide(),e.alert({title:"已删除对你自己的共享"})):(a.getUserList(!0,!0),e.alert({title:"已删除<span class='blue'>"+f.get(u).name+"</span>"}))},function(){return e.alert({title:"删除失败",type:"error"}),a.showCancelInviteStatus(l,"confirm")})},cancelCallback:function(){return a.tempShow()},headText:"删除共享",bodyText:n})},shareClick:function(e,t){},handlerUserInput:function(){return this.handlerUserInput.apply(this,arguments)},onlineStatusWatch:function(){return d.watch("shareMenu",this.$shareMenu,function(e){return this.find("ul li[data-user-id="+e+"]")})},emailInputKeydown:function(t){var n;(n=t.keyCode)===e.keyCodes.UP||n===e.keyCodes.DOWN?t.preventDefault():t.keyCode===e.keyCodes.ENTER&&this.handlerUserInput(t)},emailInputKeyup:function(t){var n;return t.keyCode===e.keyCodes.ESC&&this.hide(),n=this.$emailInput.val().trim(),n?this.showSearchList():this.hideSearchList(),t.keyCode===e.keyCodes.UP?(this.selectSearchItem("up"),this.scrollSearch()):t.keyCode===e.keyCodes.DOWN?(this.selectSearchItem("down"),this.scrollSearch()):(this.$emailInput.parents(".user-input").removeClass("has-error"),this.search(t.target.value))},searchHover:function(e,t){var n;if(n=o(t),!n.hasClass("active"))return this.$searchList.find("li").removeClass("active"),n.addClass("active")},close:function(){return this.hide()},clearInput:function(e){return this.$emailInput.val("").focus(),this.hideSearchList(),this.$notFound.hide()},inviteLinks:function(){return this,this.$inviteLinkPopup.toggleClass("hide"),this.$inviteLinkPopup.hasClass("hide")||this.$inviteLinkQr.prop("src",""),e.get("/api/file/"+this.file.guid+"/invite_link").then(function(t){return function(n){var r;return r=e.getQrImageUrl(114,n.data.link),t.$inviteLinkQr.prop("src",r)}}(this))},hideInviteLinkPopup:function(e){var t;if(this.modal){if(t=o(e.target),0===this.$view.find(".invite-link-popup").length)return;!t.is(this.$inviteLinkPopup.find("*"))&&!t.is(this.$inviteLinkBtn)&&!this.$inviteLinkPopup.hasClass("hide")&&this.$inviteLinkPopup.addClass("hide")}},roleItemClick:function(e,t){var n,i,a,s,u,l;if(s=this,n=o(t),a=o(t).attr("action-type"),i=o(t).closest(".user-li"),h.clearDropdown(),i.length>0){if(u=i.attr("data-user-id"),l=s.membersObj[u],void 0===u)return;if("delete"===a||"cancel-invite"===a)return p.show({okCallback:function(){return s.removeTeamMember(u).then(function(){return i.remove(),r.remove(s.memberList,function(e){return+e.id==+u}),delete s.membersObj[u]}).fail(function(){})},headText:"移除成员",bodyText:"<div>确定要移除 "+l.name+" 吗？</div><div>移除后该成员将无权限访问该文件夹</div>"});if(r.includes(["admin","member","visitor"],a))return this.changeMemberRole(u,a).then(function(e){return i.find(".role-title").text(e),i.find(".team-role-list li").removeClass("checked"),n.addClass("checked")}).fail(function(){})}}},y.prototype.getMobileShareList=function(){var e,t;return e=this.sharedUserlist,t=[],"",r.forEach(e.current,function(e){return t.push(e.name)}),r.forEach(e.grand,function(e){return r.forEach(e.users,function(e){if(t.length<4)return t.push(e.name)})}),t.length<=3?t.toString()+'<span class="m-icon">':t.slice(0,3).toString()+'...<span class="m-icon">'},y.prototype.showCancelInviteStatus=function(e,t){return null==t&&(t="loading"),"loading"===t?(t="userlist-"+t,e.find(".status").hide(),e.find(".status."+t).show()):e.find(".status").attr("style","")},y.prototype.showShareMenu=function(e,t){return this.teamId?this.getTeamMembers():this.getUserList()},y.prototype.showSearchList=function(){return this.$delBtn.show(),this.$emailInput.addClass("search-result-shown"),this.$searchList.show(),this.$userList.hide()},y.prototype.hideSearchList=function(){return this.$emailInput.val("").removeClass("search-result-shown"),this.$delBtn.hide(),this.$searchList.hide(),this.$userList.show()},y.prototype.selectSearchItem=function(e){var t,n,r;return n=this.$searchList.find("li"),void 0===e?n.removeClass("active").first().addClass("active"):(t=this.$searchList.find("li.active"),0!==t.length?(r=t.attr("data-index"),"up"===e&&r>0&&t.prev().length>0&&t.removeClass("active").prev().addClass("active"),"down"===e&&r<n.length-1&&t.next().length>0?t.removeClass("active").next().addClass("active"):void 0):void 0)},y.prototype.updateAttr=function(t,n){return e.post("/api/file/"+n,t,function(){})},y.prototype.showInviteStatus=function(e){return this.$activeSearchLi.find("span.icon-add,span.icon-loading,span.icon-remind").hide(),this.$activeSearchLi.find("span.icon-"+e).show()},y.prototype.invite=function(){var t,n,o,i,a;if(i=this,this.waitingInvited.length)return a="",n={},i.teamId?(n={team_id:this.teamId,users:[]},a="/team_members/invite"):(n={file_id:this.file.id,users:[]},a="/api/invite"),o=!1,Infinity===this.maxTeamworkerCount||this.isTeamCreator||(t=this.maxTeamworkerCount-cow.shareList.length,t<=0?o=!0:this.waitingInvited.length>t&&(o=!0)),o?(i.$inviteBtn.removeClass("disable").text("确定"),void i.showOutCountWarning()):(r.forEach(this.waitingInvited,function(e){var t;return t=e.id?e.id:e.email,n.users.push(t)}),n.users.length>0?e.post(a,n).then(function(t){return 0===t.code&&t.data.success?(e.alert({title:"邀请成功！"}),i.renderShareList()):(e.alert({title:"添加失败",type:"error"}),i.$inviteBtn.removeClass("disable").text("确定"))}).fail(function(){return e.alert({title:"添加失败",type:"error"}),i.$inviteBtn.removeClass("disable").text("确定")}):void 0)},y.prototype.showOutCountWarning=function(){var e;return e=this.maxTeamworkerCount,p.show({headText:"到达上限",bodyText:"最多添加"+e+"个协作者，升级<b>石墨高级版</b>无此限制",buttons:[{type:"link-button",buttonLabel:"了解详情",href:"/payment",target:"_blank",customClass:"btn btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"btn btn-cancel",closeAfterClick:!0}]})},y.prototype.setTplClassName=function(e){return e.isOwner?(e.tplClassName="user-admin",e.tplTitle="管理员"):"verified"!==e.status&&"verified"!==e._status?(e.tplClassName="user-wait-confirm",e.tplTitle="成员"):(e.tplTitle="成员",e.tplClassName="user-normal",+e.id===window.cow.currentUser.id?e.tplClassName="user-self":void 0)},y.prototype.getTeamMembers=function(t,n){var o,i,a;return null==t&&(t=!0),a=this,i=function(){var e,t;return n?(e=a.membersObj[cow.currentUser.id].team_role,t=r.template(s)({myRole:e,userList:a.memberList,readOnly:a.readOnly}),a.$userList.find("ul").html(t),a.memberList&&a.$shareNumber.text("团队成员("+a.memberList.length+")")):a.renderTeamworkerInner(),a.changeListShadow()},t||n?(o=function(e){var t;return t=e.data,t.map(function(e){switch(+e.id===window.cow.currentUser.id&&(e.isSelf=!0),e.team_role){case"creator":e.roleTitle="创建者";break;case"admin":e.roleTitle="管理员";break;case"member":e.roleTitle="成员"}return a.membersObj[e.id]=e}),t=t.sort(function(e,t){return("admin"===t.team_role)-("admin"===e.team_role)}).sort(function(e,t){return("creator"===t.team_role)-("creator"===e.team_role)}),a.memberList=t},e.get("/smapi/teams/mine/members").then(function(e){if(0===e.code)return o(e),i()})):i()},y.prototype.getUserList=function(t,n){var o,i,s;return null==t&&(t=!0),s=this,i=function(){var e;return n?(e=r.template(a)(s.sharedUserlist),s.$userList.find("ul").html(e),window.shareList&&s.$shareNumber.text("成员("+window.shareList.length+")")):(s.renderTeamworkerInner(),s.$emailInput.focus()),s.changeListShadow()},t||n?(o=function(e){var t;return t=e.data,t.grandUsers=[],t.grand.map(function(e){return e.users=[],e.user_ids.split(",").forEach(function(t){var n;if(f.exists(t))return n=f.get(t),n._status="verified",n.isOwner=+e.user_id==+t,+n.id===window.cow.currentUser.id&&(n.isSelf=!0),s.setTplClassName(n),e.users.push(n)}),t.grandUsers=t.grandUsers.concat(e.users),e}),t.grandUsers=t.grandUsers.sort(function(e,t){return t.status-e.status}).sort(function(e,t){return!!t.isSelf-!!e.isSelf}).sort(function(e,t){return t.isOwner-e.isOwner}),t.current.map(function(e){return e.online=d.isOnline(e.id),+e.id===window.cow.currentUser.id&&(e.isSelf=!0),s.setTplClassName(e),e}),t.current=t.current.sort(function(e,t){return t.status-e.status}).sort(function(e,t){return!!t.isSelf-!!e.isSelf}).sort(function(e,t){return t.isOwner-e.isOwner}),s.sharedUserlist=t,window.shareList=t.grandUsers.concat(e.data.current),cow.shareList=window.shareList},e.post("/api/share/"+s.file.guid,{},function(e){if(0===e.code)return o(e),i()},function(t){if("err_shortcut_inside"===t.message)return e.alert({title:"文件夹中有他人分享的文档/文件夹，无法添加共享人",type:"error"}),s.hide()})):i()},y.prototype.search=function(t){var n;return n=this,this.searchUsers=f.search(t,n.recentContacts||[]).filter(function(e){return+e.id!=+window.cow.currentUser.id&&e.status>-1}).map(function(e,t){return e.index=t,e}),0===this.searchUsers.length&&t?e.regs.email.test(t)?(this.searchUsers.push({name:"邮件邀请",email:t,avatar:this.defaultAvatar}),this.$notFound.hide()):this.$notFound.text("无搜索结果").show():this.$notFound.hide(),this.renderSearchList()},y.prototype.scrollSearch=function(){var e,t,n,r;if(t=this.$searchList.find(".active").index(),n=this.$searchList.scrollTop(),e=50,150,(r=e*t)-n>e-e||r<n)return this.$searchList.scrollTop(r)},y.prototype.handlerUserInput=function(e){var t;this.$searchLi=this.$searchList.find(".share-user-li"),t=this.$searchLi.find(".operation-icon"),1!==this.$searchLi.length||t.hasClass("is-shared")||t.hasClass("is-checked")||(this.$searchLi.click(),this.$delBtn.click())},y.prototype.toggleOverflow=function(e){return e?o("body,html").addClass("overflow-hidden"):o("body,html").removeClass("overflow-hidden")},y.prototype.show=function(){return this.$view.removeClass("hide").click(),this.toggleOverflow(!0)},y.prototype.tempHide=function(){return this.$view.addClass("hide"),this.toggleOverflow(!1)},y.prototype.tempShow=function(){return this.$view.removeClass("hide"),o("body").click(),this.toggleOverflow(!0)},y.prototype.hide=function(){if(this.$view.hasClass("show")?this.$view.removeClass("show"):(this.$view.off(),this.$view.addClass("hide")),o("body").click(),this.toggleOverflow(!1),this.isTeamCreator)return this.gotoCurrentTeam()},y.prototype.gotoCurrentTeam=function(){return this.cow.currentTeam=this.teamId,i("/team/"+this.teamId+"/files")},y.prototype.removeTeamMember=function(t){var n,r,i,a,s;return i=o.Deferred(),a=this,n="/team_members/delete",s=this.membersObj[t],r={team_id:a.teamId,user_id:t},e.post(n,r).then(function(t){if(0===t.code)return e.alert({title:"已删除<span class='blue'>"+s.name+"</span>"}),i.resolve()}).fail(function(t){return e.alert({title:"删除<span class='blue'>"+s.name+"</span>失败",type:"error"}),i.reject()}),i.promise()},y.prototype.changeMemberRole=function(t,n){var r,i,a,s,u;return a=o.Deferred(),s=this,r="/team_members/change_role",u=this.membersObj[t],i={team_id:s.teamId,user_id:t,role:n},e.post(r,i).then(function(t){var r;if(0===t.code){switch(r="",n){case"admin":r="管理员";break;case"member":r="成员";break;case"visitor":r="访客"}return e.alert({title:"已将<span class='blue'>"+u.name+"</span>修改为"+r}),a.resolve(r)}return e.alert({title:"更新<span class='blue'>"+u.name+"</span>角色失败"}),a.reject()}).fail(function(t){return e.alert({title:"更新<span class='blue'>"+u.name+"</span>角色失败"}),a.reject()}),a.promise()},y}(e.DomModule)}.apply(t,a))&&(e.exports=s)}).call(t,n(1),n(2),n(27))},function(e,t){e.exports='<% _.each(contactsList, function(userObject) { %>\n    <% if (userObject.userList.length && userObject.title || userObject.titleClass === "invite-title") {%>\n        <li class="share-li-title teamworker-li-title <%= userObject.titleClass %>"><%= userObject.title %></li>\n    <% } %>\n    <% _.each(userObject.userList, function (user) { %>\n        <li class="share-user-li teamworker-user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n            <span class="share-user-avatar">\n                <img src="<%= user.avatar%>">\n                <span class="online-circle"></span>\n            </span>\n            <span class="share-user-name ellipsis teamworker-user-name"><%= user.name %></span>\n            <span class="share-user-email ellipsis teamworker-user-email"><%= user.email || \'石墨用户\'%></span>\n            <span class="operation-icon doc-share-icon <%= user.shareClass%>"></span>\n        </li>\n    <% }) %>\n<% }) %>\n\n\n\n'},function(e,t){e.exports='<div class="sharelist-dialog teamworker-inner">\n    <div class="share-title teamworker-title">\n        <span class="teamworker-number">成员</span>\n        <span class="hicon icon-close teamworker-close"></span>\n    </div>\n\n    <div class="teamworker-content sharelist-content">\n        <ul class="user-list"></ul>\n    </div>\n    <div class="sharelist-content-shadow"></div>\n    <div class="teamworker-footer">\n        \n        <a href="javascript:void(0);" class="teamworker-btn add-share btn btn-ok"><% if (readOnly) {print(\'完成\')} else {print(\'添加成员\')}%></a>\n    </div>\n</div>'},function(e,t){e.exports='<% if (grandUsers.length > 0) { %>\n    <li class="share-li-title user-li-title">共享文件夹</li>\n<% } %>\n<% _.each(grandUsers, function (user) {   %>\n    <li class="grand-li share-user-li user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n        <span class="share-user-avatar">\n            <img src="<%= user.avatar%>">\n            <span class="online-circle"></span>\n        </span>\n        <span class="share-user-name ellipsis"><%= user.name %></span>\n        <span class="share-user-email ellipsis"><%= user.email || \'石墨用户\' %></span>\n        <span class="share-status share-user-identity <%= user.tplClassName %>"><%= user.tplTitle %></span>\n    </li>\n<% }) %>\n\n<% if (current.length > 0) { %>\n    <li class="share-li-title user-li-title <% if (grandUsers.length == 0) {%>no-grand<%}%>">与<%= grandUsers.length > 0 ? \'另\' : \'\' %><%= current.length %>人分享</li>\n<% } %>\n<% _.each(current, function (user) {   %>\n    <li class="share-user-li user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n        <span class="share-user-avatar">\n            <img src="<%= user.avatar%>">\n            <span class="online-circle"></span>\n        </span>\n        <span class="share-user-name ellipsis"><%= user.name %></span>\n        <span class="share-user-email ellipsis"><%= user.email || \'石墨用户\' %></span>\n        <span class="share-status share-user-identity <%= user.tplClassName %>"><%= user.tplTitle %></span>\n        <% if (user.tplClassName != \'user-admin\') { %>\n        <span class="share-status share-user-remove doc-share-icon"></span>\n        <% } %>\n        <span class="share-status share-user-loading"><img src="https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif" /></span>\n    </li>\n<% }) %>\n\n<% if (!grandUsers.length && !current.length) {%>\n    <li class="no-contact">暂无共享者</li>\n<% } %>\n'},function(e,t){e.exports='<% _.each(userList, function (user, index) {   %>\n    <li class="share-user-li user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n        <span class="share-user-avatar">\n            <img src="<%= user.avatar%>">\n            <span class="online-circle"></span>\n        </span>\n        <span class="share-user-name ellipsis"><%= user.name %></span>\n        <span class="share-user-email ellipsis team-user-email"><%= user.email || \'\' %></span>\n        <div class="team-role-select">\n            \x3c!-- 不修改自己的角色，不是管理员没权限，但是可以取消邀请自己邀请的用户, 访客没任何权限 --\x3e\n            <% if (!readOnly && (!user.isSelf && myRole==\'admin\')) { %>\n            <a class="role-select-btn dropdown-btn" href="javascript:void(0);">\n                <span class="team-sprite select-btn-icon"></span>\n            <% } else { %>\n            <a class="role-select-btn" href="javascript:void(0);">\n            <% } %>\n                <span class="role-title"><%=user.roleTitle%></span>\n            </a>\n            <div class="role-dropdown-wrap dropdown">\n                <div class="trangle">\n                    <span class="top"></span>\n                    <span class="down"></span>\n                </div>\n                <ul class="team-role-list">\n                    <li action-type="admin" class="team-role-item <%= (user.role == \'admin\') ? \'checked\' : \'\' %>">\n                        <span>管理员</span>\n                        <span class="select-role-icon team-sprite"></span>\n                    </li>\n                    <li action-type="member" class="team-role-item <%= (user.role == \'member\') ? \'checked\' : \'\' %>">\n                        <span>成员</span>\n                        <span class="select-role-icon team-sprite"></span>\n                    </li>\n                    <li class="team-role-separator"></li>\n                    <li action-type="delete" class="team-role-item">\n                        <span>移除成员</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </li>\n<% }) %>\n'},function(e,t){e.exports='<% if (users.length) { %>\n  <% _.each(users, function (user) { %>\n    <li class="user-li search-li <% if (user.selected) {print(\'active\')} %> " data-user-id="<%= user.id %>" data-user-name="${user.name}" data-email="${user.email}" data-index="${user.index}">\n      <span class="icon">\n        <img src="<%= user.avatar%>">\n        <span class="online-circle"></span>\n      </span>\n      <span class="account-span">\n        <span class="account-name"><%= user.name %></span>\n        <span class="account-email"><%= user.email %></span>\n      </span>\n      <span class="hicon icon-add"></span>\n      <span class="icon-loading"><img src="https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif" /></span>\n      <span class="hicon icon-remind"></span>\n    </li>\n  <% }) %>\n<% } else { %>\n  <li class="user-not-found">无搜索结果</li>\n<% } %>'},function(e,t){e.exports='<div class="share-menu teamworker-inner">\n    <div class="share-title teamworker-title">\n        <span class="teamworker-number">添加成员</span>\n        <span class="hicon icon-close teamworker-close <%= (typeof isTeamCreator != \'undefined\' && !isTeamCreator)? \'hide\' : \'\' %>"></span>\n    </div>\n    <div class="teamworker-content share-menu-content">\n        <div class="teamworker-content-left">\n            <div class="teamworker-input-box">\n                <input class="form-control teamworker-input" type="text" autocomplete="off" placeholder="输入邮箱、搜索姓名进行添加" />\n                <a class="teamworker-input-clear" href="javascript:void(0);"><span class="hicon icon-delete"></span></a>\n                <ul class="search-list"></ul>\n            </div>\n            \n            <div class="teamworker-user-list">\n                <div class="teamworker-nobody-info hide">\n                    <span class="teamworker-nobody-text">还没有联系人</span>\n                    <span class="teamworker-nobody-text">你可以在上方<strong>输入对方邮箱</strong>直接添加</span>\n                    <% if(typeof teamId == \'undefined\' || !teamId) { %>\n                    <span class="teamworker-nobody-text">或点击下方「<strong>添加微信好友</strong>」按钮</span>\n                    <% } %>\n                </div>\n                <ul></ul>\n            </div>\n\n            <div class="search-user-list">\n                <ul></ul>\n            </div>\n\n            <div class="user-not-found"></div>\n            \n        </div>\n        <div class="teamworker-content-right">\n            <ul>\n                <li class="share-li-title teamworker-li-title invite-title">待添加成员</li>\n            </ul>\n        </div>\n    </div>\n    <div class="teamworker-list-shadow"></div>\n    <div class="invite-link-popup hide">\n        <p>微信扫一扫</p>\n        <img src="" />\n        <p>把文档发送给好友<br />邀请好友加入</p>\n        <div class="arrow-down" style="display: block;">\n          <span class="top"></span>\n          <span class="down"></span>\n        </div>\n    </div>\n    <div class="teamworker-footer">\n        <% if(typeof teamId == \'undefined\' || !teamId) { %>\n          <a href="javascript:void(0);" class="btn teamworker-btn invite-link">添加微信好友</a>\n        <% } %>\n        <a href="javascript:void(0);" class="btn btn-ok teamworker-btn invite-users disable">确定</a>\n        \x3c!-- 团队创建最后的添加成员比较特殊，可以跳过，所以按钮上处理不太一样 --\x3e\n        <a href="javascript:void(0);" class="btn teamworker-btn cancel-invite"><%= (typeof isTeamCreator != \'undefined\' && isTeamCreator)? "跳过" : "取消"%></a>\n    </div>\n</div>\n'},function(e,t,n){"use strict";var r=n(91),o=n(688),i={initialize:function(e){return this.userId=e.userId,this.currentFileGuid=e.currentFileGuid,this.syncFn=e.syncFn,this.store=e.store,this.dataArray=this._flattern(this.currentFileGuid),this},_flattern:function(e){var t=[],n=this.store.getAll();return Object.keys(n).forEach(function(e){Object.keys(n[e]).forEach(function(o){t.push(r({clientId:e},n[e][o]))})}),e?o(t,function(t){return t.guid===e?-1:1}):t},sync:function(){if(this.dataArray.length>0)try{this._syncOne(this.dataArray[0])}catch(e){console.error(e)}},_syncOne:function(e){var t=this;this.syncFn.call(null,e,function(n){t.store.remove(e.guid,e.clientId),t.dataArray.shift(),n&&t.sync()})}};e.exports=i},function(e,t,n){(function(e,n){function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function i(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function a(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function s(e){return function(t){return null==t?void 0:t[e]}}function u(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function l(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function c(e){return function(t){return e(t)}}function f(e,t){return null==e?void 0:e[t]}function d(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function p(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function h(e,t){return function(n){return e(t(n))}}function m(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function v(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(){this.__data__=an?an(null):{}}function g(e){return this.has(e)&&delete this.__data__[e]}function b(e){var t=this.__data__;if(an){var n=t[e];return n===Je?void 0:n}return Ht.call(t,e)?t[e]:void 0}function w(e){var t=this.__data__;return an?void 0!==t[e]:Ht.call(t,e)}function _(e,t){return this.__data__[e]=an&&void 0===t?Je:t,this}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(){this.__data__=[]}function T(e){var t=this.__data__,n=H(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xt.call(t,n,1),!0)}function C(e){var t=this.__data__,n=H(t,e);return n<0?void 0:t[n][1]}function S(e){return H(this.__data__,e)>-1}function O(e,t){var n=this.__data__,r=H(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(){this.__data__={hash:new v,map:new(tn||k),string:new v}}function j(e){return ge(this,e).delete(e)}function N(e){return ge(this,e).get(e)}function M(e){return ge(this,e).has(e)}function A(e,t){return ge(this,e).set(e,t),this}function I(e){var t=-1,n=e?e.length:0;for(this.__data__=new x;++t<n;)this.add(e[t])}function D(e){return this.__data__.set(e,Je),this}function L(e){return this.__data__.has(e)}function R(e){this.__data__=new k(e)}function U(){this.__data__=new k}function F(e){return this.__data__.delete(e)}function B(e){return this.__data__.get(e)}function W(e){return this.__data__.has(e)}function V(e,t){var n=this.__data__;if(n instanceof k){var r=n.__data__;if(!tn||r.length<Ge-1)return r.push([e,t]),this;n=this.__data__=new x(r)}return n.set(e,t),this}function q(e,t){var n=wn(e)||De(e)?l(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!Ht.call(e,i)||o&&("length"==i||Ee(i,r))||n.push(i);return n}function H(e,t){for(var n=e.length;n--;)if(Ie(e[n][0],t))return n;return-1}function $(e,t,n,r,o){var a=-1,s=e.length;for(n||(n=ke),o||(o=[]);++a<s;){var u=e[a];t>0&&n(u)?t>1?$(u,t-1,n,r,o):i(o,u):r||(o[o.length]=u)}return o}function Y(e,t){return e&&vn(e,t,Ye)}function K(e,t){t=Ce(t,e)?[t]:ce(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Ne(t[n++])];return n&&n==r?e:void 0}function z(e){return $t.call(e)}function G(e,t){return null!=e&&t in Object(e)}function X(e,t,n,r,o){return e===t||(null==e||null==t||!Be(e)&&!We(t)?e!==e&&t!==t:J(e,t,X,n,r,o))}function J(e,t,n,r,o,i){var a=wn(e),s=wn(t),u=rt,l=rt;a||(u=yn(e),u=u==nt?ft:u),s||(l=yn(t),l=l==nt?ft:l);var c=u==ft&&!d(e),f=l==ft&&!d(t),p=u==l;if(p&&!c)return i||(i=new R),a||_n(e)?me(e,t,n,r,o,i):ve(e,t,u,n,r,o,i);if(!(o&Ze)){var h=c&&Ht.call(e,"__wrapped__"),m=f&&Ht.call(t,"__wrapped__");if(h||m){var v=h?e.value():e,y=m?t.value():t;return i||(i=new R),n(v,y,r,o,i)}}return!!p&&(i||(i=new R),ye(e,t,n,r,o,i))}function Q(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){s=n[o];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var f=new R;if(r)var d=r(l,c,u,e,t,f);if(!(void 0===d?X(c,l,r,Qe|Ze,f):d))return!1}}return!0}function Z(e){return!(!Be(e)||Oe(e))&&(Ue(e)||d(e)?Yt:St).test(Me(e))}function ee(e){return We(e)&&Fe(e.length)&&!!xt[$t.call(e)]}function te(e){return"function"==typeof e?e:null==e?Ke:"object"==typeof e?wn(e)?ie(e[0],e[1]):oe(e):ze(e)}function ne(e){if(!xe(e))return Qt(e);var t=[];for(var n in Object(e))Ht.call(e,n)&&"constructor"!=n&&t.push(n);return t}function re(e,t){var n=-1,r=Le(e)?Array(e.length):[];return mn(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function oe(e){var t=be(e);return 1==t.length&&t[0][2]?je(t[0][0],t[0][1]):function(n){return n===e||Q(n,e,t)}}function ie(e,t){return Ce(e)&&Pe(t)?je(Ne(e),t):function(n){var r=He(n,e);return void 0===r&&r===t?$e(n,e):X(t,r,void 0,Qe|Ze)}}function ae(e,t,n){var r=-1;return t=o(t.length?t:[Ke],c(te)),u(re(e,function(e,n,i){return{criteria:o(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return de(e,t,n)})}function se(e){return function(t){return K(t,e)}}function ue(e,t){return t=Zt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Zt(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=a,r(e,this,s)}}function le(e){if("string"==typeof e)return e;if(Ve(e))return hn?hn.call(e):"";var t=e+"";return"0"==t&&1/e==-et?"-0":t}function ce(e){return wn(e)?e:gn(e)}function fe(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e===e,i=Ve(e),a=void 0!==t,s=null===t,u=t===t,l=Ve(t);if(!s&&!l&&!i&&e>t||i&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!l&&e<t||l&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!u)return-1}return 0}function de(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var u=fe(o[r],i[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return e.index-t.index}function pe(e,t){return function(n,r){if(null==n)return n;if(!Le(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function he(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===n(i[u],u,i))break}return t}}function me(e,t,n,r,o,i){var s=o&Ze,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var f=-1,d=!0,p=o&Qe?new I:void 0;for(i.set(e,t),i.set(t,e);++f<u;){var h=e[f],m=t[f];if(r)var v=s?r(m,h,f,t,e,i):r(h,m,f,e,t,i);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!a(t,function(e,t){if(!p.has(t)&&(h===e||n(h,e,r,o,i)))return p.add(t)})){d=!1;break}}else if(h!==m&&!n(h,m,r,o,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function ve(e,t,n,r,o,i,a){switch(n){case bt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gt:return!(e.byteLength!=t.byteLength||!r(new zt(e),new zt(t)));case ot:case it:case ct:return Ie(+e,+t);case at:return e.name==t.name&&e.message==t.message;case pt:case mt:return e==t+"";case lt:var s=p;case ht:var u=i&Ze;if(s||(s=m),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;i|=Qe,a.set(e,t);var c=me(s(e),s(t),r,o,i,a);return a.delete(e),c;case vt:if(pn)return pn.call(e)==pn.call(t)}return!1}function ye(e,t,n,r,o,i){var a=o&Ze,s=Ye(e),u=s.length;if(u!=Ye(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:Ht.call(t,c)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var d=!0;i.set(e,t),i.set(t,e);for(var p=a;++l<u;){c=s[l];var h=e[c],m=t[c];if(r)var v=a?r(m,h,c,t,e,i):r(h,m,c,e,t,i);if(!(void 0===v?h===m||n(h,m,r,o,i):v)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=e.constructor,g=t.constructor;y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(d=!1)}return i.delete(e),i.delete(t),d}function ge(e,t){var n=e.__data__;return Se(t)?n["string"==typeof t?"string":"hash"]:n.map}function be(e){for(var t=Ye(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Pe(o)]}return t}function we(e,t){var n=f(e,t);return Z(n)?n:void 0}function _e(e,t,n){t=Ce(t,e)?[t]:ce(t);for(var r,o=-1,i=t.length;++o<i;){var a=Ne(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;var i=e?e.length:0;return!!i&&Fe(i)&&Ee(a,i)&&(wn(e)||De(e))}function ke(e){return wn(e)||De(e)||!!(Jt&&e&&e[Jt])}function Ee(e,t){return!!(t=null==t?tt:t)&&("number"==typeof e||Ot.test(e))&&e>-1&&e%1==0&&e<t}function Te(e,t,n){if(!Be(n))return!1;var r=typeof t;return!!("number"==r?Le(n)&&Ee(t,n.length):"string"==r&&t in n)&&Ie(n[t],e)}function Ce(e,t){if(wn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ve(e))||(_t.test(e)||!wt.test(e)||null!=t&&e in Object(t))}function Se(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Oe(e){return!!Vt&&Vt in e}function xe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Bt)}function Pe(e){return e===e&&!Be(e)}function je(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Ne(e){if("string"==typeof e||Ve(e))return e;var t=e+"";return"0"==t&&1/e==-et?"-0":t}function Me(e){if(null!=e){try{return qt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ae(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Xe);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(Ae.Cache||x),n}function Ie(e,t){return e===t||e!==e&&t!==t}function De(e){return Re(e)&&Ht.call(e,"callee")&&(!Gt.call(e,"callee")||$t.call(e)==nt)}function Le(e){return null!=e&&Fe(e.length)&&!Ue(e)}function Re(e){return We(e)&&Le(e)}function Ue(e){var t=Be(e)?$t.call(e):"";return t==st||t==ut}function Fe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=tt}function Be(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function We(e){return!!e&&"object"==typeof e}function Ve(e){return"symbol"==typeof e||We(e)&&$t.call(e)==vt}function qe(e){return null==e?"":le(e)}function He(e,t,n){var r=null==e?void 0:K(e,t);return void 0===r?n:r}function $e(e,t){return null!=e&&_e(e,t,G)}function Ye(e){return Le(e)?q(e):ne(e)}function Ke(e){return e}function ze(e){return Ce(e)?s(Ne(e)):se(e)}var Ge=200,Xe="Expected a function",Je="__lodash_hash_undefined__",Qe=1,Ze=2,et=1/0,tt=9007199254740991,nt="[object Arguments]",rt="[object Array]",ot="[object Boolean]",it="[object Date]",at="[object Error]",st="[object Function]",ut="[object GeneratorFunction]",lt="[object Map]",ct="[object Number]",ft="[object Object]",dt="[object Promise]",pt="[object RegExp]",ht="[object Set]",mt="[object String]",vt="[object Symbol]",yt="[object WeakMap]",gt="[object ArrayBuffer]",bt="[object DataView]",wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_t=/^\w*$/,kt=/^\./,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,Ct=/\\(\\)?/g,St=/^\[object .+?Constructor\]$/,Ot=/^(?:0|[1-9]\d*)$/,xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt[nt]=xt[rt]=xt[gt]=xt[ot]=xt[bt]=xt[it]=xt[at]=xt[st]=xt[lt]=xt[ct]=xt[ft]=xt[pt]=xt[ht]=xt[mt]=xt[yt]=!1;var Pt="object"==typeof e&&e&&e.Object===Object&&e,jt="object"==typeof self&&self&&self.Object===Object&&self,Nt=Pt||jt||Function("return this")(),Mt="object"==typeof t&&t&&!t.nodeType&&t,At=Mt&&"object"==typeof n&&n&&!n.nodeType&&n,It=At&&At.exports===Mt,Dt=It&&Pt.process,Lt=function(){try{return Dt&&Dt.binding("util")}catch(e){}}(),Rt=Lt&&Lt.isTypedArray,Ut=Array.prototype,Ft=Function.prototype,Bt=Object.prototype,Wt=Nt["__core-js_shared__"],Vt=function(){var e=/[^.]+$/.exec(Wt&&Wt.keys&&Wt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),qt=Ft.toString,Ht=Bt.hasOwnProperty,$t=Bt.toString,Yt=RegExp("^"+qt.call(Ht).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=Nt.Symbol,zt=Nt.Uint8Array,Gt=Bt.propertyIsEnumerable,Xt=Ut.splice,Jt=Kt?Kt.isConcatSpreadable:void 0,Qt=h(Object.keys,Object),Zt=Math.max,en=we(Nt,"DataView"),tn=we(Nt,"Map"),nn=we(Nt,"Promise"),rn=we(Nt,"Set"),on=we(Nt,"WeakMap"),an=we(Object,"create"),sn=Me(en),un=Me(tn),ln=Me(nn),cn=Me(rn),fn=Me(on),dn=Kt?Kt.prototype:void 0,pn=dn?dn.valueOf:void 0,hn=dn?dn.toString:void 0;v.prototype.clear=y,v.prototype.delete=g,v.prototype.get=b,v.prototype.has=w,v.prototype.set=_,k.prototype.clear=E,k.prototype.delete=T,k.prototype.get=C,k.prototype.has=S,k.prototype.set=O,x.prototype.clear=P,x.prototype.delete=j,x.prototype.get=N,x.prototype.has=M,x.prototype.set=A,I.prototype.add=I.prototype.push=D,I.prototype.has=L,R.prototype.clear=U,R.prototype.delete=F,R.prototype.get=B,R.prototype.has=W,R.prototype.set=V;var mn=pe(Y),vn=he(),yn=z;(en&&yn(new en(new ArrayBuffer(1)))!=bt||tn&&yn(new tn)!=lt||nn&&yn(nn.resolve())!=dt||rn&&yn(new rn)!=ht||on&&yn(new on)!=yt)&&(yn=function(e){var t=$t.call(e),n=t==ft?e.constructor:void 0,r=n?Me(n):void 0;if(r)switch(r){case sn:return bt;case un:return lt;case ln:return dt;case cn:return ht;case fn:return yt}return t});var gn=Ae(function(e){e=qe(e);var t=[];return kt.test(e)&&t.push(""),e.replace(Et,function(e,n,r,o){t.push(r?o.replace(Ct,"$1"):n||e)}),t}),bn=ue(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Te(e,t[0],t[1])?t=[]:n>2&&Te(t[0],t[1],t[2])&&(t=[t[0]]),ae(e,$(t,1),[])});Ae.Cache=x;var wn=Array.isArray,_n=Rt?c(Rt):ee;n.exports=bn}).call(t,n(25),n(44)(e))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var r=n(4),o=t(r),i=n(34);Object.defineProperty(window.cow,"currentFile",{get:function(){return this._currentFile||{}},set:function(e){return this._currentFile=e,this._currentFile.typeName=i.FILE_ZH_TYPE_MAP[e.type]||"",e}}),window.cow.setCurrentFile=function(e,t){if(t){var n=window.cow.currentFile;n[t]=e,window.cow.currentFile=n}else window.cow.currentFile=e},window.cow.updateDocCurrentFile=function(e){var t=window.cow.currentFile.guid;for(var n in e){var r=e[n];window.cow.currentFile[n]=r}window.cow.currentListByGuid[t]=window.cow.currentFile},window.cow.appendCurrentFileAttribute=function(t,n){var r=window.cow.currentFile;e.isArray(r[n])&&(r[n].push(t),window.cow.currentFile=r)};var a=!0,s=function(){a?(window.cow.currentFile=window.cow.tempCurrentFile,a=!1):window.cow.currentFile=window.cow.currentFile};o.default.on("socket:connected",s),o.default.on("socket:reconnected",s)}).call(t,n(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=o(c),d=n(828),p=o(d),h=n(830),m=o(h),v=n(831),y=o(v),g=n(832),b=o(g),w=n(833),_=o(w),k=n(834),E=o(k),T=n(835),C=o(T),S=n(836),O=o(S),x=n(837),P=o(x),j=n(838),N=o(j),M=n(839),A=o(M),I=n(840),D=o(I),L=n(841),R=o(L),U=n(499),F=o(U),B={purchase:function(e){return(0,F.default)(e).when("renew",function(){return m.default}).when("supplementary",function(){return y.default}).others(function(){return p.default}).done()},"alipay-qrcode":function(){return b.default},"payment-success":function(){return _.default},"payment-failure":function(){return E.default},"transfers-inventory":function(){return C.default},"confirm-invoice-info":function(){return O.default},"confirm-VATInvoice-info":function(){return P.default},"fill-invoice-info":function(){return N.default},"thanks-to-buy":function(){return A.default},"waiting-pay":function(){return D.default},"cancel-order":function(){return R.default}},W=5,V=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.data&&e.data.page,s=cow.currentUser.team.membership;return n.state={current:o||"purchase",data:u({},n.props.data,{memberCount:r.max([s&&s.memberCount||0,W]),needRefresh:!1})},n.onNext=n.onNext.bind(n),n}return s(t,e),l(t,null,[{key:"propTypes",get:function(){return{data:c.PropTypes.object,open:c.PropTypes.bool,type:c.PropTypes.string,onClose:c.PropTypes.func,currentUser:c.PropTypes.object,team:c.PropTypes.object}}}]),l(t,[{key:"onNext",value:function(e,t){this.setState({current:e,data:u({},this.state.data,t)})}},{key:"renderComponent",value:function(e){var t=this.props,n=t.open,r=t.onClose,o=t.type,i=B[e](o),a=this.props.team;return f.default.createElement(i,{open:n,onClose:this.state.data.needRefresh?function(){return location.replace(location.pathname)}:r,onNext:this.onNext,data:this.state.data,type:o,currentUser:this.props.currentUser,team:a})}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{id:"enterprise-payment"},(0,F.default)(this.state.current).when("purchase",function(){return e.renderComponent("purchase")}).when("alipay-qrcode",function(){return e.renderComponent("alipay-qrcode")}).when("payment-success",function(){return e.renderComponent("payment-success")}).when("payment-failure",function(){return e.renderComponent("payment-failure")}).when("transfers-inventory",function(){return e.renderComponent("transfers-inventory")}).when("confirm-invoice-info",function(){return e.renderComponent("confirm-invoice-info")}).when("confirm-VATInvoice-info",function(){return e.renderComponent("confirm-VATInvoice-info")}).when("fill-invoice-info",function(){return e.renderComponent("fill-invoice-info")}).when("thanks-to-buy",function(){return e.renderComponent("thanks-to-buy")}).when("waiting-pay",function(){return e.renderComponent("waiting-pay")}).when("cancel-order",function(){return e.renderComponent("cancel-order")}).done())}}]),t}(c.Component);t.default=V,e.exports=t.default}).call(t,n(1))},,,,,,,,,,,function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=i(f),p=n(49),h=i(p),m=n(469),v=n(499),y=i(v),g=n(500),b=n(829),w=i(b),_=0,k={},E=function(e){var t=e.index,n=e.duration,r=e.price,o=e.active,i=e.originPrice,a=e.discount,s=e.loading,u=e.onClick;return d.default.createElement("div",{className:o?"option-outer-border active":"option-outer-border",onClick:function(){u(t)}},s||0===r?d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"正在获取价格...")):d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"¥"," ",r," ","/"," ","人",i&&a?d.default.createElement("span",{className:"origin-price"},"¥ ",i):null),a?d.default.createElement("div",{className:"discount "+a}):null))};E.propTypes={index:f.PropTypes.number,duration:f.PropTypes.string,price:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),active:f.PropTypes.bool,originPrice:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),discount:f.PropTypes.string,loading:f.PropTypes.bool,onClick:f.PropTypes.func};var T=function(e){var t=e.id,n=e.icon,r=e.text,o=e.active,i=e.onClick;return d.default.createElement("div",{onClick:function(){i(t)},className:o?"option-outer-border active":"option-outer-border"},d.default.createElement("div",{className:"option "+n},r))};T.propTypes={id:f.PropTypes.number,icon:f.PropTypes.string,text:f.PropTypes.string,active:f.PropTypes.bool,onClick:f.PropTypes.func};var C=function(e){var t=e.children,n=e.checked,r=e.onClick;return d.default.createElement("div",{className:"checkbox noselect "+(n?"checked":"")},d.default.createElement("span",{onClick:r},t))};C.propTypes={checked:f.PropTypes.bool,onClick:f.PropTypes.func,children:f.PropTypes.node};var S=[{index:1,month:12,text:"1 年"},{index:2,month:24,text:"2 年"}],O=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.data.memberCount||0,o={memberCount:r,recentMembersCount:0,unitPrice:216,quantity:{min:5,realValue:r,value:r,error:null},price:{selectedIndex:0,real:[0,0],original:[0,0],loading:!1},payment:{selectedId:1},agree:{checked:!1,error:!1},ajaxError:null,loadingDuringSubmitting:!1},i=e.data.purchase?e.data.purchase:{quantity:null};return n.state=l({},o,i,{quantity:l({},o.quantity,i.quantity),loadingDuringSubmitting:!1,showRecentMembers:!1}),n.onQuantityChange=n.onQuantityChange.bind(n),n.onPriceChange=n.onPriceChange.bind(n),n.onPaymentChange=n.onPaymentChange.bind(n),n.onAgreeChange=n.onAgreeChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.ajaxRetry=n.ajaxRetry.bind(n),n.renderContent=n.renderContent.bind(n),n.hideRecentMembers=n.hideRecentMembers.bind(n),n.renderRecentMembers=n.renderRecentMembers.bind(n),n.showRecentMembers=n.showRecentMembers.bind(n),n}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{onClose:f.PropTypes.func,open:f.PropTypes.bool,data:f.PropTypes.object,onNext:f.PropTypes.func,type:f.PropTypes.string,currentUser:f.PropTypes.object,team:f.PropTypes.object}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),c(t,[{key:"componentDidMount",value:function(){this.getSumPrice(),this.getRecentMembersCount()}},{key:"componentWillReceiveProps",value:function(e){var t=e.data.memberCount;this.setState({memberCount:t,quantity:l({},this.state.quantity,{value:t,realValue:t,error:this.checkMemberCount(t)})})}},{key:"componentDidUpdate",value:function(e,t){t.quantity.realValue===this.state.quantity.realValue&&t.quantity.error===this.state.quantity.error||this.getSumPrice()}},{key:"ajaxRetry",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(){t[e].apply(t,r)}}},{key:"calculateSumPrice",value:function(e,t,n){Promise.all(S.map(function(t){return(0,m.ajaxGet)("/smapi/orders/action/calculate?type=team&duration="+t.month+"&memberCount="+e+"&detail=1")})).then(function(n){var r=n.map(function(e){return(0,g.getAmount)(e.data.real)}),o=n.map(function(e){return(0,g.getAmount)(e.data.original)});"function"==typeof t&&t(e,r,o)}).catch(function(){"function"==typeof n&&n(e)})}},{key:"getSumPrice",value:function(){var e=this,t=this.state.quantity.realValue;if(!(t<=0)){var n=t===this.state.quantity.min||k[t]?0:800;n>0&&this.setState({price:l({},this.state.price,{loading:!0})}),setTimeout(function(){if(_===t){var n=k[t];n?e.setState({price:l({},e.state.price,{real:n.real,original:n.original,loading:!1}),ajaxError:null}):e.calculateSumPrice(t,function(t,n,r){e.state.quantity.error||(k[t]={real:n,original:r},e.state.quantity.realValue===t&&e.setState({price:l({},e.state.price,{real:n,original:r,loading:!1}),ajaxError:null}))},function(){e.setState({price:l({},e.state.price),ajaxError:{functionName:"getSumPrice",functionParams:[]}})})}else _=t,e.getSumPrice()},n)}}},{key:"checkMemberCount",value:function(e){var t=this.state.quantity;return isNaN(e)?"请输入数字":r.isInteger(e)?e<0?"请输入正整数":e<r.max([t.min,this.state.memberCount])?e<t.min?"最少购买 "+t.min+" 人":"不可小于当前企业人数 "+this.state.memberCount:null:"请输入整数"}},{key:"onQuantityChange",value:function(e){var t=this,n=(0,g.allowNumber)(e.target.value);null===this.checkMemberCount(n)?this.setState({quantity:l({},this.state.quantity,{value:n,realValue:n,error:null})}):(this.setState({quantity:l({},this.state.quantity,{value:n})}),setTimeout(function(){var n=(0,g.allowNumber)(e.target.value),r=t.checkMemberCount(n);null!==r&&t.setState({quantity:l({},t.state.quantity,{error:r})})},1e3))}},{key:"onPriceChange",value:function(e){var t=this.state.price;this.setState({price:l({},t,{selectedIndex:e})})}},{key:"onPaymentChange",value:function(e){var t=this.state.payment;this.setState({payment:l({},t,{selectedId:e})})}},{key:"onAgreeChange",value:function(){var e=this.state.agree;this.setState({agree:l({},e,{checked:!e.checked,error:!1})})}},{key:"navTo",value:function(e,t){var r=this,o=S[this.state.price.selectedIndex].month,i=this.state.quantity.realValue,a=(0,y.default)(e).when("alipay-qrcode","alipay_qr").when("waiting-pay","upacp").when("transfers-inventory","offline").done(),s=(0,y.default)(e).when("alipay-qrcode",{type:"team",duration:o,channel:a,member_count:i}).when("waiting-pay",{type:"team",duration:o,channel:a,member_count:i}).when("transfers-inventory",{skip_charge:1,duration:o,member_count:i,type:"team",channel:a}).done();this.setState({loadingDuringSubmitting:!0}),(0,m.ajaxPost)("/orders/create",s).then(function(o){if("alipay-qrcode"===e)r.props.onNext(e,l({},t,o.data,{purchase:r.state,needRefresh:!0}));else if("waiting-pay"===e)n.e(6).then(function(r){n(792).createPayment(o.data.charge,function(n){"success"===n?this.props.onNext(e,l({},t,o.data,{needRefresh:!0})):"fail"===n?this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1}):"cancel"===n&&this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}.bind(null,n)).catch(n.oe);else{if("transfers-inventory"!==e)throw new Error("Unknown nextPage: "+e);r.props.onNext(e,l({},t,o.data,{needRefresh:!0}))}}).catch(function(){r.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}},{key:"onSubmit",value:function(e){var t=this;return function(){var n=t.state,r=n.payment,o=n.agree;e?1===r.selectedId?t.navTo("alipay-qrcode"):2===r.selectedId?t.navTo("waiting-pay"):3===r.selectedId&&t.navTo("transfers-inventory"):o.checked||t.setState({agree:l({},o,{error:!0})})}}},{key:"showRecentMembers",value:function(){this.setState({showRecentMembers:!0})}},{key:"hideRecentMembers",value:function(){this.setState({showRecentMembers:!1})}},{key:"getRecentMembersCount",value:function(){var e=this;o.get("/smapi/teams/mine/members/recent_count").then(function(t){0===t.code&&e.setState({recentMembersCount:t.data})})}},{key:"renderRecentMembers",value:function(){return d.default.createElement(w.default,{onClose:this.hideRecentMembers})}},{key:"renderContent",value:function(){var e=this.state,t=e.quantity,n=e.price,r=e.payment,i=e.agree,a=e.unitPrice,s=e.ajaxError,u=e.loadingDuringSubmitting,l=document.getElementById("enterprise-payment-purchase-input"),c=Math.floor(216),f=Math.floor(388.8),p=n.loading,h=n.real[n.selectedIndex],m=this.props.type,v=!t.error&&(!l||Number(l.value)>=t.min)&&i.checked&&!p,g=this.props.team||window.cow.currentUser.team||this.props.currentUser.team;return d.default.createElement("div",{id:"purchase",className:"purchase"},d.default.createElement("div",{className:"crumb-list"},d.default.createElement("span",{className:"crumb"},"确认订单"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"付款"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"填写发票信息")),(0,y.default)(m).when("supplementary",d.default.createElement("div",{className:"field first expired-time"},d.default.createElement("header",null,"当前企业版到期时间"),d.default.createElement("div",{className:"text"},"2017 / 07 / 12"))).others(null).done(),(0,y.default)(m).when("supplementary",null).others(d.default.createElement("div",{className:"field price-options"},d.default.createElement("header",null,"购买时长"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(E,{index:0,active:0===n.selectedIndex,duration:S[0].text,price:c,originPrice:216,onClick:this.onPriceChange,loading:!1}),d.default.createElement(E,{index:1,active:1===n.selectedIndex,duration:S[1].text,price:f,originPrice:432,discount:"nine",onClick:this.onPriceChange,loading:!1})))).done(),d.default.createElement("div",{className:"field quantity "+(0,y.default)(m).when("supplementary","").others("first").done()},d.default.createElement("header",null,"购买席位数"),d.default.createElement("div",{className:"input",onClick:function(){return o("#enterprise-payment-purchase-input").select()}},(0,y.default)(m).when("supplementary",d.default.createElement("label",{className:"placeholder"},a," 元 / 人")).done(),t.error?d.default.createElement("label",{className:"error"},t.error):null,d.default.createElement("input",{id:"enterprise-payment-purchase-input",type:"text",maxLength:"3",onChange:this.onQuantityChange,value:t.value})),g.dingtalkCorp?null:d.default.createElement("div",{className:"purchase-seatTips"},"您的企业最近有 ",d.default.createElement("span",{className:"count",onClick:this.showRecentMembers},this.state.recentMembersCount,"人"),"  使用石墨文档，推荐您购买 ",this.state.recentMembersCount+5," 席位")),d.default.createElement("div",{className:"field payment-options"},d.default.createElement("header",null,"支付方式"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(T,{id:1,icon:"alipay",text:"支付宝",active:1===r.selectedId,onClick:this.onPaymentChange}),d.default.createElement(T,{id:3,icon:"transfers",text:"对公转账",active:3===r.selectedId,onClick:this.onPaymentChange}))),d.default.createElement("div",{className:"field sum-price"},d.default.createElement("div",{className:"sum-price-title"},"总计："),p?d.default.createElement("div",{className:"sum-price-number-loading"},"正在获取价格..."):d.default.createElement("div",{className:"sum-price-number"},"¥"," ",h,".00")),d.default.createElement("div",{className:"field agree"},s?d.default.createElement("span",{className:"error"},"网络异常，请重试"):i.error?d.default.createElement("span",{className:"error"},"请勾选同意"):null,d.default.createElement(C,{checked:i.checked,onClick:this.onAgreeChange},"我已阅读并同意签署",d.default.createElement("a",{target:"_blank",href:"https://shimo.im/agreement"},"《服务协议》"))),u?d.default.createElement("div",{className:"fluid-submit-button"},"...跳转中"):d.default.createElement("div",{className:"fluid-submit-button "+(v?"enabled":""),onClick:this.onSubmit(v)},p?"正在获取价格...":"下一步"))}},{key:"render",value:function(){var e=this.props.type,t=(0,y.default)(e).when("renew","续约企业版").when("supplementary","补充席位").others("购买企业版").done();return this.state.showRecentMembers?d.default.createElement(h.default,{key:"1",ref:"flatDialog",customClass:"purchase-recentMembers",title:"最近使用石墨文档的成员",open:this.props.open,onClose:this.hideRecentMembers,bodyTpl:this.renderRecentMembers}):d.default.createElement(h.default,{key:"2",customClass:"purchase-dialog"+(this.props.data.loading?" purchase-loading":""),ref:"flatDialog",title:t,hasCloseButton:!0,onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(f.Component);t.default=O,e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={recentMembers:[]},n.close=n.close.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{onClose:l.PropTypes.func}}}]),u(t,[{key:"componentDidMount",value:function(){var e=this;r.get("/smapi/teams/mine/members/recent").then(function(t){0===t.code&&e.setState({recentMembers:t.data})})}},{key:"close",value:function(){this.props.onClose()}},{key:"render",value:function(){return c.default.createElement("div",{className:"recentMembersList"},c.default.createElement("div",{className:"member-header"},c.default.createElement("div",{className:"header-member"},"成员"),c.default.createElement("div",{className:"header-email"},"邮箱"),c.default.createElement("div",{className:"header-lastVisit"},"上次登陆时间")),this.state.recentMembers.map(function(e){return c.default.createElement("div",{key:e.id,className:"row"},c.default.createElement("div",{className:"avatarAndName"},c.default.createElement("img",{className:"avatar",src:e.avatar,alt:""}),c.default.createElement("div",{className:"name"},e.name)),c.default.createElement("div",{className:"email"},e.email),c.default.createElement("div",{className:"lastVisit"},e.last_visit.slice(0,-14).replace(/-/g,"/")))}),c.default.createElement("div",{className:"bottom"},c.default.createElement("div",{className:"submit-button enabled",onClick:this.close},"知道了")))}}]),t}(c.default.Component);t.default=f,e.exports=t.default}).call(t,n(2))},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=i(f),p=n(49),h=i(p),m=n(469),v=n(499),y=i(v),g=n(500),b=0,w={},_=function(e){var t=e.index,n=e.duration,r=e.price,o=e.active,i=e.originPrice,a=e.discount,s=e.loading,u=e.onClick;return d.default.createElement("div",{className:o?"option-outer-border active":"option-outer-border",onClick:function(){u(t)}},s||0===r?d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"正在获取价格...")):d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"¥"," ",r," ","/"," ","人",i&&a?d.default.createElement("span",{className:"origin-price"},"¥ ",i):null),a?d.default.createElement("div",{className:"discount "+a}):null))};_.propTypes={index:f.PropTypes.number,duration:f.PropTypes.string,price:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),active:f.PropTypes.bool,originPrice:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),discount:f.PropTypes.string,loading:f.PropTypes.bool,onClick:f.PropTypes.func};var k=function(e){var t=e.id,n=e.icon,r=e.text,o=e.active,i=e.onClick;return d.default.createElement("div",{onClick:function(){i(t)},className:o?"option-outer-border active":"option-outer-border"},d.default.createElement("div",{className:"option "+n},r))};k.propTypes={id:f.PropTypes.number,icon:f.PropTypes.string,text:f.PropTypes.string,active:f.PropTypes.bool,onClick:f.PropTypes.func};var E=function(e){var t=e.children,n=e.checked,r=e.onClick;return d.default.createElement("div",{className:"checkbox noselect "+(n?"checked":"")},d.default.createElement("span",{onClick:r},t))};E.propTypes={checked:f.PropTypes.bool,onClick:f.PropTypes.func,children:f.PropTypes.node};var T=[{index:1,month:12,text:"1 年"},{index:2,month:24,text:"2 年"}],C=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.data.memberCount||0,i={memberCount:o,quantity:{min:5,value:o,realValue:o,error:null},price:{selectedIndex:0,real:[0,0],original:[0,0],sum:[0,0],loading:!1},payment:{selectedId:1},agree:{checked:!1,error:!1},ajaxError:null,loadingDuringSubmitting:!1},u=e.data.purchase?l({},e.data.purchase,{quantity:{value:e.data.purchase.quantity.realValue+e.data.memberCount,realValue:e.data.purchase.quantity.realValue+e.data.memberCount}}):{quantity:null};return n.state=r.merge({},i,u,{quantity:r.merge({},i.quantity,i.propState),loadingDuringSubmitting:!1}),n.onQuantityChange=n.onQuantityChange.bind(n),n.onPriceChange=n.onPriceChange.bind(n),n.onPaymentChange=n.onPaymentChange.bind(n),n.onAgreeChange=n.onAgreeChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.ajaxRetry=n.ajaxRetry.bind(n),n.renderContent=n.renderContent.bind(n),n}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{data:f.PropTypes.object,onNext:f.PropTypes.func,onClose:f.PropTypes.func,open:f.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),c(t,[{key:"componentDidMount",value:function(){this.getSumPrice()}},{key:"componentWillReceiveProps",value:function(e){var t=e.data.memberCount;this.setState({memberCount:t,quantity:l({},this.state.quantity,{value:t,realValue:t,error:this.checkMemberCount(t)})})}},{key:"componentDidUpdate",value:function(e,t){t.quantity.realValue===this.state.quantity.realValue&&t.quantity.error===this.state.quantity.error||this.getSumPrice()}},{key:"ajaxRetry",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(){t[e].apply(t,r)}}},{key:"calculateSumPrice",value:function(e,t,n){var r=this;Promise.all(T.map(function(t){return(0,m.ajaxGet)("/smapi/orders/action/calculate?type=team&duration="+t.month+"&memberCount="+e+"&detail=1")})).then(function(n){var o=n.map(function(e){return Math.floor((0,g.getAmount)(e.data.real/r.state.quantity.realValue))}),i=n.map(function(e){return Math.floor((0,g.getAmount)(e.data.original/r.state.quantity.realValue))}),a=n.map(function(e){return(0,g.getAmount)(e.data.real)});"function"==typeof t&&t(e,o,i,a)}).catch(function(){"function"==typeof n&&n(e)})}},{key:"getSumPrice",value:function(){var e=this,t=this.state.quantity.realValue-this.state.memberCount,n=0===t||w[t]?0:800;n>0&&this.setState({price:l({},this.state.price,{loading:!0})}),setTimeout(function(){if(b===t){var n=w[t];n?e.setState({price:l({},e.state.price,{real:n.real,original:n.original,sum:n.sum,loading:!1}),ajaxError:null}):e.calculateSumPrice(t,function(t,n,r,o){e.state.quantity.error||(w[t]={real:n,original:r,sum:o},e.state.quantity.realValue-e.state.memberCount===t&&e.setState({price:l({},e.state.price,{real:n,original:r,sum:o,loading:!1}),ajaxError:null}))},function(){e.setState({price:l({},e.state.price),ajaxError:{functionName:"getSumPrice",functionParams:[]}})})}else b=t,e.getSumPrice()},n)}},{key:"checkMemberCount",value:function(e){var t=this.state.quantity;return isNaN(e)?"请输入数字":r.isInteger(e)?e<0?"请输入正整数":e<r.max([t.min,this.state.memberCount])?e<t.min?"最少购买 "+t.min+" 人":"不可小于当前企业席位数 "+this.state.memberCount:null:"请输入整数"}},{key:"onQuantityChange",value:function(e){var t=this,n=(0,g.allowNumber)(e.target.value);null===this.checkMemberCount(n)?this.setState({quantity:l({},this.state.quantity,{value:n,realValue:n,error:null})}):(this.setState({quantity:l({},this.state.quantity,{value:n})}),setTimeout(function(){var n=(0,g.allowNumber)(e.target.value),r=t.checkMemberCount(n);null!==r&&t.setState({quantity:l({},t.state.quantity,{error:r})})},1e3))}},{key:"onPriceChange",value:function(e){var t=this.state.price;this.setState({price:l({},t,{selectedIndex:e})})}},{key:"onPaymentChange",value:function(e){var t=this.state.payment;this.setState({payment:l({},t,{selectedId:e})})}},{key:"onAgreeChange",value:function(){var e=this.state.agree;this.setState({agree:l({},e,{checked:!e.checked,error:!1})})}},{key:"navTo",value:function(e,t){var r=this,o=T[this.state.price.selectedIndex].month,i=this.state.quantity.realValue,a=this.state.memberCount,s=(0,y.default)(e).when("alipay-qrcode","alipay_qr").when("waiting-pay","upacp").when("transfers-inventory","offline").done(),u=(0,y.default)(e).when("alipay-qrcode",{type:"team",duration:o,channel:s,member_count:i-a}).when("waiting-pay",{type:"team",duration:o,channel:s,member_count:i-a}).when("transfers-inventory",{skip_charge:1,duration:o,member_count:i-a,type:"team",channel:s}).done();this.setState({loadingDuringSubmitting:!0}),(0,m.ajaxPost)("/orders/create",u).then(function(o){if("alipay-qrcode"===e)r.props.onNext(e,l({},t,o.data,{purchase:l({},r.state,{quantity:{realValue:r.state.quantity.realValue-r.state.memberCount,value:r.state.quantity.realValue-r.state.memberCount}}),needRefresh:!0}));else if("waiting-pay"===e)n.e(6).then(function(r){n(792).createPayment(o.data.charge,function(n){"success"===n?this.props.onNext(e,l({},t,o.data,{needRefresh:!0})):"fail"===n?this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1}):"cancel"===n&&this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}.bind(null,n)).catch(n.oe);else{if("transfers-inventory"!==e)throw new Error("Unknown nextPage: "+e);r.props.onNext(e,l({},t,o.data,{needRefresh:!0}))}}).catch(function(){r.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}},{key:"onSubmit",value:function(e){var t=this;return function(){var n=t.state,r=n.payment,o=n.agree;e?1===r.selectedId?t.navTo("alipay-qrcode"):2===r.selectedId?t.navTo("waiting-pay"):3===r.selectedId&&t.navTo("transfers-inventory"):o.checked||t.setState({agree:l({},o,{error:!0})})}}},{key:"renderContent",value:function(){var e=this.state,t=e.quantity,n=e.price,r=e.payment,i=e.agree,a=e.ajaxError,s=e.loadingDuringSubmitting,u=document.getElementById("enterprise-payment-purchase-input"),l=n.real[0],c=n.real[1],f=n.loading,p=n.original[0],h=n.original[1],m=n.sum[n.selectedIndex],v=!t.error&&u&&Number(u.value)>=t.min&&i.checked&&!f;return d.default.createElement("div",{id:"renew",className:"purchase"},d.default.createElement("div",{className:"crumb-list"},d.default.createElement("span",{className:"crumb"},"确认订单"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"付款"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"填写发票信息")),d.default.createElement("div",{className:"field price-options"},d.default.createElement("header",null,"续约时长"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(_,{index:0,active:0===n.selectedIndex,duration:T[0].text,price:l,originPrice:p,loading:f,onClick:this.onPriceChange}),d.default.createElement(_,{index:1,active:1===n.selectedIndex,duration:T[1].text,price:c,originPrice:h,discount:"nine",loading:f,onClick:this.onPriceChange}))),d.default.createElement("div",{className:"field quantity first"},d.default.createElement("header",null,"续约席位数"),d.default.createElement("div",{className:"input",onClick:function(){return o("#enterprise-payment-purchase-input").select()}},t.error?d.default.createElement("label",{className:"error"},t.error):null,d.default.createElement("input",{id:"enterprise-payment-purchase-input",type:"text",disabled:!0,maxLength:"3",onChange:this.onQuantityChange,value:t.value}))),d.default.createElement("div",{className:"field payment-options"},d.default.createElement("header",null,"支付方式"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(k,{id:1,icon:"alipay",text:"支付宝",active:1===r.selectedId,onClick:this.onPaymentChange}),d.default.createElement(k,{id:3,icon:"transfers",text:"对公转账",active:3===r.selectedId,onClick:this.onPaymentChange}))),d.default.createElement("div",{className:"field sum-price"},d.default.createElement("div",{className:"sum-price-title"},"总计："),f?d.default.createElement("div",{className:"sum-price-number-loading"},"正在获取价格..."):d.default.createElement("div",{className:"sum-price-number"},"¥"," ",m,".00")),d.default.createElement("div",{className:"field agree"},a?d.default.createElement("span",{className:"error"},"网络异常，请重试"):i.error?d.default.createElement("span",{className:"error"},"请勾选同意"):null,d.default.createElement(E,{checked:i.checked,onClick:this.onAgreeChange},"我已阅读并同意签署",d.default.createElement("a",{target:"_blank",href:"https://shimo.im/agreement"},"《服务协议》"))),s?d.default.createElement("div",{className:"fluid-submit-button"},"...跳转中"):d.default.createElement("div",{className:"fluid-submit-button "+(v?"enabled":""),onClick:this.onSubmit(v)},f?"正在获取价格...":"下一步"))}},{key:"render",value:function(){return d.default.createElement(h.default,{customClass:"purchase-dialog"+(this.props.data.loading?" purchase-loading":""),ref:"flatDialog",hasCloseButton:!0,title:"续约企业版",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(f.Component);t.default=C,e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=i(f),p=n(49),h=i(p),m=n(469),v=n(499),y=i(v),g=n(500),b=0,w={},_=function(e){var t=e.id,n=e.icon,r=e.text,o=e.active,i=e.onClick;return d.default.createElement("div",{onClick:function(){i(t)},className:o?"option-outer-border active":"option-outer-border"},d.default.createElement("div",{className:"option "+n},r))};_.propTypes={id:f.PropTypes.number,icon:f.PropTypes.string,text:f.PropTypes.string,active:f.PropTypes.bool,onClick:f.PropTypes.func};var k=function(e){var t=e.children,n=e.checked,r=e.onClick;return d.default.createElement("div",{className:"checkbox noselect "+(n?"checked":"")},d.default.createElement("span",{onClick:r},t))};k.propTypes={checked:f.PropTypes.bool,onClick:f.PropTypes.func};var E=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r={unitPrice:0,quantity:{min:1,value:1,realValue:1,error:null},price:{loading:!1},sumPrice:0,payment:{selectedId:1},agree:{checked:!1,error:!1},ajaxError:null,loadingDuringSubmitting:!1},o=e.data.purchase?e.data.purchase:{quantity:null};return n.state=l({},r,e.data.purchase,{quantity:l({},r.quantity,o.quantity),loadingDuringSubmitting:!1}),n.onQuantityChange=n.onQuantityChange.bind(n),n.onPaymentChange=n.onPaymentChange.bind(n),n.onAgreeChange=n.onAgreeChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.ajaxRetry=n.ajaxRetry.bind(n),n.renderContent=n.renderContent.bind(n),n}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{data:f.PropTypes.object,onClose:f.PropTypes.func,open:f.PropTypes.bool,onNext:f.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),c(t,[{key:"componentDidMount",value:function(){this.getSumPrice()}},{key:"componentDidUpdate",value:function(e,t){t.quantity.realValue===this.state.quantity.realValue&&t.quantity.error===this.state.quantity.error||this.getSumPrice()}},{key:"ajaxRetry",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(){t[e].apply(t,r)}}},{key:"calculateSumPrice",value:function(e,t,n){(0,m.ajaxGet)("/smapi/orders/action/calculate?type=team&duration=0&memberCount="+e).then(function(n){var r=(0,g.getAmount)(n.data),o=(0,g.getAmount)(n.data/e);"function"==typeof t&&t(e,r,o)}).catch(function(){"function"==typeof n&&n(e)})}},{key:"getSumPrice",value:function(){var e=this,t=this.state.quantity.realValue,n=t===this.state.quantity.min||w[t]?0:800;n>0&&this.setState({price:l({},this.state.price,{loading:!0})}),setTimeout(function(){if(b===t){var n=w[t];n?e.setState({price:l({},e.state.price,{loading:!1}),sumPrice:n.sumPrice,unitPrice:n.unitPrice,ajaxError:null}):e.calculateSumPrice(t,function(t,n,r){e.state.quantity.error||(w[t]={sumPrice:n,unitPrice:r},e.setState({price:l({},e.state.price,{loading:!1}),sumPrice:n,unitPrice:r,ajaxError:null}))},function(){e.setState({ajaxError:{functionName:"getSumPrice",functionParams:[]}})})}else b=t,e.getSumPrice()},n)}},{key:"checkMemberCount",value:function(e){var t=this.state.quantity;return isNaN(e)?"请输入数字":r.isInteger(e)?e<0?"请输入正整数":e<t.min?"最少购买 "+t.min+" 人":null:"请输入整数"}},{key:"onQuantityChange",value:function(e){var t=this,n=(0,g.allowNumber)(e.target.value);null===this.checkMemberCount(n)?this.setState({quantity:l({},this.state.quantity,{value:n,realValue:n,error:null})}):(this.setState({quantity:l({},this.state.quantity,{value:n})}),setTimeout(function(){var n=(0,g.allowNumber)(e.target.value),r=t.checkMemberCount(n);null!==r&&t.setState({quantity:l({},t.state.quantity,{error:r})})},1e3))}},{key:"onPaymentChange",value:function(e){var t=this.state.payment;this.setState({payment:l({},t,{selectedId:e})})}},{key:"onAgreeChange",value:function(){var e=this.state.agree;this.setState({agree:l({},e,{checked:!e.checked,error:!1})})}},{key:"navTo",value:function(e,t){var r=this,o=this.state.quantity.realValue,i=(0,y.default)(e).when("alipay-qrcode","alipay_qr").when("waiting-pay","upacp").when("transfers-inventory","offline").done(),a=(0,y.default)(e).when("alipay-qrcode",{type:"team",duration:0,channel:i,member_count:o}).when("waiting-pay",{type:"team",duration:0,channel:i,member_count:o}).when("transfers-inventory",{skip_charge:1,duration:0,member_count:o,type:"team",channel:i}).done();this.setState({loadingDuringSubmitting:!0}),(0,m.ajaxPost)("/orders/create",a).then(function(o){if("alipay-qrcode"===e)r.props.onNext(e,l({},t,o.data,{purchase:r.state,needRefresh:!0}));else if("waiting-pay"===e)n.e(6).then(function(r){n(792).createPayment(o.data.charge,function(n){"success"===n?this.props.onNext(e,l({},t,o.data,{needRefresh:!0})):"fail"===n?this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1}):"cancel"===n&&this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}.bind(null,n)).catch(n.oe);else{if("transfers-inventory"!==e)throw new Error("Unknown nextPage: "+e);r.props.onNext(e,l({},t,o.data,{needRefresh:!0}))}}).catch(function(){r.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}},{key:"onSubmit",value:function(e){var t=this;return function(){var n=t.state,r=n.payment,o=n.agree;e?1===r.selectedId?t.navTo("alipay-qrcode"):2===r.selectedId?t.navTo("waiting-pay"):3===r.selectedId&&t.navTo("transfers-inventory",{durationDesc:"",discount:""}):o.checked||t.setState({agree:l({},o,{error:!0})})}}},{key:"renderContent",value:function(){var e=this.state,t=e.quantity,n=e.payment,r=e.agree,i=e.unitPrice,a=e.price,s=e.ajaxError,u=e.sumPrice,l=e.loadingDuringSubmitting,c=document.getElementById("enterprise-payment-purchase-input"),f=a.loading,p=!t.error&&c&&Number(c.value)>=t.min&&r.checked&&!f,h=function(){var e=function(e){return e>0&&e<10?"0"+e:e},t=new Date(cow.currentUser.accountTypeExpiredAt);return t.getFullYear()+" / "+e(t.getMonth()+1)+" / "+e(t.getDate())}();return d.default.createElement("div",{className:"purchase"},d.default.createElement("div",{className:"crumb-list"},d.default.createElement("span",{className:"crumb"},"确认订单"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"付款"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"填写发票信息")),d.default.createElement("div",{className:"field first expired-time"},d.default.createElement("header",null,"当前企业版到期时间"),d.default.createElement("div",{className:"text"},h)),d.default.createElement("div",{className:"field quantity"},d.default.createElement("header",null,"补充席位数"),d.default.createElement("div",{className:"input",onClick:function(){return o("#enterprise-payment-purchase-input").select()}},f&&!i?null:d.default.createElement("label",{className:"placeholder"},i," 元 / 人"),t.error?d.default.createElement("label",{className:"error"},t.error):null,d.default.createElement("input",{id:"enterprise-payment-purchase-input",type:"text",maxLength:"3",onChange:this.onQuantityChange,value:t.value}))),d.default.createElement("div",{className:"field payment-options"},d.default.createElement("header",null,"支付方式"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(_,{id:1,icon:"alipay",text:"支付宝",active:1===n.selectedId,onClick:this.onPaymentChange}),d.default.createElement(_,{id:3,icon:"transfers",text:"对公转账",active:3===n.selectedId,onClick:this.onPaymentChange}))),d.default.createElement("div",{className:"field agree"},s?d.default.createElement("span",{className:"error"},"网络异常，请重试"):r.error?d.default.createElement("span",{className:"error"},"请勾选同意"):null,d.default.createElement(k,{checked:r.checked,onClick:this.onAgreeChange},"我已阅读并同意签署",d.default.createElement("a",{target:"_blank",href:"https://shimo.im/agreement"},"《服务协议》"))),l?d.default.createElement("div",{className:"fluid-submit-button"},"...跳转中"):d.default.createElement("div",{className:"fluid-submit-button "+(p?"enabled":""),onClick:this.onSubmit(p)},f?"正在获取价格...":"确认支付 ¥ "+u))}},{key:"render",value:function(){return d.default.createElement(h.default,{customClass:"purchase-dialog"+(this.props.data.loading?" purchase-loading":""),ref:"flatDialog",hasCloseButton:!0,title:"补充席位",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(f.Component);t.default=E,e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(49),d=r(f),p=n(499),h=r(p),m=n(8),v=r(m),y=n(469),g=n(500),b=n(4),w=r(b),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.navTo=n.navTo.bind(n),n.onClickHere=n.onClickHere.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{onNext:l.PropTypes.func,data:l.PropTypes.object,type:l.PropTypes.string,onClose:l.PropTypes.func,open:l.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),u(t,[{key:"componentDidMount",value:function(){w.default.attach("enterprise-payment:payment-success",this.navToPaymentSuccess,{scope:this,isAsync:!0})}},{key:"componentWillUnmount",value:function(){w.default.detach("enterprise-payment:payment-success",this.navToPaymentSuccess)}},{key:"navToPaymentSuccess",value:function(){this.props.onNext("payment-success",s({},this.props.data))}},{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,t)}}},{key:"onClickHere",value:function(){var e=this;return function(){var t=e.props.data.charge.id;e.setState({loading:!0}),(0,y.ajaxPost)("/orders/payment_succeed",{charge_id:t}).then(function(t){!0===t.data.paid?e.props.onNext("payment-success",s({},e.props.data)):e.setState({loading:!1})}).catch(function(){e.setState({loading:!1})})}}},{key:"renderContent",value:function(){var e=this.state.loading,t=this.props.data,n=function(){var e=t.charge,n=e.credential,r=n[e.channel];return v.default.getQrImageUrl(300,r)}();return c.default.createElement("div",{className:"alipay-qrcode"},c.default.createElement("div",{className:"crumb-list"},c.default.createElement("span",{className:"no-crumb back",onClick:this.navTo("purchase")},"确认订单"),c.default.createElement("span",{className:"hicon icon-breadcrumb"}),c.default.createElement("span",{className:"crumb"},"付款"),c.default.createElement("span",{className:"hicon icon-breadcrumb"}),c.default.createElement("span",{className:"no-crumb"},"填写发票信息")),c.default.createElement("div",{className:"qrcode-container"},c.default.createElement("header",null,"请用支付宝扫码完成支付"),c.default.createElement("div",{className:"qrcode",style:{backgroundImage:"url("+n+")"}}),c.default.createElement("footer",null,"扫码支付后，如果没有自动跳转",c.default.createElement("br",null),e?c.default.createElement("span",{className:"link"},"...跳转中"):c.default.createElement("span",{className:"link",onClick:this.onClickHere()},"请点这里"))))}},{key:"render",value:function(){var e=this.props.data,t=this.props.type,n=(0,g.getAmount)(e.order.amount),r=(0,h.default)(t).when("renew","续约企业版").when("supplementary","补充席位").others("购买企业版").done();return c.default.createElement(d.default,{customClass:"alipay-qrcode-dialog",ref:"flatDialog",hasCloseButton:!0,title:r+" 支付 ¥ "+n,onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(l.Component);t.default=_,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timer=null,n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool,data:u.PropTypes.object,onNext:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data;this.timer=setTimeout(function(){e.props.onNext("fill-invoice-info",t)},1500)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"navTo",value:function(e){var t=this;return function(){t.props.onNext(e)}}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"payment-success"},l.default.createElement("div",{className:"success-icon"}),l.default.createElement("div",{className:"success-text"},"支付成功"),l.default.createElement("footer",null,"如果没有自动跳转",l.default.createElement("br",null),l.default.createElement("span",{className:"link",onClick:this.navTo("fill-invoice-info")},"请点这里")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"payment-success-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool,onNext:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"navTo",value:function(e){var t=this;return function(){t.props.onNext(e)}}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"payment-failure"},l.default.createElement("header",null,"支付失败"),l.default.createElement("div",{className:"failure-text"},"如您有任何疑问，请立即联系我们的客户顾问帮助您解决"),l.default.createElement("div",{className:"telephone"},"电话 400-006-0506"),l.default.createElement("div",{className:"center"},l.default.createElement("div",{className:"submit-button enabled",onClick:this.navTo("purchase")},"重新支付")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"payment-failure-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=n(499),p=r(d),h=n(500),m=function(e){return Math.round(e/31)},v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{data:u.PropTypes.object,onClose:u.PropTypes.func,open:u.PropTypes.bool,onNext:u.PropTypes.func,type:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"navTo",value:function(e){var t=this;return function(){var n=t.props.data.order,r=t.props.type;t.props.onNext(e,{purchase:{quantity:{value:String(n.memberCount),realValue:n.memberCount,error:null},price:function(){return"normal"===r?{selectedIndex:m(n.duration)<12?0:m(n.duration)<24?1:2,real:[0,0,0],original:[0,0,0]}:"renew"===r?{selectedIndex:m(n.duration)>=24?1:0,real:[0,0],original:[0,0]}:{}}(),payment:{selectedId:3},agree:{checked:!0,error:!1},ajaxError:null,loadingDuringSubmitting:!1}})}}},{key:"renderContent",value:function(){var e=this.props.type,t=this.props.data.order,n=t.memberCount,r=t.amount,o=t.orderNo,i=t.duration,a=m(i),s=a<12?" "+a+" 个月":a>=12&&a<24?" 1 年":" 2 年",u="",c=function(){return"renew"===e?0===n?"延长"+s+"使用期"+u:"补充 "+n+" 席位，延长"+s+"使用期"+u:"supplementary"===e?"补充 "+n+" 席位":"购买 "+n+" 席位，"+s+"使用期"+u}(),f=cow.currentUser.team.enterpriseId.length<8?"0"+cow.currentUser.team.enterpriseId:cow.currentUser.team.enterpriseId;return l.default.createElement("div",{className:"transfers-inventory"},l.default.createElement("section",null,l.default.createElement("div",{className:"two-column-grid"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"转账金额"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,(0,h.getAmount)(r)," 元"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"收款公司名"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"武汉初心科技有限公司"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"收款账户"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"1279 0701 9410 802 ",f))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"开户行"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"招商银行武汉分行光谷科技支行"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"开户地"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"武汉"))))),l.default.createElement("section",null,l.default.createElement("div",{className:"two-column-grid"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"订单号"),l.default.createElement("div",{className:"right-column"},o)),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"订单详情"),l.default.createElement("div",{className:"right-column"},c)))),l.default.createElement("section",null,l.default.createElement("div",{className:"noting"},"请于 ",l.default.createElement("strong",null,"10日")," 内完成转账，我们会尽快确认到账并开通服务。如您有任何疑问，请立即联系我们的客户顾问帮助您解决，电话 400-006-0506")),l.default.createElement("footer",null,l.default.createElement("div",{className:"submit-button enabled",onClick:this.props.onClose},"知道了"),l.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("purchase")},"更改支付方式")))}},{key:"render",value:function(){var e=this.props.data.order.amount,t=this.props.type,n=(0,p.default)(t).when("renew","续约企业版").when("supplementary","补充席位").others("购买企业版").done();return l.default.createElement(f.default,{customClass:"transfers-inventory-dialog",ref:"flatDialog",hasCloseButton:!0,title:n+" 对公转账 ¥ "+(0,h.getAmount)(e),onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=v,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(49),d=r(f),p=n(469),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.data.invoice,a=r.taxType,s=r.amount,u=r.title,l=r.taxpayerId,c=r.address,f=r.contact,d=r.phone;return n.state={taxType:a,amount:s,title:u,taxpayerId:l,address:c,contact:f,phone:d,loading:!1,error:!1},n.navTo=n.navTo.bind(n),n.submit=n.submit.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{onClose:l.PropTypes.func,open:l.PropTypes.bool,data:l.PropTypes.object,onNext:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),u(t,[{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,{fillInvoiceInfo:s({},n.props.data.fillInvoiceInfo,{selectedIndex:0},t)})}}},{key:"submit",value:function(){var e=this,t=this.state,n=t.taxType,r=t.title,o=t.taxpayerId,i=t.contact,a=t.phone,s=t.address;this.setState({loading:!0}),(0,p.ajaxPost)("/smapi/invoices",{taxType:n,title:r,taxpayerId:o,contact:i,phone:a,address:s}).then(function(){e.props.onNext("thanks-to-buy",{needRefresh:!0})}).catch(function(){e.setState({loading:!1,error:!0})})}},{key:"renderContent",value:function(){var e=this.state,t=e.amount,n=e.title,r=e.taxpayerId,o=e.address,i=e.contact,a=e.phone,s=e.loading,u=e.error;return c.default.createElement("div",{className:"confirm-invoice-info"},c.default.createElement("section",null,c.default.createElement("div",{className:"two-column-grid"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票金额"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,t," 元"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票抬头"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,n))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"纳税人识别号"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,r))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票邮寄地址"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,o))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"收件人"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,i))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"联系电话"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,a))))),u?c.default.createElement("section",{className:"error"},"网络异常，请重试"):c.default.createElement("section",{className:"noting"},"确认后不能修改发票信息，不能重开发票"),c.default.createElement("footer",null,s?c.default.createElement("div",{className:"submit-button"},"...跳转中"):c.default.createElement("div",{className:"submit-button enabled",onClick:this.submit},"确认提交"),c.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("fill-invoice-info",{modify:!0})},"修改信息")))}},{key:"render",value:function(){return c.default.createElement(d.default,{customClass:"confirm-invoice-info-dialog",ref:"flatDialog",hasCloseButton:!0,title:"请确认发票信息",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(l.Component);t.default=h,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(49),d=r(f),p=n(469),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.data.VATInvoice,a=r.amount,s=r.taxType,u=r.contact,l=r.phone,c=r.address,f=r.taxpayer,d=r.taxpayerId,p=r.bank,h=r.bankAccount,m=r.companyAddress,v=r.companyPhone;return n.state={amount:a,taxType:s,contact:u,phone:l,address:c,taxpayer:f,taxpayerId:d,bank:p,bankAccount:h,companyAddress:m,companyPhone:v,loading:!1,error:!1},n.submit=n.submit.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{onClose:l.PropTypes.func,open:l.PropTypes.bool,data:l.PropTypes.object,onNext:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),u(t,[{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,{fillInvoiceInfo:s({},n.props.data.fillInvoiceInfo,{selectedIndex:1},t)})}}},{key:"submit",value:function(){var e=this,t=this.state,n=t.taxType,r=t.contact,o=t.phone,i=t.address,a=t.taxpayer,s=t.taxpayerId,u=t.bank,l=t.bankAccount,c=t.companyAddress,f=t.companyPhone;this.setState({loading:!0}),(0,p.ajaxPost)("/smapi/invoices",{taxType:n,contact:r,phone:o,address:i,taxpayer:a,taxpayerId:s,bank:u,bankAccount:l,companyAddress:c,companyPhone:f}).then(function(){e.props.onNext("thanks-to-buy",{needRefresh:!0})}).catch(function(){e.setState({loading:!1,error:!0})})}},{key:"renderContent",value:function(){var e=this.state,t=e.amount,n=e.contact,r=e.phone,o=e.address,i=e.taxpayer,a=e.taxpayerId,s=e.bank,u=e.bankAccount,l=e.companyAddress,f=e.companyPhone,d=e.loading,p=e.error;return c.default.createElement("div",{className:"confirm-vat-invoice-info"},c.default.createElement("section",null,c.default.createElement("div",{className:"two-column-grid"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票金额"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,t," 元"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"纳税人名称"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,i))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"纳税人识别号"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,a))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"公司地址"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,l))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"开户银行"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,s))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"银行账户"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,u))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"联系电话"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,f))))),c.default.createElement("section",null,c.default.createElement("div",{className:"two-column-grid"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票邮寄地址"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,o))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"收件人"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,n))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"联系电话"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,r))))),p?c.default.createElement("section",{className:"error"},"网络异常，请重试"):c.default.createElement("section",{className:"noting"},"确认后不能修改发票信息，不能重开发票"),c.default.createElement("footer",null,d?c.default.createElement("div",{className:"submit-button"},"...跳转中"):c.default.createElement("div",{className:"submit-button enabled",onClick:this.submit},"确认提交"),c.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("fill-invoice-info",{modify:!0})},"修改信息")))}},{key:"render",value:function(){return c.default.createElement(d.default,{customClass:"confirm-vat-invoice-info-dialog",ref:"flatDialog",hasCloseButton:!0,title:"请确认发票信息",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(l.Component);t.default=h,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(49),p=r(d),h=n(33),m=n(500),v=n(469),y=200,g=[{field:"title",name:"发票抬头"},{field:"taxpayerId",name:"纳税人识别号"},{field:"address",name:"邮寄地址"},{field:"receiver",name:"收件人"},{field:"phone",name:"联系电话"}],b=[{field:"taxpayerName",name:"纳税人名称"},{field:"taxpayerId",name:"纳税人识别号"},{field:"registerAddress",name:"注册地址"},{field:"registerPhone",name:"注册电话"},{field:"bankName",name:"开户银行"},{field:"bankAccount",name:"银行账户"},{field:"postAddress",name:"发票邮寄地址"},{field:"receiverName",name:"收件人"},{field:"receiverPhone",name:"联系电话"}],w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r={invoice:{amount:{value:"",loading:!1,error:null},title:"",taxpayerId:"",address:"",receiver:"",phone:"",error:null},VATInvoice:{amount:{value:"",loading:!1,error:null},taxpayerName:"",taxpayerId:"",registerAddress:"",registerPhone:"",bankName:"",bankAccount:"",postAddress:"",receiverName:"",receiverPhone:"",error:null},selectedIndex:0},o=n.props.data.fillInvoiceInfo;return n.state=u({},r,o),n.onChange=n.onChange.bind(n),n.onInvoiceSubmit=n.onInvoiceSubmit.bind(n),n.onVATInvoiceSubmit=n.onVATInvoiceSubmit.bind(n),n.tabDidChange=n.tabDidChange.bind(n),n.renderContent=n.renderContent.bind(n),n.getInvoiceAmount=n.getInvoiceAmount.bind(n),n}return s(t,e),l(t,null,[{key:"propTypes",get:function(){return{onClose:c.PropTypes.func,open:c.PropTypes.bool,data:c.PropTypes.object,onNext:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),l(t,[{key:"componentDidMount",value:function(){this.props.data.fillInvoiceInfo&&this.props.data.fillInvoiceInfo.modify||this.getInvoiceContent(),this.getInvoiceAmount()}},{key:"componentDidUpdate",value:function(e,t){t.selectedIndex!==this.state.selectedIndex&&this.tabDidChange()}},{key:"getInvoiceContent",value:function(){var e=this;(0,v.ajaxGet)("/invoices?page=1&per_page=1&type=team").then(function(t){var n=t.data;if(!(n.length<=0)){var r=n[0];"vat"===r.type?e.setState({VATInvoice:u({},e.state.VATInvoice,{taxpayerName:r.taxpayer,taxpayerId:r.taxpayerId,registerAddress:r.companyAddress,registerPhone:r.companyPhone,bankName:r.bank,bankAccount:r.bankAccount,postAddress:r.address,receiverName:r.contact,receiverPhone:r.phone}),selectedIndex:1}):e.setState({invoice:u({},e.state.invoice,{title:r.title,taxpayerId:r.taxpayerId||"",address:r.address,receiver:r.contact,phone:r.phone}),selectedIndex:0})}})}},{key:"getInvoiceAmount",value:function(){var e=this;this.setState({invoice:u({},this.state.invoice,{amount:u({},this.state.invoice.amount,{loading:!0})}),VATInvoice:u({},this.state.VATInvoice,{amount:u({},this.state.VATInvoice.amount,{loading:!0})})}),(0,v.ajaxGet)("/smapi/invoices/amount").then(function(t){var n=(0,m.getAmount)(t.data),r=null;n<y&&(r="抱歉，开票金额需大于 "+y+" 元"),e.setState({invoice:u({},e.state.invoice,{amount:u({},e.state.invoice.amount,{loading:!1,error:r,value:n})}),VATInvoice:u({},e.state.VATInvoice,{amount:u({},e.state.VATInvoice.amount,{loading:!1,error:r,value:n})})})}).catch(function(){e.setState({invoice:u({},e.state.invoice,{amount:u({},e.state.invoice.amount,{loading:!1,value:"",error:f.default.createElement("span",null,"获取失败，请",f.default.createElement("span",{onClick:e.getInvoiceAmount,style:{textDecoration:"underline",cursor:"pointer"}},"重试"))})}),VATInvoice:u({},e.state.VATInvoice,{amount:u({},e.state.VATInvoice.amount,{loading:!1,value:"",error:f.default.createElement("span",null,"获取失败，请",f.default.createElement("span",{onClick:e.getInvoiceAmount,style:{textDecoration:"underline",cursor:"pointer"}},"重试"))})})})})}},{key:"onChange",value:function(e){var t=this;return function(n){return function(r){var i;t.setState(o({},e,u({},t.state[e],(i={},o(i,n,r.target.value),o(i,"error",null),i))))}}}},{key:"checkInvoiceItems",value:function(){for(var e=g,t=this.state.invoice,n=void 0,r=0;r<e.length;r++){var o=e[r];if(t[o.field].length<=0){n="请填写"+o.name;break}}return n&&this.setState({invoice:u({},t,{error:n})}),n}},{key:"onInvoiceSubmit",value:function(){var e=this.state.invoice;this.checkInvoiceItems()||e.amount.error||this.props.onNext("confirm-invoice-info",u({},this.props.data,{invoice:{taxType:"normal",title:e.title,taxpayerId:e.taxpayerId,address:e.address,contact:e.receiver,phone:e.phone,amount:this.state.invoice.amount.value},fillInvoiceInfo:this.state}))}},{key:"checkVATInvoiceItems",value:function(){for(var e=b,t=this.state.VATInvoice,n=void 0,r=0;r<e.length;r++){var o=e[r];if(t[o.field].length<=0){n="请填写"+o.name;break}}return n&&this.setState({VATInvoice:u({},t,{error:n})}),n}},{key:"onVATInvoiceSubmit",value:function(){var e=this.state.VATInvoice;this.checkVATInvoiceItems()||e.amount.error||this.props.onNext("confirm-VATInvoice-info",u({},this.props.data,{VATInvoice:{amount:this.state.VATInvoice.amount.value,taxType:"vat",taxpayer:e.taxpayerName,taxpayerId:e.taxpayerId,bank:e.bankName,bankAccount:e.bankAccount,companyAddress:e.registerAddress,companyPhone:e.registerPhone,contact:e.receiverName,phone:e.receiverPhone,address:e.postAddress},fillInvoiceInfo:this.state}))}},{key:"tabDidChange",value:function(){var e=document.getElementsByClassName("fill-invoice-info-dialog")[0];e&&(e.style.marginLeft=-e.clientWidth/2+"px",e.style.marginTop=-e.clientHeight/2+"px")}},{key:"renderField",value:function(e){var t=this.state,n=e.key,r=e.name,o=e.field,i=e.subField,a=e.space,s=t[o][i];return f.default.createElement("div",{key:n,className:a?"row space":"row"},f.default.createElement("div",{className:"left-column"},r),f.default.createElement("div",{className:"right-column"},f.default.createElement("input",{type:"text",onChange:this.onChange(o)(i),value:s})))}},{key:"renderInvoiceTab",value:function(){var e=this,t=this.state.invoice,n=!t.amount.loading&&!t.amount.error&&!t.error;return f.default.createElement(h.TabItem,{title:"开增值税普票"},f.default.createElement("div",{className:"two-column-grid"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"left-column"},"发票金额"),f.default.createElement("div",{className:"right-column"},t.amount.loading?f.default.createElement("span",{className:"text"},"...正在获取"):f.default.createElement("span",{className:"text"},t.amount.value," 元"),t.amount.error?f.default.createElement("div",{className:"error"},t.amount.error):null)),g.reduce(function(t,n,r){return t.push(e.renderField({key:r,name:n.name,field:"invoice",subField:n.field})),t},[])),f.default.createElement("footer",null,t.error?f.default.createElement("div",{className:"error"},t.error):null,f.default.createElement("div",{className:"submit-button "+(n?"enabled":""),onClick:this.onInvoiceSubmit},"确定"),f.default.createElement("div",{className:"submit-button flat",onClick:this.props.onClose},"稍后再开")))}},{key:"renderVATInvoiceTab",value:function(){var e=this,t=this.state.VATInvoice,n=!t.amount.loading&&!t.amount.error&&!t.error;return f.default.createElement(h.TabItem,{title:"开增值税专票"},f.default.createElement("div",{className:"two-column-grid"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"left-column"},"发票金额"),f.default.createElement("div",{className:"right-column"},t.amount.loading?f.default.createElement("span",{className:"text"},"...正在获取"):f.default.createElement("span",{className:"text"},t.amount.value," 元"),t.amount.error?f.default.createElement("div",{className:"error"},t.amount.error):null)),b.reduce(function(t,n,r){return t.push(e.renderField({key:r,name:n.name,field:"VATInvoice",subField:n.field,space:"postAddress"===n.field})),t},[])),f.default.createElement("footer",null,t.error?f.default.createElement("div",{className:"error"},t.error):null,f.default.createElement("div",{className:"submit-button "+(n?"enabled":""),onClick:this.onVATInvoiceSubmit},"确定"),f.default.createElement("div",{className:"submit-button flat",onClick:this.props.onClose},"稍后再开")))}},{key:"renderContent",value:function(){return f.default.createElement("div",{className:"fill-invoice-info"},f.default.createElement("span",{className:"hicon icon-close dialog-close",onClick:this.props.onClose}),f.default.createElement(h.Tab,{customClass:"sm-nav-tabs invitation-tabs large",disableSetWidth:!0,selectedIndex:this.state.selectedIndex,headTpl:function(e){return f.default.createElement("div",null,e)},tabDidChange:this.tabDidChange},this.renderInvoiceTab(),this.renderVATInvoiceTab()))}},{key:"render",value:function(){return f.default.createElement(p.default,{customClass:"fill-invoice-info-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(c.Component);t.default=w,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.onClose()},1500)}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"thanks-to-buy"},l.default.createElement("div",{className:"icon"}),l.default.createElement("div",{className:"text"},"感谢您的购买"),l.default.createElement("div",{className:"desc"},"发票会在 10 个工作日内",l.default.createElement("br",null),"快递给您"))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"thanks-to-buy-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool,onNext:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,t)}}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"waiting-pay"},l.default.createElement("header",null,"等待支付"),l.default.createElement("p",null,"在新打开的页面中完成支付，支付完成前请不要关闭这个窗口。如遇到问题请联系我们的客户顾问 400-006-0506"),l.default.createElement("footer",null,l.default.createElement("div",{className:"submit-button enabled",onClick:this.navTo("payment-success")},"支付成功"),l.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("payment-failure")},"遇到问题")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"waiting-pay-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(49),f=r(c),d=n(469),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1,errorMessage:null},n.cancel=n.cancel.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"cancel",value:function(){var e=this,t={type:"team",duration:0,channel:"alipay_qr",member_count:0,skip_charge:1};this.setState({loading:!0,errorMessage:null}),(0,d.ajaxPost)("/orders/create",t).then(function(){location.replace(location.pathname)}).catch(function(){e.setState({loading:!1,errorMessage:"网络异常，请重试"})})}},{key:"renderContent",value:function(){var e=this.state;return l.default.createElement("div",{className:"cancel-order"},l.default.createElement("p",null,"确认取消对公转账订单吗?",l.default.createElement("br",null),"取消后，你可以重新购买企业版"),l.default.createElement("footer",null,e.errorMessage?l.default.createElement("div",{className:"error"},e.errorMessage):null,e.loading?l.default.createElement("div",{className:"submit-button"},"...正在取消"):l.default.createElement("div",{className:"submit-button warn",onClick:this.cancel},"确认取消"),l.default.createElement("div",{className:"submit-button flat",onClick:this.props.onClose},"取消")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"cancel-order-dialog",ref:"flatDialog",hasCloseButton:!0,title:"取消订单",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return(0,o.ajaxGet)(i.GET_FILE_WITHOUT_CONTENT.replace("{%guid%}",e)).then(function(e){if(0===e.code){if("password_required"===e.data.error)throw new Error("password_required");return e.data}throw new Error(e)}).catch(function(e){throw new Error(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getFileWithoutContentByGuid=r;var o=n(7),i=n(35)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(r,o){var i,a;i=[n(16),n(942)],void 0!==(a=function(e,t){function n(){localStorage.getItem(f)!==s.text&&(l.html(o.template(u)(s)).removeClass("hide"),c.addClass("maintenance"))}function i(){l.html("").addClass("hide"),c.removeClass("maintenance"),localStorage.setItem(f,s.text)}function a(){l.on("click",".icon-delete",function(){i()}),e.bind("Maintenance",function(e){e.active?(s=e,n(e)):i()}),t.start()}var s,u='<span><% print(_.unescape(text)) %></span><a href="javascript:void(0);" class="hicon icon-delete"></a>',l=r("#list-view-wrap>.maintenance"),c=r("body"),f="maintenance_close";return{start:a}}.apply(t,i))&&(e.exports=a)}).call(t,n(2),n(1))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=o(i),s=n(67),u=o(s),l=r("#list-view-wrap>.maintenance"),c=r('<a href="javascript:void(0);" class="delete"></a>'),f=r('<div class="warning"></div>'),d=r('<div class="good-news"></div>'),p=function(e){var t=e.html,n=e.link,o=e.warning,i=e.goodNews,a=e.blue,s=e.onClose,u=r('<span class="content">'+t+"</span>");n&&(u.css({cursor:"pointer"}),u.click(function(){window.open(n,"_blank")})),c.click(function(e){s||(s=function(e){e&&e()}),s(function(){r(e.target.parentNode).remove();var t=".list-outer-container",n=document.querySelector(t);n&&(n.style.marginTop="0px")})}),o&&u.prepend(f),i&&u.prepend(d),a&&l.addClass("blue"),l.empty().append(u).append(c).removeClass("hide")},h=function(){var e=".list-header-wrap",t=".sm-list-sidebar",n=".list-outer-container",r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);t&&(t.className.match(/list-outer-container/)?t.style.marginTop="30px":(t.style.webkitTransform="translateY(30px)",t.style.transform="translateY(30px)"))})},o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);t&&(t.style.webkitTransform="",t.style.transform="")})},i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);if(t){var n=parseInt(window.getComputedStyle(t,null).top);t.style.top=n+30+"px"}})},s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);if(t){var n=parseInt(window.getComputedStyle(t,null).top);t.style.top=n-30+"px"}})},l=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=!0,i=0;i<n.length;i++){var a=n[i];if(!document.querySelector(a)){o=!1;break}}return o?Promise.resolve():new Promise(function(t,r){setTimeout(function(){e.apply(void 0,n)},1e3)})};a.default.attach("enterprise-payment:renewal",function(c){var f=c.getMonth()+1+"月"+c.getDate()+"日",d=cow.currentUser.team&&cow.currentUser.team.name||"",h="";h=cow.currentUser.isOfficial?"您的企业 "+d+" 将于 "+f+' 付费到期，为保证企业正常使用，请及时 <span class="link">续费</span> ':"您的企业 "+d+" 将于 "+f+' 试用到期，为保证企业正常使用，请<span class="link">购买企业版</span> ',p({html:h,link:"/enterprise/billing?dialog=purchase",blue:!0,onClose:function(r){u.default.post("/flash_messages/read",{message_name:"member_count_exceeded"}),o(e,t,n),s(t),r()}}),a.default.detach("enterprise-payment:renewal"),l(e,t,n).then(function(){r(e,n),i(t)})})};t.default={start:h},e.exports=t.default}).call(t,n(2))},function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var r=n(0),o=t(r),i=n(5),a=t(i),s=n(4),u=t(s),l=n(817),c=t(l);u.default.attach("enterprise-payment-show",function(t){var n=t.type,r=void 0===n?"normal":n,i=t.params,s=void 0===i?null:i;document.getElementById("enterprise-payment-wrapper")||e(document.body).append(e('<div id="enterprise-payment-wrapper"></div>'));var l=document.getElementById("enterprise-payment-wrapper");a.default.render(o.default.createElement(c.default,{type:r,open:!0,onClose:function(){u.default.notify("enterprise-payment-hide")},data:s}),l)}),u.default.attach("enterprise-payment-hide",function(){document.getElementById("enterprise-payment-wrapper")||e(document.body).append(e('<div id="enterprise-payment-wrapper"></div>'));var t=document.getElementById("enterprise-payment-wrapper");a.default.render(o.default.createElement("div",null),t)})}).call(t,n(2))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(112),n(1227),e.exports=n(1228)},function(e,t,n){e.exports=n.p+"handsontable.full.min.css"},function(e,t,n){(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}n(1229),n(1230);var o=n(9),i=n(16),a=r(i);n(146);var s=n(7),u=n(24),l=n(842),c=n(490),f=r(c),d=n(941),p=r(d);n(780),n(943);var h=n(1231),m=r(h),v=function(n,r){switch(cow.pageType){case"home":cow.teamId=void 0,cow.permission="editable",document.body.id=cow.permission,r();break;case"folder":case"doc":case"spreadsheet":case"sheet":case"newdoc":"sheet"===cow.pageType?(0,l.getFileWithoutContentByGuid)(n.params.guid).then(function(t){e.assign(window.cow,(0,o.getPermissionsForCow)(t)),document.body.id=cow.permission,r()}).catch(function(e){e.message.match(/password_required/)&&(location.href=n.path)}):(0,s.ajaxGet)("/-/"+n.params.guid).then(function(e){if(0!==e.code)return(0,u.showAlert)({title:e.message,type:"error"}),void t.back();"password_required"===e.data.error&&(location.href=n.path),cow.teamId=e.data.teamId,cow.permission=e.data.permission||"readonly";var o=e.data.file.permissions;o.readable&&(cow.permission="readonly"),o.commentable&&(cow.permission="commentable"),o.editable&&(cow.permission="editable"),1===e.data.file.type&&(cow.permission=o.childFileCreatable?"editable":"readonly"),document.body.id=cow.permission,r()});break;default:r()}},y=function(e,t){var n="intercom-container-inject-style",r=document.querySelector("head"),o=document.getElementById(n);o?t():(o=document.createElement("style"),o.innerHTML="\n      .intercom-launcher-frame {\n        right: 37px !important;\n        bottom: 66px !important;\n      }\n\n      .intercom-launcher-discovery-frame {\n        right: 37px !important;\n        bottom: 66px !important;\n      }\n\n      .intercom-messenger-frame {\n        bottom: 141px !important;\n        right: 37px !important;\n      }\n\n      .intercom-launcher-badge-frame {\n        right: 33px !important;\n        bottom: 106px !important;\n      }\n      \n      .intercom-notifications-frame {\n        right: 37px !important;\n        bottom: 141px !important;\n      }\n\n      .intercom-note {\n        right: 37px !important;\n        bottom: 141px !important;\n      }\n\n      .intercom-borderless-frame {\n        right: 27px !important;\n        bottom: 131px !important;\n      }\n    ",o.id=n,r.appendChild(o),t())},g=function(e,t){var n="intercom-container-inject-style",r=document.querySelector("head"),o=document.getElementById(n);o&&r.removeChild(o),t()},b=function(e){location.href=e.canonicalPath},w=function(){var e=f.default.common,n=f.default.list,r=f.default.doc,o=f.default.spreadsheet,i=f.default.sheet,a=window.cow||{},s=a.alphaFeatures,u=void 0===s?{}:s;t("*",e.checkNewVersion,e.checkNewSeq,e.setPageType,e.syncOfflineData),u.lizard?t(/^\/(desktop|dashboard|recent|favorites|folder|trash)/,b):(t("/desktop",v,n.render),t.exit("/desktop",e.exit),t("/recent",n.render),t.exit("/recent",e.exit),t("/favorites",n.render),t.exit("/favorites",e.exit),t("/folder/:guid",v,n.render),t.exit("/folder/:guid",e.exit));var l=window.electronSdk?m.default:v;t("/doc/:guid",l,r.init),t.exit("/doc/:guid",e.exit),t("/docs/:guid",l,r.init),t.exit("/docs/:guid",e.exit),t("/spreadsheet/:guid/:sheetId?",y,l,o.init),t.exit("/spreadsheet/:guid/:sheetId?",g,e.exit),t("/sheet/:guid/:sheetId?",y,l,i.init),t.exit("/sheet/:guid/:sheetId?",g,e.exit),t({click:!1})},_=function(){a.default.init(),w()};p.default.start(),_()}).call(t,n(1),n(27))},function(e,t){},function(e,t){},function(e,t){function n(e,t){var n=cow.tempCurrentFile.permissions;n.editable?cow.permission="editable":n.commentable?cow.permission="commentable":cow.permission="readonly",document.body.id=cow.permission,t()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default}]);